<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>æ’å€¼ä¸æ‹Ÿåˆ</title>
      <link href="/2024/08/25/%E6%8F%92%E5%80%BC%E4%B8%8E%E6%8B%9F%E5%90%88/"/>
      <url>/2024/08/25/%E6%8F%92%E5%80%BC%E4%B8%8E%E6%8B%9F%E5%90%88/</url>
      
        <content type="html"><![CDATA[<h1 id="æ’å€¼ä¸æ‹Ÿåˆ"><a href="#æ’å€¼ä¸æ‹Ÿåˆ" class="headerlink" title="æ’å€¼ä¸æ‹Ÿåˆ"></a>æ’å€¼ä¸æ‹Ÿåˆ</h1><p>ä»€ä¹ˆæ˜¯æ’å€¼ï¼Ÿæ’å€¼æ˜¯ä¸€ç§ç”¨äºå¡«è¡¥æ•°æ®ä¸­ç¼ºå¤±å€¼æˆ–è€…å¯¹æ•°æ®è¿›è¡Œå¹³æ»‘å¤„ç†çš„æŠ€æœ¯ã€‚å½“æˆ‘ä»¬åœ¨ä¸€ç»„å·²çŸ¥æ•°æ®ç‚¹ä¹‹é—´å¯»æ‰¾æœªçŸ¥æ•°æ®ç‚¹æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ’å€¼æ–¹æ³•æ¥ä¼°è®¡è¿™äº›æœªçŸ¥ç‚¹çš„æ•°å€¼ï¼Œè€Œæ‹Ÿåˆæ˜¯ä¸€ç§é€šè¿‡æ„å»ºæ•°å­¦æ¨¡å‹æ¥é€¼è¿‘å·²æœ‰æ•°æ®çš„æ–¹æ³•ã€‚</p><h2 id="çº¿æ€§æ’å€¼"><a href="#çº¿æ€§æ’å€¼" class="headerlink" title="çº¿æ€§æ’å€¼"></a>çº¿æ€§æ’å€¼</h2><p>çº¿æ€§æ’å€¼æ˜¯æ‹‰æ ¼æœ—æ—¥æ’å€¼çš„ç‰¹æ®Šæƒ…å†µï¼Œå³n=1çš„æƒ…å½¢ï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä¸¤ç‚¹ï¼Œ$A(x_0,f(x_0),B(x_1,f(x_1))$ï¼Œé‚£ä¹ˆæ ¹æ®æˆ‘ä»¬å­¦è¿‡çš„ä¸¤ç‚¹æ³•ï¼Œå¯ä»¥å¾—åˆ°å‡½æ•°å…³ç³»å¼ï¼š</p><script type="math/tex; mode=display">p(x) = y_0 + \frac{y_1-y_0}{x_1-x_0}(x-x_0)</script><p>ä¹‹åç¨åŠ å˜å½¢ï¼Œå°±å¯ä»¥å¾—åˆ°ï¼š</p><script type="math/tex; mode=display">p(x) = \frac{x-x_1}{x_0-x_1}y_0+\frac{x-x_0}{x_1-x_0}y_1</script><p>æˆ‘ä»¬è®¾:</p><script type="math/tex; mode=display">l_0(x) = \frac{x-x_1}{x_0-x_1},l_1(x)=\frac{x-x_0}{x_1-x_0}</script><p>æ•…å¯ä»¥å¾—åˆ°:</p><script type="math/tex; mode=display">p(x) = l_0(x)y_0+l_1(x)y_1</script><h2 id="æŠ›ç‰©çº¿æ’å€¼"><a href="#æŠ›ç‰©çº¿æ’å€¼" class="headerlink" title="æŠ›ç‰©çº¿æ’å€¼"></a>æŠ›ç‰©çº¿æ’å€¼</h2><p>å¦‚æœè¯´çº¿æ€§æ’å€¼æ˜¯å¯¹äºä¸¤ç‚¹å†…è¿›è¡Œçº¿æ€§æ’å€¼ï¼Œé‚£ä¹ˆæŠ›ç‰©çº¿æ’å€¼å°±æ˜¯åœ¨ä¸¤ç‚¹å†…ç”¨æŠ›ç‰©çº¿è¿›è¡Œæ’å€¼ï¼Œä¹Ÿå°±æ˜¯äºŒæ¬¡æ’å€¼ã€‚é€šè¿‡3ä¸ªå·²çŸ¥ç‚¹çš„æŠ›ç‰©çº¿æ¥æ‹Ÿåˆ$f(x)$ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œéšç€ç‚¹çš„æ•°é‡è¶Šå¤šï¼Œæ‹Ÿåˆçš„ç²¾åº¦ä¹Ÿå°±è¶Šé«˜ï¼Œæ›´å®¹æ˜“è´´è¿‘äºåŸå‡½æ•°ã€‚</p><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸‰ç‚¹ï¼Œ$A(x_0,f(x_0),B(x_1,f(x_1)),C(x_2,f(x_2))$ï¼Œæˆ‘ä»¬ç”¨å¤šé¡¹å¼$f(x)=a_2x^2+a_1x+a_0$æ¥è¿›è¡Œæ’å€¼ï¼Œé€šè¿‡è§£æ–¹ç¨‹ï¼š</p><script type="math/tex; mode=display">a_0+a_1x_0+a_2x_0^2 = y_0</script><script type="math/tex; mode=display">a_0+a_1x_1+a_2x_1^2 = y_1</script><script type="math/tex; mode=display">a_0+a_1x_2+a_2x_2^2 = y_2</script><p>æˆ‘ä»¬å°†å…¶è½¬æ¢ä¸ºä¸€ä¸ªçº¿æ€§æ–¹ç¨‹ç»„ï¼š</p><script type="math/tex; mode=display">\begin{pmatrix}1 & x_0 & x_0^2 \\1 & x_1 & x_1^2 \\1 & x_2 & x_2^2 \\\end{pmatrix}\begin{pmatrix}a_0 \\a_1 \\a_2 \\\end{pmatrix}=\begin{pmatrix}y_0 \\y_1 \\y_2 \\\end{pmatrix}</script><p>è¿™é‡Œå¯ä»¥é€šè¿‡èŒƒå¾·è’™å¾·è¡Œåˆ—å¼å»æ±‚è§£ï¼Œæœ€åå¾—åˆ°ç»“æœï¼š</p><script type="math/tex; mode=display">p(x) = y_0 \cdot \frac{(x - x_1)(x - x_2)}{(x_0 - x_1)(x_0 - x_2)} + y_1 \cdot \frac{(x - x_0)(x - x_2)}{(x_1 - x_0)(x_1 - x_2)} + y_2 \cdot \frac{(x - x_0)(x - x_1)}{(x_2 - x_0)(x_2 - x_1)}</script><p>å…¶ä¸­ï¼š</p><script type="math/tex; mode=display">l_0(x) = \frac{(x - x_1)(x - x_2)}{(x_0 - x_1)(x_0 - x_2)}</script><script type="math/tex; mode=display">l_1(x)=\frac{(x - x_0)(x - x_2)}{(x_1 - x_0)(x_1 - x_2)}</script><script type="math/tex; mode=display">l_2(x)=\frac{(x - x_0)(x - x_1)}{(x_2 - x_0)(x_2 - x_1)}</script><h2 id="æ‹‰æ ¼æœ—æ—¥æ’å€¼æ³•"><a href="#æ‹‰æ ¼æœ—æ—¥æ’å€¼æ³•" class="headerlink" title="æ‹‰æ ¼æœ—æ—¥æ’å€¼æ³•"></a>æ‹‰æ ¼æœ—æ—¥æ’å€¼æ³•</h2><p>æ ¹æ®ä¸€æ¬¡æ’å€¼å’ŒäºŒæ¬¡æ’å€¼ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“æƒ³å‡ºå¦‚æœæœ‰nä¸ªç‚¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è¿›è¡Œnæ¬¡æ’å€¼ï¼Œè¿™å°±æ˜¯æ‹‰æ ¼æœ—æ—¥æ’å€¼æ³•ã€‚</p><p>ç»™å®šä¸€ç»„æ•°æ®ç‚¹ (x0,y0),(x1,y1),â€¦,(xn,yn)ï¼Œæ‹‰æ ¼æœ—æ—¥æ’å€¼æ³•é€šè¿‡æ„é€ ä¸€ä¸ªå¤šé¡¹å¼ P(x)ï¼Œä½¿å¾— P(xi)=yi å¯¹æ¯ä¸ª i éƒ½æˆç«‹ã€‚è¿™ä¸ªå¤šé¡¹å¼å¯ä»¥è¡¨ç¤ºä¸ºï¼š</p><script type="math/tex; mode=display">P(x) = \sum_{i=0}^{n} y_i L_i(x)</script><p>å…¶ä¸­ Li(x) æ˜¯ç§°ä¸ºæ‹‰æ ¼æœ—æ—¥åŸºå‡½æ•°ï¼ˆLagrange Basis Polynomialï¼‰çš„å¤šé¡¹å¼ï¼Œå®šä¹‰ä¸ºï¼š</p><script type="math/tex; mode=display">L_i(x) = \prod_{\substack{0 \leq j \leq n \\ j \neq i}} \frac{x - x_j}{x_i - x_j}</script><p>åŸºå‡½æ•° Li(x)çš„ç‰¹ç‚¹æ˜¯å®ƒåœ¨ x=xiæ—¶å–å€¼ä¸º 1ï¼Œè€Œåœ¨å…¶ä»–æ‰€æœ‰çš„xjå¤„ï¼ˆjâ‰ iï¼‰å–å€¼ä¸º 0ã€‚</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">y_interp</span> = <span class="title">lagrange_interpolation</span><span class="params">(x_values, y_values, x)</span></span></span><br><span class="line">    n = <span class="built_in">length</span>(x_values);  <span class="comment">% è·å¾—æ•°æ®ç‚¹çš„ä¸ªæ•°</span></span><br><span class="line">    y_interp = <span class="number">0</span>;  <span class="comment">% åˆå§‹åŒ–</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:n</span><br><span class="line">        L_i = <span class="number">1</span>; <span class="comment">% è®¡ç®—æ‹‰æ ¼æœ—æ—¥åŸºå‡½æ•° L_i(x)</span></span><br><span class="line">        <span class="keyword">for</span> <span class="built_in">j</span> = <span class="number">1</span>:n</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">i</span> ~= <span class="built_in">j</span> <span class="comment">%ç¡®ä¿äº†åªåœ¨ ğ‘—â‰ ğ‘– æ—¶ï¼Œæ‰ä¼šè®¡ç®—å½“å‰çš„ä¹˜ç§¯é¡¹ã€‚</span></span><br><span class="line">                L_i = L_i * (x - x_values(<span class="built_in">j</span>)) / (x_values(<span class="built_in">i</span>) - x_values(<span class="built_in">j</span>));</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="comment">% è®¡ç®—æ’å€¼å¯¹åº”çš„ y å€¼</span></span><br><span class="line">        y_interp = y_interp + L_i * y_values(<span class="built_in">i</span>);</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">x_values = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];<span class="comment">% å‡è®¾å·²çŸ¥çš„ç‚¹</span></span><br><span class="line">y_values = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>];</span><br><span class="line">x = <span class="number">2.5</span>;<span class="comment">% è¦æ’å€¼çš„ç‚¹</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% æ‹‰æ ¼æœ—æ—¥æ’å€¼å‡½æ•°è°ƒç”¨</span></span><br><span class="line">y_interp_manual = lagrange_interpolation(x_values, y_values, x);</span><br><span class="line"></span><br><span class="line"><span class="comment">% ä½¿ç”¨MATLABå†…ç½®çš„å‡½æ•°è¿›è¡Œå¤šé¡¹å¼æ‹Ÿåˆå¹¶æ’å€¼æ¥éªŒè¯å‡½æ•°çš„æ­£ç¡®æ€§</span></span><br><span class="line">coeffs = polyfit(x_values, y_values, <span class="number">2</span>); <span class="comment">% ç”¨äºŒæ¬¡å¤šé¡¹å¼æ‹Ÿåˆ</span></span><br><span class="line">y_interp_builtin = polyval(coeffs, x);</span><br><span class="line"></span><br><span class="line">fprintf(<span class="string">&#x27;æ‹‰æ ¼æœ—æ—¥æ’å€¼ç»“æœ: y(%.2f) = %.2f\n&#x27;</span>, x, y_interp_manual);</span><br><span class="line">fprintf(<span class="string">&#x27;MATLABå‡½æ•°æ’å€¼ç»“æœ: y(%.2f) = %.2f\n&#x27;</span>, x, y_interp_builtin);</span><br><span class="line"><span class="keyword">if</span> <span class="built_in">abs</span>(y_interp_manual - y_interp_builtin) &lt; <span class="number">1e-6</span></span><br><span class="line">    <span class="built_in">disp</span>(<span class="string">&#x27;éªŒè¯é€šè¿‡ï¼šå‡½æ•°ä¸MATLABå†…ç½®å‡½æ•°ç»“æœä¸€è‡´&#x27;</span>);</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">disp</span>(<span class="string">&#x27;éªŒè¯å¤±è´¥ï¼šå‡½æ•°ä¸MATLABå†…ç½®å‡½æ•°ç»“æœä¸ä¸€è‡´&#x27;</span>);</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>ä»å…¬å¼å¯ä»¥çœ‹åˆ°ï¼Œå¯¹äºåŸºå‡½æ•°çš„è®¡ç®—è¿ç®—é‡ä¸º$O(n)$ï¼Œç„¶åå åŠ çš„è¿ç®—é‡åˆæ˜¯$O(n)$ï¼Œæ‰€ä»¥æœ€åæ€»çš„è®¡ç®—å¤æ‚åº¦ä¸º$O(n^2)$ï¼Œæ‰€ä»¥æ‹‰æ ¼æœ—æ—¥æ’å€¼æ³•æ›´é€‚åˆå°æ ·æœ¬çš„è®¡ç®—ï¼Œå¤§æ ·æœ¬è®¡ç®—æ•ˆç‡ä½ä¸‹ï¼Œåº”è¯¥é€‰ç”¨å…¶ä»–æ–¹æ³•ã€‚</p><h2 id="ç‰›é¡¿æ’å€¼æ³•"><a href="#ç‰›é¡¿æ’å€¼æ³•" class="headerlink" title="ç‰›é¡¿æ’å€¼æ³•"></a>ç‰›é¡¿æ’å€¼æ³•</h2><p>ç‰›é¡¿æ’å€¼æ³•æ˜¯ä¸€ç§ç”¨äºæ„é€ å¤šé¡¹å¼æ’å€¼çš„æ•°å­¦æ–¹æ³•ï¼Œç‰¹åˆ«é€‚ç”¨äºé€æ­¥å¢åŠ æ’å€¼ç‚¹çš„æƒ…å†µã€‚å®ƒçš„åŸºæœ¬æ€æƒ³æ˜¯åˆ©ç”¨å·®å•†ï¼ˆfinite differenceï¼‰æ„å»ºæ’å€¼å¤šé¡¹å¼ã€‚</p><script type="math/tex; mode=display">p(x) = f[x_0] + f[x_0, x_1] (x - x_0) + f[x_0, x_1, x_2] (x - x_0) (x - x_1) + \cdots + f[x_0, x_1, \ldots, x_{n-1}] \prod_{k=0}^{n-2} (x - x_k)</script><p>å…¶ä¸­ï¼Œ$f[x<em>0], f[x_0, x_1], \ldots, f[x_0, x_1, \ldots, x</em>{n-1}]$ æ˜¯å·®å•†ã€‚</p><script type="math/tex; mode=display">f[x_i] = y_i</script><script type="math/tex; mode=display">f[x_i, x_{i+1}] = \frac{f[x_{i+1}] - f[x_i]}{x_{i+1} - x_i}</script><script type="math/tex; mode=display">f[x_i, x_{i+1}, x_{i+2}] = \frac{f[x_{i+1}, x_{i+2}] - f[x_i, x_{i+1}]}{x_{i+2} - x_i}</script><script type="math/tex; mode=display">f[x_i, x_{i+1}, \ldots, x_{i+k}] = \frac{f[x_{i+1}, \ldots, x_{i+k}] - f[x_i, \ldots, x_{i+k-1}]}{x_{i+k} - x_i}</script><p>é€šè¿‡è§‚å¯Ÿå·®åˆ†å…¬å¼ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ç‰›é¡¿æ’å€¼æ³•çš„ä¸»è¦ä¼˜ç‚¹æ˜¯æ¯å½“æ–°å¢ä¸€ä¸ªæ’å€¼ç‚¹æ—¶ï¼Œå¯ä»¥åœ¨ä¸é‡æ–°è®¡ç®—æ‰€æœ‰ç³»æ•°çš„æƒ…å†µä¸‹åªæ›´æ–°éƒ¨åˆ†ç³»æ•°ï¼Œè¿™æ ·å¯ä»¥å¤§å¤§å‡å°‘è®¡ç®—é‡ã€‚</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">p</span> = <span class="title">newton_interpolation</span><span class="params">(x_values, y_values, x)</span></span></span><br><span class="line">    n = <span class="built_in">length</span>(x_values);  </span><br><span class="line">    </span><br><span class="line">    <span class="comment">% è®¡ç®—å·®å•†</span></span><br><span class="line">    F = <span class="built_in">zeros</span>(n, n);  <span class="comment">% å·®å•†è¡¨</span></span><br><span class="line">    F(:,<span class="number">1</span>) = y_values&#x27;;  <span class="comment">% 0é˜¶å·®å•†</span></span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">j</span> = <span class="number">2</span>:n</span><br><span class="line">        <span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:n-<span class="built_in">j</span>+<span class="number">1</span></span><br><span class="line">            F(<span class="built_in">i</span>,<span class="built_in">j</span>) = (F(<span class="built_in">i</span>+<span class="number">1</span>,<span class="built_in">j</span><span class="number">-1</span>) - F(<span class="built_in">i</span>,<span class="built_in">j</span><span class="number">-1</span>)) / (x_values(<span class="built_in">i</span>+<span class="built_in">j</span><span class="number">-1</span>) - x_values(<span class="built_in">i</span>));</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">% è®¡ç®—ç‰›é¡¿æ’å€¼å¤šé¡¹å¼çš„å€¼</span></span><br><span class="line">    p = F(<span class="number">1</span>,<span class="number">1</span>);  <span class="comment">% åˆå§‹åŒ–ä¸ºç¬¬ä¸€ä¸ªå·®å•†</span></span><br><span class="line">    term = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> k = <span class="number">2</span>:n</span><br><span class="line">        term = term * (x - x_values(k<span class="number">-1</span>));  <span class="comment">% è®¡ç®— (x - x_0)(x - x_1)...(x - x_&#123;k-2&#125;)</span></span><br><span class="line">        p = p + F(<span class="number">1</span>,k) * term;  <span class="comment">% ç´¯åŠ æ¯ä¸€é¡¹</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">x_values = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>];</span><br><span class="line">y_values = [<span class="number">1</span>, <span class="number">4</span>, <span class="number">16</span>];</span><br><span class="line">x = <span class="number">3</span>;</span><br><span class="line">p = newton_interpolation(x_values, y_values, x);</span><br><span class="line"><span class="built_in">disp</span>([<span class="string">&#x27;æ’å€¼å¤šé¡¹å¼åœ¨ x = &#x27;</span> num2str(x) <span class="string">&#x27; å¤„çš„å€¼ä¸º: &#x27;</span> num2str(p)]);</span><br></pre></td></tr></table></figure><h2 id="Hermiteæ’å€¼æ³•"><a href="#Hermiteæ’å€¼æ³•" class="headerlink" title="Hermiteæ’å€¼æ³•"></a>Hermiteæ’å€¼æ³•</h2><p>Hermiteæ’å€¼æ˜¯ä¸€ç§åœ¨ç»™å®šæ•°æ®ç‚¹çš„åŒæ—¶ï¼Œè¿˜åŒ…æ‹¬æ•°æ®ç‚¹å¤„çš„ä¸€é˜¶å¯¼æ•°ï¼ˆæˆ–æ›´é«˜é˜¶å¯¼æ•°ï¼‰ä¿¡æ¯çš„æ’å€¼æ–¹æ³•ã€‚ç›¸æ¯”äºæ‹‰æ ¼æœ—æ—¥æ’å€¼ï¼ŒHermiteæ’å€¼èƒ½æ›´å¥½åœ°é€¼è¿‘å‡½æ•°çš„æ›²çº¿ç‰¹æ€§ï¼Œå°¤å…¶æ˜¯åœ¨ç»™å®šç‚¹å¤„çš„æ–œç‡ï¼ˆå¯¼æ•°ï¼‰å·²çŸ¥æ—¶ã€‚</p><p>è®¾æˆ‘ä»¬æœ‰ä¸€ç»„æ•°æ®ç‚¹ $x_0, x_1, \dots, x_n$ï¼Œå¹¶ä¸”ç»™å®šäº†å‡½æ•°åœ¨è¿™äº›ç‚¹ä¸Šçš„å€¼ $f(x_0), f(x_1), \dots, f(x_n)$ ä»¥åŠå¯¼æ•°å€¼<script type="math/tex">f'(x_0), f'(x_1), \dots, f'(x_n)</script>â€‹ã€‚Hermite æ’å€¼æ³•çš„ç›®æ ‡æ˜¯æ„é€ ä¸€ä¸ªå¤šé¡¹å¼ H(x)ï¼Œä½¿å¾—ï¼š</p><script type="math/tex; mode=display">H(x_i) = f(x_i), \quad H'(x_i) = f'(x_i), \quad i = 0, 1, \dots, n</script><p>Hermite æ’å€¼å¤šé¡¹å¼å¯è¡¨ç¤ºä¸ºï¼š</p><script type="math/tex; mode=display">H(x) = \sum_{i=0}^n \left[ f(x_i) h_i(x) + f'(x_i) h_i^*(x) \right]</script><p>å¹¶æ»¡è¶³ï¼š</p><script type="math/tex; mode=display">h_i(x_j) = \delta_{ij}, \quad h_i'(x_j) = 0, \quad h_i^*(x_j) = 0, \quad h_i^{*'}(x_j) = \delta_{ij}</script><p>æœ€åå¾—åˆ°ï¼š</p><script type="math/tex; mode=display">H(x) = \sum_{i=0}^n \left[ f(x_i) \left(1 - 2(x - x_i) \frac{L_i'(x_i)}{L_i(x_i)}\right) \left(\frac{L_i(x)}{L_i(x_i)}\right)^2 + f'(x_i) (x - x_i) \left(\frac{L_i(x)}{L_i(x_i)}\right)^2 \right]</script><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">H</span> = <span class="title">hermite_interpolation</span><span class="params">(x_values, y_values, dy_values, x)</span></span></span><br><span class="line">    n = <span class="built_in">length</span>(x_values);  </span><br><span class="line">    H = <span class="built_in">zeros</span>(<span class="built_in">size</span>(x));   </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:n</span><br><span class="line">        <span class="comment">% æ„é€  L_i(x)</span></span><br><span class="line">        L_i = <span class="built_in">ones</span>(<span class="built_in">size</span>(x));   <span class="comment">% åˆå§‹åŒ–ä¸º 1</span></span><br><span class="line">        <span class="keyword">for</span> <span class="built_in">j</span> = <span class="number">1</span>:n</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">i</span> ~= <span class="built_in">j</span></span><br><span class="line">                L_i = L_i .* (x - x_values(<span class="built_in">j</span>)) / (x_values(<span class="built_in">i</span>) - x_values(<span class="built_in">j</span>));</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">% è®¡ç®— L_i(x_i) å’Œ L_i&#x27;(x_i)</span></span><br><span class="line">        L_i_xi = <span class="number">1</span>;   <span class="comment">% L_i(x_i)</span></span><br><span class="line">        L_i_prime_xi = <span class="number">0</span>;  <span class="comment">% L_i&#x27;(x_i)</span></span><br><span class="line">        <span class="keyword">for</span> <span class="built_in">j</span> = <span class="number">1</span>:n</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">i</span> ~= <span class="built_in">j</span></span><br><span class="line">                L_i_xi = L_i_xi * (x_values(<span class="built_in">i</span>) - x_values(<span class="built_in">j</span>));</span><br><span class="line">                L_i_prime_xi = L_i_prime_xi + <span class="number">1</span> / (x_values(<span class="built_in">i</span>) - x_values(<span class="built_in">j</span>));</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        L_i_prime_xi = L_i_prime_xi * L_i_xi;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">% è®¡ç®— Hermite åŸºå‡½æ•° h_i(x) å’Œ h_i^*(x)</span></span><br><span class="line">        h_i = (<span class="number">1</span> - <span class="number">2</span> * (x - x_values(<span class="built_in">i</span>)) * L_i_prime_xi / L_i_xi) .* (L_i.^<span class="number">2</span>);</span><br><span class="line">        h_i_star = (x - x_values(<span class="built_in">i</span>)) .* (L_i.^<span class="number">2</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">% å åŠ åˆ°æœ€ç»ˆçš„ Hermite æ’å€¼å¤šé¡¹å¼ H(x)</span></span><br><span class="line">        H = H + y_values(<span class="built_in">i</span>) * h_i + dy_values(<span class="built_in">i</span>) * h_i_star;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">x_values = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">y_values = [<span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>];</span><br><span class="line">dy_values = [<span class="number">0</span>, <span class="number">4</span>, <span class="number">6</span>];</span><br><span class="line">x = <span class="number">2.5</span>;</span><br><span class="line"></span><br><span class="line">H = hermite_interpolation(x_values, y_values, dy_values, x);</span><br><span class="line"><span class="built_in">disp</span>(H);</span><br></pre></td></tr></table></figure><h2 id="Pythonçš„æ’å€¼ä¸æ‹Ÿåˆå‡½æ•°"><a href="#Pythonçš„æ’å€¼ä¸æ‹Ÿåˆå‡½æ•°" class="headerlink" title="Pythonçš„æ’å€¼ä¸æ‹Ÿåˆå‡½æ•°"></a>Pythonçš„æ’å€¼ä¸æ‹Ÿåˆå‡½æ•°</h2><h3 id="æ’å€¼å‡½æ•°"><a href="#æ’å€¼å‡½æ•°" class="headerlink" title="æ’å€¼å‡½æ•°"></a>æ’å€¼å‡½æ•°</h3><p>æ’å€¼æœ‰å¤šç§æ–¹æ³•ï¼Œåœ¨pythonï¼Œscipy.interpolateæ¨¡å—æœ‰ä¸€ç»´æ’å€¼å‡½æ•°interp1dã€äºŒç»´æ’å€¼å‡½æ•°interp2dã€å¤šç»´æ’å€¼å‡½æ•°interpn, interpndã€‚</p><p>çº¿æ€§æ’å€¼ï¼ˆLinear Interpolationï¼‰å’Œä¸‰æ¬¡æ ·æ¡æ’å€¼ï¼ˆCubic Spline Interpolationï¼‰éƒ½æ˜¯å¸¸ç”¨çš„æ’å€¼æ–¹æ³•ï¼Œç”¨äºåœ¨ç»™å®šçš„ä¸€ç»„æ•°æ®ç‚¹ä¹‹é—´æ’å€¼å¾—åˆ°æœªçŸ¥æ•°æ®ç‚¹çš„æ•°å€¼ã€‚å®ƒä»¬éƒ½å¯ä»¥ç”¨äºå¹³æ»‘æ•°æ®ã€è¡¥å…¨æ•°æ®æˆ–è€…é¢„æµ‹ä¸­é—´å€¼ï¼Œä½†çº¿æ€§æ’å€¼è¿‡äºç®€å•ï¼Œä»¥è‡³äºæœ‰äº›æ—¶å€™ä¸é€‚åˆéçº¿æ€§çš„æ•°æ®ï¼Œè¿™æ—¶å°±è¦ç”¨æ›´åŠ å¹³æ»‘è‡ªç„¶çš„ä¸‰æ¬¡æ›²çº¿æ ·æ¡æ¥æ’å€¼ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> scipy.interpolate <span class="keyword">import</span> interp1d</span><br><span class="line">%matplotlib inline</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ’å€¼èŠ‚ç‚¹</span></span><br><span class="line">x = np.arange(<span class="number">0</span>, <span class="number">25</span>, <span class="number">2</span>)</span><br><span class="line">y = np.array([<span class="number">12</span>, <span class="number">9</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">18</span>, <span class="number">24</span>, <span class="number">28</span>, <span class="number">27</span>, <span class="number">25</span>, <span class="number">20</span>, <span class="number">18</span>, <span class="number">15</span>, <span class="number">13</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ’å€¼ç‚¹</span></span><br><span class="line">xnew = np.linspace(<span class="number">0</span>, <span class="number">24</span>, <span class="number">500</span>)</span><br><span class="line">fun1 = interp1d(x, y)</span><br><span class="line">fun2 = interp1d(x, y, <span class="string">&#x27;cubic&#x27;</span>)</span><br><span class="line">y1 = fun1(xnew)</span><br><span class="line">y2 = fun2(xnew)</span><br><span class="line"></span><br><span class="line">plt.figure(figsize=(<span class="number">20</span>,<span class="number">10</span>))</span><br><span class="line">plt.rc(<span class="string">&#x27;font&#x27;</span>, size=<span class="number">16</span>)</span><br><span class="line">plt.rc(<span class="string">&#x27;font&#x27;</span>, family=<span class="string">&#x27;SimHei&#x27;</span>)</span><br><span class="line">plt.subplot(<span class="number">121</span>)</span><br><span class="line">plt.plot(xnew, y1, x, y, <span class="string">&#x27;ro&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&quot;åˆ†æ®µçº¿æ€§æ’å€¼&quot;</span>)</span><br><span class="line">plt.subplot(<span class="number">122</span>)</span><br><span class="line">plt.plot(xnew, y2, x, y, <span class="string">&#x27;ro&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&quot;ä¸‰æ¬¡æ ·æ¡æ’å€¼&quot;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p>å¤šç»´æ’å€¼ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> scipy.interpolate <span class="keyword">import</span> interpn</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> mpl_toolkits.mplot3d <span class="keyword">import</span> Axes3D</span><br><span class="line"></span><br><span class="line">x = np.linspace(<span class="number">0</span>, <span class="number">1</span>, <span class="number">10</span>)  </span><br><span class="line">y = np.linspace(<span class="number">0</span>, <span class="number">1</span>, <span class="number">10</span>)  </span><br><span class="line">z = np.linspace(<span class="number">0</span>, <span class="number">1</span>, <span class="number">10</span>)  </span><br><span class="line"></span><br><span class="line">X, Y, Z = np.meshgrid(x, y, z, indexing=<span class="string">&#x27;ij&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰å¤æ‚å‡½æ•°å€¼ (f(x, y, z) = sin(Ï€x) * cos(Ï€y) * sin(Ï€z))</span></span><br><span class="line">values = np.sin(np.pi * X) * np.cos(np.pi * Y) * np.sin(np.pi * Z)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰éœ€è¦æ’å€¼çš„ç‚¹</span></span><br><span class="line">points_to_interpolate = np.array([[<span class="number">0.15</span>, <span class="number">0.15</span>, <span class="number">0.15</span>],</span><br><span class="line">                                  [<span class="number">0.35</span>, <span class="number">0.45</span>, <span class="number">0.55</span>],</span><br><span class="line">                                  [<span class="number">0.75</span>, <span class="number">0.85</span>, <span class="number">0.95</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¤šç»´æ’å€¼</span></span><br><span class="line">interpolated_values = interpn((x, y, z), values, points_to_interpolate, method=<span class="string">&#x27;linear&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i, point <span class="keyword">in</span> <span class="built_in">enumerate</span>(points_to_interpolate):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Point <span class="subst">&#123;point&#125;</span> has interpolated value <span class="subst">&#123;interpolated_values[i]&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯è§†åŒ–åŸå§‹ç½‘æ ¼æ•°æ®çš„ä¸€ä¸ªåˆ‡ç‰‡</span></span><br><span class="line">fig = plt.figure(figsize=(<span class="number">12</span>, <span class="number">6</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ¨ (z=0.5) å¤„åˆ‡ç‰‡</span></span><br><span class="line">ax1 = fig.add_subplot(<span class="number">121</span>, projection=<span class="string">&#x27;3d&#x27;</span>)</span><br><span class="line">ax1.plot_surface(X[:, :, <span class="number">5</span>], Y[:, :, <span class="number">5</span>], values[:, :, <span class="number">5</span>], cmap=<span class="string">&#x27;viridis&#x27;</span>)</span><br><span class="line">ax1.set_title(<span class="string">&quot;Original Function Slice at z=0.5&quot;</span>)</span><br><span class="line">ax1.set_xlabel(<span class="string">&#x27;X&#x27;</span>)</span><br><span class="line">ax1.set_ylabel(<span class="string">&#x27;Y&#x27;</span>)</span><br><span class="line">ax1.set_zlabel(<span class="string">&#x27;f(X,Y,Z)&#x27;</span>)</span><br><span class="line"></span><br><span class="line">ax2 = fig.add_subplot(<span class="number">122</span>, projection=<span class="string">&#x27;3d&#x27;</span>)</span><br><span class="line">ax2.scatter(points_to_interpolate[:, <span class="number">0</span>], points_to_interpolate[:, <span class="number">1</span>], points_to_interpolate[:, <span class="number">2</span>], color=<span class="string">&#x27;red&#x27;</span>, label=<span class="string">&#x27;Interpolation Points&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> i, point <span class="keyword">in</span> <span class="built_in">enumerate</span>(points_to_interpolate):</span><br><span class="line">    ax2.text(point[<span class="number">0</span>], point[<span class="number">1</span>], point[<span class="number">2</span>], <span class="string">f&quot;<span class="subst">&#123;interpolated_values[i]:<span class="number">.2</span>f&#125;</span>&quot;</span>, color=<span class="string">&#x27;red&#x27;</span>)</span><br><span class="line"></span><br><span class="line">ax2.set_title(<span class="string">&quot;Interpolation Points&quot;</span>)</span><br><span class="line">ax2.set_xlabel(<span class="string">&#x27;X&#x27;</span>)</span><br><span class="line">ax2.set_ylabel(<span class="string">&#x27;Y&#x27;</span>)</span><br><span class="line">ax2.set_zlabel(<span class="string">&#x27;Z&#x27;</span>)</span><br><span class="line">ax2.legend()</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><h3 id="æ‹Ÿåˆå‡½æ•°"><a href="#æ‹Ÿåˆå‡½æ•°" class="headerlink" title="æ‹Ÿåˆå‡½æ•°"></a>æ‹Ÿåˆå‡½æ•°</h3><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€äº›å¸¦æœ‰å™ªå£°çš„äºŒç»´æ•°æ®ç‚¹ï¼Œå¹¶ä¸”æˆ‘ä»¬è®¤ä¸ºè¿™äº›æ•°æ®å¯ä»¥ç”¨ä¸€ä¸ªäºŒæ¬¡å‡½æ•°æ¥æè¿°ã€‚æˆ‘ä»¬å°†ä½¿ç”¨æœ€å°äºŒä¹˜æ³•æ¥æ‹Ÿåˆè¿™äº›æ•°æ®ï¼Œå¹¶æ‰¾å‡ºæ‹Ÿåˆçš„äºŒæ¬¡å‡½æ•°ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> scipy.optimize <span class="keyword">import</span> curve_fit</span><br><span class="line">np.random.seed(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">x_data = np.linspace(-<span class="number">10</span>, <span class="number">10</span>, <span class="number">50</span>)</span><br><span class="line"></span><br><span class="line">a, b, c = <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”Ÿæˆyæ•°æ®å¹¶æ·»åŠ å™ªå£°</span></span><br><span class="line">y_data = a * x_data**<span class="number">2</span> + b * x_data + c + np.random.normal(scale=<span class="number">5</span>, size=x_data.shape)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">quadratic_function</span>(<span class="params">x, a, b, c</span>):</span><br><span class="line">    <span class="keyword">return</span> a * x**<span class="number">2</span> + b * x + c</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨curve_fitè¿›è¡Œæ‹Ÿåˆ</span></span><br><span class="line">popt, pcov = curve_fit(quadratic_function, x_data, y_data)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‹Ÿåˆå‚æ•°</span></span><br><span class="line">a_fit, b_fit, c_fit = popt</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Fitted parameters: a = <span class="subst">&#123;a_fit:<span class="number">.3</span>f&#125;</span>, b = <span class="subst">&#123;b_fit:<span class="number">.3</span>f&#125;</span>, c = <span class="subst">&#123;c_fit:<span class="number">.3</span>f&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">y_fit = quadratic_function(x_data, *popt)</span><br><span class="line"></span><br><span class="line">plt.figure(figsize=(<span class="number">10</span>, <span class="number">6</span>))</span><br><span class="line">plt.scatter(x_data, y_data, label=<span class="string">&quot;Data with noise&quot;</span>, color=<span class="string">&quot;red&quot;</span>)</span><br><span class="line">plt.plot(x_data, quadratic_function(x_data, a, b, c), label=<span class="string">&quot;True function&quot;</span>, color=<span class="string">&quot;green&quot;</span>, linestyle=<span class="string">&quot;--&quot;</span>)</span><br><span class="line">plt.plot(x_data, y_fit, label=<span class="string">&quot;Fitted function&quot;</span>, color=<span class="string">&quot;blue&quot;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&quot;x&quot;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&quot;y&quot;</span>)</span><br><span class="line">plt.legend()</span><br><span class="line">plt.title(<span class="string">&quot;Quadratic Function Fitting&quot;</span>)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> mean_squared_error</span><br><span class="line"></span><br><span class="line">mse = mean_squared_error(y_data, y_fit)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Mean Squared Error of the fit: <span class="subst">&#123;mse:<span class="number">.3</span>f&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> æ•°å€¼åˆ†æ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Matlabçš„ç»˜å›¾æ–¹æ³•</title>
      <link href="/2024/08/24/Matlab%E7%9A%84%E7%BB%98%E5%9B%BE%E6%96%B9%E6%B3%95/"/>
      <url>/2024/08/24/Matlab%E7%9A%84%E7%BB%98%E5%9B%BE%E6%96%B9%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h1 id="å¦‚ä½•ç”¨Matlabè¿›è¡Œç»˜å›¾ï¼Ÿ"><a href="#å¦‚ä½•ç”¨Matlabè¿›è¡Œç»˜å›¾ï¼Ÿ" class="headerlink" title="å¦‚ä½•ç”¨Matlabè¿›è¡Œç»˜å›¾ï¼Ÿ"></a>å¦‚ä½•ç”¨Matlabè¿›è¡Œç»˜å›¾ï¼Ÿ</h1><p>Matlabå†…ç½®æœ‰è®¸å¤šåŸºç¡€çš„ç»˜å›¾å‡½æ•°ï¼ŒåŠ ä¸Šä¸€äº›æŒ‡ä»¤å°±èƒ½è®©å›¾å½¢å˜å¾—æ›´åŠ ç¾è§‚ï¼Œäº‹å®ä¸Šï¼ŒMatlabå’ŒPythonåœ¨ç»˜å›¾è¿™é‡Œçš„è¯­æ³•ç»“æ„åŸºæœ¬ä¸Šæ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥å¦‚æœæœ‰Pythonçš„è¯­æ³•åŸºç¡€ï¼Œé‚£ä¹ˆå¯ä»¥å¿«é€ŸæŒæ¡Matlabçš„ç»˜å›¾éƒ¨åˆ†ã€‚</p><h2 id="Matlabçš„æ•°æ®å¯¼å…¥"><a href="#Matlabçš„æ•°æ®å¯¼å…¥" class="headerlink" title="Matlabçš„æ•°æ®å¯¼å…¥"></a>Matlabçš„æ•°æ®å¯¼å…¥</h2><p>å‡å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªExcelæ–‡ä»¶æƒ³è¦å¯¼å…¥åˆ°Matlabï¼Œæœ‰æ²¡æœ‰ä¸Pandaså†…çš„Dataframeç›¸ä¼¼çš„æ•°æ®ç»“æ„å‘¢ï¼ŸMatlabæä¾›äº†tableç»“æ„ã€‚</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">% è¯»å– Excel æ–‡ä»¶</span></span><br><span class="line">data = <span class="built_in">readtable</span>(<span class="string">&#x27;data.xlsx&#x27;</span>);</span><br><span class="line"><span class="comment">% æå–æ•°æ®</span></span><br><span class="line">dataArray = table2array(data);</span><br><span class="line"><span class="comment">% æå–åˆ—æ ‡ç­¾</span></span><br><span class="line">columnLabels = data.Properties.VariableNames;</span><br></pre></td></tr></table></figure><h2 id="æ›²çº¿å›¾"><a href="#æ›²çº¿å›¾" class="headerlink" title="æ›²çº¿å›¾"></a>æ›²çº¿å›¾</h2><p>ç»˜åˆ¶æ›²çº¿æˆ‘ä»¬å¯ä»¥ç”¨plotå‡½æ•°æ¥å®ç°ï¼Œå‡å¦‚æˆ‘ä»¬æƒ³ç”»ä¸€æ¡ä½™å¼¦å‡½æ•°ï¼š</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="built_in">linspace</span>(<span class="number">0</span>,<span class="number">2</span>*<span class="built_in">pi</span>,<span class="number">100</span>);</span><br></pre></td></tr></table></figure><p><code>linspace</code> æ˜¯ MATLAB å’Œ Pythonï¼ˆé€šè¿‡ NumPy åº“ï¼‰ä¸­çš„ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºç”Ÿæˆåœ¨æŒ‡å®šèŒƒå›´å†…çš„å‡åŒ€åˆ†å¸ƒçš„æ•°å€¼åºåˆ—ã€‚<code>linspace(a, b, n)</code> ä¼šåœ¨ <code>[a, b]</code> åŒºé—´å†…ç”Ÿæˆ <code>n</code> ä¸ªç­‰é—´è·çš„ç‚¹ã€‚</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="built_in">linspace</span>(<span class="number">0</span>, <span class="number">2</span>*<span class="built_in">pi</span>);</span><br><span class="line">y1 = <span class="built_in">sin</span>(x);</span><br><span class="line">y2 = <span class="built_in">cos</span>(x);</span><br><span class="line"><span class="built_in">plot</span>(x, y1, <span class="string">&#x27;r--o&#x27;</span>, <span class="string">&#x27;LineWidth&#x27;</span>, <span class="number">2</span>);</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line"><span class="built_in">plot</span>(x, y2, <span class="string">&#x27;b-.s&#x27;</span>, <span class="string">&#x27;LineWidth&#x27;</span>, <span class="number">1.5</span>);</span><br><span class="line"><span class="built_in">legend</span>(<span class="string">&#x27;sin(x)&#x27;</span>, <span class="string">&#x27;cos(x)&#x27;</span>);</span><br></pre></td></tr></table></figure><p>å…¶ä¸­</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lengend(<span class="string">&#x27;sin(x)&#x27;</span>,<span class="string">&#x27;cos(x)&#x27;</span>);</span><br></pre></td></tr></table></figure><p>æ˜¯å›¾ä¾‹ï¼ŒæŒ‰ç…§ä¹‹å‰æ›²çº¿é‡Œé¢çš„é¡ºåºæ¥æ ‡å®šçš„ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plot(x, y2, &#x27;b-.s&#x27;, &#x27;LineWidth&#x27;, 1.5);</span><br></pre></td></tr></table></figure><p><strong><code>&#39;b&#39;</code></strong>æŒ‡å®šçº¿æ¡é¢œè‰²ä¸ºè“è‰²ï¼ˆblueï¼‰,<strong><code>&#39;-.&#39;</code></strong>æŒ‡å®šçº¿å‹ä¸ºç‚¹åˆ’çº¿ï¼ˆdash-dotï¼‰,<strong><code>&#39;s&#39;</code></strong>æŒ‡å®šæ ‡è®°å½¢çŠ¶ä¸ºæ–¹å½¢ï¼ˆsquareï¼‰ã€‚æŒ‡å®šçº¿æ¡çš„å®½åº¦ä¸º 1.5 ç‚¹ï¼ˆé»˜è®¤å®½åº¦ä¸º 0.5 ç‚¹ï¼‰ã€‚</p><p><strong>é¢œè‰²</strong>:</p><ul><li><code>&#39;r&#39;</code>ï¼šçº¢è‰²ï¼ˆredï¼‰</li><li><code>&#39;g&#39;</code>ï¼šç»¿è‰²ï¼ˆgreenï¼‰</li><li><code>&#39;b&#39;</code>ï¼šè“è‰²ï¼ˆblueï¼‰</li><li><code>&#39;c&#39;</code>ï¼šé’è‰²ï¼ˆcyanï¼‰</li><li><code>&#39;m&#39;</code>ï¼šå“çº¢è‰²ï¼ˆmagentaï¼‰</li><li><code>&#39;y&#39;</code>ï¼šé»„è‰²ï¼ˆyellowï¼‰</li><li><code>&#39;k&#39;</code>ï¼šé»‘è‰²ï¼ˆblackï¼‰</li><li><code>&#39;w&#39;</code>ï¼šç™½è‰²ï¼ˆwhiteï¼‰</li></ul><p><strong>çº¿å‹</strong>:</p><ul><li><code>&#39;-&#39;</code>ï¼šå®çº¿ï¼ˆsolidï¼‰</li><li><code>&#39;--&#39;</code>ï¼šè™šçº¿ï¼ˆdashedï¼‰</li><li><code>&#39;:&#39;</code>ï¼šç‚¹çº¿ï¼ˆdottedï¼‰</li><li><code>&#39;-.&#39;</code>ï¼šç‚¹åˆ’çº¿ï¼ˆdash-dotï¼‰</li></ul><p><strong>æ ‡è®°å½¢çŠ¶</strong>:</p><ul><li><code>&#39;+&#39;</code>ï¼šåŠ å·</li><li><code>&#39;o&#39;</code>ï¼šåœ†å½¢</li><li><code>&#39;*&#39;</code>ï¼šæ˜Ÿå·</li><li><code>&#39;.&#39;</code>ï¼šç‚¹</li><li><code>&#39;x&#39;</code>ï¼šå‰å·</li><li><code>&#39;s&#39;</code>ï¼šæ–¹å½¢</li><li><code>&#39;d&#39;</code>ï¼šè±å½¢</li><li><code>&#39;^&#39;</code>ï¼šä¸Šä¸‰è§’</li><li><code>&#39;v&#39;</code>ï¼šä¸‹ä¸‰è§’</li><li><code>&#39;&gt;&#39;</code>ï¼šå³ä¸‰è§’</li><li><code>&#39;&lt;&#39;</code>ï¼šå·¦ä¸‰è§’</li><li><code>&#39;p&#39;</code>ï¼šäº”è¾¹å½¢</li><li><code>&#39;h&#39;</code>ï¼šå…­è¾¹å½¢</li></ul><h2 id="ä¸‰ç»´æ›²é¢å›¾"><a href="#ä¸‰ç»´æ›²é¢å›¾" class="headerlink" title="ä¸‰ç»´æ›²é¢å›¾"></a>ä¸‰ç»´æ›²é¢å›¾</h2><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[X, Y] = <span class="built_in">meshgrid</span>(x, y)</span><br></pre></td></tr></table></figure><p><strong><code>x</code></strong>å®šä¹‰ç½‘æ ¼çš„ x è½´æ–¹å‘çš„å‘é‡ã€‚<strong><code>y</code></strong>å®šä¹‰ç½‘æ ¼çš„ y è½´æ–¹å‘çš„å‘é‡ã€‚<strong>X, Y</strong>ç”Ÿæˆçš„çŸ©é˜µï¼Œå…¶ä¸­ Xçš„æ¯ä¸€è¡Œæ˜¯xå‘é‡çš„å¤åˆ¶ï¼Œè€Œ <code>Y</code> çš„æ¯ä¸€åˆ—æ˜¯yå‘é‡çš„å¤åˆ¶ã€‚</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[X,Y] = <span class="built_in">meshgrid</span>(<span class="number">-2</span>:<span class="number">0.1</span>:<span class="number">2</span>, <span class="number">-2</span>:<span class="number">0.1</span>:<span class="number">2</span>); <span class="comment">% ç½‘æ ¼ç‚¹åæ ‡</span></span><br><span class="line">Z = <span class="built_in">exp</span>(-X.^<span class="number">2</span> - Y.^<span class="number">2</span>); </span><br><span class="line">surf(X,Y,Z); <span class="comment">% ç»˜åˆ¶æ›²é¢å›¾</span></span><br><span class="line">xlabel(<span class="string">&#x27;X&#x27;</span>); </span><br><span class="line">ylabel(<span class="string">&#x27;Y&#x27;</span>); </span><br><span class="line">zlabel(<span class="string">&#x27;Z&#x27;</span>);</span><br><span class="line">title(<span class="string">&#x27;ä¸‰ç»´æ›²é¢å›¾&#x27;</span>);</span><br></pre></td></tr></table></figure><p>å®é™…ä¸Š<code>meshgrid</code>å‡½æ•°ä¸ä»…æ˜¯ç”¨æ¥ç»˜åˆ¶ä¸‰ç»´æ›²é¢å›¾çš„ï¼Œå®ƒæ›´å¤šçš„æ˜¯ä½œä¸ºä¸€ä¸ªç½‘æ ¼åæ ‡ç‚¹çš„ç”Ÿæˆå‡½æ•°ã€‚</p><p>å‡å¦‚æœ‰ï¼š</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="number">1</span>:<span class="number">3</span>;</span><br><span class="line">y = <span class="number">4</span>:<span class="number">6</span>;</span><br><span class="line">[X, Y] = <span class="built_in">meshgrid</span>(x, y)</span><br></pre></td></tr></table></figure><p>è¾“å‡ºä¸ºï¼š</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">X =</span><br><span class="line">     <span class="number">1</span>     <span class="number">2</span>     <span class="number">3</span></span><br><span class="line">     <span class="number">1</span>     <span class="number">2</span>     <span class="number">3</span></span><br><span class="line">     <span class="number">1</span>     <span class="number">2</span>     <span class="number">3</span></span><br><span class="line"></span><br><span class="line">Y =</span><br><span class="line">     <span class="number">4</span>     <span class="number">4</span>     <span class="number">4</span></span><br><span class="line">     <span class="number">5</span>     <span class="number">5</span>     <span class="number">5</span></span><br><span class="line">     <span class="number">6</span>     <span class="number">6</span>     <span class="number">6</span></span><br></pre></td></tr></table></figure><h2 id="çƒ­åŠ›å›¾"><a href="#çƒ­åŠ›å›¾" class="headerlink" title="çƒ­åŠ›å›¾"></a>çƒ­åŠ›å›¾</h2><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">data = <span class="built_in">rand</span>(<span class="number">5</span>,<span class="number">5</span>); </span><br><span class="line">heatmap(data);</span><br><span class="line">title(<span class="string">&#x27;Heat-map&#x27;</span>);</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼š</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">h = heatmap(data, <span class="string">&#x27;Title&#x27;</span>, <span class="string">&#x27;Heatmap Example&#x27;</span>, <span class="string">&#x27;XLabel&#x27;</span>, <span class="string">&#x27;X Axis&#x27;</span>, <span class="string">&#x27;YLabel&#x27;</span>, <span class="string">&#x27;Y Axis&#x27;</span>, <span class="string">&#x27;Colormap&#x27;</span>, <span class="string">&#x27;jet&#x27;</span>);</span><br></pre></td></tr></table></figure><p><strong><code>&#39;Colormap&#39;</code></strong>å¯ä»¥è®¾ç½®é¢œè‰²æ˜ å°„æ–¹æ¡ˆï¼Œæœ‰<code>&#39;jet&#39;</code>ã€<code>&#39;hot&#39;</code>ã€<code>&#39;cool&#39;</code> ç­‰ã€‚</p><p>å®é™…ä¸Šæˆ‘ä»¬æ²¡å¿…è¦éå¾—æä¸€ä¸ªçƒ­åŠ›å›¾é‡Œé¢æŠŠæ‰€æœ‰å±æ€§éƒ½å†™å¥½ï¼Œé‚£æ ·å¤ªè¿‡ç¹æ‚ï¼Œä¸å¦‚åˆ†å¼€å†™ã€‚</p><h2 id="æŸ±çŠ¶å›¾"><a href="#æŸ±çŠ¶å›¾" class="headerlink" title="æŸ±çŠ¶å›¾"></a>æŸ±çŠ¶å›¾</h2><p>åŸºæœ¬ç”¨æ³•æ˜¯ï¼š</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">y = [<span class="number">5</span>, <span class="number">10</span>, <span class="number">15</span>, <span class="number">20</span>];</span><br><span class="line">bar(y);</span><br></pre></td></tr></table></figure><p>å¦‚æœæƒ³è¦ç»˜åˆ¶åˆ†ç»„æŸ±çŠ¶å›¾ï¼Œåªéœ€è¦æŠŠyæ”¹ä¸ºï¼š</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">y = [<span class="number">5</span>, <span class="number">10</span>, <span class="number">15</span>; <span class="number">7</span>, <span class="number">14</span>, <span class="number">21</span>; <span class="number">6</span>, <span class="number">12</span>, <span class="number">18</span>];</span><br></pre></td></tr></table></figure><p>å †å æŸ±çŠ¶å›¾åªéœ€è¦åœ¨ä¸Šé¢æœ‰yçš„åŸºç¡€ä¸Šï¼ŒåŠ ä¸€ä¸ªå‚æ•°ï¼š</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bar(y, <span class="string">&#x27;stacked&#x27;</span>);</span><br></pre></td></tr></table></figure><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">y = [<span class="number">5</span>, <span class="number">10</span>, <span class="number">15</span>, <span class="number">20</span>];</span><br><span class="line">bar(y, <span class="string">&#x27;FaceColor&#x27;</span>, <span class="string">&#x27;blue&#x27;</span>);<span class="comment">% è®¾ç½®æŸ±å­é¢œè‰²</span></span><br><span class="line">title(<span class="string">&#x27;Bar Chart&#x27;</span>);</span><br><span class="line">xlabel(<span class="string">&#x27;X&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;Y&#x27;</span>);</span><br><span class="line">bar(y, <span class="string">&#x27;BarWidth&#x27;</span>, <span class="number">0.5</span>);<span class="comment">% è®¾ç½®æŸ±å­çš„å®½åº¦</span></span><br></pre></td></tr></table></figure><p>3DæŸ±çŠ¶å›¾å¯ä»¥è¿™ä¹ˆç»˜åˆ¶ï¼š</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">y = <span class="built_in">rand</span>(<span class="number">5</span>);</span><br><span class="line">bar3(y);</span><br></pre></td></tr></table></figure><h2 id="æ•£ç‚¹å›¾"><a href="#æ•£ç‚¹å›¾" class="headerlink" title="æ•£ç‚¹å›¾"></a>æ•£ç‚¹å›¾</h2><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line">y = [<span class="number">10</span>, <span class="number">15</span>, <span class="number">9</span>, <span class="number">25</span>, <span class="number">30</span>];</span><br><span class="line"><span class="built_in">scatter</span>(x, y);</span><br></pre></td></tr></table></figure><p>å¦‚æœæƒ³è¦æ›´åŠ é«˜çº§ä¸€ç‚¹ï¼Œå¯ä»¥æ·»åŠ è‰²å½©é€‰é¡¹ï¼š</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">x = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line">y = [<span class="number">10</span>, <span class="number">15</span>, <span class="number">9</span>, <span class="number">25</span>, <span class="number">30</span>];</span><br><span class="line">colors = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"><span class="built_in">scatter</span>(x, y, <span class="number">100</span>, colors, <span class="string">&#x27;filled&#x27;</span>);</span><br><span class="line"><span class="comment">% å…¶ä¸­çš„ç¬¬ä¸‰é¡¹100ä¸ºsizeï¼Œæ˜¯ç‚¹çš„å¤§å°</span></span><br><span class="line"><span class="comment">% é¢œè‰²æ˜ å°„</span></span><br><span class="line">colormap(jet);</span><br><span class="line">colorbar; <span class="comment">% æ·»åŠ é¢œè‰²æ¡</span></span><br></pre></td></tr></table></figure><p>ä¸‰ç»´æ•£ç‚¹å›¾ä¸ºï¼š</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">x = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line">y = [<span class="number">10</span>, <span class="number">15</span>, <span class="number">9</span>, <span class="number">25</span>, <span class="number">30</span>];</span><br><span class="line">z = [<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">10</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">scatter3</span>(x, y, z, <span class="number">100</span>, <span class="string">&#x27;MarkerEdgeColor&#x27;</span>, <span class="string">&#x27;k&#x27;</span>, <span class="string">&#x27;MarkerFaceColor&#x27;</span>, <span class="string">&#x27;g&#x27;</span>);</span><br></pre></td></tr></table></figure><h2 id="é¥¼å›¾"><a href="#é¥¼å›¾" class="headerlink" title="é¥¼å›¾"></a>é¥¼å›¾</h2><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">data = [<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>];</span><br><span class="line">labels = &#123;<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;C&#x27;</span>, <span class="string">&#x27;D&#x27;</span>&#125;;</span><br><span class="line">pie(data, labels);</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ æƒ³è¦çªå‡ºæŸä¸€ä¸ªåˆ‡ç‰‡ï¼Œå¯ä»¥è¿™ä¹ˆå†™ï¼š</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">data = [<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>];</span><br><span class="line">explode = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>]; <span class="comment">% ç¬¬äºŒä¸ªåˆ‡ç‰‡çªå‡ºæ˜¾ç¤º</span></span><br><span class="line">pie(data, explode);</span><br></pre></td></tr></table></figure><h2 id="ç›´æ–¹å›¾"><a href="#ç›´æ–¹å›¾" class="headerlink" title="ç›´æ–¹å›¾"></a>ç›´æ–¹å›¾</h2><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">data = <span class="built_in">randn</span>(<span class="number">1000</span>, <span class="number">1</span>);</span><br><span class="line">histogram(data, <span class="string">&#x27;Normalization&#x27;</span>, <span class="string">&#x27;pdf&#x27;</span>); <span class="comment">% ç»˜åˆ¶æ¦‚ç‡å¯†åº¦å‡½æ•°å½’ä¸€åŒ–çš„ç›´æ–¹å›¾</span></span><br><span class="line">title(<span class="string">&#x27;Histogram&#x27;</span>); </span><br><span class="line">xlabel(<span class="string">&#x27;Value&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;Probability Density&#x27;</span>); </span><br></pre></td></tr></table></figure><h2 id="æ·»åŠ æ–‡æœ¬"><a href="#æ·»åŠ æ–‡æœ¬" class="headerlink" title="æ·»åŠ æ–‡æœ¬"></a>æ·»åŠ æ–‡æœ¬</h2><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="built_in">linspace</span>(<span class="number">0</span>, <span class="number">2</span>*<span class="built_in">pi</span>, <span class="number">100</span>);</span><br><span class="line">y = <span class="built_in">sin</span>(x);</span><br><span class="line"><span class="built_in">plot</span>(x, y);</span><br><span class="line">text(<span class="number">3</span>, <span class="number">0.5</span>, <span class="string">&#x27;Peak&#x27;</span>, <span class="string">&#x27;FontSize&#x27;</span>, <span class="number">12</span>); <span class="comment">% åœ¨æŒ‡å®šä½ç½®æ·»åŠ æ–‡æœ¬</span></span><br><span class="line">annotation(<span class="string">&#x27;arrow&#x27;</span>, [<span class="number">0.2</span>, <span class="number">0.3</span>], [<span class="number">0.6</span>, <span class="number">0.8</span>]); <span class="comment">% æ·»åŠ ç®­å¤´</span></span><br></pre></td></tr></table></figure><p>ç”¨æ³•ä¸ºï¼š</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">text(X, Y, <span class="string">&#x27;String&#x27;</span>, <span class="string">&#x27;PropertyName&#x27;</span>, PropertyValue, ...)</span><br><span class="line">annotation(<span class="string">&#x27;Type&#x27;</span>, <span class="string">&#x27;PropertyName&#x27;</span>, PropertyValue, ...)</span><br></pre></td></tr></table></figure><p>æ¯”å¦‚ï¼š</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">% åœ¨åæ ‡ (3, 0.5) æ·»åŠ æ–‡æœ¬ &quot;Peak&quot;</span></span><br><span class="line">text(<span class="number">3</span>, <span class="number">0.5</span>, <span class="string">&#x27;Peak&#x27;</span>, <span class="string">&#x27;FontSize&#x27;</span>, <span class="number">12</span>, <span class="string">&#x27;FontWeight&#x27;</span>, <span class="string">&#x27;bold&#x27;</span>, <span class="string">&#x27;Color&#x27;</span>, <span class="string">&#x27;red&#x27;</span>);</span><br><span class="line"><span class="comment">% æ·»åŠ ä¸€ä¸ªç®­å¤´ï¼Œèµ·ç‚¹ (0.2, 0.6)ï¼Œç»ˆç‚¹ (0.3, 0.8)</span></span><br><span class="line">annotation(<span class="string">&#x27;arrow&#x27;</span>, [<span class="number">0.2</span>, <span class="number">0.3</span>], [<span class="number">0.6</span>, <span class="number">0.8</span>], <span class="string">&#x27;LineWidth&#x27;</span>, <span class="number">2</span>, <span class="string">&#x27;Color&#x27;</span>, <span class="string">&#x27;blue&#x27;</span>);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Matlab </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç”¨Matlabå®ç°åå¾®åˆ†æ–¹ç¨‹çš„æœ‰é™å·®åˆ†æ³•</title>
      <link href="/2024/08/23/%E5%81%8F%E5%BE%AE%E5%88%86%E6%96%B9%E7%A8%8B%E7%9A%84%E6%9C%89%E9%99%90%E5%B7%AE%E5%88%86%E6%B3%95-Matlab%E5%AE%9E%E7%8E%B0/"/>
      <url>/2024/08/23/%E5%81%8F%E5%BE%AE%E5%88%86%E6%96%B9%E7%A8%8B%E7%9A%84%E6%9C%89%E9%99%90%E5%B7%AE%E5%88%86%E6%B3%95-Matlab%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="åå¾®åˆ†æ–¹ç¨‹-PDE"><a href="#åå¾®åˆ†æ–¹ç¨‹-PDE" class="headerlink" title="åå¾®åˆ†æ–¹ç¨‹(PDE)"></a>åå¾®åˆ†æ–¹ç¨‹(PDE)</h1><p>åå¾®åˆ†æ–¹ç¨‹æ˜¯åŒ…å«æœªçŸ¥å‡½æ•°çš„åå¯¼æ•°çš„æ–¹ç¨‹ï¼Œæ ¹æ®æœªçŸ¥å‡½æ•°åå¯¼æ•°çš„æœ€é«˜é˜¶æ•°ï¼Œå¯ä»¥åˆ†ä¸ºçº¿æ€§å’Œéçº¿æ€§åå¾®åˆ†æ–¹ç¨‹ã€‚å·¥ç¨‹ä¸Šå¾ˆå¤šé—®é¢˜éƒ½ä¸å¤šä¸ªå˜é‡ç›¸å…³ï¼Œè€Œåå¾®åˆ†æ–¹ç¨‹çš„è§£æè§£å¾ˆéš¾æ±‚å‡ºæ¥ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿæƒ³é€šè¿‡ç¦»æ•£åŒ–æ¥å°†å…¶æ±‚å‡ºæ•°å€¼è§£ï¼Œè€Œæœ‰é™å·®åˆ†æ³•å°±èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><h2 id="ä¸€ç»´çƒ­ä¼ å¯¼æ–¹ç¨‹çš„æœ‰é™å·®åˆ†æ±‚æ³•"><a href="#ä¸€ç»´çƒ­ä¼ å¯¼æ–¹ç¨‹çš„æœ‰é™å·®åˆ†æ±‚æ³•" class="headerlink" title="ä¸€ç»´çƒ­ä¼ å¯¼æ–¹ç¨‹çš„æœ‰é™å·®åˆ†æ±‚æ³•"></a>ä¸€ç»´çƒ­ä¼ å¯¼æ–¹ç¨‹çš„æœ‰é™å·®åˆ†æ±‚æ³•</h2><p>å‡è®¾æ¸©åº¦ä¸º$u(x,t)$ï¼Œå…¶æ¸©åº¦åˆ†å¸ƒåªå’Œæ—¶é—´ä¸ä¸€ç»´xæœ‰å…³ï¼Œå…·ä½“å…¬å¼ä¸ºï¼š</p><script type="math/tex; mode=display">\frac{\partial u}{\partial t}(x,t) = a^2\frac{\partial^2}{\partial x^2}u(x,t)+f(x,t)</script><script type="math/tex; mode=display">u(x,0)=\varphi(x)</script><script type="math/tex; mode=display">u(a,t) = \mu_1(t) , u(b,t)=\mu_2(t)</script><p>å…¶ä¸­ï¼Œç¬¬ä¸€ä¸ªå¼å­ä¸ºä¸€ç»´çƒ­ä¼ å¯¼åœ¨ç½‘æ ¼[a+1,b-1]x[0,t]çš„æ¸©åº¦åˆ†å¸ƒæ–¹ç¨‹ï¼Œç¬¬äºŒä¸ªæ–¹ç¨‹ä¸ç¬¬ä¸‰ä¸ªæ–¹ç¨‹éƒ½æ˜¯è¾¹ç•Œæ¡ä»¶ï¼Œå…¶ä¸­ç¬¬äºŒä¸ªæ–¹ç¨‹å‘Šè¯‰æˆ‘ä»¬åˆå§‹æ—¶åˆ»çš„æ¸©åº¦åˆ†å¸ƒæ˜¯ä»€ä¹ˆæ ·çš„ï¼Œç¬¬ä¸‰ä¸ªæ–¹ç¨‹å‘Šè¯‰æˆ‘ä»¬åœ¨aä¸bå·¦å³ä¸¤æ¡è¾¹ç•Œçº¿ä¸Šçš„æ¸©åº¦åˆ†å¸ƒæ˜¯ä»€ä¹ˆæ ·çš„ã€‚</p><p>æˆ‘ä»¬å…ˆè®¾æƒ³ä¸€ä¸ªç½‘æ ¼ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">t</span><br><span class="line">|_|_ _ _ _ _ _|_ _</span><br><span class="line">|_|_ _ _ _ _ _|_ _</span><br><span class="line">|_|_ _ _ _ _ _|_ _ </span><br><span class="line">|_|_ _ _ _ _ _|_ _ </span><br><span class="line">|_|_/_\_ _ _ _|_ _  x t=0</span><br><span class="line">   a c d     b</span><br><span class="line">   1         N+1</span><br></pre></td></tr></table></figure><p>ç”±äºMatlabæ˜¯æ²¡æœ‰é›¶ç´¢å¼•çš„ï¼Œæ‰€ä»¥ä¸ºæ–¹ä¾¿ç¼–ç¨‹ï¼Œæˆ‘ä»¬ä»1å¼€å§‹ï¼Œåˆ‡å‰²æˆNä¸ªç½‘æ ¼ï¼Œæ‰€ä»¥æœ‰ï¼š</p><script type="math/tex; mode=display">t_n = 0 + (n-1)\Delta t</script><script type="math/tex; mode=display">x_j = a + (j-1)\Delta x</script><script type="math/tex; mode=display">\Delta x = \frac{b-a}{N}</script><p>æˆ‘ä»¬å‡è®¾$u_j^n$ä»£è¡¨åœ¨x=jï¼Œt=nçš„æ¸©åº¦ï¼Œæ ¹æ®æ³°å‹’å±•å¼€å…¬å¼ï¼Œå¯¹æ—¶é—´è¿›è¡Œå‘å‰ç¦»æ•£åŒ–ï¼š</p><script type="math/tex; mode=display">u(x_j,t_n+\Delta t)\approx u(x_j,t_n)+\frac{\partial u}{\partial t}(x_j,t_n)\Delta t</script><p>ç”±äº$\frac{\partial u}{\partial t}(x_j,t_n)$è¿™ä¸ªæ–¹ç¨‹å·²çŸ¥ï¼Œæ‰€ä»¥æ¥ç€å¯¹xç¦»æ•£ï¼š</p><script type="math/tex; mode=display">u(x_j+\Delta x,t_n)\approx u(x_j,t_n)+\frac{\partial u}{\partial x}(x_j,t_n)\Delta x + \frac{1}{2}\frac{\partial^2 u}{\partial x^2}(x_j,t_n)\Delta x^2</script><script type="math/tex; mode=display">u(x_j-\Delta x,t_n)\approx u(x_j,t_n)-\frac{\partial u}{\partial x}(x_j,t_n)\Delta x + \frac{1}{2}\frac{\partial^2 u}{\partial x^2}(x_j,t_n)\Delta x^2</script><p>å°†ä¸¤å¼ç›¸åŠ ï¼Œå¾—åˆ°ä¸­å¿ƒç¦»æ•£åŒ–ï¼š</p><script type="math/tex; mode=display">\frac{\partial^2 u}{\partial x^2}(x_j,t_n) =\frac{u(x_j+\Delta x,t_n) - 2u(x_j,t_n)+u(x_j-\Delta x,t_n)}{\Delta x^2}</script><p>æœ€åæœ‰ï¼š</p><script type="math/tex; mode=display">u_j^{n+1} = u_j^n + [a^2\frac{u_{j+1}^n+u_{j-1}^n-2u_j^n}{\Delta x^2}+f_j^n]</script><p>æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œå‡å¦‚æƒ³æ±‚å‡º[a+1,b-1]çš„æ¸©åº¦ï¼Œéœ€è¦ä¸Šä¸€æ—¶åˆ»jä½ç½®çš„æ¸©åº¦ï¼Œä¸ä¸Šä¸€æ—¶åˆ»j+1å’Œj-1çš„æ¸©åº¦ï¼Œä½†æ˜¯aç‚¹å’Œbå·²ç»æ²¡æœ‰å‘å·¦æˆ–å‘å³çš„ä½ç½®äº†ï¼Œè¿™æ—¶å€™è¾¹ç•Œæ¡ä»¶å°±èµ·ä½œç”¨äº†ã€‚</p><p>æˆ‘ä»¬å¯ä»¥å…ˆæŠŠçŸ©é˜µå½¢å¼å†™å‡ºæ¥ï¼Œåˆ‡è®°ï¼Œå¯¹äºä¸‹ä¸€æ—¶åˆ»çš„uæ¥è¯´ï¼Œï¼Œä¸ºäº†ç¼–ç¨‹çš„æ˜“å®ç°æ€§ï¼Œæˆ‘ä»¬ç”¨ä¸‰å¯¹è§’çŸ©é˜µæ¥è®¡ç®—ï¼Œè®¡ç®—å¾—åˆ°çš„1å’ŒN+1ä¸ç®¡ï¼Œç´¢å¼•1å’Œç´¢å¼•N+1çš„å€¼éœ€è¦é€šè¿‡è¾¹ç•Œæ¡ä»¶æ¥ç®—ã€‚</p><script type="math/tex; mode=display">\begin{pmatrix}u_{fake1}^{n+1} \\u_2^{n+1} \\u_3^{n+1} \\\vdots \\u_{fake_N+1}^{n+1} \\\end{pmatrix}\begin{pmatrix}-2 & 1 & 0 & \cdots & 0 \\1 & -2 & 1 & \cdots & 0 \\0 & 1 & -2 & \cdots & 0 \\\vdots & \vdots & \vdots & \ddots & \vdots \\0 & 0 & 0 & \cdots & -2\end{pmatrix} \begin{pmatrix}u_1^n \\u_2^n \\u_3^n \\\vdots \\u_{N+1}^n \\\end{pmatrix}</script><script type="math/tex; mode=display">u_1^{n+1} = \mu_1^{n+1}</script><script type="math/tex; mode=display">u_{N+1}^{n+1} = \mu_2^{n+1}</script><script type="math/tex; mode=display">u(x,0)=\varphi(x)</script><p>é‚£å¦‚ä½•ç”¨Matlabæ¥å®ç°ä»¿çœŸå‘¢ï¼Ÿä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•æ— çƒ­æºçš„ä¾‹å­ï¼š</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">clear,clc;</span><br><span class="line">a = <span class="number">1</span>;<span class="comment">% å¦‚æœdxæ¯”è¾ƒå°ï¼Œé‚£ä¹ˆè¯¯å·®è¾ƒå¤§</span></span><br><span class="line">dx = <span class="number">0.04</span>;</span><br><span class="line">x = <span class="number">0</span>:dx:<span class="number">1</span>;</span><br><span class="line">dt = <span class="number">0.00001</span>;</span><br><span class="line">t = <span class="number">0</span>:dt:<span class="number">1</span>;</span><br><span class="line">u = <span class="built_in">zeros</span>(<span class="built_in">length</span>(x),<span class="built_in">length</span>(t));</span><br><span class="line"><span class="comment">% åˆå§‹æ¡ä»¶</span></span><br><span class="line">u(:,<span class="number">1</span>) = <span class="built_in">sin</span>(<span class="built_in">pi</span>*x);</span><br><span class="line">m1 = <span class="number">1</span> + <span class="number">0.1</span>*<span class="built_in">sin</span>(t);</span><br><span class="line">m2 = <span class="number">1</span> - <span class="number">0.1</span>*<span class="built_in">sin</span>(t);</span><br><span class="line"><span class="comment">% æ„é€ ä¸‰å¯¹è§’çŸ©é˜µ</span></span><br><span class="line">A = <span class="number">-2</span>*<span class="built_in">eye</span>(<span class="built_in">length</span>(x))+<span class="built_in">diag</span>(<span class="built_in">ones</span>(<span class="number">1</span>,<span class="built_in">length</span>(x)<span class="number">-1</span>),<span class="number">1</span>)+<span class="built_in">diag</span>(<span class="built_in">ones</span>(<span class="number">1</span>,<span class="built_in">length</span>(x)<span class="number">-1</span>),<span class="number">-1</span>);</span><br><span class="line"><span class="keyword">for</span> n = <span class="number">1</span>:<span class="built_in">length</span>(t)<span class="number">-1</span></span><br><span class="line">    u(:,n+<span class="number">1</span>) = u(:,n) + a^<span class="number">2</span>*dt/dx^<span class="number">2</span>*A*u(:,n);</span><br><span class="line">    u(<span class="number">1</span>,n+<span class="number">1</span>) = m1(n+<span class="number">1</span>);</span><br><span class="line">    u(<span class="keyword">end</span>,n+<span class="number">1</span>) = m2(n+<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">plot</span>(x,u(:,n+<span class="number">1</span>))</span><br><span class="line">    axis([x(<span class="number">1</span>) x(<span class="keyword">end</span>) <span class="number">0</span> <span class="number">1</span>])</span><br><span class="line">    getframe;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"># æœ€ç»ˆæ—¶åˆ»</span><br><span class="line"><span class="built_in">plot</span>(x,u(:,<span class="keyword">end</span>))</span><br><span class="line">[T,X]=<span class="built_in">meshgrid</span>(t,x);</span><br><span class="line">surf(X,T,u)</span><br><span class="line">shading interp</span><br></pre></td></tr></table></figure><p><code>meshgrid(t,x)</code> ç”Ÿæˆæ—¶é—´å’Œç©ºé—´çš„ç½‘æ ¼ã€‚<code>surf(X,T,u)</code> ç»˜åˆ¶ä¸‰ç»´æ›²é¢å›¾ï¼Œå±•ç¤ºæ¸©åº¦éšæ—¶é—´å’Œç©ºé—´çš„å˜åŒ–ã€‚<code>shading interp</code> è®¾ç½®æ›²é¢çš„é˜´å½±æ•ˆæœï¼Œä½¿å›¾åƒæ›´åŠ å¹³æ»‘ã€‚</p><p>é‚£ä¹ˆæœ‰çƒ­æºåº”è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">clear,clc;</span><br><span class="line">a = <span class="number">1</span>;<span class="comment">% å¦‚æœdxæ¯”è¾ƒå°ï¼Œé‚£ä¹ˆè¯¯å·®è¾ƒå¤§</span></span><br><span class="line">dx = <span class="number">0.04</span>;</span><br><span class="line">x = <span class="number">0</span>:dx:<span class="number">1</span>;</span><br><span class="line">dt = <span class="number">0.00001</span>;</span><br><span class="line">t = <span class="number">0</span>:dt:<span class="number">1</span>;</span><br><span class="line">u = <span class="built_in">zeros</span>(<span class="built_in">length</span>(x),<span class="built_in">length</span>(t));</span><br><span class="line"><span class="comment">% åˆå§‹æ¡ä»¶</span></span><br><span class="line">u(:,<span class="number">1</span>) = <span class="number">0.2</span>*<span class="built_in">sin</span>(x);</span><br><span class="line">f = <span class="number">7</span>*<span class="built_in">exp</span>(<span class="number">-20</span>*(x<span class="number">-1</span>/<span class="number">2</span>).^<span class="number">2</span>);</span><br><span class="line">m1 = <span class="number">0</span> + <span class="number">0.5</span>*<span class="built_in">sin</span>(t);</span><br><span class="line">m2 = <span class="number">0</span> - <span class="number">0.5</span>*<span class="built_in">sin</span>(t);</span><br><span class="line"><span class="comment">% æ„é€ ä¸‰å¯¹è§’çŸ©é˜µ</span></span><br><span class="line">A = <span class="number">-2</span>*<span class="built_in">eye</span>(<span class="built_in">length</span>(x))+<span class="built_in">diag</span>(<span class="built_in">ones</span>(<span class="number">1</span>,<span class="built_in">length</span>(x)<span class="number">-1</span>),<span class="number">1</span>)+<span class="built_in">diag</span>(<span class="built_in">ones</span>(<span class="number">1</span>,<span class="built_in">length</span>(x)<span class="number">-1</span>),<span class="number">-1</span>);</span><br><span class="line"><span class="keyword">for</span> n = <span class="number">1</span>:<span class="built_in">length</span>(t)<span class="number">-1</span></span><br><span class="line">    u(:,n+<span class="number">1</span>) = u(:,n) + a^<span class="number">2</span>*dt/dx^<span class="number">2</span>*A*u(:,n) + f&#x27;*dt;<span class="comment">% ç”±äºuæ˜¯xä¸ºåˆ—ï¼Œè€Œfæ˜¯è¡Œï¼Œæ‰€ä»¥è¦è½¬ç½®</span></span><br><span class="line">    u(<span class="number">1</span>,n+<span class="number">1</span>) = m1(n+<span class="number">1</span>);</span><br><span class="line">    u(<span class="keyword">end</span>,n+<span class="number">1</span>) = m2(n+<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">plot</span>(x,u(:,n+<span class="number">1</span>))</span><br><span class="line">    axis([x(<span class="number">1</span>) x(<span class="keyword">end</span>) <span class="number">0</span> <span class="number">1</span>])</span><br><span class="line">    getframe;</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>äº‹å®ä¸Šï¼Œçƒ­ä¼ å¯¼æ–¹ç¨‹çš„è¾¹ç•Œæ¡ä»¶ä¸ä»…æ˜¯è¿™ç§ï¼Œè¿˜æœ‰å¦å¤–ä¸¤ç§ï¼Œè¿™é‡Œä¸¾ä¾‹çš„æ˜¯<strong>ç¬¬ä¸€ç±»è¾¹ç•Œæ¡ä»¶</strong>ï¼Œè€Œ<strong>ç¬¬äºŒç±»è¾¹ç•Œæ¡ä»¶</strong>æ˜¯è¿™æ ·çš„ï¼š</p><script type="math/tex; mode=display">\frac{\partial u}{\partial x}|_{x=a} = \mu_1(t)</script><script type="math/tex; mode=display">\frac{\partial u}{\partial x}|_{x=b} = \mu_2(t)</script><p>è¿›è¡Œå¤„ç†ï¼Œå¾—åˆ°ï¼š</p><script type="math/tex; mode=display">\frac{u_2^{n+1}-u_1^{n+1}}{\Delta x} = \mu_1^{n+1}</script><script type="math/tex; mode=display">\frac{u_{N+1}^{n+1}-u_N^{n+1}}{\Delta x} = \mu_2^{n+1}</script><p>ç”±äº$u_2^{n+1}$æ˜¯å·²çŸ¥çš„ï¼Œæ‰€ä»¥å¯ä»¥åæ¨è¾¹ç•Œæ¡ä»¶ï¼š</p><script type="math/tex; mode=display">u_1^{n+1} = u_2^{n+1} - \mu_1^{n+1}\Delta x</script><script type="math/tex; mode=display">u_{N+1}^{n+1} = u_N^{n+1} + \mu_2^{n+1}\Delta x</script><p>æ•…å¯ä»¥ç¼–å†™ä»£ç ï¼š</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">clear,clc;</span><br><span class="line">a = <span class="number">1</span>;</span><br><span class="line">dx = <span class="number">0.04</span>;</span><br><span class="line">x = <span class="number">0</span>:dx:<span class="number">1</span>;</span><br><span class="line">dt = <span class="number">0.00001</span>;</span><br><span class="line">t = <span class="number">0</span>:dt:<span class="number">1</span>;</span><br><span class="line">u = <span class="built_in">zeros</span>(<span class="built_in">length</span>(x),<span class="built_in">length</span>(t));</span><br><span class="line">u(:,<span class="number">1</span>) = <span class="number">0.2</span>*<span class="built_in">sin</span>(x);</span><br><span class="line">f = <span class="number">7</span>*<span class="built_in">exp</span>(<span class="number">-20</span>*(x<span class="number">-1</span>/<span class="number">2</span>).^<span class="number">2</span>);</span><br><span class="line">m1 = <span class="number">0</span> + <span class="number">0.5</span>*<span class="built_in">sin</span>(t);</span><br><span class="line">m2 = <span class="number">0</span> - <span class="number">0.5</span>*<span class="built_in">sin</span>(t);</span><br><span class="line">A = <span class="number">-2</span>*<span class="built_in">eye</span>(<span class="built_in">length</span>(x))+<span class="built_in">diag</span>(<span class="built_in">ones</span>(<span class="number">1</span>,<span class="built_in">length</span>(x)<span class="number">-1</span>),<span class="number">1</span>)+<span class="built_in">diag</span>(<span class="built_in">ones</span>(<span class="number">1</span>,<span class="built_in">length</span>(x)<span class="number">-1</span>),<span class="number">-1</span>);</span><br><span class="line"><span class="keyword">for</span> n = <span class="number">1</span>:<span class="built_in">length</span>(t)<span class="number">-1</span></span><br><span class="line">    u(:,n+<span class="number">1</span>) = u(:,n) + a^<span class="number">2</span>*dt/dx^<span class="number">2</span>*A*u(:,n) + f&#x27;*dt;</span><br><span class="line">    u(<span class="number">1</span>,n+<span class="number">1</span>) = u(<span class="number">2</span>,n+<span class="number">1</span>) - m1(n+<span class="number">1</span>)*dx;<span class="comment">% ä¿®æ”¹åœ°æ–¹</span></span><br><span class="line">    u(<span class="keyword">end</span>,n+<span class="number">1</span>) = u(<span class="keyword">end</span><span class="number">-1</span>,n+<span class="number">1</span>) + m2(n+<span class="number">1</span>)*dx;</span><br><span class="line">    <span class="built_in">plot</span>(x,u(:,n+<span class="number">1</span>))</span><br><span class="line">    axis([x(<span class="number">1</span>) x(<span class="keyword">end</span>) <span class="number">0</span> <span class="number">1</span>])</span><br><span class="line">    getframe;</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p><strong>ç¬¬ä¸‰ç±»è¾¹ç•Œæ¡ä»¶</strong>ä¸ºï¼š</p><script type="math/tex; mode=display">u+c\frac{\partial u}{\partial x}|_{x=a} = \mu_1(t)</script><p>å¦‚ä½•ç¦»æ•£åŒ–å‘¢ï¼Ÿå…¶å®æ ¹æ®å‰ä¸¤ç±»å°±èƒ½å¾ˆå¿«çš„å†™å‡ºæ¥ï¼š</p><script type="math/tex; mode=display">u_1^{n+1} + c\frac{u_2^{n+1}-u_1^{n+1}}{\Delta x} = \mu_1^{n+1}</script><h2 id="ä¸€ç»´è–›å®šè°”æ–¹ç¨‹çš„æœ‰é™å·®åˆ†æ±‚æ³•"><a href="#ä¸€ç»´è–›å®šè°”æ–¹ç¨‹çš„æœ‰é™å·®åˆ†æ±‚æ³•" class="headerlink" title="ä¸€ç»´è–›å®šè°”æ–¹ç¨‹çš„æœ‰é™å·®åˆ†æ±‚æ³•"></a>ä¸€ç»´è–›å®šè°”æ–¹ç¨‹çš„æœ‰é™å·®åˆ†æ±‚æ³•</h2><p>é‡å­çš„æ³¢å‡½æ•°$\psi(x,t)$å¯ä»¥æè¿°é‡å­åˆ†å¸ƒçš„æ¦‚ç‡å¯†åº¦ï¼Œé€šè¿‡$|\psi(x,t)|^2$â€‹æ¥è®¡ç®—ï¼Œæˆ‘ä»¬ç°åœ¨è¦æ¨¡æ‹Ÿç²’å­è¿åŠ¨éšæ—¶é—´å˜åŒ–ã€‚</p><script type="math/tex; mode=display">i\hbar \frac{\partial \psi(x, t)}{\partial t} = -\frac{\hbar^2}{2m} \frac{\partial^2 \psi(x, t)}{\partial x^2} + V(x) \psi(x, t)</script><p>å…¶ä¸­ï¼Œ$\hbar$æ˜¯çº¦åŒ–æ™®æœ—å…‹å¸¸æ•°ï¼Œ$V(x)$æ˜¯ä½ç½®xçš„ä½¿èƒ½ï¼Œ$E$æ˜¯ç²’å­çš„èƒ½é‡ï¼Œ$i$æ˜¯è™šæ•°ã€‚</p><p>äº‹å®ä¸Šï¼Œè®¡ç®—æœºä¸å¯èƒ½æ¨¡æ‹Ÿæ— ç©·è¿œå¤„çš„ç²’å­ï¼Œæ‰€ä»¥æˆ‘ä»¬è®¾å®šä¸€ä¸ªå›ºå®šçš„è¾¹ç•Œæ¡ä»¶ï¼š</p><script type="math/tex; mode=display">\psi(L,t) = \psi(-L,t) = 0</script><script type="math/tex; mode=display">\psi(x,0) = \psi_0(x)</script><p>æ ¹æ®ä¸€é˜¶æ³°å‹’ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ï¼š</p><script type="math/tex; mode=display">\psi^{n+1} = \psi^n + (\frac{i\hbar}{2m \Delta x^2}A\psi^n+\frac{1}{i\hbar}V\psi^n)\Delta t</script><p>æ„é€ å“ˆå¯†é¡¿ç®—ç¬¦$H$ï¼š</p><script type="math/tex; mode=display">H = -\frac{\hbar^2}{2m\Delta x^2}A+V</script><p>æ‰€ä»¥æœ‰ï¼š</p><script type="math/tex; mode=display">\psi^{n+1} = \psi^n + \frac{1}{i\hbar}H\psi^n\Delta t</script><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">clear,clc;</span><br><span class="line">m =<span class="number">1</span> ;</span><br><span class="line">hb = <span class="number">1</span>;</span><br><span class="line">L = <span class="number">10</span>;</span><br><span class="line">dx = <span class="number">0.1</span>;</span><br><span class="line">x = -L:dx:L;</span><br><span class="line">dt = <span class="number">0.0001</span>;</span><br><span class="line">t = <span class="number">0</span>:dt:<span class="number">10</span>;</span><br><span class="line"><span class="built_in">psi</span> = <span class="built_in">zeros</span>(<span class="built_in">length</span>(x),<span class="built_in">length</span>(t));</span><br><span class="line">x0 = <span class="number">0</span>;</span><br><span class="line">Dx = <span class="number">1</span>;</span><br><span class="line">k0 = <span class="number">5</span>;</span><br><span class="line">psi0 = <span class="built_in">exp</span>(-x&#x27;.^<span class="number">2</span>/Dx^<span class="number">2</span>).*<span class="built_in">exp</span>(<span class="number">1</span><span class="built_in">i</span>*k0*x&#x27;);<span class="comment">% å¼€å§‹ç§»åŠ¨ï¼Œç¢°åˆ°è¾¹ç•Œååå¼¹</span></span><br><span class="line"><span class="built_in">psi</span>(:,<span class="number">1</span>) = psi0;</span><br><span class="line">A = <span class="number">-2</span>*<span class="built_in">eye</span>(<span class="built_in">length</span>(x))+<span class="built_in">diag</span>(<span class="built_in">ones</span>(<span class="number">1</span>,<span class="built_in">length</span>(x)<span class="number">-1</span>),<span class="number">1</span>)+<span class="built_in">diag</span>(<span class="built_in">ones</span>(<span class="number">1</span>,<span class="built_in">length</span>(x)<span class="number">-1</span>),<span class="number">-1</span>);</span><br><span class="line"><span class="comment">% å¦‚æœæƒ³è¦å˜æˆå‘¨æœŸæ€§è¾¹ç•Œæ¡ä»¶å¯ä»¥æ”¹æˆï¼šA(1,end) = 1,A(end,1)=1;</span></span><br><span class="line">w = <span class="number">1</span>;</span><br><span class="line">v = <span class="number">1</span>/<span class="number">2</span>*w^<span class="number">2</span>*x.^<span class="number">2</span>;</span><br><span class="line">V = <span class="built_in">diag</span>(v);</span><br><span class="line">H= -hb^<span class="number">2</span>/<span class="number">2</span>/m/dx^<span class="number">2</span>*A+V;</span><br><span class="line"><span class="keyword">for</span> n = <span class="number">1</span>:<span class="built_in">length</span>(t)<span class="number">-1</span></span><br><span class="line">    <span class="built_in">psi</span>(:,n+<span class="number">1</span>) = <span class="built_in">psi</span>(:,n) + <span class="number">1</span>/<span class="number">1</span><span class="built_in">i</span>/hb*H*<span class="built_in">psi</span>(:,n)*dt;</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">mod</span>(n,<span class="number">100</span>)==<span class="number">0</span></span><br><span class="line">        <span class="built_in">plot</span>(x,<span class="built_in">real</span>(<span class="built_in">psi</span>(:,n+<span class="number">1</span>)),x,<span class="built_in">imag</span>(<span class="built_in">psi</span>(:,n+<span class="number">1</span>)))</span><br><span class="line">        axis([x(<span class="number">1</span>) x(<span class="keyword">end</span>) <span class="number">-1</span> <span class="number">1</span>])</span><br><span class="line">        getframe;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>x0 = 0;</code> è®¾ç½®åˆå§‹æ³¢åŒ…çš„ä¸­å¿ƒä½ç½®,<code>Dx = 1;</code> è®¾ç½®åˆå§‹æ³¢åŒ…çš„å®½åº¦ã€‚</p><p>å½“ç„¶è¦æ˜¯å‘æ•£ï¼Œä¹Ÿå¯ä»¥è¿‡ç¨‹ä¸­ä½¿ç”¨é¾™æ ¼åº“å¡”ç®—æ³•ï¼š</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">k1 = <span class="number">1</span>/<span class="number">1</span><span class="built_in">i</span>/hb * H * <span class="built_in">psi</span>(:,n);</span><br><span class="line">k2 = <span class="number">1</span>/<span class="number">1</span><span class="built_in">i</span>/hb * H * (<span class="built_in">psi</span>(:,n) + <span class="number">0.5</span>*dt*k1);</span><br><span class="line">k3 = <span class="number">1</span>/<span class="number">1</span><span class="built_in">i</span>/hb * H * (<span class="built_in">psi</span>(:,n) + <span class="number">0.5</span>*dt*k2);</span><br><span class="line">k4 = <span class="number">1</span>/<span class="number">1</span><span class="built_in">i</span>/hb * H * (<span class="built_in">psi</span>(:,n) + dt*k3);</span><br><span class="line"><span class="built_in">psi</span>(:,n+<span class="number">1</span>) = <span class="built_in">psi</span>(:,n) + (dt/<span class="number">6</span>) * (k1 + <span class="number">2</span>*k2 + <span class="number">2</span>*k3 + k4);</span><br></pre></td></tr></table></figure><h2 id="äºŒç»´çƒ­ä¼ å¯¼æ–¹ç¨‹çš„æœ‰é™å·®åˆ†æ±‚æ³•"><a href="#äºŒç»´çƒ­ä¼ å¯¼æ–¹ç¨‹çš„æœ‰é™å·®åˆ†æ±‚æ³•" class="headerlink" title="äºŒç»´çƒ­ä¼ å¯¼æ–¹ç¨‹çš„æœ‰é™å·®åˆ†æ±‚æ³•"></a>äºŒç»´çƒ­ä¼ å¯¼æ–¹ç¨‹çš„æœ‰é™å·®åˆ†æ±‚æ³•</h2><p>æˆ‘ä»¬è¿™é‡Œå‡è®¾èŒƒå›´æ˜¯$[0,l_x]\times [0,l_y]$çš„çŸ©å½¢é¢ç§¯ã€‚</p><script type="math/tex; mode=display">\frac{\partial u}{\partial t}(x,y,t) = a^2(\frac{\partial^2}{\partial x^2}u(x,y,t)+\frac{\partial^2}{\partial y^2}u(x,y,t))+f(x,y,t)</script><script type="math/tex; mode=display">u|_{x=0} = \mu_1(y,t) \quad, \quad u|_{x=L_x} = \mu_2(y,t)</script><script type="math/tex; mode=display">u|_{y=0} = \mu_3(x,t) \quad, \quad u|_{x=L_y} = \mu_4(x,t)</script><script type="math/tex; mode=display">u|_{t=0} = u_0(x,y)</script><p>é¦–å…ˆä¾æ—§å¯¹x,yè¿›è¡Œç¦»æ•£åŒ–å¤„ç†ï¼š</p><script type="math/tex; mode=display">x = 0 + (i-1)\Delta x</script><script type="math/tex; mode=display">y = 0 + (i-1)\Delta y</script><script type="math/tex; mode=display">i = 1,2,...,N_x + 1</script><script type="math/tex; mode=display">j = 1,2,...,N_y + 1</script><script type="math/tex; mode=display">l_x = N_x\Delta x</script><script type="math/tex; mode=display">l_y = N_y\Delta y</script><p>å¾—åˆ°ï¼š</p><script type="math/tex; mode=display">\frac{u_{i,j}^{n+1} - u_{i,j}^n}{\Delta t} = a^2 \left( \frac{u_{i+1,j}^n - 2u_{i,j}^n + u_{i-1,j}^n}{\Delta x^2} + \frac{u_{i,j+1}^n - 2u_{i,j}^n + u_{i,j-1}^n}{\Delta y^2} \right)</script><p>ç”±äº$U^n$æ˜¯ä¸€ä¸ª(x,y)çš„çŸ©é˜µï¼Œæ‰€ä»¥$U^n$çš„æ¯ä¸€åˆ—éƒ½å¯ä»¥è®¤ä¸ºå‰ä¸€åˆ—xã€ä¸­é—´ä¸€åˆ—xä¸æœ€åä¸€åˆ—xçš„ä¸­å¿ƒå·®åˆ†å…¬å¼ï¼ŒåŒæ ·ï¼Œå¯¹$U^n$è¿›è¡Œè½¬ç½®æ¥è®¡ç®—yæ–¹å‘çš„ï¼Œç”±äºAæ˜¯å¯¹ç§°çŸ©é˜µï¼Œæ‰€ä»¥Açš„è½¬ç½®è¿˜æ˜¯Aã€‚</p><script type="math/tex; mode=display">\frac{\partial^2 u}{\partial x^2} = \frac{1}{\Delta x^2}AU^{n}</script><script type="math/tex; mode=display">\frac{\partial^2 u}{\partial y^2} = \frac{1}{\Delta y^2}U^nA</script><p>åˆ™æœ‰æ˜¾å¼å·®åˆ†æ ¼å¼ï¼š</p><script type="math/tex; mode=display">U^{n+1} = U^n + a^2(\frac{1}{\Delta x^2}AU^{n}+\frac{1}{\Delta x^2}U^nA)\Delta t+F^n\Delta t</script><p>è¿™é‡Œä¹Ÿè¦å¿½ç•¥Açš„ç¬¬ä¸€è¡Œä¸æœ€åä¸€è¡Œï¼Œé€šè¿‡è¾¹ç•Œæ¡ä»¶æ¥è®¡ç®—ã€‚</p><p>å…ˆä»¥è¾¹ç•Œæ¡ä»¶ä¸º0çš„ç®€å•æƒ…å†µä¸¾ä¾‹ï¼Œè¿™æ ·å°±ä¸è¦è€ƒè™‘è¾¹ç•Œçš„è®¡ç®—ï¼Œç›´æ¥èµ‹å€¼U0å³å¯ï¼š</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">clear,clc;</span><br><span class="line">dx = <span class="number">0.05</span>;</span><br><span class="line">Lx = <span class="number">1</span>;</span><br><span class="line">x = <span class="number">0</span>:dx:Lx;</span><br><span class="line">dy = <span class="number">0.05</span>;</span><br><span class="line">Ly = <span class="number">1</span>;</span><br><span class="line">y = <span class="number">0</span>:dy:Ly;</span><br><span class="line">A1 = <span class="number">-2</span>*<span class="built_in">eye</span>(<span class="built_in">length</span>(x))+<span class="built_in">diag</span>(<span class="built_in">ones</span>(<span class="number">1</span>,<span class="built_in">length</span>(x)<span class="number">-1</span>),<span class="number">1</span>)+<span class="built_in">diag</span>(<span class="built_in">ones</span>(<span class="number">1</span>,<span class="built_in">length</span>(x)<span class="number">-1</span>),<span class="number">-1</span>);</span><br><span class="line">A2 = <span class="number">-2</span>*<span class="built_in">eye</span>(<span class="built_in">length</span>(y))+<span class="built_in">diag</span>(<span class="built_in">ones</span>(<span class="number">1</span>,<span class="built_in">length</span>(y)<span class="number">-1</span>),<span class="number">1</span>)+<span class="built_in">diag</span>(<span class="built_in">ones</span>(<span class="number">1</span>,<span class="built_in">length</span>(y)<span class="number">-1</span>),<span class="number">-1</span>);</span><br><span class="line">dt = <span class="number">0.0001</span>;</span><br><span class="line">t = <span class="number">0</span>:dt:<span class="number">1</span>;</span><br><span class="line">[Y,X] = <span class="built_in">meshgrid</span>(Y,X);</span><br><span class="line">U0 = <span class="built_in">exp</span>(<span class="number">-10</span>*((X<span class="number">-1</span>/<span class="number">2</span>).^<span class="number">2</span>+(Y<span class="number">-1</span>/<span class="number">2</span>).^<span class="number">2</span>));</span><br><span class="line">U = U0;</span><br><span class="line">a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span> n = <span class="number">1</span>:<span class="built_in">length</span>(t)<span class="number">-1</span></span><br><span class="line">    U = U + a^<span class="number">2</span>*(<span class="number">1</span>/dx^<span class="number">2</span>*A1*U+<span class="number">1</span>/dy^<span class="number">2</span>*U*A2)*dt;</span><br><span class="line">    surf(X,Y,U);</span><br><span class="line">    axis([x(<span class="number">1</span>) x(<span class="keyword">end</span>) y(<span class="number">1</span>) y(<span class="keyword">end</span>) <span class="number">0</span> <span class="number">1</span>]);</span><br><span class="line">    getframe;</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>åŠ ä¸Šè¾¹ç•Œæ¡ä»¶åå°±å˜ä¸ºäº†ï¼š</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">clear,clc;</span><br><span class="line">dx = <span class="number">0.05</span>;<span class="comment">% æ—¶é—´å’Œç©ºé—´ç²¾åº¦è¦åŒæ—¶å¢åŠ </span></span><br><span class="line">Lx = <span class="number">1</span>;</span><br><span class="line">x = <span class="number">0</span>:dx:Lx;</span><br><span class="line">dy = <span class="number">0.05</span>;</span><br><span class="line">Ly = <span class="number">1</span>;</span><br><span class="line">y = <span class="number">0</span>:dy:Ly;</span><br><span class="line">A1 = <span class="number">-2</span>*<span class="built_in">eye</span>(<span class="built_in">length</span>(x))+<span class="built_in">diag</span>(<span class="built_in">ones</span>(<span class="number">1</span>,<span class="built_in">length</span>(x)<span class="number">-1</span>),<span class="number">1</span>)+<span class="built_in">diag</span>(<span class="built_in">ones</span>(<span class="number">1</span>,<span class="built_in">length</span>(x)<span class="number">-1</span>),<span class="number">-1</span>);</span><br><span class="line">A2 = <span class="number">-2</span>*<span class="built_in">eye</span>(<span class="built_in">length</span>(y))+<span class="built_in">diag</span>(<span class="built_in">ones</span>(<span class="number">1</span>,<span class="built_in">length</span>(y)<span class="number">-1</span>),<span class="number">1</span>)+<span class="built_in">diag</span>(<span class="built_in">ones</span>(<span class="number">1</span>,<span class="built_in">length</span>(y)<span class="number">-1</span>),<span class="number">-1</span>);</span><br><span class="line">dt = <span class="number">0.0001</span>;</span><br><span class="line">t = <span class="number">0</span>:dt:<span class="number">1</span>;</span><br><span class="line">m1 = x&#x27;;</span><br><span class="line">m2 = x&#x27;.^<span class="number">2</span>;</span><br><span class="line">m3 = y;</span><br><span class="line">m4 = <span class="number">2</span> - y;</span><br><span class="line">[X,Y] = <span class="built_in">meshgrid</span>(x,y);</span><br><span class="line">U0 = <span class="built_in">exp</span>(<span class="number">-10</span>*((X<span class="number">-1</span>/<span class="number">2</span>).^<span class="number">2</span>+(Y<span class="number">-1</span>/<span class="number">2</span>).^<span class="number">2</span>));</span><br><span class="line">U = U0;</span><br><span class="line">a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span> n = <span class="number">1</span>:<span class="built_in">length</span>(t)<span class="number">-1</span></span><br><span class="line">    U = U + a^<span class="number">2</span>*(<span class="number">1</span>/dx^<span class="number">2</span>*A1*U+<span class="number">1</span>/dy^<span class="number">2</span>*U*A2)*dt;</span><br><span class="line">    U(:,<span class="number">1</span>) = m1;</span><br><span class="line">    U(:,<span class="keyword">end</span>) = m2;</span><br><span class="line">    U(<span class="number">1</span>,:) = m3;</span><br><span class="line">    U(<span class="keyword">end</span>,:)=m4;</span><br><span class="line">    surf(X,Y,U);</span><br><span class="line">    axis([x(<span class="number">1</span>) x(<span class="keyword">end</span>) y(<span class="number">1</span>) y(<span class="keyword">end</span>) <span class="number">0</span> <span class="number">1</span>]);</span><br><span class="line">    getframe;</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><h2 id="äºŒç»´è–›å®šè°”æ–¹ç¨‹çš„æœ‰é™å·®åˆ†æ±‚æ³•"><a href="#äºŒç»´è–›å®šè°”æ–¹ç¨‹çš„æœ‰é™å·®åˆ†æ±‚æ³•" class="headerlink" title="äºŒç»´è–›å®šè°”æ–¹ç¨‹çš„æœ‰é™å·®åˆ†æ±‚æ³•"></a>äºŒç»´è–›å®šè°”æ–¹ç¨‹çš„æœ‰é™å·®åˆ†æ±‚æ³•</h2><script type="math/tex; mode=display">i\hbar \frac{\partial \psi(x, y, t)}{\partial t} = -\frac{\hbar^2}{2m} \left( \frac{\partial^2 \psi(x, y, t)}{\partial x^2} + \frac{\partial^2 \psi(x, y, t)}{\partial y^2} \right) + V(x, y) \psi(x, y, t)</script><p>å¯¹äºŒé˜¶å¯¼æ•°è¿›è¡Œç¦»æ•£åŒ–ï¼Œå¾—åˆ°ï¼š</p><script type="math/tex; mode=display">\frac{\partial^2 \psi}{\partial x^2} \approx \frac{\psi_{i+1,j}^n - 2\psi_{i,j}^n + \psi_{i-1,j}^n}{\Delta x^2}</script><script type="math/tex; mode=display">\frac{\partial^2 \psi}{\partial y^2} \approx \frac{\psi_{i,j+1}^n - 2\psi_{i,j}^n + \psi_{i,j-1}^n}{\Delta y^2}</script><p>å¯¹æ—¶é—´è¿›è¡Œç¦»æ•£ï¼Œå¾—åˆ°ï¼š</p><script type="math/tex; mode=display">\frac{\partial \psi}{\partial t} \approx \frac{\psi_{i,j}^{n+1} - \psi_{i,j}^n}{\Delta t}</script><p>ç¦»æ•£åŒ–åå¾—åˆ°ï¼š</p><script type="math/tex; mode=display">i\hbar \frac{\psi_{i,j}^{n+1} - \psi_{i,j}^n}{\Delta t} = -\frac{\hbar^2}{2m} \left( \frac{\psi_{i+1,j}^n - 2\psi_{i,j}^n + \psi_{i-1,j}^n}{\Delta x^2} + \frac{\psi_{i,j+1}^n - 2\psi_{i,j}^n + \psi_{i,j-1}^n}{\Delta y^2} \right) + V_{i,j} \psi_{i,j}^n</script><p>ä¸è€ƒè™‘è¾¹ç•Œæ¡ä»¶çš„ç®€å•æƒ…å†µï¼š</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">clear,clc;</span><br><span class="line">dx = <span class="number">0.05</span><span class="comment">% æ—¶é—´å’Œç©ºé—´ç²¾åº¦è¦åŒæ—¶å¢åŠ </span></span><br><span class="line">Lx = <span class="number">4</span>;</span><br><span class="line">x = -Lx:dx:Lx;</span><br><span class="line">dy = <span class="number">0.05</span>;</span><br><span class="line">Ly = <span class="number">4</span>;</span><br><span class="line">y = -Ly:dy:Ly;</span><br><span class="line">A1 = <span class="number">-2</span>*<span class="built_in">eye</span>(<span class="built_in">length</span>(x))+<span class="built_in">diag</span>(<span class="built_in">ones</span>(<span class="number">1</span>,<span class="built_in">length</span>(x)<span class="number">-1</span>),<span class="number">1</span>)+<span class="built_in">diag</span>(<span class="built_in">ones</span>(<span class="number">1</span>,<span class="built_in">length</span>(x)<span class="number">-1</span>),<span class="number">-1</span>);</span><br><span class="line">A2 = <span class="number">-2</span>*<span class="built_in">eye</span>(<span class="built_in">length</span>(y))+<span class="built_in">diag</span>(<span class="built_in">ones</span>(<span class="number">1</span>,<span class="built_in">length</span>(y)<span class="number">-1</span>),<span class="number">1</span>)+<span class="built_in">diag</span>(<span class="built_in">ones</span>(<span class="number">1</span>,<span class="built_in">length</span>(y)<span class="number">-1</span>),<span class="number">-1</span>);</span><br><span class="line">dt = <span class="number">0.0001</span>;</span><br><span class="line">t = <span class="number">0</span>:dt:<span class="number">1</span>;</span><br><span class="line">m = <span class="number">1</span>;</span><br><span class="line">[Y,X] = <span class="built_in">meshgrid</span>(y,x);</span><br><span class="line">U0 = <span class="built_in">exp</span>(<span class="number">-20</span>*((X<span class="number">-1</span>/<span class="number">2</span>).^<span class="number">2</span>+(Y<span class="number">-1</span>/<span class="number">2</span>).^<span class="number">2</span>));</span><br><span class="line">U = U0;</span><br><span class="line">hb = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span> n = <span class="number">1</span>:<span class="built_in">length</span>(t)<span class="number">-1</span></span><br><span class="line">    U = U + (<span class="number">1</span><span class="built_in">i</span>*hb/<span class="number">2</span>/m)*(<span class="number">1</span>/dx^<span class="number">2</span>*A1*U+<span class="number">1</span>/dy^<span class="number">2</span>*U*A2)*dt;</span><br><span class="line">    surf(X,Y,<span class="built_in">abs</span>(U.^<span class="number">2</span>));</span><br><span class="line">    axis([x(<span class="number">1</span>) x(<span class="keyword">end</span>) y(<span class="number">1</span>) y(<span class="keyword">end</span>) <span class="number">0</span> <span class="number">1</span>]);</span><br><span class="line">    getframe;</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>åŠ ä¸Š$V(x)$åæ˜¯ï¼š</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">clear,clc;</span><br><span class="line">dx = <span class="number">0.1</span><span class="comment">% æ—¶é—´å’Œç©ºé—´ç²¾åº¦è¦åŒæ—¶å¢åŠ </span></span><br><span class="line">Lx = <span class="number">10</span>;</span><br><span class="line">x = -Lx:dx:Lx;</span><br><span class="line">dy = <span class="number">0.1</span>;</span><br><span class="line">Ly = <span class="number">10</span>;</span><br><span class="line">y = -Ly:dy:Ly;</span><br><span class="line">A1 = <span class="number">-2</span>*<span class="built_in">eye</span>(<span class="built_in">length</span>(x))+<span class="built_in">diag</span>(<span class="built_in">ones</span>(<span class="number">1</span>,<span class="built_in">length</span>(x)<span class="number">-1</span>),<span class="number">1</span>)+<span class="built_in">diag</span>(<span class="built_in">ones</span>(<span class="number">1</span>,<span class="built_in">length</span>(x)<span class="number">-1</span>),<span class="number">-1</span>);</span><br><span class="line">A2 = <span class="number">-2</span>*<span class="built_in">eye</span>(<span class="built_in">length</span>(y))+<span class="built_in">diag</span>(<span class="built_in">ones</span>(<span class="number">1</span>,<span class="built_in">length</span>(y)<span class="number">-1</span>),<span class="number">1</span>)+<span class="built_in">diag</span>(<span class="built_in">ones</span>(<span class="number">1</span>,<span class="built_in">length</span>(y)<span class="number">-1</span>),<span class="number">-1</span>);</span><br><span class="line">dt = <span class="number">0.0001</span>;</span><br><span class="line">t = <span class="number">0</span>:dt:<span class="number">1</span>;</span><br><span class="line">m = <span class="number">1</span>;</span><br><span class="line">wx = <span class="number">3</span>;</span><br><span class="line">wy = <span class="number">3</span>;</span><br><span class="line">[Y,X] = <span class="built_in">meshgrid</span>(y,x);</span><br><span class="line">V = <span class="number">1</span>/<span class="number">2</span>*m*wx^<span class="number">2</span>*X.^<span class="number">2</span>+<span class="number">1</span>/<span class="number">2</span>*m*wy^<span class="number">2</span>*Y.^<span class="number">2</span>;</span><br><span class="line">D = <span class="number">3</span>;</span><br><span class="line">U0 = <span class="built_in">exp</span>(-((X<span class="number">-5</span>).^<span class="number">2</span>+Y.^<span class="number">2</span>)/D^<span class="number">2</span>).*<span class="built_in">exp</span>(<span class="number">1</span><span class="built_in">i</span>*<span class="number">10</span>*X);</span><br><span class="line">U = U0;</span><br><span class="line">hb = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span> n = <span class="number">1</span>:<span class="built_in">length</span>(t)<span class="number">-1</span></span><br><span class="line">    U = U + (<span class="number">1</span><span class="built_in">i</span>*hb/<span class="number">2</span>/m)*(<span class="number">1</span>/dx^<span class="number">2</span>*A1*U+<span class="number">1</span>/dy^<span class="number">2</span>*U*A2)*dt+<span class="number">1</span>/hb/<span class="number">1</span><span class="built_in">i</span>*V.*U*dt;</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">mod</span>(n,<span class="number">50</span>) == <span class="number">1</span></span><br><span class="line">    surf(X,Y,<span class="built_in">abs</span>(U.^<span class="number">2</span>));</span><br><span class="line">    shading interp</span><br><span class="line">    axis([x(<span class="number">1</span>) x(<span class="keyword">end</span>) y(<span class="number">1</span>) y(<span class="keyword">end</span>) <span class="number">0</span> <span class="number">1</span>]);</span><br><span class="line">    getframe;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>å¦‚æœç²¾åº¦å¤ªä½ï¼Œå¯ä»¥æ›¿æ¢ä¸ºï¼š</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">% Compute k1</span></span><br><span class="line">    K1 = (<span class="number">1</span><span class="built_in">i</span> * hb / <span class="number">2</span> / m) * (<span class="number">1</span> / dx^<span class="number">2</span> * (A1 * U) + <span class="number">1</span> / dy^<span class="number">2</span> * (U * A2)) * dt ...</span><br><span class="line">          + <span class="number">1</span> / hb / <span class="number">1</span><span class="built_in">i</span> * (V .* U) * dt;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">% Compute k2</span></span><br><span class="line">    U_half = U + <span class="number">0.5</span> * K1;</span><br><span class="line">    K2 = (<span class="number">1</span><span class="built_in">i</span> * hb / <span class="number">2</span> / m) * (<span class="number">1</span> / dx^<span class="number">2</span> * (A1 * U_half) + <span class="number">1</span> / dy^<span class="number">2</span> * (U_half * A2)) * dt ...</span><br><span class="line">          + <span class="number">1</span> / hb / <span class="number">1</span><span class="built_in">i</span> * (V .* U_half) * dt;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">% Compute k3</span></span><br><span class="line">    U_half = U + <span class="number">0.5</span> * K2;</span><br><span class="line">    K3 = (<span class="number">1</span><span class="built_in">i</span> * hb / <span class="number">2</span> / m) * (<span class="number">1</span> / dx^<span class="number">2</span> * (A1 * U_half) + <span class="number">1</span> / dy^<span class="number">2</span> * (U_half * A2)) * dt ...</span><br><span class="line">          + <span class="number">1</span> / hb / <span class="number">1</span><span class="built_in">i</span> * (V .* U_half) * dt;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">% Compute k4</span></span><br><span class="line">    U_full = U + K3;</span><br><span class="line">    K4 = (<span class="number">1</span><span class="built_in">i</span> * hb / <span class="number">2</span> / m) * (<span class="number">1</span> / dx^<span class="number">2</span> * (A1 * U_full) + <span class="number">1</span> / dy^<span class="number">2</span> * (U_full * A2)) * dt ...</span><br><span class="line">          + <span class="number">1</span> / hb / <span class="number">1</span><span class="built_in">i</span> * (V .* U_full) * dt;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">% Update U</span></span><br><span class="line">    U = U + (K1 + <span class="number">2</span> * K2 + <span class="number">2</span> * K3 + K4) / <span class="number">6</span>;</span><br></pre></td></tr></table></figure><h2 id="äºŒç»´æ³Šæ¾æ–¹ç¨‹"><a href="#äºŒç»´æ³Šæ¾æ–¹ç¨‹" class="headerlink" title="äºŒç»´æ³Šæ¾æ–¹ç¨‹"></a>äºŒç»´æ³Šæ¾æ–¹ç¨‹</h2><p>æ³Šæ¾æ–¹ç¨‹å±äºæ¤­åœ†å½¢æ–¹ç¨‹ï¼Œå‡è®¾ä¸è€ƒè™‘zæ–¹å‘çš„å·®å¼‚æ€§ï¼Œé‚£ä¹ˆå¯ä»¥å°†ä¸‰ç»´çš„æ³Šæ¾æ–¹ç¨‹è¡¨è¾¾å¼è½¬æ¢ä¸ºäºŒç»´ï¼š</p><script type="math/tex; mode=display">(\frac{\partial^2}{\partial x^2}+\frac{\partial^2}{\partial y^2})u(x,y)=-\frac{\rho(x,y)}{\epsilon_0}</script><p>å®é™…ä¸Šï¼Œå¯¹äºäºŒç»´æ³Šæ¾æ–¹ç¨‹å¤„ç†å’Œå‰é¢æ˜¯å¤§åŒå°å¼‚çš„ï¼Œé€šè¿‡ç»™å®šä¸€ä¸ªåˆå§‹æ¡ä»¶ï¼Œæ¥è®©å…¶éšæ—¶é—´è¿›è¡Œå˜åŒ–ï¼Œå¦‚æœæœ€åè§£æ”¶æ•›åä¸æ—¶é—´æ— å…³ï¼Œæˆ‘ä»¬å°±è®¤ä¸ºå¾—åˆ°äº†è¿™ä¸ªæ–¹ç¨‹çš„è§£ã€‚</p><p>æˆ‘ä»¬å°†äºŒç»´æ³Šæ¾æ–¹ç¨‹å’ŒäºŒç»´çƒ­ä¼ å¯¼æ–¹ç¨‹è¿›è¡Œå¯¹æ¯”ï¼Œä¼šå‘ç°å¾ˆåƒï¼š</p><script type="math/tex; mode=display">\frac{\partial u}{\partial t}(x,y,t) = a^2(\frac{\partial^2}{\partial x^2}u(x,y,t)+\frac{\partial^2}{\partial y^2}u(x,y,t))+f(x,y,t)</script><p>äºŒç»´æ³Šæ¾æ–¹ç¨‹æ˜¯é™æ€çš„ï¼Œè€ŒäºŒç»´çƒ­ä¼ å¯¼æ–¹ç¨‹æ˜¯åŠ¨æ€çš„ï¼Œä½†æ˜¯å®ƒä»¬çš„æ•°å­¦è¡¨è¾¾å¼å¾ˆå¤§ä¸€éƒ¨åˆ†çš„ç»“æ„æ˜¯ä¸€æ ·çš„ï¼ŒåŒºåˆ«å°±æ˜¯å®ƒä»¬çš„ç³»æ•°ä¸åŒï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åˆ©ç”¨çƒ­ä¼ å¯¼æ–¹ç¨‹çš„æ–¹æ³•å»å¿«é€Ÿæ±‚è§£æ³Šæ¾æ–¹ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥å°†$\rho(x,y)$ç±»æ¯”æˆ$f(x,y,t)$å‡½æ•°ï¼Œç„¶ååªè¦å½“$\frac{\partial u}{\partial t}(x,y,t)=0$æ—¶ï¼Œæ³Šæ¾æ–¹ç¨‹çš„è§£æ³•å°±ä¸äºŒç»´çƒ­ä¼ å¯¼æ–¹ç¨‹è§£æ³•ä¸€æ ·äº†ï¼Œè¿™ç§æ–¹æ³•å¯ä»¥å¤§å¤§å‡å°‘ç¼–ç¨‹çš„éš¾åº¦ï¼Œè¿™é‡Œçš„æ„æ€æ˜¯ï¼Œ å½“$u(x,y,t)$ä¸æ—¶é—´å˜åŒ–æ— å…³åï¼Œç›¸å½“äºæ³Šæ¾æ–¹ç¨‹å…¶ä½™é¡¹éšæ—¶é—´æ¼”åŒ–å®Œåå˜å¾—ä¸æ—¶é—´æ— å…³ï¼Œæœ€åå˜å¾—ç¨³å®šï¼Œä¹Ÿå°±æ˜¯æ³Šæ¾æ–¹ç¨‹æœ€åçš„ç¨³å®šè§£ï¼Œæ³Šæ¾æ–¹ç¨‹çš„æ±‚è§£å¯ä»¥çœ‹ä½œæ˜¯çƒ­ä¼ å¯¼æ–¹ç¨‹åœ¨æ—¶é—´è¶‹äºç¨³å®šçš„æé™æƒ…å†µã€‚</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">clear,clc;</span><br><span class="line">dx = <span class="number">0.02</span><span class="comment">% æ—¶é—´å’Œç©ºé—´ç²¾åº¦è¦åŒæ—¶å¢åŠ </span></span><br><span class="line">Lx = <span class="number">1</span>;</span><br><span class="line">x = <span class="number">0</span>:dx:Lx;</span><br><span class="line">dy = <span class="number">0.1</span>;</span><br><span class="line">Ly = <span class="number">1</span>;</span><br><span class="line">y = <span class="number">0</span>:dy:Ly;</span><br><span class="line">A1 = <span class="number">-2</span>*<span class="built_in">eye</span>(<span class="built_in">length</span>(x))+<span class="built_in">diag</span>(<span class="built_in">ones</span>(<span class="number">1</span>,<span class="built_in">length</span>(x)<span class="number">-1</span>),<span class="number">1</span>)+<span class="built_in">diag</span>(<span class="built_in">ones</span>(<span class="number">1</span>,<span class="built_in">length</span>(x)<span class="number">-1</span>),<span class="number">-1</span>);</span><br><span class="line">A2 = <span class="number">-2</span>*<span class="built_in">eye</span>(<span class="built_in">length</span>(y))+<span class="built_in">diag</span>(<span class="built_in">ones</span>(<span class="number">1</span>,<span class="built_in">length</span>(y)<span class="number">-1</span>),<span class="number">1</span>)+<span class="built_in">diag</span>(<span class="built_in">ones</span>(<span class="number">1</span>,<span class="built_in">length</span>(y)<span class="number">-1</span>),<span class="number">-1</span>);</span><br><span class="line">dt = <span class="number">0.0001</span>;</span><br><span class="line">t = <span class="number">0</span>:dt:<span class="number">1</span>;</span><br><span class="line">m = <span class="number">1</span>;</span><br><span class="line">wx = <span class="number">3</span>;</span><br><span class="line">wy = <span class="number">3</span>;</span><br><span class="line">m1 = <span class="built_in">sin</span>(<span class="built_in">pi</span>*x/Lx);</span><br><span class="line">m2 = -<span class="built_in">sin</span>(<span class="built_in">pi</span>*x/Lx);</span><br><span class="line">m3 = <span class="number">0</span>*y&#x27;;</span><br><span class="line">m4 = <span class="number">0</span>*y&#x27;;</span><br><span class="line">[X,Y] = <span class="built_in">meshgrid</span>(x,y);</span><br><span class="line">D = <span class="number">0.2</span>;</span><br><span class="line">U0 = <span class="built_in">exp</span>(<span class="number">-10</span>*((X<span class="number">-1</span>/<span class="number">2</span>).^<span class="number">2</span>+(Y<span class="number">-1</span>/<span class="number">2</span>).^<span class="number">2</span>));</span><br><span class="line">U = U0;</span><br><span class="line">e0 = <span class="number">1</span>;</span><br><span class="line">rou = <span class="built_in">exp</span>(<span class="number">-10</span>*((X<span class="number">-1</span>/<span class="number">2</span>).^<span class="number">2</span>+(Y<span class="number">-1</span>/<span class="number">2</span>).^<span class="number">2</span>)/D^<span class="number">2</span>);</span><br><span class="line"><span class="keyword">for</span> n = <span class="number">1</span>:<span class="built_in">length</span>(t)<span class="number">-1</span></span><br><span class="line">    U = U + e0*(<span class="number">1</span>/dy^<span class="number">2</span>*A2*U+<span class="number">1</span>/dx^<span class="number">2</span>*U*A1)*dt+rou*dt;</span><br><span class="line">    U(<span class="number">1</span>,:)=m1;</span><br><span class="line">    U(<span class="keyword">end</span>,:)=m2;</span><br><span class="line">    U(:,<span class="number">1</span>)=m3;</span><br><span class="line">    U(:,<span class="keyword">end</span>)=m4;</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">mod</span>(n,<span class="number">50</span>) == <span class="number">1</span></span><br><span class="line">    surf(X,Y,U);</span><br><span class="line">    shading interp</span><br><span class="line">    axis([x(<span class="number">1</span>) x(<span class="keyword">end</span>) y(<span class="number">1</span>) y(<span class="keyword">end</span>) <span class="number">-1</span> <span class="number">1</span>]);</span><br><span class="line">    getframe;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">[Ex,Ey]=gradient(-U,dx,dy);</span><br><span class="line">contour(X,Y,U)<span class="comment">% ç­‰åŠ¿çº¿</span></span><br><span class="line"><span class="built_in">hold</span> on</span><br><span class="line">quiver(X,Y,Ex,Ey)</span><br><span class="line">axis([x(<span class="number">1</span>) x(<span class="keyword">end</span>) y(<span class="number">1</span>) y(<span class="keyword">end</span>)])</span><br><span class="line">axis equal</span><br></pre></td></tr></table></figure><h2 id="äºŒç»´æ‹‰æ™®æ‹‰æ–¯æ–¹ç¨‹"><a href="#äºŒç»´æ‹‰æ™®æ‹‰æ–¯æ–¹ç¨‹" class="headerlink" title="äºŒç»´æ‹‰æ™®æ‹‰æ–¯æ–¹ç¨‹"></a>äºŒç»´æ‹‰æ™®æ‹‰æ–¯æ–¹ç¨‹</h2><p>å®é™…ä¸Šå°±æ˜¯æ³Šæ¾æ–¹ç¨‹çš„$\rho(x,y)=0$ï¼Œå¾—åˆ°çš„æ–¹ç¨‹å°±æ˜¯æ‹‰æ™®æ‹‰æ–¯æ–¹ç¨‹ã€‚</p><script type="math/tex; mode=display">\frac{\partial^2}{\partial x^2}u(x,y)+\frac{\partial^2}{\partial y^2}u(x,y)=0</script><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">clear,clc;</span><br><span class="line">dx = <span class="number">0.02</span><span class="comment">% æ—¶é—´å’Œç©ºé—´ç²¾åº¦è¦åŒæ—¶å¢åŠ </span></span><br><span class="line">Lx = <span class="number">1</span>;</span><br><span class="line">x = <span class="number">0</span>:dx:Lx;</span><br><span class="line">dy = <span class="number">0.1</span>;</span><br><span class="line">Ly = <span class="number">1</span>;</span><br><span class="line">y = <span class="number">0</span>:dy:Ly;</span><br><span class="line">A1 = <span class="number">-2</span>*<span class="built_in">eye</span>(<span class="built_in">length</span>(x))+<span class="built_in">diag</span>(<span class="built_in">ones</span>(<span class="number">1</span>,<span class="built_in">length</span>(x)<span class="number">-1</span>),<span class="number">1</span>)+<span class="built_in">diag</span>(<span class="built_in">ones</span>(<span class="number">1</span>,<span class="built_in">length</span>(x)<span class="number">-1</span>),<span class="number">-1</span>);</span><br><span class="line">A2 = <span class="number">-2</span>*<span class="built_in">eye</span>(<span class="built_in">length</span>(y))+<span class="built_in">diag</span>(<span class="built_in">ones</span>(<span class="number">1</span>,<span class="built_in">length</span>(y)<span class="number">-1</span>),<span class="number">1</span>)+<span class="built_in">diag</span>(<span class="built_in">ones</span>(<span class="number">1</span>,<span class="built_in">length</span>(y)<span class="number">-1</span>),<span class="number">-1</span>);</span><br><span class="line">dt = <span class="number">0.0001</span>;</span><br><span class="line">t = <span class="number">0</span>:dt:<span class="number">1</span>;</span><br><span class="line">m = <span class="number">1</span>;</span><br><span class="line">wx = <span class="number">3</span>;</span><br><span class="line">wy = <span class="number">3</span>;</span><br><span class="line">m1 = <span class="built_in">sin</span>(<span class="built_in">pi</span>*x/Lx);</span><br><span class="line">m2 = -<span class="built_in">sin</span>(<span class="built_in">pi</span>*x/Lx);</span><br><span class="line">m3 = <span class="number">0</span>*y&#x27;;</span><br><span class="line">m4 = <span class="number">0</span>*y&#x27;;</span><br><span class="line">[X,Y] = <span class="built_in">meshgrid</span>(x,y);</span><br><span class="line">D = <span class="number">3</span>;</span><br><span class="line">U0 = <span class="built_in">exp</span>(-(X.^<span class="number">2</span>+Y.^<span class="number">2</span>)/D^<span class="number">2</span>);</span><br><span class="line">U = U0;</span><br><span class="line">e0 = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span> n = <span class="number">1</span>:<span class="built_in">length</span>(t)<span class="number">-1</span></span><br><span class="line">    U = U + e0*(<span class="number">1</span>/dy^<span class="number">2</span>*A2*U+<span class="number">1</span>/dx^<span class="number">2</span>*U*A1)*dt;</span><br><span class="line">    U(<span class="number">1</span>,:)=m1;</span><br><span class="line">    U(<span class="keyword">end</span>,:)=m2;</span><br><span class="line">    U(:,<span class="number">1</span>)=m3;</span><br><span class="line">    U(:,<span class="keyword">end</span>)=m4;</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">mod</span>(n,<span class="number">50</span>) == <span class="number">1</span></span><br><span class="line">    surf(X,Y,U);</span><br><span class="line">    shading interp</span><br><span class="line">    axis([x(<span class="number">1</span>) x(<span class="keyword">end</span>) y(<span class="number">1</span>) y(<span class="keyword">end</span>) <span class="number">-1</span> <span class="number">1</span>]);</span><br><span class="line">    getframe;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">[Ex,Ey]=gradient(-U,dx,dy);</span><br><span class="line">contour(X,Y,U)<span class="comment">% ç­‰åŠ¿çº¿</span></span><br><span class="line"><span class="built_in">hold</span> on</span><br><span class="line">quiver(X,Y,Ex,Ey)</span><br><span class="line">axis([x(<span class="number">1</span>) x(<span class="keyword">end</span>) y(<span class="number">1</span>) y(<span class="keyword">end</span>)])</span><br><span class="line">axis equal</span><br></pre></td></tr></table></figure><h2 id="ä¸€ç»´æ³¢åŠ¨æ–¹ç¨‹"><a href="#ä¸€ç»´æ³¢åŠ¨æ–¹ç¨‹" class="headerlink" title="ä¸€ç»´æ³¢åŠ¨æ–¹ç¨‹"></a>ä¸€ç»´æ³¢åŠ¨æ–¹ç¨‹</h2><p>ä¸€ç»´æ³¢åŠ¨æ–¹ç¨‹æ˜¯æè¿°ä¸€ç»´ç©ºé—´ä¸­æ³¢åŠ¨ç°è±¡çš„ç»å…¸æ–¹ç¨‹ã€‚å®ƒé€šå¸¸ç”¨äºæ¨¡æ‹Ÿå’Œåˆ†æå£°æ³¢ã€å…‰æ³¢æˆ–å…¶ä»–ç±»å‹çš„æ³¢åœ¨ä¸€ç»´ä»‹è´¨ä¸­çš„ä¼ æ’­ï¼Œä¸€ç»´æ³¢åŠ¨æ–¹ç¨‹æ˜¯åŒæ›²å‹æ³¢åŠ¨æ–¹ç¨‹ï¼Œå…¶è¡¨è¾¾å¼ä¸º:</p><script type="math/tex; mode=display">\frac{\partial^2u}{\partial t^2}=a^2\frac{\partial^2u}{\partial x^2}+f(x,t)</script><p>å‡è®¾$f(x,t)=0$ï¼Œåˆå§‹æ¡ä»¶ä¸ºï¼š</p><script type="math/tex; mode=display">u(0,t) = \mu_1(t) , u(l,t)=\mu_2(t)</script><script type="math/tex; mode=display">u(x,0) = \varphi_1(x) , \frac{\partial u(x,t)}{\partial t}|_{t=0}=\varphi_2(x)</script><p>å½“ä¸è®¾æœ‰è¾¹ç•Œæ¡ä»¶åï¼Œæ ¹æ®è¾¾æœ—è´å°”å…¬å¼ï¼Œæœ‰ï¼š</p><script type="math/tex; mode=display">u(x,t)=f_1(x-at)+f_2(x+at)</script><p>è¿™é‡Œçš„$u(x,t)$ä¾¿æ˜¯æ–¹ç¨‹çš„è§£ï¼Œå¯ä»¥æŠŠ$f_1(x-at)$å’Œ$f_2(x+at)$å½“ä½œä¸¤ä¸ªæ³¢ï¼Œ$a$å°±æ˜¯æ³¢é€Ÿã€‚</p><p>å‡è®¾æ³¢åŠ¨åœ¨ä¸€æ¡æ— é™é•¿çš„å¼¦ä¸Šï¼Œè¿™é‡Œå¯ä»¥ç”¨å‘¨æœŸæ€§è¾¹ç•Œæ¥å®ç°ï¼Œå‡è®¾åˆå§‹æ¡ä»¶ä¸ºï¼š</p><script type="math/tex; mode=display">u|_{t=0}=f_1(x), \frac{\partial u}{\partial t} |_{t=0} = -af_1'(x)</script><p>ä»¤ï¼š</p><script type="math/tex; mode=display">v = \frac{\partial u}{\partial t}</script><p>åˆ™æœ‰ï¼š</p><script type="math/tex; mode=display">u^{n+1}=u^n+v^ndt</script><script type="math/tex; mode=display">v^{n+1}=v^n+\frac{a^2Au^2}{dx^2}dt</script><script type="math/tex; mode=display">u^1=f_1(x),v^1=-af_1'(x)</script><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">clear; clc;</span><br><span class="line">dx = <span class="number">0.01</span>;</span><br><span class="line">Lx = <span class="number">1</span>;</span><br><span class="line">x = -Lx:dx:Lx;</span><br><span class="line">a = <span class="number">1</span>;</span><br><span class="line">n = <span class="built_in">length</span>(x);</span><br><span class="line"><span class="comment">% æ„å»ºç¦»æ•£åŒ–çŸ©é˜µ A</span></span><br><span class="line">A = <span class="number">-2</span>*<span class="built_in">eye</span>(n) + <span class="built_in">diag</span>(<span class="built_in">ones</span>(n<span class="number">-1</span>,<span class="number">1</span>),<span class="number">1</span>) + <span class="built_in">diag</span>(<span class="built_in">ones</span>(n<span class="number">-1</span>,<span class="number">1</span>),<span class="number">-1</span>);</span><br><span class="line"><span class="comment">% å‘¨æœŸè¾¹ç•Œæ¡ä»¶</span></span><br><span class="line">A(<span class="number">1</span>,n) = <span class="number">1</span>;</span><br><span class="line">A(n,<span class="number">1</span>) = <span class="number">1</span>;</span><br><span class="line">dt = <span class="number">0.001</span>;</span><br><span class="line">t = <span class="number">0</span>:dt:<span class="number">4</span>;</span><br><span class="line">u = <span class="built_in">zeros</span>(n, <span class="built_in">length</span>(t));</span><br><span class="line">v = <span class="built_in">zeros</span>(n, <span class="built_in">length</span>(t));</span><br><span class="line">Dx = <span class="number">0.1</span>;</span><br><span class="line">u0 = <span class="built_in">exp</span>(-x.^<span class="number">2</span>/Dx^<span class="number">2</span>);</span><br><span class="line">v0 = <span class="number">2</span>*a*<span class="built_in">exp</span>(-x.^<span class="number">2</span>/Dx^<span class="number">2</span>).*x/Dx^<span class="number">2</span>;</span><br><span class="line">u(:,<span class="number">1</span>) = u0&#x27;;</span><br><span class="line">v(:,<span class="number">1</span>) = v0&#x27;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">[u_next, v_next]</span> = <span class="title">rk4_step</span><span class="params">(u, v, A, a, dx, dt)</span></span></span><br><span class="line">    k1u = v;</span><br><span class="line">    k1v = a^<span class="number">2</span> * (A * u) / dx^<span class="number">2</span>;</span><br><span class="line">    </span><br><span class="line">    k2u = v + <span class="number">0.5</span> * dt * k1v;</span><br><span class="line">    k2v = a^<span class="number">2</span> * (A * (u + <span class="number">0.5</span> * dt * k1u)) / dx^<span class="number">2</span>;</span><br><span class="line">    </span><br><span class="line">    k3u = v + <span class="number">0.5</span> * dt * k2v;</span><br><span class="line">    k3v = a^<span class="number">2</span> * (A * (u + <span class="number">0.5</span> * dt * k2u)) / dx^<span class="number">2</span>;</span><br><span class="line">    </span><br><span class="line">    k4u = v + dt * k3v;</span><br><span class="line">    k4v = a^<span class="number">2</span> * (A * (u + dt * k3u)) / dx^<span class="number">2</span>;</span><br><span class="line">    </span><br><span class="line">    u_next = u + (dt / <span class="number">6</span>) * (k1u + <span class="number">2</span>*k2u + <span class="number">2</span>*k3u + k4u);</span><br><span class="line">    v_next = v + (dt / <span class="number">6</span>) * (k1v + <span class="number">2</span>*k2v + <span class="number">2</span>*k3v + k4v);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> n = <span class="number">1</span>:<span class="built_in">length</span>(t)<span class="number">-1</span></span><br><span class="line">    [u(:,n+<span class="number">1</span>), v(:,n+<span class="number">1</span>)] = rk4_step(u(:,n), v(:,n), A, a, dx, dt);</span><br><span class="line">    <span class="built_in">plot</span>(x, u(:,n+<span class="number">1</span>));</span><br><span class="line">    axis([x(<span class="number">1</span>) x(<span class="keyword">end</span>) <span class="number">0</span> <span class="number">1.2</span>]);</span><br><span class="line">    getframe;</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šåªæœ‰ä¸€è‚¡æ³¢ï¼Œå¦‚æœæƒ³å®ç°ä¸¤è‚¡æ³¢çš„å åŠ ï¼Œåªéœ€è¦åœ¨u0å’Œv0å¤„è¿›è¡Œæ›´æ”¹å³å¯ï¼š</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">clear; clc;</span><br><span class="line">dx = <span class="number">0.01</span>;</span><br><span class="line">Lx = <span class="number">1</span>;</span><br><span class="line">x = -Lx:dx:Lx;</span><br><span class="line">a = <span class="number">1</span>;</span><br><span class="line">n = <span class="built_in">length</span>(x);</span><br><span class="line"><span class="comment">% æ„å»ºç¦»æ•£åŒ–çŸ©é˜µ A</span></span><br><span class="line">A = <span class="number">-2</span>*<span class="built_in">eye</span>(n) + <span class="built_in">diag</span>(<span class="built_in">ones</span>(n<span class="number">-1</span>,<span class="number">1</span>),<span class="number">1</span>) + <span class="built_in">diag</span>(<span class="built_in">ones</span>(n<span class="number">-1</span>,<span class="number">1</span>),<span class="number">-1</span>);</span><br><span class="line"><span class="comment">% å‘¨æœŸè¾¹ç•Œæ¡ä»¶</span></span><br><span class="line">A(<span class="number">1</span>,<span class="keyword">end</span>) = <span class="number">1</span>;</span><br><span class="line">A(<span class="keyword">end</span>,<span class="number">1</span>) = <span class="number">1</span>;</span><br><span class="line">dt = <span class="number">0.0001</span>;</span><br><span class="line">t = <span class="number">0</span>:dt:<span class="number">4</span>;</span><br><span class="line">u = <span class="built_in">zeros</span>(n, <span class="built_in">length</span>(t));</span><br><span class="line">v = <span class="built_in">zeros</span>(n, <span class="built_in">length</span>(t));</span><br><span class="line">Dx = <span class="number">0.2</span>;</span><br><span class="line">x0=<span class="number">0.5</span>;</span><br><span class="line">u0 = <span class="built_in">exp</span>(-(x-x0).^<span class="number">2</span>/Dx^<span class="number">2</span>)-<span class="built_in">exp</span>(-(x+x0).^<span class="number">2</span>/Dx^<span class="number">2</span>);</span><br><span class="line">v0 = <span class="number">-2</span>*a*<span class="built_in">exp</span>(-(x-x0).^<span class="number">2</span>/Dx^<span class="number">2</span>).*(x-x0)/Dx^<span class="number">2</span><span class="number">-2</span>*a*<span class="built_in">exp</span>(-(x+x0).^<span class="number">2</span>/Dx^<span class="number">2</span>).*(x+x0)/Dx^<span class="number">2</span>;</span><br><span class="line">u(:,<span class="number">1</span>) = u0&#x27;;</span><br><span class="line">v(:,<span class="number">1</span>) = v0&#x27;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">[u_next, v_next]</span> = <span class="title">rk4_step</span><span class="params">(u, v, A, a, dx, dt)</span></span></span><br><span class="line">    k1u = v;</span><br><span class="line">    k1v = a^<span class="number">2</span> * (A * u) / dx^<span class="number">2</span>;</span><br><span class="line">    </span><br><span class="line">    k2u = v + <span class="number">0.5</span> * dt * k1v;</span><br><span class="line">    k2v = a^<span class="number">2</span> * (A * (u + <span class="number">0.5</span> * dt * k1u)) / dx^<span class="number">2</span>;</span><br><span class="line">    </span><br><span class="line">    k3u = v + <span class="number">0.5</span> * dt * k2v;</span><br><span class="line">    k3v = a^<span class="number">2</span> * (A * (u + <span class="number">0.5</span> * dt * k2u)) / dx^<span class="number">2</span>;</span><br><span class="line">    </span><br><span class="line">    k4u = v + dt * k3v;</span><br><span class="line">    k4v = a^<span class="number">2</span> * (A * (u + dt * k3u)) / dx^<span class="number">2</span>;</span><br><span class="line">    </span><br><span class="line">    u_next = u + (dt / <span class="number">6</span>) * (k1u + <span class="number">2</span>*k2u + <span class="number">2</span>*k3u + k4u);</span><br><span class="line">    v_next = v + (dt / <span class="number">6</span>) * (k1v + <span class="number">2</span>*k2v + <span class="number">2</span>*k3v + k4v);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> n = <span class="number">1</span>:<span class="built_in">length</span>(t)<span class="number">-1</span></span><br><span class="line">    [u(:,n+<span class="number">1</span>), v(:,n+<span class="number">1</span>)] = rk4_step(u(:,n), v(:,n), A, a, dx, dt);</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">mod</span>(n,<span class="number">100</span>)==<span class="number">1</span></span><br><span class="line">    <span class="built_in">plot</span>(x, u(:,n+<span class="number">1</span>));</span><br><span class="line">    axis([x(<span class="number">1</span>) x(<span class="keyword">end</span>) <span class="number">-1</span> <span class="number">2</span>]);</span><br><span class="line">    getframe;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> æ•°å€¼åˆ†æ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°å€¼ç§¯åˆ†ä¸æ•°å€¼å¾®åˆ†(Matlabå®ç°)(Updating...)</title>
      <link href="/2024/08/22/%E6%95%B0%E5%80%BC%E7%A7%AF%E5%88%86%E4%B8%8E%E6%95%B0%E5%80%BC%E5%BE%AE%E5%88%86/"/>
      <url>/2024/08/22/%E6%95%B0%E5%80%BC%E7%A7%AF%E5%88%86%E4%B8%8E%E6%95%B0%E5%80%BC%E5%BE%AE%E5%88%86/</url>
      
        <content type="html"><![CDATA[<h1 id="æ•°å€¼ç§¯åˆ†ä¸æ•°å€¼å¾®åˆ†"><a href="#æ•°å€¼ç§¯åˆ†ä¸æ•°å€¼å¾®åˆ†" class="headerlink" title="æ•°å€¼ç§¯åˆ†ä¸æ•°å€¼å¾®åˆ†"></a>æ•°å€¼ç§¯åˆ†ä¸æ•°å€¼å¾®åˆ†</h1><h2 id="æ•°å€¼ç§¯åˆ†"><a href="#æ•°å€¼ç§¯åˆ†" class="headerlink" title="æ•°å€¼ç§¯åˆ†"></a>æ•°å€¼ç§¯åˆ†</h2><p>æˆ‘ä»¬æ›¾å­¦ä¹ è¿‡ç‰›é¡¿è±å¸ƒå°¼èŒ¨å…¬å¼ï¼Œåªè¦çŸ¥é“F(X)ï¼Œå°±å¯ä»¥æ¥è®¡ç®—å®šç§¯åˆ†ã€‚</p><script type="math/tex; mode=display">\int_a^bf(x)dx = F(b)-F(a)</script><p>ä½†å®é™…ä¸Šï¼Œå¾ˆå¤šå¤æ‚å‡½æ•°çš„åŸå‡½æ•°æˆ‘ä»¬æ˜¯æ— æ³•æ±‚å‡ºå…¶è§£æè§£çš„ï¼Œæ‰€ä»¥æƒ³è¦æ±‚è§£ä»»æ„ä¸€ä¸ªå®šç§¯åˆ†ï¼Œå°±éœ€è¦æ•°å€¼ç§¯åˆ†æ¥è¿›è¡Œæ±‚è§£ã€‚</p><p>åé¢ä»‹ç»çš„è®¸å¤šç§¯åˆ†å…¬å¼éƒ½æ˜¯åœ¨<strong>æœºæ¢°æ±‚ç§¯å…¬å¼</strong>å¾—åˆ°çš„ï¼Œæœºæ¢°æ±‚ç§¯å…¬å¼æ˜¯æœ€ç®€å•çš„åŠæ³•ï¼ŒåŒæ—¶ç²¾åº¦ä¹Ÿå¾ˆä½ã€‚</p><script type="math/tex; mode=display">\int_a^b f(x)dx = \sum_{k=0}^nA_kf(x_k)</script><script type="math/tex; mode=display">\sum_{k=1}^nA_k=b-a</script><p>åœ¨æ­¤åŸºç¡€ä¸Šï¼Œæ ¹æ®ç§¯åˆ†ä¸­å€¼å®šç†ï¼Œä»¥b-aä¸ºåº•ï¼Œ$f(\xi)$ä¸ºé«˜çš„çŸ©å½¢é¢ç§¯ï¼š</p><script type="math/tex; mode=display">\int_a^bf(x)dx = f(\xi)(b-a)</script><p>æ ¹æ®æ¢¯å½¢å…¬å¼ï¼Œå¾—åˆ°<strong>æ¢¯å½¢ç§¯åˆ†å…¬å¼</strong>ï¼š</p><script type="math/tex; mode=display">f(\xi)=\frac{f(a)+f(b)}{2}</script><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">f = @(t) <span class="built_in">sin</span>(t);</span><br><span class="line"></span><br><span class="line"><span class="comment">% æ¢¯å½¢æ³•æ•°å€¼ç§¯åˆ†</span></span><br><span class="line">h = <span class="number">0.01</span>;</span><br><span class="line">t = <span class="number">0</span>:h:<span class="number">10</span>;</span><br><span class="line">n = <span class="built_in">length</span>(t);</span><br><span class="line">s = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:n<span class="number">-1</span></span><br><span class="line">    s = s + <span class="number">0.5</span> * (f(t(<span class="built_in">i</span>)) + f(t(<span class="built_in">i</span>+<span class="number">1</span>))) * h;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% è§£æè§£</span></span><br><span class="line">exact_solution = integral(f, <span class="number">0</span>, <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">fprintf(<span class="string">&#x27;æ•°å€¼ç§¯åˆ†ç»“æœ: %.6f\n&#x27;</span>, s);</span><br><span class="line">fprintf(<span class="string">&#x27;è§£æè§£ç»“æœ: %.6f\n&#x27;</span>, exact_solution);</span><br><span class="line">fprintf(<span class="string">&#x27;è¯¯å·®: %.6f\n&#x27;</span>, <span class="built_in">abs</span>(s - exact_solution));</span><br></pre></td></tr></table></figure><p>å¯ä»¥å¾—åˆ°:</p><script type="math/tex; mode=display">\int_a^b f(x)dx=\frac{f(a)+f(b)}{2}(b-a)</script><p>åˆæˆ–æ˜¯æ ¹æ®ä¸­å€¼å…¬å¼ï¼š</p><script type="math/tex; mode=display">f(\xi)=f(\frac{a+b}{2})</script><p>å¯ä»¥å¾—åˆ°<strong>ä¸­å€¼ç§¯åˆ†å…¬å¼</strong>ï¼š</p><script type="math/tex; mode=display">\int_a^bf(x)dx=f(\frac{a+b}{2})(b-a)</script><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">f = @(t) <span class="built_in">sin</span>(t);</span><br><span class="line"></span><br><span class="line"><span class="comment">% ä¸­ç‚¹æ³•æ•°å€¼ç§¯åˆ†</span></span><br><span class="line">h = <span class="number">0.01</span>;</span><br><span class="line">t = <span class="number">0</span>:h:<span class="number">10</span>;</span><br><span class="line">n = <span class="built_in">length</span>(t);</span><br><span class="line">s = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:n<span class="number">-1</span></span><br><span class="line">    s = s + f(t(<span class="built_in">i</span>) + <span class="number">0.5</span> * h) * h;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">exact_solution = integral(f, <span class="number">0</span>, <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">fprintf(<span class="string">&#x27;æ•°å€¼ç§¯åˆ†ç»“æœ: %.6f\n&#x27;</span>, s);</span><br><span class="line">fprintf(<span class="string">&#x27;è§£æè§£ç»“æœ: %.6f\n&#x27;</span>, exact_solution);</span><br><span class="line">fprintf(<span class="string">&#x27;è¯¯å·®: %.6f\n&#x27;</span>, <span class="built_in">abs</span>(s - exact_solution));</span><br></pre></td></tr></table></figure><p>è¿™ä¸¤ç§éƒ½æ˜¯ç®€å•çš„è¿‘ä¼¼ï¼Œæ›´é«˜ç²¾åº¦çš„è¿‘ä¼¼å¯ä»¥ç”¨<strong>è¾›æ™®æ£®å…¬å¼ï¼ˆSimpson)</strong>ï¼š</p><script type="math/tex; mode=display">\int_a^bf(x)dx\approx \frac{(b-a)}{6}\cdot[f(a)+4f(\frac{a+b}{2})+f(b)]</script><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">f = @(t) <span class="built_in">sin</span>(t);</span><br><span class="line"></span><br><span class="line"><span class="comment">% Simpson method</span></span><br><span class="line">h = <span class="number">0.001</span>; <span class="comment">%</span></span><br><span class="line">t = <span class="number">0</span>:h:<span class="number">20</span>; </span><br><span class="line">n = <span class="built_in">length</span>(t);</span><br><span class="line">s = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:n<span class="number">-1</span></span><br><span class="line">    s = s + (f(t(<span class="built_in">i</span>)) + <span class="number">4</span> * f(t(<span class="built_in">i</span>) + <span class="number">0.5</span> * h) + f(t(<span class="built_in">i</span>) + h)) * h / <span class="number">6</span>;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">exact_solution = integral(f, <span class="number">0</span>, <span class="number">20</span>);</span><br><span class="line">fprintf(<span class="string">&#x27;æ•°å€¼ç§¯åˆ†ç»“æœ: %.6f\n&#x27;</span>, s);</span><br><span class="line">fprintf(<span class="string">&#x27;è§£æè§£ç»“æœ: %.6f\n&#x27;</span>, exact_solution);</span><br><span class="line">fprintf(<span class="string">&#x27;è¯¯å·®: %.6f\n&#x27;</span>, <span class="built_in">abs</span>(s - exact_solution));</span><br></pre></td></tr></table></figure><p>å¯¹æ¢¯å½¢æ³•è¿›è¡Œæ”¹é€ ï¼Œå¾—åˆ°æ–°çš„æ–¹æ³•ï¼š<strong>é¾™è´æ ¼ç§¯åˆ†æ³•</strong>ï¼ˆRomberg Integrationï¼‰æ˜¯ä¸€ç§æ•°å€¼ç§¯åˆ†æ–¹æ³•ï¼Œå®ƒé€šè¿‡é€’å½’åŠ é€Ÿæ¢¯å½¢ç§¯åˆ†æ³•çš„æ”¶æ•›é€Ÿåº¦ï¼Œä»¥æé«˜ç§¯åˆ†çš„ç²¾åº¦ã€‚é¾™è´æ ¼ç§¯åˆ†æ³•åˆ©ç”¨<strong>Richardsonå¤–æ¨</strong>æŠ€æœ¯æ¥ç»„åˆå¤šä¸ªä¸åŒæ­¥é•¿çš„æ¢¯å½¢æ³•ç§¯åˆ†ç»“æœï¼Œä»è€Œå®ç°æ›´é«˜é˜¶çš„ç²¾åº¦ï¼Œå…¶ä¸­b - a = hã€‚</p><script type="math/tex; mode=display">T_{0,0} = \frac{h}{2} \left( f(a) + f(b) \right)</script><script type="math/tex; mode=display">T_{k,0} = \frac{1}{2} T_{k-1,0} + h_k \sum_{i=1}^{2^{k-1}} f\left( a + \left( i - \frac{1}{2} \right) h_k \right)</script><script type="math/tex; mode=display">T_{k,m} = \frac{4^m T_{k,m-1} - T_{k-1,m-1}}{4^m - 1}</script><script type="math/tex; mode=display">h_k = \frac{b - a}{2^k}</script><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">R</span> = <span class="title">romberg</span><span class="params">(f, a, b, n)</span></span></span><br><span class="line">    R = <span class="built_in">zeros</span>(n,n);  <span class="comment">% åˆå§‹åŒ–Rombergè¡¨</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">% æ¢¯å½¢æ³•çš„è®¡ç®—</span></span><br><span class="line">    h = b - a;</span><br><span class="line">    R(<span class="number">1</span>,<span class="number">1</span>) = <span class="number">0.5</span> * h * (f(a) + f(b));</span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">2</span>:n</span><br><span class="line">        h = h / <span class="number">2</span>;</span><br><span class="line">        sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> k = <span class="number">1</span>:<span class="number">2</span>^(<span class="built_in">i</span><span class="number">-2</span>)</span><br><span class="line">            sum = sum + f(a + (<span class="number">2</span>*k<span class="number">-1</span>)*h);</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        R(<span class="built_in">i</span>,<span class="number">1</span>) = <span class="number">0.5</span> * R(<span class="built_in">i</span><span class="number">-1</span>,<span class="number">1</span>) + sum * h;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">% Richardsonå¤–æ¨</span></span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">j</span> = <span class="number">2</span>:n</span><br><span class="line">        <span class="keyword">for</span> <span class="built_in">i</span> = <span class="built_in">j</span>:n</span><br><span class="line">            R(<span class="built_in">i</span>,<span class="built_in">j</span>) = (<span class="number">4</span>^(<span class="built_in">j</span><span class="number">-1</span>) * R(<span class="built_in">i</span>,<span class="built_in">j</span><span class="number">-1</span>) - R(<span class="built_in">i</span><span class="number">-1</span>,<span class="built_in">j</span><span class="number">-1</span>)) / (<span class="number">4</span>^(<span class="built_in">j</span><span class="number">-1</span>) - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">f = @(x) <span class="built_in">sin</span>(x);</span><br><span class="line">a = <span class="number">0</span>;</span><br><span class="line">b = <span class="built_in">pi</span>;</span><br><span class="line">n = <span class="number">5</span>;  <span class="comment">% 5é˜¶Rombergç§¯åˆ†</span></span><br><span class="line">R = romberg(f, a, b, n);</span><br><span class="line">fprintf(<span class="string">&#x27;Rombergç§¯åˆ†ç»“æœ: %.6f\n&#x27;</span>, R(n,n));</span><br></pre></td></tr></table></figure><h2 id="ä»£æ•°ç²¾åº¦"><a href="#ä»£æ•°ç²¾åº¦" class="headerlink" title="ä»£æ•°ç²¾åº¦"></a>ä»£æ•°ç²¾åº¦</h2><p>è‹¥ä¸€ä¸ªæ±‚ç§¯å…¬å¼å¯¹äºæ‰€æœ‰æ¬¡æ•°ä¸è¶…è¿‡mçš„å¤šé¡¹å¼éƒ½å‡†ç¡®æˆç«‹ï¼Œè€Œå¯¹äºæŸä¸€ä¸ªm+1æ¬¡çš„å¤šé¡¹å¼ç­‰å¼ä¸æˆç«‹ï¼Œåˆ™ç§°è¿™ä¸ªæ±‚ç§¯å…¬å¼æœ‰mæ¬¡ä»£æ•°ç²¾åº¦ã€‚æ¯”å¦‚ï¼Œå¦‚æœä¸€ä¸ªæ–¹æ³•èƒ½å¤Ÿå¯¹ä»»æ„çº¿æ€§å¤šé¡¹å¼ï¼ˆå³ä¸€é˜¶å¤šé¡¹å¼ï¼Œå¦‚ ax+bï¼‰ç»™å‡ºç²¾ç¡®ç»“æœï¼Œä½†ä¸èƒ½å¯¹äºŒæ¬¡å¤šé¡¹å¼ï¼ˆå¦‚ ax2+bx+cï¼‰ç»™å‡ºç²¾ç¡®ç»“æœï¼Œé‚£ä¹ˆè¯¥æ–¹æ³•çš„ä»£æ•°ç²¾åº¦ä¸º 1ã€‚</p><p><strong>çŸ©å½¢æ³•ï¼ˆMidpoint Ruleï¼‰</strong>ï¼šä»£æ•°ç²¾åº¦ä¸º 1ã€‚å®ƒèƒ½ç²¾ç¡®ç§¯åˆ†å¸¸æ•°å’Œçº¿æ€§å‡½æ•°ï¼Œä½†å¯¹äºŒæ¬¡åŠæ›´é«˜æ¬¡å¤šé¡¹å¼ä¸å‡†ç¡®ã€‚</p><p><strong>æ¢¯å½¢æ³•ï¼ˆTrapezoidal Ruleï¼‰</strong>ï¼šä»£æ•°ç²¾åº¦ä¸º 1ã€‚å®ƒèƒ½ç²¾ç¡®ç§¯åˆ†çº¿æ€§å‡½æ•°ï¼Œä½†ä¸èƒ½ç²¾ç¡®ç§¯åˆ†äºŒæ¬¡åŠæ›´é«˜æ¬¡å¤šé¡¹å¼ã€‚</p><p><strong>è¾›æ™®æ£®æ³•ï¼ˆSimpsonâ€™s Ruleï¼‰</strong>ï¼šä»£æ•°ç²¾åº¦ä¸º 3ã€‚å®ƒèƒ½ç²¾ç¡®ç§¯åˆ†æœ€é«˜ä¸‰æ¬¡çš„å¤šé¡¹å¼ï¼ˆåŒ…æ‹¬å¸¸æ•°ã€çº¿æ€§ã€äºŒæ¬¡å’Œä¸‰æ¬¡å‡½æ•°ï¼‰ã€‚</p><p><strong>é«˜æ–¯æ±‚ç§¯æ³•ï¼ˆGaussian Quadratureï¼‰</strong>ï¼šæ ¹æ®é€‰å®šçš„èŠ‚ç‚¹æ•°ï¼Œä»£æ•°ç²¾åº¦å¯ä»¥æ˜¯éå¸¸é«˜çš„ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ n ä¸ªèŠ‚ç‚¹çš„é«˜æ–¯æ±‚ç§¯æ³•çš„ä»£æ•°ç²¾åº¦ä¸º 2nâˆ’1ã€‚</p><h2 id="æ’å€¼å‹æ±‚ç§¯å…¬å¼"><a href="#æ’å€¼å‹æ±‚ç§¯å…¬å¼" class="headerlink" title="æ’å€¼å‹æ±‚ç§¯å…¬å¼"></a>æ’å€¼å‹æ±‚ç§¯å…¬å¼</h2><p><strong>æ’å€¼å‹æ±‚ç§¯åˆ†å…¬å¼</strong>æ˜¯ä¸€ç§åˆ©ç”¨æ’å€¼å¤šé¡¹å¼æ¥è¿‘ä¼¼è®¡ç®—å®šç§¯åˆ†çš„æ–¹æ³•ã€‚å…·ä½“è€Œè¨€ï¼Œè¿™ç§æ–¹æ³•é€šè¿‡å¯¹å‡½æ•° f(x) è¿›è¡Œæ’å€¼ï¼Œå¹¶è®¡ç®—æ’å€¼å¤šé¡¹å¼çš„ç§¯åˆ†æ¥è¿‘ä¼¼åŸå‡½æ•°çš„ç§¯åˆ†å€¼ã€‚å¸¸è§çš„æ’å€¼ç§¯åˆ†å…¬å¼åŒ…æ‹¬ç‰›é¡¿-ç§‘ç‰¹æ–¯å…¬å¼å’Œé«˜æ–¯æ±‚ç§¯å…¬å¼ã€‚</p><p>é¦–å…ˆï¼Œæ ¹æ®ç»™å®šèŠ‚ç‚¹ x0,x1,â€¦,xnå¯¹å‡½æ•° f(x)è¿›è¡Œæ’å€¼ï¼Œå¾—åˆ°æ’å€¼å¤šé¡¹å¼ P(x)ã€‚ç„¶åå¯¹æ’å€¼å¤šé¡¹å¼ P(x) è¿›è¡Œç§¯åˆ†ï¼Œä»¥è¿‘ä¼¼åŸå‡½æ•° f(x)çš„ç§¯åˆ†ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> æ•°å€¼åˆ†æ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç”¨Matlabæ±‚è§£éçº¿æ€§å‡½æ•°æ–¹ç¨‹</title>
      <link href="/2024/08/22/%E9%9D%9E%E7%BA%BF%E6%80%A7%E5%87%BD%E6%95%B0%E6%96%B9%E7%A8%8B%E7%9A%84%E6%B1%82%E8%A7%A3/"/>
      <url>/2024/08/22/%E9%9D%9E%E7%BA%BF%E6%80%A7%E5%87%BD%E6%95%B0%E6%96%B9%E7%A8%8B%E7%9A%84%E6%B1%82%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h1 id="äºŒåˆ†æœç´¢æ³•"><a href="#äºŒåˆ†æœç´¢æ³•" class="headerlink" title="äºŒåˆ†æœç´¢æ³•"></a>äºŒåˆ†æœç´¢æ³•</h1><p><strong>äºŒåˆ†æ³•</strong>ï¼ˆBisection Methodï¼‰æ˜¯ä¸€ç§ç”¨äºæ±‚è§£å®æ•°å‡½æ•°æ–¹ç¨‹æ ¹çš„æ•°å€¼æ–¹æ³•ã€‚åŸºäºè¿ç»­å‡½æ•°çš„ä»‹å€¼å®šç†ï¼Œé€šè¿‡é€æ­¥ç¼©å°åŒºé—´æ¥é€¼è¿‘æ–¹ç¨‹çš„æ ¹ï¼Œè‹¥æƒ³æ”¹æˆç‰¹å®šçš„å‡½æ•°ï¼Œåªéœ€è¦å°†0æ”¹ä¸ºæ‰€éœ€çš„aå³å¯ã€‚</p><p>é€‰æ‹©ä¸€ä¸ªåˆå§‹åŒºé—´ [a,b]ï¼Œè¦æ±‚å‡½æ•° f(x) åœ¨è¯¥åŒºé—´å†…è¿ç»­ï¼Œå¹¶ä¸”æ»¡è¶³ f(a)â‹…f(b)&lt;0ã€‚è¿™æ„å‘³ç€åœ¨åŒºé—´[a, b] å†…å­˜åœ¨ä¸€ä¸ªæ ¹ï¼ˆæ ¹æ®ä»‹å€¼å®šç†ï¼‰ï¼Œæ¥ç€è®¡ç®—åŒºé—´çš„ä¸­ç‚¹ $c = \frac{a + b}{2}$ã€‚æ ¹æ® f(c) çš„ç¬¦å·æ¥å†³å®šæ›´æ–°åŒºé—´ï¼šå¦‚æœ f(a)â‹…f(c)&lt;0ï¼Œåˆ™æ ¹åœ¨ [a,c] åŒºé—´å†…ï¼Œå°† b æ›´æ–°ä¸º cã€‚å¦‚æœ f(c)â‹…f(b)&lt;0ï¼Œåˆ™æ ¹åœ¨ [c,b] åŒºé—´å†…ï¼Œå°† a æ›´æ–°ä¸º cï¼Œé‡å¤ä¸Šè¿°æ­¥éª¤ï¼Œç›´åˆ°åŒºé—´çš„é•¿åº¦å°äºé¢„è®¾çš„ç²¾åº¦ Ïµï¼Œæˆ–è€…è¾¾åˆ°æœ€å¤§è¿­ä»£æ¬¡æ•°ã€‚</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">f = @(x) x^<span class="number">4</span> - <span class="number">4</span>;</span><br><span class="line">a = <span class="number">1</span>; <span class="comment">% åŒºé—´ä¸‹ç•Œ</span></span><br><span class="line">b = <span class="number">3</span>; <span class="comment">% åŒºé—´ä¸Šç•Œ</span></span><br><span class="line">tol = <span class="number">1e-6</span>; <span class="comment">% ç²¾åº¦</span></span><br><span class="line">max_iter = <span class="number">100</span>; <span class="comment">% æœ€å¤§è¿­ä»£æ¬¡æ•°</span></span><br><span class="line">[root, iter] = bisection_method(f, a, b, tol, max_iter);</span><br></pre></td></tr></table></figure><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">[root,inter]</span> = <span class="title">bisection_method</span><span class="params">(f,a,b,error,max_inter)</span></span></span><br><span class="line">inter = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span> f(a)*f(b)&gt;= <span class="number">0</span></span><br><span class="line">    error(<span class="string">&quot;No suitable answer&quot;</span>);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">root = (a+b)/<span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (b - a) / <span class="number">2</span> &gt; error &amp;&amp; inter &lt; max_inter</span><br><span class="line">    inter = inter + <span class="number">1</span>;</span><br><span class="line">    c = (a+b)/<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">if</span> f(c) == <span class="number">0</span></span><br><span class="line">        root = c;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">elseif</span> f(c)*f(a) &lt; <span class="number">0</span></span><br><span class="line">        b = c;</span><br><span class="line">        root = (a+b)/<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        a = c;</span><br><span class="line">        root = (a+b)/<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">fprintf(<span class="string">&quot;æ ¹çš„è¿‘ä¼¼å€¼ä¸º:%.6f&quot;</span>,root);</span><br><span class="line">fprintf(<span class="string">&quot;è¿­ä»£æ¬¡æ•°ä¸º:%.6f&quot;</span>,inter);</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><h1 id="ç‰›é¡¿æ³•"><a href="#ç‰›é¡¿æ³•" class="headerlink" title="ç‰›é¡¿æ³•"></a>ç‰›é¡¿æ³•</h1><p>ç‰›é¡¿æ³•æ˜¯ä¸€ç§ç”¨äºå¯»æ‰¾å‡½æ•°é›¶ç‚¹çš„è¿­ä»£æ–¹æ³•ã€‚å…¶åŸºæœ¬æ€æƒ³æ˜¯é€šè¿‡å‡½æ•°çš„æ³°å‹’äºŒé˜¶å±•å¼€å¼æ¥è¿‘ä¼¼è§£ï¼Œå¹¶é€æ­¥é€¼è¿‘æ ¹ï¼Œç¼ºç‚¹æ˜¯å¿…é¡»çŸ¥é“å‡½æ•°çš„ä¸€é˜¶å’ŒäºŒé˜¶å¯¼æ•°ã€‚</p><script type="math/tex; mode=display">f(x) \approx f(a) + f'(a)(x-a)+\frac{f''(a)}{2!}(x-a)^2</script><script type="math/tex; mode=display">f(x)\approx \frac{1}{2}f''(a)x^2+[f'(a)-f''(a)a]x + C(a)</script><script type="math/tex; mode=display">\frac{f(x)}{dx} \approx f''(a)x + [f'(a)-f''(a)a] = 0</script><script type="math/tex; mode=display">x = a - \frac{f'(a)}{f''(a)}</script><p>å‡å®šåˆå§‹çŒœæµ‹å€¼ä¸º$x_0$ï¼Œè¿­ä»£å…¬å¼ä¸ºï¼š</p><script type="math/tex; mode=display">x_{n+1} = x_n - \frac{f'(x_n)}{f''(x_n)}</script><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">clc;</span><br><span class="line">clear all;</span><br><span class="line">close all;</span><br><span class="line"></span><br><span class="line"><span class="comment">% å®šä¹‰ç›®æ ‡å‡½æ•°åŠå…¶å¯¼æ•°</span></span><br><span class="line">y = @(x) (x.^<span class="number">2</span> - <span class="number">4</span>*x + <span class="built_in">sin</span>(x));</span><br><span class="line">y_first = @(x) (<span class="number">2.</span>*x - <span class="number">4</span> + <span class="built_in">cos</span>(x));</span><br><span class="line">y_second = @(x) (x - <span class="built_in">sin</span>(x));</span><br><span class="line"></span><br><span class="line"><span class="comment">% åˆå§‹å€¼</span></span><br><span class="line">x_ori = <span class="number">20</span>;</span><br><span class="line">x_solu = [x_ori];</span><br><span class="line"></span><br><span class="line"><span class="comment">% ç‰›é¡¿æ³•è¿­ä»£</span></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:<span class="number">20</span></span><br><span class="line">    x = x_ori;</span><br><span class="line">    y_first_1 = y_first(x);</span><br><span class="line">    y_second_1 = y_second(x);</span><br><span class="line">    x_temp = x - y_first_1 ./ (y_second_1 + <span class="built_in">eps</span>);</span><br><span class="line">    x_solu = [x_solu; x_temp];</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% ç»˜å›¾</span></span><br><span class="line">f = @(x) (x.^<span class="number">2</span> - <span class="number">4</span>*x + <span class="built_in">sin</span>(x));</span><br><span class="line"></span><br><span class="line">x = <span class="number">-40</span>:<span class="number">0.1</span>:<span class="number">40</span>;</span><br><span class="line"><span class="built_in">plot</span>(x, f(x), <span class="string">&#x27;k&#x27;</span>); <span class="comment">% ç»˜åˆ¶ç›®æ ‡å‡½æ•°</span></span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line"><span class="built_in">scatter</span>(x_solu(<span class="number">1</span>), f(x_solu(<span class="number">1</span>)), <span class="string">&#x27;g&#x27;</span>, <span class="string">&#x27;filled&#x27;</span>); <span class="comment">% èµ·å§‹ç‚¹</span></span><br><span class="line"><span class="built_in">plot</span>(x_solu(<span class="number">2</span>:<span class="keyword">end</span><span class="number">-1</span>), f(x_solu(<span class="number">2</span>:<span class="keyword">end</span><span class="number">-1</span>)), <span class="string">&#x27;r&#x27;</span>); <span class="comment">% è¿­ä»£è½¨è¿¹</span></span><br><span class="line"><span class="built_in">scatter</span>(x_solu(<span class="number">2</span>:<span class="keyword">end</span><span class="number">-1</span>), f(x_solu(<span class="number">2</span>:<span class="keyword">end</span><span class="number">-1</span>)), <span class="string">&#x27;r&#x27;</span>, <span class="string">&#x27;filled&#x27;</span>); <span class="comment">% è¿­ä»£ç‚¹</span></span><br><span class="line"><span class="built_in">scatter</span>(x_solu(<span class="keyword">end</span>), f(x_solu(<span class="keyword">end</span>)), <span class="string">&#x27;y&#x27;</span>, <span class="string">&#x27;filled&#x27;</span>); <span class="comment">% æœ€ç»ˆç‚¹</span></span><br><span class="line"><span class="built_in">legend</span>(<span class="string">&#x27;Objective Function&#x27;</span>, <span class="string">&#x27;Start Point&#x27;</span>, <span class="string">&#x27;Search Trace&#x27;</span>, <span class="string">&#x27;Minimizer&#x27;</span>);</span><br><span class="line"><span class="built_in">hold</span> off;</span><br><span class="line">title(<span class="string">&#x27;Newton Method Optimization&#x27;</span>);</span><br><span class="line">xlabel(<span class="string">&#x27;x&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;f&#x27;</span>);</span><br></pre></td></tr></table></figure><h1 id="æ¢¯åº¦ä¸‹é™æ³•"><a href="#æ¢¯åº¦ä¸‹é™æ³•" class="headerlink" title="æ¢¯åº¦ä¸‹é™æ³•"></a>æ¢¯åº¦ä¸‹é™æ³•</h1><p>æ¢¯åº¦ä¸‹é™æ³•çš„æ•°å­¦åŸç†å…¶å®ç‰¹åˆ«ç®€å•ï¼Œå°±æ˜¯ä¸€é˜¶æ³°å‹’å±•å¼€ï¼Œå‡å¦‚å¯¼æ•°å°äº0ï¼Œè¯´æ˜è¿™æ—¶å€™Xåº”è¯¥å‘å‰èµ°ï¼Œæ‰€ä»¥å­¦ä¹ ç‡å‰è¦åŠ ä¸€ä¸ªè´Ÿå·ï¼Œå¯¹äºåŸå§‹çš„æ¢¯åº¦ä¸‹é™æ³•ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“åŸå‡½æ•°çš„å¯¼æ•°ã€‚</p><script type="math/tex; mode=display">\mathbf{x}_{k+1} = \mathbf{x}_k - \alpha \nabla f(\mathbf{x}_k)</script><p>å…¶ä¸­ï¼ŒÎ±æ˜¯å­¦ä¹ ç‡ï¼Œæ˜¯ä¸€ä¸ªè¶…å‚æ•°ï¼Œéœ€è¦äººä¸ºçš„ä¸æ–­è°ƒæ•´ï¼Œ$\nabla f(\mathbf{x}_k)$åˆ™ä»£è¡¨äº†å‡½æ•°çš„æ¢¯åº¦ã€‚</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%f(x) = x^2 + 4x + 4</span></span><br><span class="line"></span><br><span class="line">x0 = <span class="number">0</span>; <span class="comment">% åˆå§‹å€¼</span></span><br><span class="line">alpha = <span class="number">0.1</span>; <span class="comment">% å­¦ä¹ ç‡</span></span><br><span class="line">tolerance = <span class="number">1e-6</span>; <span class="comment">% æ”¶æ•›æ¡ä»¶</span></span><br><span class="line">max_iter = <span class="number">1000</span>; <span class="comment">% æœ€å¤§è¿­ä»£æ¬¡æ•°</span></span><br><span class="line"></span><br><span class="line">f = @(x) x.^<span class="number">2</span> + <span class="number">4</span>*x + <span class="number">4</span>; </span><br><span class="line">grad_f = @(x) <span class="number">2</span>*x + <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line">x = x0; </span><br><span class="line"><span class="keyword">for</span> k = <span class="number">1</span>:max_iter</span><br><span class="line">    x_new = x - alpha * grad_f(x); </span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">abs</span>(x_new - x) &lt; tolerance <span class="comment">% åˆ¤æ–­æ˜¯å¦æ»¡è¶³æ”¶æ•›æ¡ä»¶</span></span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    x = x_new; </span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">fprintf(<span class="string">&#x27;è¿­ä»£æ¬¡æ•°: %d\n&#x27;</span>, k);</span><br><span class="line">fprintf(<span class="string">&#x27;æœ€ä¼˜è§£: x = %.6f\n&#x27;</span>, x);</span><br><span class="line">fprintf(<span class="string">&#x27;æœ€ä¼˜å‡½æ•°å€¼: f(x) = %.6f\n&#x27;</span>, f(x));</span><br><span class="line"></span><br><span class="line">x_vals = <span class="number">-5</span>:<span class="number">0.1</span>:<span class="number">3</span>;</span><br><span class="line">y_vals = f(x_vals);</span><br><span class="line"><span class="built_in">plot</span>(x_vals, y_vals, <span class="string">&#x27;-b&#x27;</span>, <span class="string">&#x27;LineWidth&#x27;</span>, <span class="number">2</span>);</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line"><span class="built_in">plot</span>(x, f(x), <span class="string">&#x27;ro&#x27;</span>, <span class="string">&#x27;MarkerSize&#x27;</span>, <span class="number">10</span>, <span class="string">&#x27;LineWidth&#x27;</span>, <span class="number">2</span>);</span><br><span class="line">xlabel(<span class="string">&#x27;x&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;f(x)&#x27;</span>);</span><br><span class="line">title(<span class="string">&#x27;æ¢¯åº¦ä¸‹é™æ³•&#x27;</span>);</span><br><span class="line">grid on;</span><br></pre></td></tr></table></figure><h1 id="éå†æ³•"><a href="#éå†æ³•" class="headerlink" title="éå†æ³•"></a>éå†æ³•</h1><p>éå†æ³•ï¼ˆExhaustive Search æˆ– Brute Force Searchï¼‰æ˜¯ä¸€ç§é€šè¿‡æšä¸¾æ‰€æœ‰å¯èƒ½çš„è§£ï¼Œæ‰¾åˆ°æœ€ä¼˜è§£çš„ä¼˜åŒ–æ–¹æ³•ã€‚å¯¹äºæŸäº›ç®€å•çš„æˆ–å¯æšä¸¾çš„ä¼˜åŒ–é—®é¢˜ï¼Œéå†æ³•å¯ä»¥ç¡®ä¿æ‰¾åˆ°å…¨å±€æœ€ä¼˜è§£ã€‚</p><p>éå†æ³•çš„æ€æƒ³å¾ˆç®€å•ï¼Œå°±æ˜¯é¦–å…ˆåœ¨å®šä¹‰æœç´¢åŒºé—´å†…ï¼Œä»¥ç”Ÿæˆä¸€ç³»åˆ—è‡ªå˜é‡ç‚¹ï¼Œç„¶åå¸¦å…¥å‡½æ•° ï¼Œè¾“å‡ºå› å˜é‡å‘é‡ ï¼Œç”»å‡ºå›¾åƒè§‚å¯Ÿï¼Œæœ€åé‡‡ç”¨ min/max å‡½æ•°ï¼Œè®¡ç®—å‡ºæœ€å°å€¼/æœ€å¤§å€¼ã€‚é€šè¿‡ä¼°è®¡æ¥å¯»æ‰¾å¤§è‡´ä½ç½®ã€‚</p><p>éå†æ³•æ˜¯é‡‡ç”¨ for å¾ªç¯æ¥å®ç°çš„ï¼Œå¯¹äºå¤šå…ƒå‡½æ•°éœ€è¦å¤šä¸ª for å¾ªç¯æ¥å®ç°ï¼Œæ‰€ä»¥éå†æ³•ä¸€èˆ¬æœ€å¤šç”¨æ¥æ±‚è§£äºŒå…ƒå‡½æ•°çš„ä¼˜åŒ–é—®é¢˜ã€‚</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">% æœ€å°åŒ–å‡½æ•° f(x) = x^2 + 4x + 4</span></span><br><span class="line">f = @(x) x.^<span class="number">2</span> + <span class="number">4</span>*x + <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line">x_vals = <span class="number">-10</span>:<span class="number">0.01</span>:<span class="number">10</span>; <span class="comment">% åœ¨åŒºé—´[-10, 10]ä¸Šä»¥0.01ä¸ºæ­¥é•¿è¿›è¡Œéå†</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% åˆå§‹åŒ–æœ€ä¼˜è§£</span></span><br><span class="line">min_f = <span class="built_in">inf</span>; <span class="comment">% æœ€å°å‡½æ•°å€¼ï¼Œåˆå§‹è®¾ä¸ºæ— ç©·å¤§</span></span><br><span class="line">optimal_x = <span class="built_in">nan</span>; <span class="comment">% æœ€ä¼˜è§£</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> x = x_vals</span><br><span class="line">    current_f = f(x); <span class="comment">% è®¡ç®—å½“å‰xå€¼å¯¹åº”çš„å‡½æ•°å€¼</span></span><br><span class="line">    <span class="keyword">if</span> current_f &lt; min_f <span class="comment">% å¦‚æœæ‰¾åˆ°æ›´å°çš„å‡½æ•°å€¼ï¼Œåˆ™æ›´æ–°æœ€ä¼˜è§£</span></span><br><span class="line">        min_f = current_f;</span><br><span class="line">        optimal_x = x;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">fprintf(<span class="string">&#x27;æœ€ä¼˜è§£: x = %.6f\n&#x27;</span>, optimal_x);</span><br><span class="line">fprintf(<span class="string">&#x27;æœ€ä¼˜å‡½æ•°å€¼: f(x) = %.6f\n&#x27;</span>, min_f);</span><br><span class="line"></span><br><span class="line">y_vals = f(x_vals);</span><br><span class="line"><span class="built_in">plot</span>(x_vals, y_vals, <span class="string">&#x27;-b&#x27;</span>, <span class="string">&#x27;LineWidth&#x27;</span>, <span class="number">2</span>);</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line"><span class="built_in">plot</span>(optimal_x, min_f, <span class="string">&#x27;ro&#x27;</span>, <span class="string">&#x27;MarkerSize&#x27;</span>, <span class="number">10</span>, <span class="string">&#x27;LineWidth&#x27;</span>, <span class="number">2</span>);</span><br><span class="line">xlabel(<span class="string">&#x27;x&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;f(x)&#x27;</span>);</span><br><span class="line">title(<span class="string">&#x27;éå†æ³•&#x27;</span>);</span><br><span class="line">grid on;</span><br></pre></td></tr></table></figure><h1 id="éšæœºä¼˜åŒ–ç®—æ³•"><a href="#éšæœºä¼˜åŒ–ç®—æ³•" class="headerlink" title="éšæœºä¼˜åŒ–ç®—æ³•"></a>éšæœºä¼˜åŒ–ç®—æ³•</h1><p><strong>Step 1</strong>: åœ¨ç»™å®šçš„åŒºé—´å†…éšæœºç”Ÿæˆä¸€ä¸ªè‡ªå˜é‡ <code>x</code>ã€‚</p><p><strong>Step 2</strong>: è¿›è¡Œçº¦æŸæ¡ä»¶çš„åˆ¤æ–­ã€‚</p><p><strong>Step 3</strong>: è®¡ç®—ç›®æ ‡å‡½æ•°å€¼å¹¶å­˜å‚¨ã€‚æ¯æ¬¡è®¡ç®—åï¼Œå°†å½“å‰æœ€å°å€¼ä¿å­˜åˆ° <code>min_f_history</code> å‘é‡ä¸­ã€‚</p><p><strong>Step 4</strong>: æ¯”è¾ƒå½“å‰å‡½æ•°å€¼ä¸ä¹‹å‰çš„æœ€å°å€¼ï¼Œå¦‚æœå½“å‰å€¼æ›´å°ï¼Œåˆ™æ›´æ–°æœ€ä¼˜è§£ <code>best_x</code>ï¼Œå¹¶é‡ç½®è®¡æ•°å™¨ <code>counter</code>ï¼›å¦åˆ™ï¼Œè®¡æ•°å™¨å¢åŠ ã€‚</p><p><strong>Step 5</strong>: å¦‚æœè®¡æ•°å™¨è¾¾åˆ°é˜ˆå€¼ï¼Œåˆ™åœæ­¢å¾ªç¯å¹¶è¾“å‡ºç»“æœã€‚</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">f = @(x) x.^<span class="number">2</span> + <span class="number">4</span>*x + <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line">range = [<span class="number">-10</span>, <span class="number">10</span>]; <span class="comment">% è‡ªå˜é‡çš„å–å€¼èŒƒå›´</span></span><br><span class="line">max_iter = <span class="number">1000</span>; <span class="comment">% æœ€å¤§è¿­ä»£æ¬¡æ•°</span></span><br><span class="line">threshold = <span class="number">20</span>; <span class="comment">% é˜ˆå€¼</span></span><br><span class="line">counter = <span class="number">0</span>; <span class="comment">% è®¡æ•°å™¨</span></span><br><span class="line">min_f_history = []; <span class="comment">% å­˜æ”¾æ¯æ¬¡å¾ªç¯ä¸­çš„æœ€å°å€¼</span></span><br><span class="line">best_x = NaN; <span class="comment">% è®°å½•æœ€ä¼˜è‡ªå˜é‡</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> iter = <span class="number">1</span>:max_iter</span><br><span class="line">    <span class="comment">% éšæœºç”Ÿæˆè‡ªå˜é‡ x</span></span><br><span class="line">    x = range(<span class="number">1</span>) + (range(<span class="number">2</span>) - range(<span class="number">1</span>)) * <span class="built_in">rand</span>();</span><br><span class="line">    <span class="comment">% å¦‚æœæœ‰çº¦æŸæ¡ä»¶ï¼Œåˆ¤æ–­æ˜¯å¦æ»¡è¶³</span></span><br><span class="line">    <span class="comment">% è®¡ç®—å‡½æ•°å€¼å¹¶å­˜å‚¨åœ¨å‘é‡ä¸­</span></span><br><span class="line">    f_val = f(x);</span><br><span class="line">    <span class="comment">% å°†å½“å‰å‡½æ•°å€¼ä¸å†å²æœ€å°å€¼æ¯”è¾ƒï¼Œæ›´æ–°æœ€å°å€¼å‘é‡</span></span><br><span class="line">    <span class="keyword">if</span> iter == <span class="number">1</span></span><br><span class="line">        min_f_history = [min_f_history, f_val];</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        min_f_history = [min_f_history, <span class="built_in">min</span>(f_val, min_f_history(<span class="keyword">end</span>))];</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">% è®°å½•å½“å‰æœ€ä¼˜è§£</span></span><br><span class="line">    <span class="keyword">if</span> iter == <span class="number">1</span> || f_val &lt; min_f_history(<span class="keyword">end</span><span class="number">-1</span>)</span><br><span class="line">        best_x = x;</span><br><span class="line">        counter = <span class="number">0</span>; <span class="comment">% è®¡æ•°å™¨é‡ç½®</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        counter = counter + <span class="number">1</span>; </span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> counter &gt;= threshold</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">fprintf(<span class="string">&#x27;æ€»å¾ªç¯æ¬¡æ•°: %d\n&#x27;</span>, iter);</span><br><span class="line">fprintf(<span class="string">&#x27;æœ€ä¼˜è‡ªå˜é‡: x = %.6f\n&#x27;</span>, best_x);</span><br><span class="line">fprintf(<span class="string">&#x27;æœ€å°å‡½æ•°å€¼: f(x) = %.6f\n&#x27;</span>, min_f_history(<span class="keyword">end</span>));</span><br><span class="line"></span><br><span class="line"><span class="built_in">figure</span>;</span><br><span class="line"><span class="built_in">plot</span>(min_f_history, <span class="string">&#x27;-o&#x27;</span>, <span class="string">&#x27;LineWidth&#x27;</span>, <span class="number">2</span>);</span><br><span class="line">xlabel(<span class="string">&#x27;è¿­ä»£æ¬¡æ•°&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;æœ€å°å€¼&#x27;</span>);</span><br><span class="line">title(<span class="string">&#x27;é˜¶æ¢¯å›¾&#x27;</span>);</span><br><span class="line">grid on;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> æ•°å€¼åˆ†æ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¸¸å¾®åˆ†æ–¹ç¨‹çš„æ•°å€¼æ±‚è§£(Matlabå®ç°)</title>
      <link href="/2024/08/22/%E5%BE%AE%E5%88%86%E6%96%B9%E7%A8%8B%E7%9A%84%E8%A7%A3%E6%B3%95/"/>
      <url>/2024/08/22/%E5%BE%AE%E5%88%86%E6%96%B9%E7%A8%8B%E7%9A%84%E8%A7%A3%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h1 id="å¾®åˆ†æ–¹ç¨‹æ±‚è§£"><a href="#å¾®åˆ†æ–¹ç¨‹æ±‚è§£" class="headerlink" title="å¾®åˆ†æ–¹ç¨‹æ±‚è§£"></a>å¾®åˆ†æ–¹ç¨‹æ±‚è§£</h1><p>å¸¸å¾®åˆ†æ–¹ç¨‹æ±‚è§£ä¸€èˆ¬åˆ†ä¸ºè§£æè§£å’Œæ•°å€¼è§£ï¼Œä½†æ˜¯å¯¹äºå¤§å¤šæ•°çš„ç°å®é—®é¢˜æ¥çœ‹ï¼Œè§£æè§£å¾€å¾€æ˜¯ä¸å¯å–çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åªèƒ½é€šè¿‡æ•°å€¼è§£æ¥è¿›è¡Œæ±‚è§£ã€‚</p><script type="math/tex; mode=display">\frac{dx}{dt} = f(x(t),t) \\x(t_0) = x_0</script><h2 id="æ¬§æ‹‰æ³•"><a href="#æ¬§æ‹‰æ³•" class="headerlink" title="æ¬§æ‹‰æ³•"></a>æ¬§æ‹‰æ³•</h2><p>ä»åˆå§‹æ¡ä»¶å‡ºå‘ï¼Œæ²¿ç€è§£çš„åˆ‡çº¿æ–¹å‘å‰è¿›ä¸€å°æ­¥ï¼Œä»è€Œå¾—åˆ°è§£çš„è¿‘ä¼¼å€¼ï¼Œè¿™ç§æ–¹æ³•æ˜¯æœ€æ˜“æ±‚è§£çš„ï¼Œä½†æ˜¯ç²¾åº¦è¿‡ä½ï¼Œæ‰€ä»¥ä¸€èˆ¬ä»…ä½œä¸ºåç»­çŸ¥è¯†çš„é“ºå«æˆ–æ˜¯ç®€å•æƒ…å†µä¸‹çš„ä½¿ç”¨ã€‚</p><script type="math/tex; mode=display">\frac{x(t+\Delta t)-x(t)}{\Delta t} \approx f(x(t),t) \quad When\quad\Delta t \rightarrow 0</script><script type="math/tex; mode=display">x(t+\Delta t) \approx x(t)+\Delta t\cdot f(x(t),t)</script><p>æ‰€ä»¥ï¼Œä¸‹ä¸€æ—¶åˆ»çš„å€¼å¯ä»¥è¿™ä¹ˆè¡¨ç¤ºå‡ºæ¥</p><script type="math/tex; mode=display">x(t_{k+1})=x(t_k)+\Delta t \cdot f(x(t_k),t_k)</script><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">result</span> = <span class="title">func</span><span class="params">(x,t)</span> %æ¨¡æ‹Ÿç›®æ ‡å‡½æ•°</span></span><br><span class="line">result = <span class="built_in">cos</span>(t);</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">h = <span class="number">0.001</span>; <span class="comment">% æ—¶é—´æ­¥é•¿</span></span><br><span class="line">t = <span class="number">0</span>:h:<span class="number">10</span>; <span class="comment">% æ—¶é—´åºåˆ—</span></span><br><span class="line">n = <span class="built_in">length</span>(t);</span><br><span class="line">x = <span class="built_in">zeros</span>(<span class="number">1</span>, n); <span class="comment">% é¢„ç•™ç©ºé—´</span></span><br><span class="line">x(<span class="number">1</span>) = <span class="number">0</span>; <span class="comment">% åˆå§‹æ¡ä»¶</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:n<span class="number">-1</span></span><br><span class="line">    x(<span class="built_in">i</span>+<span class="number">1</span>) = x(<span class="built_in">i</span>) + h * func(x(<span class="built_in">i</span>), t(<span class="built_in">i</span>)); <span class="comment">% ä½¿ç”¨æ—¶é—´ t(i)</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">plot</span>(t, x) <span class="comment">% ç»˜åˆ¶æ•°å€¼ç§¯åˆ†ç»“æœ</span></span><br><span class="line"><span class="built_in">hold</span> on</span><br><span class="line"><span class="built_in">plot</span>(t, <span class="built_in">sin</span>(t), <span class="string">&#x27;--&#x27;</span>) <span class="comment">% ç»˜åˆ¶çœŸå®è§£ sin(t) è¿›è¡Œå¯¹æ¯”</span></span><br><span class="line"><span class="built_in">legend</span>(<span class="string">&#x27;Euler Approximation&#x27;</span>, <span class="string">&#x27;True Solution&#x27;</span>)</span><br><span class="line">title(<span class="string">&#x27;Comparison of Numerical Integration and True Solution&#x27;</span>)</span><br><span class="line">xlabel(<span class="string">&#x27;Time t&#x27;</span>)</span><br><span class="line">ylabel(<span class="string">&#x27;x(t)&#x27;</span>)</span><br></pre></td></tr></table></figure><h2 id="æ¢¯å½¢æ³•"><a href="#æ¢¯å½¢æ³•" class="headerlink" title="æ¢¯å½¢æ³•"></a>æ¢¯å½¢æ³•</h2><p>æ¢¯å½¢æ³•æ˜¯æ¬§æ‹‰æ³•çš„æ”¹è¿›ï¼Œä¹Ÿå¯ä»¥è®¤ä¸ºæ˜¯Runge-Kuttaæ–¹æ³•çš„ç®€å•ç‰ˆï¼Œå…·ä½“å†…å®¹å¦‚ä¸‹ï¼š</p><script type="math/tex; mode=display">x_{k+1} = x_k + \frac{h}{2}[f(x_k,t_k)+f(x_{k+1},t_{k+1})]</script><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">h = <span class="number">0.001</span>; <span class="comment">% æ—¶é—´æ­¥é•¿</span></span><br><span class="line">t = <span class="number">0</span>:h:<span class="number">10</span>; <span class="comment">% æ—¶é—´åºåˆ—</span></span><br><span class="line">n = <span class="built_in">length</span>(t);</span><br><span class="line">x_trapezoidal = <span class="built_in">zeros</span>(<span class="number">1</span>, n); <span class="comment">% é¢„ç•™ç©ºé—´</span></span><br><span class="line">x_trapezoidal(<span class="number">1</span>) = <span class="number">0</span>; <span class="comment">% åˆå§‹æ¡ä»¶</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% æ¢¯å½¢æ³•</span></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:n<span class="number">-1</span></span><br><span class="line">    x_trapezoidal(<span class="built_in">i</span>+<span class="number">1</span>) = x_trapezoidal(<span class="built_in">i</span>) + (h / <span class="number">2</span>) * (func(x(<span class="built_in">i</span>),t(<span class="built_in">i</span>))+func(x(<span class="built_in">i</span>+<span class="number">1</span>),t(<span class="built_in">i</span>+<span class="number">1</span>)));</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">plot</span>(t, x_trapezoidal, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;DisplayName&#x27;</span>, <span class="string">&#x27;Trapezoidal Method&#x27;</span>)</span><br><span class="line"><span class="built_in">hold</span> on</span><br><span class="line"><span class="built_in">plot</span>(t, <span class="built_in">sin</span>(t), <span class="string">&#x27;r--&#x27;</span>, <span class="string">&#x27;DisplayName&#x27;</span>, <span class="string">&#x27;True Solution (sin(t))&#x27;</span>)</span><br><span class="line"><span class="built_in">legend</span> show</span><br><span class="line">title(<span class="string">&#x27;Comparison of Trapezoidal Method and True Solution&#x27;</span>)</span><br><span class="line">xlabel(<span class="string">&#x27;Time t&#x27;</span>)</span><br><span class="line">ylabel(<span class="string">&#x27;x(t)&#x27;</span>)</span><br><span class="line">grid on</span><br></pre></td></tr></table></figure><h2 id="é¾™æ ¼-åº“å¡”ç®—æ³•-Runge-Kutta"><a href="#é¾™æ ¼-åº“å¡”ç®—æ³•-Runge-Kutta" class="headerlink" title="é¾™æ ¼-åº“å¡”ç®—æ³•(Runge-Kutta)"></a>é¾™æ ¼-åº“å¡”ç®—æ³•(Runge-Kutta)</h2><p>é¾™æ ¼åº“å¡”ç®—æ³•å¹¿æ³›ç”¨äºå·¥ç¨‹ä¸Šï¼Œå…¶å…·æœ‰é«˜ç²¾åº¦çš„ç‰¹ç‚¹ï¼Œç¼ºç‚¹å°±æ˜¯è®¡ç®—é‡è¾ƒå¤§ï¼ŒåŸç†æ¯”è¾ƒå¤æ‚ã€‚</p><p>æ•°å­¦åŸç†ä¸ºä»ä¸­é—´æ‰¾å‡ ä¸ªç‚¹è¿›è¡Œæ’å€¼ï¼Œæ•…ç²¾åº¦æ›´é«˜, ä»¥ä¸‹ä¸ºRK4çš„å®ç°æ–¹æ³•:</p><script type="math/tex; mode=display">x_{k+1} = x_k + \frac{h}{6}(k_1+2k_2+2k_3+k_4)</script><script type="math/tex; mode=display">\text{å…¶ä¸­} \quad k_1 = f(x_k,t_k) \\k_2 = f(x_k+h\frac{k_1}{2},t_k+\frac{h}{2}) \\k_3 = f(x_k+h\frac{k_2}{2},t_k+\frac{h}{2}) \\k_4 = f(x_k+hk_3,t_k+h)</script><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">h = <span class="number">0.001</span>; <span class="comment">% æ—¶é—´æ­¥é•¿</span></span><br><span class="line">t = <span class="number">0</span>:h:<span class="number">10</span>; <span class="comment">% æ—¶é—´åºåˆ—</span></span><br><span class="line">n = <span class="built_in">length</span>(t);</span><br><span class="line">x = <span class="built_in">zeros</span>(<span class="number">1</span>, n); <span class="comment">% é¢„ç•™ç©ºé—´</span></span><br><span class="line">x(<span class="number">1</span>) = <span class="number">0</span>; <span class="comment">% åˆå§‹æ¡ä»¶</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% å››é˜¶Runge-Kuttaæ³•</span></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:n<span class="number">-1</span></span><br><span class="line">    k1 = func(x(<span class="built_in">i</span>), t(<span class="built_in">i</span>));</span><br><span class="line">    k2 = func(x(<span class="built_in">i</span>) + <span class="number">0.5</span>*h*k1, t(<span class="built_in">i</span>) + <span class="number">0.5</span>*h);</span><br><span class="line">    k3 = func(x(<span class="built_in">i</span>) + <span class="number">0.5</span>*h*k2, t(<span class="built_in">i</span>) + <span class="number">0.5</span>*h);</span><br><span class="line">    k4 = func(x(<span class="built_in">i</span>) + h*k3, t(<span class="built_in">i</span>) + h);</span><br><span class="line">    x(<span class="built_in">i</span>+<span class="number">1</span>) = x(<span class="built_in">i</span>) + (h / <span class="number">6</span>) * (k1 + <span class="number">2</span>*k2 + <span class="number">2</span>*k3 + k4); <span class="comment">% ä¿®æ­£æƒé‡ç³»æ•°</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% ç»˜å›¾å¯¹æ¯”</span></span><br><span class="line"><span class="built_in">figure</span>(<span class="number">1</span>)</span><br><span class="line"><span class="built_in">plot</span>(t, x, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;DisplayName&#x27;</span>, <span class="string">&#x27;Runge-Kutta Method&#x27;</span>)</span><br><span class="line"><span class="built_in">hold</span> on</span><br><span class="line"><span class="built_in">plot</span>(t, <span class="built_in">sin</span>(t), <span class="string">&#x27;r--&#x27;</span>, <span class="string">&#x27;DisplayName&#x27;</span>, <span class="string">&#x27;True Solution (sin(t))&#x27;</span>)</span><br><span class="line"><span class="built_in">legend</span> show</span><br><span class="line">title(<span class="string">&#x27;Comparison of Runge-Kutta Method and True Solution&#x27;</span>)</span><br><span class="line">xlabel(<span class="string">&#x27;Time t&#x27;</span>)</span><br><span class="line">ylabel(<span class="string">&#x27;x(t)&#x27;</span>)</span><br><span class="line">grid on</span><br><span class="line"></span><br><span class="line"><span class="comment">% ç»˜åˆ¶è¯¯å·®</span></span><br><span class="line"><span class="built_in">figure</span>(<span class="number">2</span>)</span><br><span class="line"><span class="built_in">plot</span>(t, <span class="built_in">sin</span>(t) - x, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;DisplayName&#x27;</span>, <span class="string">&#x27;Error&#x27;</span>)</span><br><span class="line">xlabel(<span class="string">&#x27;Time t&#x27;</span>)</span><br><span class="line">ylabel(<span class="string">&#x27;Error&#x27;</span>)</span><br><span class="line">title(<span class="string">&#x27;Total Error&#x27;</span>)</span><br><span class="line">grid on</span><br></pre></td></tr></table></figure><p>é‚£å¯¹äºäºŒé˜¶éé½æ¬¡æ–¹ç¨‹åº”è¯¥æ€ä¹ˆæ±‚è§£å‘¢?è¿™å°±éœ€è¦åšå˜æ¢äº†</p><script type="math/tex; mode=display">\frac{d^2x}{dt^2} + p(t) \frac{dx}{dt} + q(t) x = g(t)</script><p>å¯¹äºè¿™ç§å½¢å¼çš„å¾®åˆ†æ–¹ç¨‹,æˆ‘ä»¬éœ€è¦åšä»¥ä¸‹å˜æ¢:</p><script type="math/tex; mode=display">\frac{dx_1}{dt} = x_2(t) \\\frac{dx_2}{dt} = -p(t) x_2(t) - q(t) x_1(t) + g(t)</script><p>é‚£ä¹ˆæœ‰:</p><script type="math/tex; mode=display">k_1^x = v_i \\k_1^v = -p(t_i) v_i - q(t_i) x_i + g(t_i) \\k_2^x = v_i + 0.5h k_1^v \\k_2^v = -p(t_i + 0.5h) \left(v_i + 0.5h k_1^v\right) - q(t_i + 0.5h) \left(x_i + 0.5h k_1^x\right) + g(t_i + 0.5h) \\k_3^x = v_i + 0.5h k_2^v \\k_3^v= -p(t_i + 0.5h) \left(v_i + 0.5h k_2^v\right) - q(t_i + 0.5h) \left(x_i + 0.5h k_2^x\right) + g(t_i + 0.5h) \\k_4^x = v_i + h k_3^v \\k_4^v = -p(t_i + h) \left(v_i + h k_3^v\right) - q(t_i + h) \left(x_i + h k_3^x\right) + g(t_i + h)</script><p>å‡è®¾æˆ‘ä»¬è¦è§£:</p><script type="math/tex; mode=display">\frac{d^2x}{dt^2} + 2\frac{dx}{dt} + 5x = \cos(t)</script><script type="math/tex; mode=display">x(0) = 0 \quad and \quad \frac{dx}{dt}(0) = 1</script><p>æœ‰:</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">h = <span class="number">0.01</span>; <span class="comment">% æ—¶é—´æ­¥é•¿</span></span><br><span class="line">t = <span class="number">0</span>:h:<span class="number">10</span>; <span class="comment">% æ—¶é—´åºåˆ—</span></span><br><span class="line">n = <span class="built_in">length</span>(t);</span><br><span class="line"></span><br><span class="line">x = <span class="built_in">zeros</span>(<span class="number">1</span>, n); <span class="comment">% x(t)</span></span><br><span class="line">v = <span class="built_in">zeros</span>(<span class="number">1</span>, n); <span class="comment">% v(t) = dx/dt</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% åˆå§‹æ¡ä»¶</span></span><br><span class="line">x(<span class="number">1</span>) = <span class="number">0</span>; <span class="comment">% x(0) = 0</span></span><br><span class="line">v(<span class="number">1</span>) = <span class="number">1</span>; <span class="comment">% v(0) = dx/dt = 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% å®šä¹‰æ–¹ç¨‹ä¸­çš„å‡½æ•°</span></span><br><span class="line">p = @(t) <span class="number">2</span>; <span class="comment">% p(t)</span></span><br><span class="line">q = @(t) <span class="number">5</span>; <span class="comment">% q(t)</span></span><br><span class="line">g = @(t) <span class="built_in">cos</span>(t); <span class="comment">% g(t)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% å››é˜¶Runge-Kuttaæ³•æ±‚è§£</span></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:n<span class="number">-1</span></span><br><span class="line">    <span class="comment">% k1</span></span><br><span class="line">    k1x = v(<span class="built_in">i</span>);</span><br><span class="line">    k1v = -p(t(<span class="built_in">i</span>)) * v(<span class="built_in">i</span>) - q(t(<span class="built_in">i</span>)) * x(<span class="built_in">i</span>) + g(t(<span class="built_in">i</span>));</span><br><span class="line">    </span><br><span class="line">    <span class="comment">% k2</span></span><br><span class="line">    k2x = v(<span class="built_in">i</span>) + <span class="number">0.5</span>*h*k1v;</span><br><span class="line">    k2v = -p(t(<span class="built_in">i</span>) + <span class="number">0.5</span>*h) * (v(<span class="built_in">i</span>) + <span class="number">0.5</span>*h*k1v) - q(t(<span class="built_in">i</span>) + <span class="number">0.5</span>*h) * (x(<span class="built_in">i</span>) + <span class="number">0.5</span>*h*k1x) + g(t(<span class="built_in">i</span>) + <span class="number">0.5</span>*h);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">% k3</span></span><br><span class="line">    k3x = v(<span class="built_in">i</span>) + <span class="number">0.5</span>*h*k2v;</span><br><span class="line">    k3v = -p(t(<span class="built_in">i</span>) + <span class="number">0.5</span>*h) * (v(<span class="built_in">i</span>) + <span class="number">0.5</span>*h*k2v) - q(t(<span class="built_in">i</span>) + <span class="number">0.5</span>*h) * (x(<span class="built_in">i</span>) + <span class="number">0.5</span>*h*k2x) + g(t(<span class="built_in">i</span>) + <span class="number">0.5</span>*h);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">% k4</span></span><br><span class="line">    k4x = v(<span class="built_in">i</span>) + h*k3v;</span><br><span class="line">    k4v = -p(t(<span class="built_in">i</span>) + h) * (v(<span class="built_in">i</span>) + h*k3v) - q(t(<span class="built_in">i</span>) + h) * (x(<span class="built_in">i</span>) + h*k3x) + g(t(<span class="built_in">i</span>) + h);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">% æ›´æ–°xå’Œv</span></span><br><span class="line">    x(<span class="built_in">i</span>+<span class="number">1</span>) = x(<span class="built_in">i</span>) + (h/<span class="number">6</span>) * (k1x + <span class="number">2</span>*k2x + <span class="number">2</span>*k3x + k4x);</span><br><span class="line">    v(<span class="built_in">i</span>+<span class="number">1</span>) = v(<span class="built_in">i</span>) + (h/<span class="number">6</span>) * (k1v + <span class="number">2</span>*k2v + <span class="number">2</span>*k3v + k4v);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% ç»˜å›¾</span></span><br><span class="line"><span class="built_in">figure</span>(<span class="number">1</span>)</span><br><span class="line"><span class="built_in">plot</span>(t, x, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;DisplayName&#x27;</span>, <span class="string">&#x27;x(t) - RK4&#x27;</span>)</span><br><span class="line">title(<span class="string">&#x27;Solution of Second Order ODE using RK4&#x27;</span>)</span><br><span class="line">xlabel(<span class="string">&#x27;Time t&#x27;</span>)</span><br><span class="line">ylabel(<span class="string">&#x27;x(t)&#x27;</span>)</span><br><span class="line"><span class="built_in">legend</span> show</span><br><span class="line">grid on</span><br><span class="line"></span><br><span class="line"><span class="built_in">figure</span>(<span class="number">2</span>)</span><br><span class="line"><span class="built_in">plot</span>(t, v, <span class="string">&#x27;r&#x27;</span>, <span class="string">&#x27;DisplayName&#x27;</span>, <span class="string">&#x27;v(t) = dx/dt - RK4&#x27;</span>)</span><br><span class="line">title(<span class="string">&#x27;Velocity v(t) using RK4&#x27;</span>)</span><br><span class="line">xlabel(<span class="string">&#x27;Time t&#x27;</span>)</span><br><span class="line">ylabel(<span class="string">&#x27;v(t)&#x27;</span>)</span><br><span class="line"><span class="built_in">legend</span> show</span><br><span class="line">grid on</span><br></pre></td></tr></table></figure><p>å®é™…ä¸Š, æœ‰è¿™äº›åŸºæœ¬çš„ç®—æ³•å°±å·²ç»å¯ä»¥å®ç°é«˜ç²¾åº¦çš„æ•°å€¼ç§¯åˆ†æ¨¡æ‹Ÿäº†, æ¯”å¦‚å¯ä»¥ç”¨åœ¨æ•°å­¦å»ºæ¨¡æˆ–æ˜¯ä½ çš„ç§‘ç ”é¡¹ç›®ä¸­, å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨Matlabè‡ªå¸¦çš„å‡½æ•°(ODE45)å»æ±‚è§£: </p><script type="math/tex; mode=display">\frac{dy_1}{dt} = y_2 \\\frac{dy_2}{dt} = -3y_2 - 2y_1 + \cos(t)</script><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">% å¾®åˆ†æ–¹ç¨‹ç»„</span></span><br><span class="line">odes = @(t, y) [y(<span class="number">2</span>); <span class="number">-3</span>*y(<span class="number">2</span>) - <span class="number">2</span>*y(<span class="number">1</span>) + <span class="built_in">cos</span>(t)];</span><br><span class="line"></span><br><span class="line"><span class="comment">% åˆå§‹æ¡ä»¶</span></span><br><span class="line">y0 = [<span class="number">0</span>; <span class="number">1</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">% æ—¶é—´åŒºé—´</span></span><br><span class="line">tspan = [<span class="number">0</span> <span class="number">10</span>];</span><br><span class="line"></span><br><span class="line">[t, y] = ode45(odes, tspan, y0);</span><br><span class="line"><span class="built_in">plot</span>(t, y(:,<span class="number">1</span>))</span><br><span class="line">title(<span class="string">&#x27;Solution of Second Order ODE using ode45&#x27;</span>)</span><br><span class="line">xlabel(<span class="string">&#x27;Time t&#x27;</span>)</span><br><span class="line">ylabel(<span class="string">&#x27;y(t)&#x27;</span>)</span><br><span class="line">grid on</span><br></pre></td></tr></table></figure><h3 id="ä¸€é˜¶å¾®åˆ†æ–¹ç¨‹çš„å¹³è¡¡ç‚¹åŠç¨³å®šæ€§"><a href="#ä¸€é˜¶å¾®åˆ†æ–¹ç¨‹çš„å¹³è¡¡ç‚¹åŠç¨³å®šæ€§" class="headerlink" title="ä¸€é˜¶å¾®åˆ†æ–¹ç¨‹çš„å¹³è¡¡ç‚¹åŠç¨³å®šæ€§"></a>ä¸€é˜¶å¾®åˆ†æ–¹ç¨‹çš„å¹³è¡¡ç‚¹åŠç¨³å®šæ€§</h3><p>è®¾æœ‰å¾®åˆ†æ–¹ç¨‹</p><script type="math/tex; mode=display">\dot{x}(t)=f(x) \tag{(1)}</script><p>æ–¹ç¨‹å³ç«¯ä¸æ˜¾å«è‡ªå˜é‡ $t$,ç§°ä¸º<strong>è‡ªæ²»æ–¹ç¨‹</strong>.ä»£æ•°æ–¹ç¨‹</p><script type="math/tex; mode=display">f(x)=0 \tag{(2)}</script><p>çš„å®æ ¹ $x=x_0$ ç§°ä¸ºæ–¹ç¨‹ (1) çš„<strong>å¹³è¡¡ç‚¹</strong> (æˆ–å¥‡ç‚¹). å®ƒä¹Ÿæ˜¯æ–¹ç¨‹ (1) çš„è§£ (å¥‡è§£).<br>å¦‚æœå­˜åœ¨æŸä¸ªé‚»åŸŸ,ä½¿æ–¹ç¨‹ (1) çš„è§£ $x(t)$ ä»è¿™ä¸ªé‚»åŸŸå†…çš„æŸä¸ª $x(0)$ å‡ºå‘, æ»¡è¶³</p><script type="math/tex; mode=display">\lim _{t \rightarrow \infty} x(t)=x_0 \tag{(3)}</script><p>åˆ™ç§°å¹³è¡¡ç‚¹ $x_0$ æ˜¯<strong>ç¨³å®š</strong>çš„ (ç¨³å®šæ€§ç†è®ºä¸­ç§°æ¸è¿‘ç¨³å®š) ; å¦åˆ™, ç§° $x_0$ æ˜¯<strong>ä¸ç¨³å®š</strong>çš„ (ä¸æ¸è¿‘ç¨³å®š).<br>åˆ¤æ–­å¹³è¡¡ç‚¹ $x_0$ æ˜¯å¦ç¨³å®šé€šå¸¸æœ‰ä¸¤ç§æ–¹æ³•. åˆ©ç”¨å®šä¹‰å³ (3) å¼ç§°<strong>é—´æ¥æ³•</strong>. ä¸æ±‚æ–¹ç¨‹ (1) çš„è§£ $x(t)$, å› è€Œä¸åˆ©ç”¨ (3) å¼çš„æ–¹æ³•ç§°<strong>ç›´æ¥æ³•</strong>.ä¸‹é¢ä»‹ç»ç›´æ¥æ³•.<br>å°† $f(x)$ åœ¨ $x_0$ ç‚¹ä½œ Taylor å±•å¼€, åªå–ä¸€æ¬¡é¡¹, æ–¹ç¨‹ (1) è¿‘ä¼¼ä¸º</p><script type="math/tex; mode=display">\dot{x}(t)=f^{\prime}\left(x_0\right)\left(x-x_0\right) \tag{(4)}</script><p>(4) ç§°ä¸º (1) çš„è¿‘ä¼¼çº¿æ€§æ–¹ç¨‹, $x_0$ ä¹Ÿæ˜¯æ–¹ç¨‹ (4) çš„å¹³è¡¡ç‚¹. å…³äº $x_0$ ç‚¹ç¨³å®šæ€§æœ‰å¦‚ä¸‹çš„ç»“è®º:<br>è‹¥ $f^{\prime}\left(x_0\right)<0$, åˆ™ $x_0$ å¯¹äºæ–¹ç¨‹ (4) å’Œ (1) éƒ½æ˜¯ç§°ç¨³å®šçš„;è‹¥ $f^{\prime}\left(x_0\right)>0$, åˆ™ $x_0$ å¯¹äºæ–¹ç¨‹ $(4)$ å’Œ (1) éƒ½æ˜¯ä¸ç¨³å®šçš„.<br>$x_0$ å¯¹äºæ–¹ç¨‹ (4) çš„ç¨³å®šæ€§å¾ˆå®¹æ˜“ç”±å®šä¹‰ (3) è¯æ˜, å› ä¸ºè‹¥è®° $f^{\prime}\left(x_0\right)=a$, åˆ™ (4) çš„ä¸€èˆ¬è§£æ˜¯</p><script type="math/tex; mode=display">x(t)=c \mathrm{e}^{a t}+x_0 \tag{(5)}</script><p>å…¶ä¸­ $c$ æ˜¯ç”±åˆå§‹æ¡ä»¶å†³å®šçš„å¸¸æ•°, æ˜¾ç„¶, å½“ $a&lt;0$ æ—¶ (3) å¼æˆç«‹.<br>### 7.2 äºŒé˜¶å¾®åˆ†æ–¹ç¨‹çš„å¹³è¡¡ç‚¹å’Œç¨³å®šæ€§<br>äºŒé˜¶å¾®åˆ†æ–¹ç¨‹å¯ç”¨ä¸¤ä¸ªä¸€é˜¶å¾®åˆ†æ–¹ç¨‹è¡¨ä¸º</p><script type="math/tex; mode=display">\left\{\begin{array}{l}\dot{x}_1(t)=f\left(x_1, x_2\right) \\\dot{x}_2(t)=g\left(x_1, x_2\right)\end{array}\right. \tag{(6)}</script><p>å³ç«¯ä¸æ˜¾å« $t$, æ˜¯è‡ªæ²»æ–¹ç¨‹.ä»£æ•°æ–¹ç¨‹ç»„</p><script type="math/tex; mode=display">\left\{\begin{array}{l}f\left(x_1, x_2\right)=0 \\g\left(x_1, x_2\right)=0\end{array}\right. \tag{(7)}</script><p>çš„å®æ ¹ $x_1=x_1^0, x_2=x_2^0$ ç§°ä¸ºæ–¹ç¨‹ (6) çš„å¹³è¡¡ç‚¹, è®°ä½œ $P_0\left(x_1^0, x_2^0\right)$.<br>å¦‚æœå­˜åœ¨æŸä¸ªé‚»åŸŸ, ä½¿æ–¹ç¨‹ (6) çš„è§£ $x_1(t), x_2(t)$ ä»è¿™ä¸ªé‚»åŸŸå†…çš„æŸä¸ª $\left(x_1(0), x_2(0)\right)$ å‡ºå‘, æ»¡è¶³</p><script type="math/tex; mode=display">\lim _{t \rightarrow \infty} x_1(t)=x_1^0, \quad \lim _{t \rightarrow \infty} x_2(t)=x_2^0 \tag{(8)}</script><p>åˆ™ç§°å¹³è¡¡ç‚¹ $P_0$ æ˜¯<strong>ç¨³å®š</strong>çš„(æ¸è¿‘ç¨³å®š); å¦åˆ™, ç§° $P_0$ æ˜¯<strong>ä¸ç¨³å®š</strong>çš„(ä¸æ¸è¿‘ç¨³å®š).<br>ä¸ºäº†ç”¨ç›´æ¥æ³•è®¨è®ºæ–¹ç¨‹ (6) çš„å¹³è¡¡ç‚¹çš„ç¨³å®šæ€§, å…ˆçœ‹çº¿æ€§å¸¸ç³»æ•°æ–¹ç¨‹</p><script type="math/tex; mode=display">\left\{\begin{array}{l}\dot{x}_1(t)=a_1 x_1+a_2 x_2 \\\dot{x}_2(t)=b_1 x_1+b_2 x_2\end{array}\right. \tag{(9)}</script><p>ç³»æ•°çŸ©ä¼¡è®°ä½œ</p><script type="math/tex; mode=display">\boldsymbol{A}=\left[\begin{array}{ll}a_1 & a_2 \\b_1 & b_2\end{array}\right] \tag{(10)}</script><p>ä¸ºç ”ç©¶æ–¹ç¨‹ $(9)$ çš„æƒŸä¸€å¹³è¡¡ç‚¹ $P_0(0,0)$ çš„ç¨³å®šæ€§, å‡å®š $A$ çš„è¡Œåˆ—å¼</p><script type="math/tex; mode=display">\operatorname{det} A \neq 0 \tag{(11)}</script><p>$P_0(0,0)$ çš„ç¨³å®šæ€§ç”± $(9)$ çš„ç‰¹å¾æ–¹ç¨‹</p><script type="math/tex; mode=display">\operatorname{det}(A-\lambda I)=0 \tag{(12)}</script><p>çš„æ ¹ $\lambda$ (ç‰¹å¾æ ¹) å†³å®š.æ–¹ç¨‹ (12) å¯ä»¥å†™æˆè„œåŠ æ˜æ™£çš„å½¢å¼</p><script type="math/tex; mode=display">\left\{\begin{array}{l}\lambda^2+p \lambda+q=0 \\p=-\left(a_1+b_2\right) \\q=\operatorname{det} A\end{array}\right. \tag{(13)}</script><p>å°†ç‰¹å¾æ ¹è®°ä½œ $\lambda_1, \lambda_2$, åˆ™</p><script type="math/tex; mode=display">\lambda_1, \lambda_2=\frac{1}{2}\left(-p \pm \sqrt{p^2-4 q}\right) \tag{(14)}</script><p>æ–¹ç¨‹ (9) çš„ä¸€èˆ¬è§£å…·æœ‰å½¢å¼ $c_1 \mathrm{e}^{\lambda_1^{\prime}}+c_2 \mathrm{e}^{\lambda 2^{\prime}}\left(\lambda_1 \neq \lambda_2\right)$ æˆ– $c_1 \mathrm{e}^{\lambda_1^{\prime}}+c_2 t \mathrm{e}^{\lambda_1^{\prime}}\left(\lambda_1=\lambda_2\right), c_1, c_2$ ä¸ºä»»æ„å¸¸æ•°.æŒ‰ç…§ç¨³å®šæ€§çš„å®šä¹‰ (8) å¼å¯çŸ¥, å½“ $\lambda_1, \lambda_2$ ä¸ºè´Ÿæ•°æˆ–å­˜è´Ÿå®éƒ¨æ—¶ï¼Œ $P_0(0,0)$ æ˜¯ç¨³å®šå¹³è¡¡ç‚¹; è€Œå½“ $\lambda_1, \lambda_2$ æœ‰ä¸€ä¸ªä¸ºæ­£æ•°æˆ–æœ‰æ­£å®éƒ¨æ—¶, $P_0(0,0)$ æ˜¯ä¸ç¨³å®šå¹³è¡¡ç‚¹.åœ¨æ¡ä»¶(11)ä¸‹ $\lambda_1, \lambda_2$ ä¸å¯èƒ½ä¸º 0 .<br>å¾®åˆ†æ–¹ç¨‹ç¨³å®šæ€§ç†è®ºå°†å¹³è¡¡ç‚¹åˆ†ä¸ºç»“ç‚¹ã€ç„¦ç‚¹ã€éç‚¹ã€ä¸­å¿ƒç­‰ç±»å‹, å®Œå…¨ç”±ç‰¹å¾æ ¹ $\lambda_1, \lambda_2$ æˆ–ç›¸åº”çš„ $p, q$ å–å€¼å†³å®š.è¡¨ 1 ç®€æ˜åœ°ç»™å‡ºäº†è¿™äº›ç»“æœ, è¡¨ä¸­æœ€åä¸€åˆ— æŒ‡æŒ‰ç…§å®šä¹‰ (8)å¼å¾—åˆ°çš„å…³äºç¨³å®šæ€§çš„ç»“è®º.\</p><p>è¡¨1 ç”±ç‰¹å¾æ–¹ç¨‹å†³å®šçš„å¹³è¡¡ç‚¹çš„ç±»å‹å’Œç¨³å®šæ€§</p><script type="math/tex; mode=display">\begin{array}{|c|c|c|c|}\hline\lambda_1, \lambda_2 & p, q & å¹³è¡¡ç‚¹ç±»å‹ & ç¨³å®šæ€§\\\hline\lambda_1 < \lambda_2 <0 & p>0, q>0, p^2>4q & ç¨³å®šç»“ç‚¹ & ç¨³å®š\\\hline\lambda_1 > \lambda_2 > 0 & p<0, q>0, p^2>4q & ä¸ç¨³å®šç»“ç‚¹ & ä¸ç¨³å®š\\\hline\lambda_1 < 0 < \lambda_2 & q<0 & éç‚¹ & ä¸ç¨³å®š\\\hline\lambda_1 = \lambda_2 <0 & p>0, q>0, p^2=4q & ç¨³å®šé€€åŒ–ç»“ç‚¹ & ç¨³å®š\\\hline\lambda_1 = \lambda_2 > 0 & p<0, q>0, p^2=4q & ä¸ç¨³å®šé€€åŒ–ç»“ç‚¹ & ä¸ç¨³å®š\\\hline\lambda_{1,2}=\alpha \pm \beta i, \alpha<0 & p>0, q>0, p^2<4q & ç¨³å®šç„¦ç‚¹ & ç¨³å®š\\\hline\lambda_{1,2}=\alpha \pm \beta i, \alpha>0 & p<0, q>0, p^2<4q & ä¸ç¨³å®šç„¦ç‚¹ & ä¸ç¨³å®š\\\hline\lambda_{1,2}=\alpha \pm \beta i, \alpha=0 & p=0, q>0 & ä¸­å¿ƒ & ä¸ç¨³å®š\\\hline\end{array}</script><p>ç”±è¡¨ 1 å¯ä»¥çœ‹å‡º, æ ¹æ®ç‰¹å¾æ–¹ç¨‹çš„ç³»æ•° $p, q$ çš„æ­£è´Ÿå¾ˆå®¹æ˜“åˆ¤æ–­å¹³è¡¡ç‚¹çš„ç¨³å®šæ€§, å‡†åˆ™å¦‚ä¸‹:è‹¥</p><script type="math/tex; mode=display">p>0, q>0 \tag{(15)}</script><p>åˆ™å¹³è¡¡ç‚¹ç¨³å®šï¼›è‹¥</p><script type="math/tex; mode=display">p<0 \text { æˆ– } q<0 \tag{(16)}</script><p>åˆ™å¹³è¡¡ç‚¹ä¸ç¨³å®š.<br>ä»¥ä¸Šæ˜¯å¯¹çº¿æ€§æ–¹ç¨‹ $(9)$ çš„å¹³è¡¡ç‚¹ $P_0(0,0)$ ç¨³å®šæ€§çš„ç»“è®º. å¯¹äºä¸€èˆ¬çš„éçº¿æ€§æ–¹ç¨‹ (6), å¯ä»¥ç”¨è¿‘ä¼¼çº¿æ€§æ–¹æ³•åˆ¤æ–­å…¶å¹³è¡¡ç‚¹ $P_0\left(x_1^0, x_2^0\right)$ çš„ç¨³å®šæ€§. åœ¨ $P_0$ ç‚¹å°† $f\left(x_1, x_2\right)$ å’Œ $g\left(x_1, x_2\right)$ ä½œ Taylor å±•å¼€, åªå–ä¸€æ¬¡é¡¹,å¾— (6) çš„è¿‘ä¼¼çº¿æ€§æ–¹ç¨‹</p><script type="math/tex; mode=display">\left\{\begin{array}{l}\dot{x}_1(t)=f_{x_1}\left(x_1^0, x_2^0\right)\left(x_1-x_1^0\right)+f_{x_2}\left(x_1^0, x_2^0\right)\left(x_2-x_2^0\right) \\\dot{x}_2(t)=g_{x_1}\left(x_1^0, x_2^0\right)\left(x_1-x_1^0\right)+g_{x_2}\left(x_1^0, x_2^0\right)\left(x_2-x_2^0\right)\end{array}\right. \tag{(17)}</script><p>ç³»æ•°çŸ©é˜µè®°ä½œ</p><script type="math/tex; mode=display">\boldsymbol{A}=\left.\left[\begin{array}{ll}f_{x_1} & f_{x_2} \\g_{x_1} & g_{x_2}\end{array}\right]\right|_{P_0\left(x_1^0 \cdot x_2^0\right)} \tag{(18)}</script><p>ç‰¹å¾æ–¹ç¨‹ç³»æ•°ä¸º</p><script type="math/tex; mode=display">p=-\left.\left(f_{x_1}+g_{x_2}\right)\right|_{p_0}, \quad q=\operatorname{det} \boldsymbol{A} \tag{(19)}</script><p>æ˜¾ç„¶, $P_0$ ç‚¹å¯¹äºæ–¹ç¨‹ (17) çš„ç¨³å®šæ€§ç”±è¡¨ 1 æˆ–å‡†åˆ™ (15),ï¼ˆ16) å†³å®š, è€Œä¸”å·²ç»è¯æ˜äº†å¦‚ä¸‹ç»“è®º:<br>è‹¥æ–¹ç¨‹ (17) çš„ç‰¹å¾æ ¹ä¸ä¸º 0 æˆ–å®éƒ¨ä¸ä¸º 0 , åˆ™ $P_0$â€‹ ç‚¹å¯¹äºæ–¹ç¨‹ (6) çš„ç¨³å®šæ€§ä¸å¯¹äºè¿‘ä¼¼æ–¹ç¨‹ (17) çš„ç¨³å®šæ€§ç›¸åŒ, å³ç”±å‡†åˆ™ (15), (16) å†³å®š.<br>æœ€åï¼Œæå‡ºä»¥ä¸‹å‡ ç‚¹å€¼å¾—æ³¨æ„ï¼š</p><ol><li>å¹³è¡¡ç‚¹åŠå…¶ç¨³å®šæ€§çš„æ¦‚å¿µåªæ˜¯å¯¹<strong>è‡ªæ²»æ–¹ç¨‹</strong> $(1)$ ï¼Œ(6)è€Œè¨€æ‰æœ‰æ„ä¹‰.</li><li>éçº¿æ€§æ–¹ç¨‹ $(1),(6)$ çš„å¹³è¡¡ç‚¹çš„ç¨³å®šæ€§, ä¸ç›¸åº”çš„è¿‘ä¼¼çº¿æ€§æ–¹ç¨‹ (4), (17) çš„å¹³è¡¡ç‚¹çš„ç¨³å®šæ€§ä¸€è‡´, æ˜¯åœ¨éä¸´ç•Œæƒ…å†µä¸‹(å³ $a \neq 0$, æˆ– $p, q \neq 0$ ) å¾—åˆ°çš„, åœ¨ä¸´ç•Œæƒ…å†µä¸‹(å³ $a=0$ æˆ– $p, q=0$ )äºŒè€…å¯ä»¥ä¸ä¸€è‡´.</li><li>åœ¨è®¨è®ºå¹³è¡¡ç‚¹ç¨³å®šæ€§æ—¶, å¯¹åˆå§‹ç‚¹çš„è¦æ±‚æ˜¯å­˜åœ¨ä¸€ä¸ªé‚»åŸŸ, è¿™æ˜¯<strong>å±€éƒ¨ç¨³å®š</strong>çš„å®šä¹‰.å¦‚æœè¦æ±‚å¯¹ä»»æ„çš„åˆå§‹ç‚¹,(3), (8)å¼æˆç«‹, ç§°ä¸º<strong>å…¨å±€ç¨³å®š</strong>.å¯¹äºçº¿æ€§æ–¹ç¨‹, å±€éƒ¨ç¨³å®šä¸å…¨å±€ç¨³å®šæ˜¯ç­‰ä»·çš„; å¯¹äºéçº¿æ€§æ–¹ç¨‹, äºŒè€…ä¸åŒ.</li><li>å¯¹äºä¸´ç•Œæƒ…å†µå’Œéçº¿æ€§æ–¹ç¨‹çš„å…¨å±€ç¨³å®š,å¯ä»¥ç”¨ç›¸è½¨çº¿åˆ†ææ–¹æ³•è®¨è®º.</li></ol><h2 id="å¸¸ç”¨çš„å¾®åˆ†æ–¹ç¨‹æ¨¡å‹"><a href="#å¸¸ç”¨çš„å¾®åˆ†æ–¹ç¨‹æ¨¡å‹" class="headerlink" title="å¸¸ç”¨çš„å¾®åˆ†æ–¹ç¨‹æ¨¡å‹"></a>å¸¸ç”¨çš„å¾®åˆ†æ–¹ç¨‹æ¨¡å‹</h2><p>æœ‰å¾ˆå¤šå¸¸ç”¨çš„å¾®åˆ†æ–¹ç¨‹, è¿™é‡Œä¸¾ä¾‹ä¸¤ä¸ª, ä¸€ä¸ªæ˜¯ SIR , ä¸€ä¸ªæ˜¯Logisticæ¨¡å‹.</p><h3 id="SIRæ¨¡å‹"><a href="#SIRæ¨¡å‹" class="headerlink" title="SIRæ¨¡å‹"></a>SIRæ¨¡å‹</h3><p>SIRæ¨¡å‹æ˜¯æµè¡Œç—…å­¦ä¸­çš„ä¸€ç§æ•°å­¦æ¨¡å‹ï¼Œç”¨äºæè¿°ä¼ æŸ“ç—…åœ¨ç¾¤ä½“ä¸­çš„ä¼ æ’­ã€‚SIRæ¨¡å‹å°†äººå£åˆ†ä¸ºä¸‰ç±»ï¼š</p><ol><li><strong>Sï¼ˆæ˜“æ„Ÿè€…ï¼ŒSusceptibleï¼‰</strong>ï¼šå°šæœªæ„ŸæŸ“ç–¾ç—…ä½†æœ‰å¯èƒ½è¢«æ„ŸæŸ“çš„äººã€‚</li><li><strong>Iï¼ˆæ„ŸæŸ“è€…ï¼ŒInfectiousï¼‰</strong>ï¼šå·²ç»è¢«æ„ŸæŸ“å¹¶ä¸”å¯ä»¥ä¼ æ’­ç–¾ç—…çš„äººã€‚</li><li><strong>Rï¼ˆç§»é™¤è€…ï¼ŒRemovedï¼‰</strong>ï¼šå·²ç»åº·å¤æˆ–æ­»äº¡å¹¶ä¸”ä¸å†å…·æœ‰ä¼ æŸ“æ€§çš„äººã€‚</li></ol><h4 id="æ•°å­¦æ¨¡å‹"><a href="#æ•°å­¦æ¨¡å‹" class="headerlink" title="æ•°å­¦æ¨¡å‹"></a>æ•°å­¦æ¨¡å‹</h4><p>SIRæ¨¡å‹ç”¨ä»¥ä¸‹ä¸‰ä¸ªå¾®åˆ†æ–¹ç¨‹æè¿°ç¾¤ä½“ä¸­è¿™ä¸‰ç±»äººå£çš„å˜åŒ–ï¼š</p><ol><li><strong>æ˜“æ„Ÿè€…çš„å˜åŒ–ç‡</strong>ï¼š dS/dt=âˆ’Î²SI</li><li><strong>æ„ŸæŸ“è€…çš„å˜åŒ–ç‡</strong>ï¼š dI/dt=Î²SIâˆ’Î³I</li><li><strong>ç§»é™¤è€…çš„å˜åŒ–ç‡</strong>ï¼š dR/dt=Î³I</li></ol><p>å…¶ä¸­ï¼š</p><ul><li>Î² æ˜¯ä¼ æŸ“ç‡ç³»æ•°ï¼Œè¡¨ç¤ºæ¯ä¸ªæ„ŸæŸ“è€…æ¯å¤©ä½¿å¤šå°‘æ˜“æ„Ÿè€…æ„ŸæŸ“ã€‚</li><li>Î³ æ˜¯æ¢å¤ç‡ç³»æ•°ï¼Œè¡¨ç¤ºæ„ŸæŸ“è€…æ¯å¤©åº·å¤çš„æ¯”ä¾‹ã€‚</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> scipy.integrate <span class="keyword">import</span> odeint</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰SIRæ¨¡å‹çš„å¾®åˆ†æ–¹ç¨‹</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">sir_model</span>(<span class="params">y, t, beta, gamma</span>):</span><br><span class="line">    S, I, R = y</span><br><span class="line">    dS_dt = -beta * S * I</span><br><span class="line">    dI_dt = beta * S * I - gamma * I</span><br><span class="line">    dR_dt = gamma * I</span><br><span class="line">    <span class="keyword">return</span> [dS_dt, dI_dt, dR_dt]</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆå§‹æ¡ä»¶</span></span><br><span class="line">S0 = <span class="number">0.99</span>  <span class="comment"># åˆå§‹æ˜“æ„Ÿè€…æ¯”ä¾‹</span></span><br><span class="line">I0 = <span class="number">0.01</span>  <span class="comment"># åˆå§‹æ„ŸæŸ“è€…æ¯”ä¾‹</span></span><br><span class="line">R0 = <span class="number">0.0</span>   <span class="comment"># åˆå§‹ç§»é™¤è€…æ¯”ä¾‹</span></span><br><span class="line">initial_conditions = [S0, I0, R0]</span><br><span class="line"></span><br><span class="line"><span class="comment"># å‚æ•°</span></span><br><span class="line">beta = <span class="number">0.3</span>   <span class="comment"># ä¼ æŸ“ç‡ç³»æ•°</span></span><br><span class="line">gamma = <span class="number">0.1</span>  <span class="comment"># æ¢å¤ç‡ç³»æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ—¶é—´ç‚¹ï¼ˆå¤©æ•°ï¼‰</span></span><br><span class="line">t = np.linspace(<span class="number">0</span>, <span class="number">160</span>, <span class="number">160</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ±‚è§£å¾®åˆ†æ–¹ç¨‹</span></span><br><span class="line">solution = odeint(sir_model, initial_conditions, t, args=(beta, gamma))</span><br><span class="line">S, I, R = solution.T</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»˜åˆ¶ç»“æœ</span></span><br><span class="line">plt.figure(figsize=(<span class="number">10</span>, <span class="number">6</span>))</span><br><span class="line">plt.plot(t, S, label=<span class="string">&#x27;Susceptible&#x27;</span>, color=<span class="string">&#x27;blue&#x27;</span>)</span><br><span class="line">plt.plot(t, I, label=<span class="string">&#x27;Infectious&#x27;</span>, color=<span class="string">&#x27;red&#x27;</span>)</span><br><span class="line">plt.plot(t, R, label=<span class="string">&#x27;Removed&#x27;</span>, color=<span class="string">&#x27;green&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;Time (days)&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;Proportion of population&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;SIR Model&#x27;</span>)</span><br><span class="line">plt.legend()</span><br><span class="line">plt.grid(<span class="literal">True</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><h3 id="Logisticäººå£å¢é•¿æ¨¡å‹"><a href="#Logisticäººå£å¢é•¿æ¨¡å‹" class="headerlink" title="Logisticäººå£å¢é•¿æ¨¡å‹"></a>Logisticäººå£å¢é•¿æ¨¡å‹</h3><p>Logisticäººå£å¢é•¿æ¨¡å‹æ˜¯æè¿°äººå£å¢é•¿çš„ä¸€ç§æ¨¡å‹ï¼Œå®ƒè€ƒè™‘äº†èµ„æºæœ‰é™å¯¹äººå£å¢é•¿çš„é™åˆ¶ã€‚è¯¥æ¨¡å‹æ˜¯å¯¹ç®€å•çš„æŒ‡æ•°å¢é•¿æ¨¡å‹çš„æ‰©å±•ï¼Œèƒ½å¤Ÿæ›´çœŸå®åœ°åæ˜ å®é™…æƒ…å†µä¸‹äººå£å¢é•¿çš„åŠ¨æ€ã€‚</p><script type="math/tex; mode=display">\frac{dP}{dt} = rP \left(1 - \frac{P}{K}\right)</script><p>æ±‚è§£å‡ºæ¥å,å¾—åˆ°:</p><script type="math/tex; mode=display">P(t) = \frac{K}{1 + \left(\frac{K - P_0}{P_0}\right)e^{-rt}}</script><p>å…¶ä¸­ï¼šP(t) æ˜¯æ—¶é—´ t æ—¶çš„äººå£æ•°é‡, r æ˜¯äººå£å¢é•¿ç‡ï¼ˆå•ä½æ—¶é—´å†…çš„å¢é•¿ç‡ï¼‰, K æ˜¯ç¯å¢ƒçš„æ‰¿è½½èƒ½åŠ›æˆ–æœ€å¤§äººå£å®¹é‡ï¼Œå³ç³»ç»Ÿèƒ½å¤Ÿæ”¯æŒçš„æœ€å¤§äººå£æ•°ã€‚</p><h3 id="æ¨¡å‹çš„è§£é‡Š"><a href="#æ¨¡å‹çš„è§£é‡Š" class="headerlink" title="æ¨¡å‹çš„è§£é‡Š"></a>æ¨¡å‹çš„è§£é‡Š</h3><ul><li><strong>æŒ‡æ•°å¢é•¿é˜¶æ®µ</strong>ï¼šå½“äººå£ P å¾ˆå°ï¼Œç›¸å¯¹äº K æ¥è¯´ï¼Œå¯ä»¥è¿‘ä¼¼åœ°çœ‹ä½œ P å’Œ K çš„å·®å€¼å¾ˆå¤§ï¼Œå› æ­¤äººå£å¢é•¿å¯ä»¥è¿‘ä¼¼ä¸ºæŒ‡æ•°å¢é•¿ã€‚</li><li><strong>å‡ç¼“é˜¶æ®µ</strong>ï¼šå½“äººå£æ¥è¿‘ K æ—¶ï¼Œå¢é•¿ç‡é€æ¸å‡å°ï¼Œå› ä¸º 1âˆ’PK é€æ¸æ¥è¿‘é›¶ã€‚è¿™è¡¨ç¤ºèµ„æºæœ‰é™çš„æƒ…å†µä¸‹ï¼Œäººå£å¢é•¿çš„é€Ÿåº¦å‡æ…¢ã€‚</li><li><strong>ç¨³å®šé˜¶æ®µ</strong>ï¼šå½“ P è¾¾åˆ° K æ—¶ï¼Œäººå£å¢é•¿ç‡è¶‹è¿‘äºé›¶ï¼Œç³»ç»Ÿè¾¾åˆ°ç¨³å®šçŠ¶æ€ï¼Œå³è¾¾åˆ°ç¯å¢ƒæ‰¿è½½èƒ½åŠ›çš„æœ€å¤§å€¼ã€‚</li></ul><p>å‡è®¾ä¸€ä¸ªåœ°åŒºçš„äººå£å¢é•¿ç‡ r=0.1ï¼Œç¯å¢ƒæ‰¿è½½èƒ½åŠ› K=1000ï¼Œåˆå§‹äººå£ P0=10ã€‚å¯ä»¥é€šè¿‡ä¸Šé¢çš„å…¬å¼è®¡ç®—ä»»æ„æ—¶åˆ» t çš„äººå£æ•°é‡ã€‚</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">% å‚æ•°</span></span><br><span class="line">r = <span class="number">0.1</span>;</span><br><span class="line">K = <span class="number">1000</span>;</span><br><span class="line">P0 = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">% æ—¶é—´</span></span><br><span class="line">t = <span class="built_in">linspace</span>(<span class="number">0</span>, <span class="number">100</span>, <span class="number">500</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">% Logisticå¢é•¿æ¨¡å‹</span></span><br><span class="line">P = K ./ (<span class="number">1</span> + ((K - P0) / P0) .* <span class="built_in">exp</span>(-r * t));</span><br><span class="line"></span><br><span class="line"><span class="comment">% ç»˜åˆ¶ç»“æœ</span></span><br><span class="line"><span class="built_in">plot</span>(t, P)</span><br><span class="line">title(<span class="string">&#x27;Logistic Population Growth&#x27;</span>)</span><br><span class="line">xlabel(<span class="string">&#x27;Time&#x27;</span>)</span><br><span class="line">ylabel(<span class="string">&#x27;Population&#x27;</span>)</span><br><span class="line">grid on</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> æ•°å€¼åˆ†æ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç”¨Matlabæ±‚è§£ä¼˜åŒ–è§„åˆ’é—®é¢˜(Updating...)</title>
      <link href="/2024/08/21/%E7%94%A8Matlab%E6%B1%82%E8%A7%A3%E4%BC%98%E5%8C%96%E8%A7%84%E5%88%92%E9%97%AE%E9%A2%98/"/>
      <url>/2024/08/21/%E7%94%A8Matlab%E6%B1%82%E8%A7%A3%E4%BC%98%E5%8C%96%E8%A7%84%E5%88%92%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¼˜åŒ–é—®é¢˜"><a href="#ä¼˜åŒ–é—®é¢˜" class="headerlink" title="ä¼˜åŒ–é—®é¢˜"></a>ä¼˜åŒ–é—®é¢˜</h1><p>åœ¨ç°ä»£å·¥ç¨‹ä¸ç§‘å­¦ç ”ç©¶ä¸­ï¼Œä¼˜åŒ–é—®é¢˜çš„æ±‚è§£æ‰®æ¼”ç€è‡³å…³é‡è¦çš„è§’è‰²ã€‚ä»èµ„æºåˆ†é…åˆ°äº§å“è®¾è®¡ï¼Œä»æ§åˆ¶ç³»ç»Ÿåˆ°æ•°æ®åˆ†æï¼Œå‡ ä¹æ¯ä¸€ä¸ªé¢†åŸŸéƒ½æ¶‰åŠåˆ°å¦‚ä½•åœ¨å¤æ‚çš„çº¦æŸæ¡ä»¶ä¸‹ï¼Œæ‰¾åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªæœ€ä¼˜è§£çš„æŒ‘æˆ˜ã€‚ä¸ºäº†åº”å¯¹è¿™äº›æŒ‘æˆ˜ï¼Œä¸åŒç±»å‹çš„ä¼˜åŒ–æ–¹æ³•è¢«å¹¿æ³›åº”ç”¨ï¼Œå…¶ä¸­æœ€ä¸ºå¸¸è§çš„åŒ…æ‹¬çº¿æ€§è§„åˆ’ã€éçº¿æ€§è§„åˆ’ã€æ•´æ•°è§„åˆ’å’Œå¤šç›®æ ‡è§„åˆ’ã€‚</p><p>å®é™…ä¸Šï¼Œç»å¸¸é˜…è¯»å·¥ç¨‹æ–¹é¢çš„æ–‡çŒ®å°±å¯ä»¥å‘ç°ï¼Œè®¸å¤šé—®é¢˜æœ€åéƒ½å¯ä»¥ç”¨è¿™äº›æ–¹æ³•æ¥å»ºç«‹æˆä¸€ä¸ªå•ç›®æ ‡æˆ–å¤šç›®æ ‡çš„ä¼˜åŒ–æ¨¡å‹å»è§£å†³å®é™…é—®é¢˜ã€‚</p><h2 id="çº¿æ€§è§„åˆ’"><a href="#çº¿æ€§è§„åˆ’" class="headerlink" title="çº¿æ€§è§„åˆ’"></a>çº¿æ€§è§„åˆ’</h2><p>å¯¹äºçº¿æ€§è§„åˆ’è€Œè¨€ï¼Œå¯ä»¥ç”¨ä»¥ä¸‹çš„å…¬å¼æ¥è¡¨è¾¾ã€‚</p><script type="math/tex; mode=display">\text{Minimize} \quad & \mathbf{c}^\top \mathbf{x} \\\text{subject to} \quad &\begin{cases}\mathbf{A} \mathbf{x} \leq \mathbf{b}\\Aeq\cdot x = beq \\lb â‰¤xâ‰¤ub\end{cases}</script><p>å…¶ä¸­ï¼Œå¯¹äºç›®æ ‡å‡½æ•°ï¼Œå¯ä»¥é€šè¿‡åœ¨å‰é¢åŠ ä¸€ä¸ªç¬¦å·ï¼Œå°†ä¸€ä¸ªæœ€å¤§å€¼è½¬æ¢æˆæœ€å°å€¼é—®é¢˜ï¼Œ$c$æ˜¯ç›®æ ‡å‡½æ•°çš„ç³»æ•°å‘é‡ã€‚nÃ—1ï¼Œå…¶ä¸­ n æ˜¯å†³ç­–å˜é‡ x çš„æ•°é‡ã€‚Aæ˜¯ä¸ç­‰å¼çº¦æŸçš„ç³»æ•°çŸ©é˜µï¼Œbæ˜¯ä¸ç­‰å¼çº¦æŸçš„å¸¸æ•°å‘é‡ï¼Œè€ŒAeqå’Œbeqå°±æ˜¯ç­‰å¼çº¦æŸçš„ç³»æ•°çŸ©é˜µå’Œå¸¸æ•°å‘é‡ï¼Œå¯¹äºå†³ç­–å˜é‡x,æœ‰lbä¸ubçš„ä¸Šä¸‹é™ã€‚</p><p>å¯¹äºæ­¤ç±»é—®é¢˜ï¼Œå¯ä»¥ç”¨Matlabçš„linprogå‡½æ•°å»æ±‚è§£ã€‚</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[x,fval] = linprog(f,A,b,Aeq,beq,lb,ub)</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œxè¿”å›å†³ç­–å˜é‡çš„å–å€¼ï¼Œfvalè¿”å›ç›®æ ‡å‡½æ•°çš„æœ€ä¼˜è§£ï¼Œfä¸ºä¼˜åŒ–å‡½æ•°çš„ç³»æ•°ã€‚</p><p><strong>å®ä¾‹</strong>ï¼šå‡è®¾ä¼˜åŒ–ä¸€ä¸ªäº§å“ç”Ÿäº§å’Œèµ„æºåˆ†é…è®¡åˆ’ï¼Œå…¶ä¸­ $x_{ij}$ä»£è¡¨åœ¨ç¬¬ (i) ç±»äº§å“çš„ç¬¬ (j) ç§èµ„æºçš„åˆ†é…é‡ã€‚ç›®æ ‡æ˜¯æœ€å¤§åŒ–èµ„æºçš„æ€»ä»·å€¼ï¼ˆåŸºäºç³»æ•°çŸ©é˜µ Cï¼‰ã€‚çº¦æŸæ¡ä»¶åŒ…æ‹¬æ¯ç±»äº§å“çš„æœ€å¤§èµ„æºé™åˆ¶ã€èµ„æºçš„æ€»éœ€æ±‚é‡ï¼Œä»¥åŠæ¯ç§èµ„æºåˆ†é…é‡ä¸èƒ½ä¸ºè´Ÿã€‚</p><script type="math/tex; mode=display">\text{maximize } z = \sum_{i=1}^2 \sum_{j=1}^3 c_{ij} x_{ij}</script><script type="math/tex; mode=display">\sum_{j=1}^3 x_{1j} \leq 10 \\\sum_{j=1}^3 x_{2j} \leq 15 \\\sum_{i=1}^2 \sum_{j=1}^3 x_{ij} = 20 \\x_{ij} \geq 0 \text{ for all } i \text{ and } j</script><script type="math/tex; mode=display">C = \begin{bmatrix}4 & 3 & 2 \\5 & 6 & 1\end{bmatrix}</script><p>åœ¨ MATLAB çš„ <code>linprog</code> å‡½æ•°ä¸­ï¼Œæ‰€æœ‰çš„å˜é‡éœ€è¦è¢«å±•å¹³ï¼ˆflattenedï¼‰æˆä¸€ä¸ªä¸€ç»´åˆ—å‘é‡è¿›è¡Œå¤„ç†ã€‚å°½ç®¡åœ¨é—®é¢˜çš„å®é™…èƒŒæ™¯ä¸­ï¼Œå˜é‡æ˜¯ä¸€ä¸ªäºŒç»´çŸ©é˜µï¼ˆæ¯”å¦‚ 2Ã—32ï¼‰ï¼Œä½†ä¸ºäº†ç®€åŒ–è®¡ç®—ï¼Œ<code>linprog</code> åªæ¥å—ä¸€ç»´çš„å‘é‡å½¢å¼ã€‚å› æ­¤ï¼ŒäºŒç»´å˜é‡çŸ©é˜µ $x_{ij}$è¢«å±•å¹³æˆä¸€ä¸ªä¸€ç»´åˆ—å‘é‡ã€‚</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">c = [<span class="number">-4</span>,<span class="number">-3</span>,<span class="number">-2</span>,<span class="number">-5</span>,<span class="number">-6</span>,<span class="number">-1</span>];  <span class="comment">% ç›®æ ‡å‡½æ•°ç³»æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% çº¦æŸçŸ©é˜µ</span></span><br><span class="line">A = [<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>;</span><br><span class="line">     <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>];</span><br><span class="line"><span class="comment">% çº¦æŸå‘é‡</span></span><br><span class="line">b = [<span class="number">10</span>; <span class="number">15</span>];</span><br><span class="line">Aeq = <span class="built_in">ones</span>(<span class="number">1</span>, <span class="number">6</span>);  <span class="comment">% çº¿æ€§ç­‰å¼çº¦æŸçŸ©é˜µ</span></span><br><span class="line">beq = <span class="number">20</span>;  <span class="comment">% çº¿æ€§ç­‰å¼çº¦æŸå‘é‡</span></span><br><span class="line">lb = <span class="built_in">zeros</span>(<span class="number">6</span>, <span class="number">1</span>);  <span class="comment">% å˜é‡çš„ä¸‹ç•Œ</span></span><br><span class="line"></span><br><span class="line">options = optimoptions(<span class="string">&#x27;linprog&#x27;</span>,<span class="string">&#x27;Display&#x27;</span>,<span class="string">&#x27;none&#x27;</span>); </span><br><span class="line">[x, fval] = linprog(c, A, b, Aeq, beq, lb, [], options);</span><br><span class="line"></span><br><span class="line">fprintf(<span class="string">&#x27;æœ€å¤§åŒ–çš„ç›®æ ‡å€¼ z = %.2f\n&#x27;</span>, -fval);  <span class="comment">% ç›®æ ‡å‡½æ•°å€¼ï¼Œè®°å¾—å–è´Ÿå€¼æ¢å¤åˆ°æœ€å¤§åŒ–</span></span><br></pre></td></tr></table></figure><h2 id="éçº¿æ€§è§„åˆ’"><a href="#éçº¿æ€§è§„åˆ’" class="headerlink" title="éçº¿æ€§è§„åˆ’"></a>éçº¿æ€§è§„åˆ’</h2><p>åœ¨åŸæœ‰çš„çº¿æ€§è§„åˆ’çš„åŸºç¡€ä¸Šç¨ä½œä¿®æ”¹ï¼Œå°±å¯ä»¥å¾—åˆ°ä»¥ä¸‹å¼å­ï¼š</p><script type="math/tex; mode=display">\text{Minimize} \quad f(x) \\\text{subject to} \quad &\begin{cases}\mathbf{A} \mathbf{x} \leq \mathbf{b},Aeq\cdot x = beq \\c(x)â‰¤0ï¼ŒCeq(x)=0 \\lb â‰¤xâ‰¤ub\end{cases}</script><p>å…¶ä¸­ï¼Œc(x)è¡¨ç¤ºéçº¿æ€§ä¸ç­‰å¼çº¦æŸï¼ŒCeqä¸ºéçº¿æ€§ç­‰å¼çº¦æŸã€‚</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[x,value]=fmincon(func,x0,A,b,Aeq,beq,lb,ub,nonlconï¼Œoptions)</span><br></pre></td></tr></table></figure><script type="math/tex; mode=display">\begin{aligned}&min\quad f(x)={x_1}^2+{x_2}^2+{x_3}^2-6\\&s.t.\begin{cases}x_1^2-x_2+0*x_3=0\\-x_1+x_2^2-x_3^3+2\leq0\\x_1+x_2^2-2x_3-5\leq0\\x_1,x_2,x_3\geq0\end{cases}\end{aligned}</script><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>=<span class="title">func</span><span class="params">(x)</span></span></span><br><span class="line">func=sum(x.^<span class="number">2</span>)<span class="number">-6</span>;</span><br></pre></td></tr></table></figure><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">[C,Ceq]</span>=<span class="title">nonlcon</span><span class="params">(x)</span></span></span><br><span class="line">C=[-x(<span class="number">1</span>)+x(<span class="number">2</span>)^<span class="number">2</span>-x(<span class="number">3</span>)^<span class="number">2</span>+<span class="number">2</span>;</span><br><span class="line">x(<span class="number">1</span>)+x(<span class="number">2</span>)^<span class="number">2</span><span class="number">-2</span>*x(<span class="number">3</span>)<span class="number">-5</span>]</span><br><span class="line">Ceq=[x(<span class="number">1</span>)^<span class="number">2</span>-x(<span class="number">2</span>)]</span><br></pre></td></tr></table></figure><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[x,value]=fmincon(<span class="string">&#x27;func&#x27;</span>,[<span class="number">2</span>,<span class="number">1</span>,<span class="number">0</span>],[],[],[],[],[<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],[],<span class="string">&#x27;nonlcon&#x27;</span>);</span><br></pre></td></tr></table></figure><h2 id="é—ä¼ ç®—æ³•å·¥å…·ç®±"><a href="#é—ä¼ ç®—æ³•å·¥å…·ç®±" class="headerlink" title="é—ä¼ ç®—æ³•å·¥å…·ç®±"></a>é—ä¼ ç®—æ³•å·¥å…·ç®±</h2><p>äº‹å®ä¸Šï¼Œéçº¿æ€§è§„åˆ’æ±‚å‡ºæ¥çš„å¾€å¾€æ˜¯å±€éƒ¨æœ€ä¼˜è§£ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ä¸€äº›æ™ºèƒ½ä¼˜åŒ–ç®—æ³•å·¥å…·ç®±å»è§£å†³ï¼Œè¿™é‡Œä»¥2023å¹´æ•°å­¦å»ºæ¨¡å›½èµ›Aé¢˜å…¶ä¸­ä¸€ç¯‡ä¼˜ç§€è®ºæ–‡çš„æ¨¡å‹ä¸ºä¾‹ï¼š</p><script type="math/tex; mode=display">\eta_{ijk} = \frac{A(ST_i, D_j) \cdot B(ST_i, D_j)}{\sqrt{(x_k - x_0)^2 + (y_k - y_0)^2 + H^2}}</script><p>å…¶ä¸­ï¼š</p><ul><li>A(STi,Dj) æ˜¯ç”±æ—¶é—´å’Œæ—¥æœŸç¡®å®šçš„å¤ªé˜³é«˜åº¦è§’å‚æ•°ã€‚</li><li>B(STi,Dj)æ˜¯ç”±æ—¶é—´å’Œæ—¥æœŸç¡®å®šçš„å¤ªé˜³æ–¹ä½è§’å‚æ•°ã€‚</li><li>(xk,yk)æ˜¯ç¬¬ kkk ä¸ªå®šæ—¥é•œçš„æ°´å¹³åæ ‡ã€‚</li><li>(x0,y0)æ˜¯èšå…‰ç‚¹çš„æ°´å¹³åæ ‡ï¼ˆä¾‹å¦‚ x0=0,y0=âˆ’250ï¼‰ã€‚</li><li>H æ˜¯æ‰€æœ‰å®šæ—¥é•œçš„å›ºå®šé«˜åº¦ã€‚</li></ul><p>ä»¥ä¸‹æ˜¯å…¬å¼çš„latexä»£ç ï¼Œç”±äºç½‘é¡µæ— æ³•ç¼–è¯‘ï¼Œæ•…æä¾›æºä»£ç </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\max_&#123;r,l,w,h,N,I_&#123;a&#125;&#125;\quad\overline&#123;E&#125;_&#123;u&#125;\left(r,l,w,h,N,I_&#123;a&#125;\right)=\frac&#123;\sum_&#123;&#123;i\operatorname&#123;=&#125;1&#125;&#125;^&#123;12&#125;\sum_&#123;&#123;j\operatorname&#123;=&#125;1&#125;&#125;^&#123;5&#125;\sum_&#123;&#123;k\operatorname&#123;=&#125;1&#125;&#125;^&#123;N&#125;DNI_&#123;ij&#125;\cdot\eta_&#123;ijk&#125;&#125;&#123;60N&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s.t.\begin&#123;cases&#125;r\in[-R,R]\\l,w\in[2m,8m]\\l\leqslant w\\h\in[2m,6m]\\h&gt;\frac&#123;1&#125;&#123;2&#125;l\\N\in[1000,5000]\\\sqrt&#123;&#123;x_&#123;a&#125;&#125;^&#123;2&#125;+&#123;y_&#123;a&#125;&#125;^&#123;2&#125;&#125;\leqslant R\\\sqrt&#123;&#123;x_&#123;a&#125;&#125;^&#123;2&#125;+&#123;(y_&#123;a&#125;-r)&#125;^&#123;2&#125;&#125;\geqslant100\\\sqrt&#123;\left(x_&#123;a&#125;-x_&#123;b&#125;\right)^&#123;2&#125;+\left(y_&#123;a&#125;-y_&#123;b&#125;\right)^&#123;2&#125;&#125;&gt;w+5\\\overline&#123;E&#125;_&#123;fictd&#125;=\frac&#123;\sum_&#123;i=1&#125;^&#123;12&#125;\sum_&#123;j=1&#125;^&#123;5&#125;\sum_&#123;k=1&#125;^&#123;N&#125;DNI_&#123;ij&#125;\cdot A_&#123;k&#125;\cdot\eta_&#123;ijk&#125;&#125;&#123;60&#125;\geqslant60MW&amp;&amp;\end&#123;cases&#125;</span><br></pre></td></tr></table></figure><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line">clear;</span><br><span class="line">clc;</span><br><span class="line"></span><br><span class="line"><span class="comment">% é—®é¢˜å‚æ•°</span></span><br><span class="line">N = <span class="number">2739</span>;      <span class="comment">% å®šæ—¥é•œæ•°é‡</span></span><br><span class="line">H = <span class="number">4</span>;         <span class="comment">% å®šæ—¥é•œé«˜åº¦</span></span><br><span class="line">R = <span class="number">350</span>;       <span class="comment">% æœ€å¤§åŠå¾„</span></span><br><span class="line">l_min = <span class="number">2</span>; l_max = <span class="number">8</span>;  <span class="comment">% l çš„èŒƒå›´</span></span><br><span class="line">w_min = <span class="number">2</span>; w_max = <span class="number">8</span>;  <span class="comment">% w çš„èŒƒå›´</span></span><br><span class="line">h_min = <span class="number">2</span>; h_max = <span class="number">6</span>;  <span class="comment">% h çš„èŒƒå›´</span></span><br><span class="line">x0 = <span class="number">0</span>; y0 = <span class="number">-250</span>;     <span class="comment">% èšå…‰ç‚¹çš„åæ ‡</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% é—ä¼ ç®—æ³•å‚æ•°</span></span><br><span class="line">ns = N * <span class="number">2</span> + <span class="number">3</span>;        <span class="comment">% è¦ä¼˜åŒ–çš„å˜é‡æ•° (2N ä¸ªåæ ‡ + 3 ä¸ªå°ºå¯¸å˜é‡ l, w, h)</span></span><br><span class="line">lb = [-R * <span class="built_in">ones</span>(<span class="number">1</span>, N*<span class="number">2</span>), l_min, w_min, h_min];  <span class="comment">% ä¸‹ç•Œ</span></span><br><span class="line">ub = [R * <span class="built_in">ones</span>(<span class="number">1</span>, N*<span class="number">2</span>), l_max, w_max, h_max];   <span class="comment">% ä¸Šç•Œ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% é—ä¼ ç®—æ³•æ±‚è§£</span></span><br><span class="line">[x, fval] = ga(@objective_function, ns, [], [], [], [], lb, ub, @nonlin_constraints);</span><br><span class="line"></span><br><span class="line"><span class="comment">% ä¼˜åŒ–åçš„å®šæ—¥é•œåæ ‡</span></span><br><span class="line">x_a = x(<span class="number">1</span>:N);</span><br><span class="line">y_a = x(N+<span class="number">1</span>:<span class="number">2</span>*N);</span><br><span class="line"></span><br><span class="line"><span class="comment">% ä¼˜åŒ–åçš„å°ºå¯¸å˜é‡</span></span><br><span class="line">l_opt = x(<span class="keyword">end</span><span class="number">-2</span>);</span><br><span class="line">w_opt = x(<span class="keyword">end</span><span class="number">-1</span>);</span><br><span class="line">h_opt = x(<span class="keyword">end</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">% æ˜¾ç¤ºä¼˜åŒ–ç»“æœ</span></span><br><span class="line"><span class="built_in">disp</span>([<span class="string">&#x27;ä¼˜åŒ–åçš„ç›®æ ‡å‡½æ•°å€¼: &#x27;</span>, num2str(fval)]);</span><br><span class="line"><span class="built_in">disp</span>(<span class="string">&#x27;ä¼˜åŒ–åçš„å®šæ—¥é•œåæ ‡:&#x27;</span>);</span><br><span class="line"><span class="built_in">disp</span>([x_a&#x27;, y_a&#x27;]);</span><br><span class="line"><span class="built_in">disp</span>([<span class="string">&#x27;ä¼˜åŒ–åçš„ l, w, h: &#x27;</span>, num2str(l_opt), <span class="string">&#x27;, &#x27;</span>, num2str(w_opt), <span class="string">&#x27;, &#x27;</span>, num2str(h_opt)]);</span><br><span class="line"></span><br><span class="line"><span class="comment">% ç›®æ ‡å‡½æ•°å®šä¹‰</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span> = <span class="title">objective_function</span><span class="params">(x)</span></span></span><br><span class="line">    N = <span class="number">2739</span>; x0 = <span class="number">0</span>; y0 = <span class="number">-250</span>;</span><br><span class="line">    ST = [<span class="number">9</span>, <span class="number">10.5</span>, <span class="number">12</span>, <span class="number">13.5</span>, <span class="number">15</span>];</span><br><span class="line">    D = [<span class="number">306</span>, <span class="number">337</span>, <span class="number">0</span>, <span class="number">31</span>, <span class="number">61</span>, <span class="number">92</span>, <span class="number">122</span>, <span class="number">153</span>, <span class="number">184</span>, <span class="number">214</span>, <span class="number">245</span>, <span class="number">275</span>];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">% å®šæ—¥é•œåæ ‡</span></span><br><span class="line">    xyz = [x(<span class="number">1</span>:N)&#x27;, x(N+<span class="number">1</span>:<span class="number">2</span>*N)&#x27;, <span class="built_in">repmat</span>(x(<span class="keyword">end</span>), N, <span class="number">1</span>)];  <span class="comment">% ä½¿ç”¨ä¼˜åŒ–å˜é‡ h</span></span><br><span class="line">    e2 = <span class="built_in">zeros</span>(<span class="number">12</span>, <span class="number">5</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:<span class="number">5</span></span><br><span class="line">        <span class="keyword">for</span> <span class="built_in">j</span> = <span class="number">1</span>:<span class="number">12</span></span><br><span class="line">            [A, B] = SUN(ST(<span class="built_in">i</span>), D(<span class="built_in">j</span>));  <span class="comment">% è®¡ç®—å¤ªé˜³ä½ç½®å‚æ•°</span></span><br><span class="line">            e2(<span class="built_in">j</span>, <span class="built_in">i</span>) = calculate_efficiency(xyz, N, x0, y0, A, B);</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    </span><br><span class="line">    Se2 = <span class="built_in">mean</span>(e2, <span class="string">&#x27;all&#x27;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">% åˆ¤æ–­æ˜¯å¦æ»¡è¶³æœ€ä½å‘ç”µè¦æ±‚</span></span><br><span class="line">    <span class="keyword">if</span> Se2 &lt; <span class="number">60</span></span><br><span class="line">        f = <span class="number">1e6</span>; <span class="comment">% è¿åçº¦æŸæ—¶ï¼Œè®¾ç½®ä¸€ä¸ªè¾ƒå¤§çš„ç›®æ ‡å‡½æ•°å€¼</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        f = -Se2; <span class="comment">% é—ä¼ ç®—æ³•æœ€å°åŒ– -Se2</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% éçº¿æ€§çº¦æŸå‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">[c, ceq]</span> = <span class="title">nonlin_constraints</span><span class="params">(x)</span></span></span><br><span class="line">    N = <span class="number">2739</span>; H = <span class="number">4</span>; R = <span class="number">350</span>; x0 = <span class="number">0</span>; y0 = <span class="number">-250</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">% æå–ä¼˜åŒ–å˜é‡</span></span><br><span class="line">    x_a = x(<span class="number">1</span>:N);</span><br><span class="line">    y_a = x(N+<span class="number">1</span>:<span class="number">2</span>*N);</span><br><span class="line">    l = x(<span class="keyword">end</span><span class="number">-2</span>);</span><br><span class="line">    w = x(<span class="keyword">end</span><span class="number">-1</span>);</span><br><span class="line">    h = x(<span class="keyword">end</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">% éçº¿æ€§ä¸ç­‰å¼çº¦æŸ</span></span><br><span class="line">    c = [</span><br><span class="line">        <span class="comment">% å°ºå¯¸çº¦æŸ</span></span><br><span class="line">        l - w;                            <span class="comment">% l &lt;= w</span></span><br><span class="line">        h - <span class="number">0.5</span> * l;                      <span class="comment">% h &gt; 0.5 * l</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">% å‡ ä½•çº¦æŸ</span></span><br><span class="line">        <span class="built_in">sqrt</span>(x_a.^<span class="number">2</span> + y_a.^<span class="number">2</span>) - R;        <span class="comment">% sqrt(x_a^2 + y_a^2) &lt;= R</span></span><br><span class="line">        -<span class="built_in">sqrt</span>(x_a.^<span class="number">2</span> + (y_a - r).^<span class="number">2</span>) + <span class="number">100</span>;  <span class="comment">% sqrt(x_a^2 + (y_a - r)^2) &gt;= 100</span></span><br><span class="line">        -<span class="built_in">sqrt</span>((x_a - x0).^<span class="number">2</span> + (y_a - y0).^<span class="number">2</span>) + w + <span class="number">5</span> <span class="comment">% sqrt((x_a-x0)^2 + (y_a-y0)^2) &gt; w + 5</span></span><br><span class="line">    ];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">% éçº¿æ€§ç­‰å¼çº¦æŸ</span></span><br><span class="line">    ceq = [];</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> ä¼˜åŒ–é—®é¢˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ”¯æŒå‘é‡æœº</title>
      <link href="/2024/08/18/%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BA/"/>
      <url>/2024/08/18/%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BA/</url>
      
        <content type="html"><![CDATA[<h1 id="æ”¯æŒå‘é‡æœº"><a href="#æ”¯æŒå‘é‡æœº" class="headerlink" title="æ”¯æŒå‘é‡æœº"></a>æ”¯æŒå‘é‡æœº</h1><p>æ”¯æŒå‘é‡æœºï¼ˆSupport Vector Machine, SVMï¼‰æ˜¯ä¸€ç§ç”¨äºåˆ†ç±»å’Œå›å½’çš„ç›‘ç£å­¦ä¹ æ¨¡å‹ï¼Œå°¤å…¶é€‚ç”¨äºçº¿æ€§å’Œéçº¿æ€§åˆ†ç±»é—®é¢˜ã€‚SVMçš„æ ¸å¿ƒæ€æƒ³æ˜¯é€šè¿‡å¯»æ‰¾ä¸€ä¸ªæœ€ä½³çš„è¶…å¹³é¢æ¥å°†æ•°æ®åˆ†å¼€ï¼Œå¹¶ä¸”æœ€å¤§åŒ–ç±»é—´çš„è¾¹ç•Œé—´éš”ï¼Œåœ¨SVMä¸­ï¼Œæˆ‘ä»¬æŠŠæ•°æ®ç‚¹çœ‹åšæ˜¯nç»´ç©ºé—´ä¸­çš„ç‚¹ï¼Œæ¯ä¸ªç‚¹æœ‰nä¸ªç‰¹å¾ã€‚</p><p>æ”¯æŒå‘é‡æœºä¸å…¶ä»–è®¸å¤šæœºå™¨å­¦ä¹ ç®—æ³•çš„åŸç†æœ‰äº›ä¸åŒï¼Œæ”¯æŒå‘é‡æœºæ›´åå‘äºæœ€ä¼˜åŒ–ç†è®ºï¼Œæ‰€ä»¥åŸç†æ¯”è¾ƒå¤æ‚ã€‚</p><p>é¦–å…ˆï¼Œè¦äº†è§£<strong>å†³ç­–è¾¹ç•Œ</strong>ï¼Œæˆ‘ä»¬é€šè¿‡æ‰¾åˆ°ä¸€ä¸ªè¶…å¹³é¢æ¥å°†ä¸åŒç±»å‹çš„æ•°æ®åˆ†å¼€ï¼Œå…¶å¯ä»¥æ˜¯ä¸€æ¡ç›´çº¿ï¼Œä¸€ä¸ªå¹³é¢ï¼Œæˆ–æ˜¯æ ¸å‡½æ•°ä¸‹çš„è¶…å¹³é¢ã€‚</p><p>å…¶æ¬¡ï¼Œäº†è§£ä»€ä¹ˆæ˜¯<strong>æ”¯æŒå‘é‡(Support Vector)</strong>ï¼Œæ”¯æŒå‘é‡æ˜¯æŒ‡è·ç¦»å†³ç­–è¾¹ç•Œæœ€è¿‘çš„æ ·æœ¬ç‚¹ã€‚</p><p><strong>é—´éš”</strong>æ˜¯æŒ‡èƒ½å¤Ÿåœ¨ä¸¤ä¸ªç±»åˆ«ä¸­ç•™å‡ºä¸€ä¸ªå°½å¯èƒ½å¤§çš„é—´éš”ï¼Œè¿™æ ·å¯ä»¥æé«˜æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ã€‚</p><p>SVMçš„ç›®æ ‡æ˜¯æ‰¾åˆ°ä¸€ä¸ªè¶…å¹³é¢å°†æ•°æ®åˆ†ä¸ºä¸¤ç±»ã€‚è¶…å¹³é¢çš„è¡¨è¾¾å¼ä¸ºï¼š</p><script type="math/tex; mode=display">\mathbf{w}^T \cdot \mathbf{x} + b = 0</script><p>å¯¹æ¯ä¸ªæ ·æœ¬$\mathbf{x}_i$ï¼Œå®ƒåˆ°è¶…å¹³é¢çš„è·ç¦»ä¸ºï¼š</p><script type="math/tex; mode=display">d = \frac{| \mathbf{w}^T \cdot \mathbf{x}_i + b |}{\|\mathbf{w}\|}</script><p>ä¸ºäº†æœ€å¤§åŒ–é—´éš”  $\frac{2}{||w||}$  ï¼Œå¯ä»¥ç­‰ä»·ä¸ºä»¥ä¸‹ä¼˜åŒ–çš„é—®é¢˜ï¼š</p><script type="math/tex; mode=display">\min_{\mathbf{w}, b} \frac{1}{2} \|\mathbf{w}\|^2</script><script type="math/tex; mode=display">\text{subject to } y_i (\mathbf{w} \cdot \mathbf{x}_i + b) \geq 1, \quad \forall i</script><p>å½“æ•°æ®é›†ä¸å¯çº¿æ€§åˆ†å‰²æ—¶ï¼Œå¯ä»¥å¼•å…¥æ¾å¼›å˜é‡ $Î¾_iâ‰¥0$ æ¥å…è®¸æŸäº›ç‚¹è¿èƒŒé—´éš”æ¡ä»¶ã€‚ä¼˜åŒ–é—®é¢˜å˜ä¸ºï¼š</p><script type="math/tex; mode=display">\min_{\mathbf{w}, b, \xi} \frac{1}{2} \|\mathbf{w}\|^2 + C \sum_{i=1}^n \xi_i</script><script type="math/tex; mode=display">\text{subject to } y_i (\mathbf{w} \cdot \mathbf{x}_i + b) \geq 1 - \xi_i, \quad \xi_i \geq 0, \quad \forall i</script><p>ä¸ºäº†è§£å†³å¸¦æœ‰çº¦æŸçš„ä¼˜åŒ–é—®é¢˜ï¼Œå¼•å…¥æ‹‰æ ¼æœ—æ—¥ä¹˜å­ $Î±_iâ‰¥0$å’Œ $Î¼_iâ‰¥0$ï¼Œæ„é€ æ‹‰æ ¼æœ—æ—¥å‡½æ•°ï¼š</p><script type="math/tex; mode=display">L(\mathbf{w}, b, \xi, \alpha, \mu) = \frac{1}{2} \|\mathbf{w}\|^2 + C \sum_{i=1}^n \xi_i - \sum_{i=1}^n \alpha_i \left[ y_i (\mathbf{w} \cdot \mathbf{x}_i + b) - 1 + \xi_i \right] - \sum_{i=1}^n \mu_i \xi_i</script><p>Karush-Kuhn-Tucker (KKT) æ¡ä»¶æ˜¯ä¼˜åŒ–é—®é¢˜çš„å¿…è¦æ¡ä»¶:</p><script type="math/tex; mode=display">\frac{\partial L}{\partial \mathbf{w}} = \mathbf{w} - \sum_{i=1}^n \alpha_i y_i \mathbf{x}_i = 0</script><script type="math/tex; mode=display">\frac{\partial L}{\partial b} = -\sum_{i=1}^n \alpha_i y_i = 0</script><script type="math/tex; mode=display">\frac{\partial L}{\partial \xi_i} = C - \alpha_i - \mu_i = 0</script><p>å°†æ‹‰æ ¼æœ—æ—¥å‡½æ•°ä¸­çš„ $w,b,Î¾$â€‹ æ¶ˆå»åï¼Œå¯ä»¥å¾—åˆ°å¯¹å¶é—®é¢˜ï¼š</p><script type="math/tex; mode=display">\\max_{\alpha} \sum_{i=1}^n \alpha_i - \frac{1}{2} \sum_{i=1}^n \sum_{j=1}^n \alpha_i \alpha_j y_i y_j \mathbf{x}_i \cdot \mathbf{x}_j</script><script type="math/tex; mode=display">\text{subject to } \sum_{i=1}^n \alpha_i y_i = 0, \quad 0 \leq \alpha_i \leq C</script><p>è¿™ä¸ªå¯¹å¶é—®é¢˜æ˜¯ä¸€ä¸ªå‡¸äºŒæ¬¡è§„åˆ’é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡ç°æœ‰çš„ä¼˜åŒ–ç®—æ³•å¦‚SMOï¼ˆSequential Minimal Optimizationï¼‰æ¥æ±‚è§£ã€‚</p><p><strong>SVCçš„ä½¿ç”¨</strong><code>kernel</code>ï¼šæŒ‡å®šæ ¸å‡½æ•°çš„ç±»å‹ã€‚å¸¸è§çš„æœ‰ <code>&#39;linear&#39;</code>ï¼ˆçº¿æ€§æ ¸ï¼‰ï¼Œ<code>&#39;poly&#39;</code>ï¼ˆå¤šé¡¹å¼æ ¸ï¼‰ï¼Œ<code>&#39;rbf&#39;</code>ï¼ˆå¾„å‘åŸºæ ¸ï¼Œä¹Ÿå«é«˜æ–¯æ ¸ï¼‰ï¼Œä»¥åŠ <code>&#39;sigmoid&#39;</code>ã€‚</p><p><code>C</code>ï¼šæ­£åˆ™åŒ–å‚æ•°ï¼Œæ§åˆ¶æ¨¡å‹çš„å¤æ‚åº¦ä¸è¯¯åˆ†ç±»æ ·æœ¬ä¹‹é—´çš„æƒè¡¡ã€‚è¾ƒå°çš„ <code>C</code> å€¼ä¼šä½¿æ¨¡å‹æ›´åŠ å¹³æ»‘ï¼Œè¾ƒå¤§çš„ <code>C</code> å€¼åˆ™ä¼šæ›´å€¾å‘äºæ­£ç¡®åˆ†ç±»æ¯ä¸ªè®­ç»ƒæ ·æœ¬ã€‚</p><p><code>gamma</code>ï¼šæ ¸å‡½æ•°çš„å‚æ•°ï¼Œæ§åˆ¶å†³ç­–è¾¹ç•Œçš„çµæ´»æ€§ã€‚è¿™ä¸ªå‚æ•°åªåœ¨éçº¿æ€§æ ¸å‡½æ•°ï¼ˆå¦‚ <code>&#39;rbf&#39;</code>ï¼‰ä¸­ä½¿ç”¨ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> datasets</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> StandardScaler</span><br><span class="line"><span class="keyword">from</span> sklearn.svm <span class="keyword">import</span> SVC</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> (accuracy_score, precision_score, recall_score, </span><br><span class="line">                             f1_score, confusion_matrix, roc_auc_score, roc_curve)</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line"></span><br><span class="line">iris = datasets.load_iris()</span><br><span class="line">X = iris.data[:, :<span class="number">2</span>]  <span class="comment"># é€‰æ‹©å‰ä¸¤ä¸ªç‰¹å¾ï¼šsepal length å’Œ sepal width</span></span><br><span class="line">y = iris.target</span><br><span class="line"></span><br><span class="line"><span class="comment"># åªé€‰æ‹©ä¸¤ä¸ªç±»åˆ«çš„æ•°æ®è¿›è¡ŒäºŒåˆ†ç±»</span></span><br><span class="line">binary_indices = y != <span class="number">2</span></span><br><span class="line">X = X[binary_indices]</span><br><span class="line">y = y[binary_indices]</span><br><span class="line"></span><br><span class="line">X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=<span class="number">0.3</span>, random_state=<span class="number">42</span>)</span><br><span class="line"></span><br><span class="line">scaler = StandardScaler()</span><br><span class="line">X_train = scaler.fit_transform(X_train)</span><br><span class="line">X_test = scaler.transform(X_test)</span><br><span class="line"></span><br><span class="line">svm_model = SVC(kernel=<span class="string">&#x27;linear&#x27;</span>, C=<span class="number">1.0</span>, random_state=<span class="number">42</span>)</span><br><span class="line">svm_model.fit(X_train, y_train)</span><br><span class="line"></span><br><span class="line">y_pred = svm_model.predict(X_test)</span><br><span class="line"></span><br><span class="line">accuracy = accuracy_score(y_test, y_pred)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Accuracy: <span class="subst">&#123;accuracy:<span class="number">.4</span>f&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">plot_decision_boundary</span>(<span class="params">model, X, y</span>):</span><br><span class="line">    <span class="comment"># åˆ›å»ºä¸€ä¸ªç½‘æ ¼æ¥ç»˜åˆ¶</span></span><br><span class="line">    h = <span class="number">.02</span>  <span class="comment"># ç½‘æ ¼æ­¥é•¿</span></span><br><span class="line">    x_min, x_max = X[:, <span class="number">0</span>].<span class="built_in">min</span>() - <span class="number">1</span>, X[:, <span class="number">0</span>].<span class="built_in">max</span>() + <span class="number">1</span></span><br><span class="line">    y_min, y_max = X[:, <span class="number">1</span>].<span class="built_in">min</span>() - <span class="number">1</span>, X[:, <span class="number">1</span>].<span class="built_in">max</span>() + <span class="number">1</span></span><br><span class="line">    xx, yy = np.meshgrid(np.arange(x_min, x_max, h), np.arange(y_min, y_max, h))</span><br><span class="line">    </span><br><span class="line">    Z = model.predict(np.c_[xx.ravel(), yy.ravel()])</span><br><span class="line">    Z = Z.reshape(xx.shape)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç»˜åˆ¶å†³ç­–è¾¹ç•Œ</span></span><br><span class="line">    plt.contourf(xx, yy, Z, cmap=plt.cm.Paired, alpha=<span class="number">0.8</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># ç»˜åˆ¶è®­ç»ƒæ•°æ®ç‚¹</span></span><br><span class="line">    plt.scatter(X[:, <span class="number">0</span>], X[:, <span class="number">1</span>], c=y, cmap=plt.cm.Paired, edgecolors=<span class="string">&#x27;k&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># ç»˜åˆ¶æ”¯æŒå‘é‡</span></span><br><span class="line">    plt.scatter(model.support_vectors_[:, <span class="number">0</span>], model.support_vectors_[:, <span class="number">1</span>], s=<span class="number">100</span>, </span><br><span class="line">                facecolors=<span class="string">&#x27;none&#x27;</span>, edgecolors=<span class="string">&#x27;k&#x27;</span>, label=<span class="string">&#x27;Support Vectors&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">    plt.title(<span class="string">&#x27;SVM Decision Boundary with Support Vectors&#x27;</span>)</span><br><span class="line">    plt.xlabel(<span class="string">&#x27;Sepal Length&#x27;</span>)</span><br><span class="line">    plt.ylabel(<span class="string">&#x27;Sepal Width&#x27;</span>)</span><br><span class="line">    plt.legend()</span><br><span class="line">    plt.show()</span><br><span class="line"></span><br><span class="line"><span class="comment"># è°ƒç”¨å‡½æ•°ç»˜åˆ¶å†³ç­–è¾¹ç•Œå’Œè¶…å¹³é¢</span></span><br><span class="line">plot_decision_boundary(svm_model, X_train, y_train)</span><br><span class="line">y_pred = svm_model.predict(X_test)</span><br><span class="line"></span><br><span class="line">accuracy = accuracy_score(y_test, y_pred)</span><br><span class="line">precision = precision_score(y_test, y_pred)</span><br><span class="line">recall = recall_score(y_test, y_pred)</span><br><span class="line">f1 = f1_score(y_test, y_pred)</span><br><span class="line">conf_matrix = confusion_matrix(y_test, y_pred)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Accuracy: <span class="subst">&#123;accuracy:<span class="number">.4</span>f&#125;</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Precision: <span class="subst">&#123;precision:<span class="number">.4</span>f&#125;</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Recall: <span class="subst">&#123;recall:<span class="number">.4</span>f&#125;</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;F1-Score: <span class="subst">&#123;f1:<span class="number">.4</span>f&#125;</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Confusion Matrix:\n<span class="subst">&#123;conf_matrix&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Accuracy: <span class="number">1.0000</span></span><br><span class="line">Precision: <span class="number">1.0000</span></span><br><span class="line">Recall: <span class="number">1.0000</span></span><br><span class="line">F1-Score: <span class="number">1.0000</span></span><br><span class="line">Confusion Matrix:</span><br><span class="line">[[<span class="number">17</span>  <span class="number">0</span>]</span><br><span class="line"> [ <span class="number">0</span> <span class="number">13</span>]]</span><br></pre></td></tr></table></figure><p>SVMç›¸å¯¹äºæ™®é€šçš„çº¿æ€§å›å½’åˆ†ç±»æ€§èƒ½æ›´å¥½ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> warnings</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> matplotlib</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ matplotlib åœ¨ Jupyter Notebook ä¸­å†…è”æ˜¾ç¤ºå›¾åƒ</span></span><br><span class="line">%matplotlib inline</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½® matplotlib çš„å›¾å½¢å‚æ•°</span></span><br><span class="line">plt.rcParams[<span class="string">&#x27;axes.labelsize&#x27;</span>] = <span class="number">14</span>  <span class="comment"># åæ ‡è½´æ ‡ç­¾å­—ä½“å¤§å°</span></span><br><span class="line">plt.rcParams[<span class="string">&#x27;xtick.labelsize&#x27;</span>] = <span class="number">12</span>  <span class="comment"># x è½´åˆ»åº¦æ ‡ç­¾å­—ä½“å¤§å°</span></span><br><span class="line">plt.rcParams[<span class="string">&#x27;ytick.labelsize&#x27;</span>] = <span class="number">12</span>  <span class="comment"># y è½´åˆ»åº¦æ ‡ç­¾å­—ä½“å¤§å°</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¿½ç•¥æ‰€æœ‰è­¦å‘Š</span></span><br><span class="line">warnings.filterwarnings(<span class="string">&#x27;ignore&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> sklearn.svm <span class="keyword">import</span> SVC</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> datasets</span><br><span class="line"></span><br><span class="line"><span class="comment"># åŠ è½½ Iris æ•°æ®é›†</span></span><br><span class="line">iris = datasets.load_iris()</span><br><span class="line"></span><br><span class="line"><span class="comment"># é€‰æ‹©ç‰¹å¾: ä»…é€‰æ‹©èŠ±ç“£é•¿åº¦å’ŒèŠ±ç“£å®½åº¦ç‰¹å¾</span></span><br><span class="line">X = iris[<span class="string">&#x27;data&#x27;</span>][:, (<span class="number">2</span>, <span class="number">3</span>)]  <span class="comment"># èŠ±ç“£é•¿åº¦å’ŒèŠ±ç“£å®½åº¦</span></span><br><span class="line">y = iris[<span class="string">&#x27;target&#x27;</span>]  <span class="comment"># ç›®æ ‡å˜é‡ï¼ˆç±»åˆ«ï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é€‰æ‹©ä¸¤ä¸ªç±»åˆ«çš„æ•°æ®: Setosa (0) å’Œ Versicolor (1)</span></span><br><span class="line">setosa_or_versicolor = (y == <span class="number">0</span>) | (y == <span class="number">1</span>)</span><br><span class="line">X = X[setosa_or_versicolor]  <span class="comment"># ä»…é€‰æ‹© Setosa å’Œ Versicolor çš„ç‰¹å¾</span></span><br><span class="line">y = y[setosa_or_versicolor]  <span class="comment"># ä»…é€‰æ‹© Setosa å’Œ Versicolor çš„ç›®æ ‡å˜é‡</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆå§‹åŒ–æ”¯æŒå‘é‡æœºåˆ†ç±»å™¨ï¼Œä½¿ç”¨çº¿æ€§æ ¸å‡½æ•°ï¼Œè®¾ç½® C å‚æ•°ä¸º 5</span></span><br><span class="line">svm_clf = SVC(kernel=<span class="string">&#x27;linear&#x27;</span>, C=<span class="number">5</span>)</span><br><span class="line">svm_clf.fit(X, y)  <span class="comment"># æ‹Ÿåˆæ¨¡å‹</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰ä¸åŒçš„å†³ç­–è¾¹ç•Œçº¿çš„å‡½æ•°ï¼ˆä»…ç”¨äºç»˜å›¾ï¼‰</span></span><br><span class="line">x0 = np.linspace(<span class="number">0</span>, <span class="number">5.5</span>, <span class="number">200</span>)  <span class="comment"># x è½´åæ ‡ï¼Œä» 0 åˆ° 5.5ï¼Œç”Ÿæˆ 200 ä¸ªç‚¹</span></span><br><span class="line">pred_1 = <span class="number">5</span> * x0 - <span class="number">20</span>  <span class="comment"># ç¬¬ä¸€æ¡é¢„æµ‹çº¿</span></span><br><span class="line">pred_2 = x0 - <span class="number">1.8</span>  <span class="comment"># ç¬¬äºŒæ¡é¢„æµ‹çº¿</span></span><br><span class="line">pred_3 = <span class="number">0.1</span> * x0 + <span class="number">0.5</span>  <span class="comment"># ç¬¬ä¸‰æ¡é¢„æµ‹çº¿</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">plot_svc_decision_boundary</span>(<span class="params">svm_clf, xmin, xmax, sv=<span class="literal">True</span></span>):</span><br><span class="line">    <span class="comment"># ç”»å‡ºæ”¯æŒå‘é‡æœºæ¨¡å‹çš„å†³ç­–è¾¹ç•Œå’Œæ”¯æŒå‘é‡</span></span><br><span class="line">    w = svm_clf.coef_[<span class="number">0</span>]  <span class="comment"># æå–æ¨¡å‹çš„æƒé‡ç³»æ•°</span></span><br><span class="line">    b = svm_clf.intercept_[<span class="number">0</span>]  <span class="comment"># æå–æ¨¡å‹çš„æˆªè·</span></span><br><span class="line">    x0 = np.linspace(xmin, xmax, <span class="number">200</span>)  <span class="comment"># åœ¨æŒ‡å®šçš„ x èŒƒå›´å†…ç”Ÿæˆ 200 ä¸ªç‚¹</span></span><br><span class="line">    decision_boundary = -w[<span class="number">0</span>] / w[<span class="number">1</span>] * x0 - b / w[<span class="number">1</span>]  <span class="comment"># è®¡ç®—å†³ç­–è¾¹ç•Œ</span></span><br><span class="line">    margin = <span class="number">1</span> / w[<span class="number">1</span>]  <span class="comment"># è®¡ç®—è¾¹é™…ï¼ˆæ”¯æŒå‘é‡æœºçš„é—´éš”ï¼‰</span></span><br><span class="line">    gutter_up = decision_boundary + margin  <span class="comment"># ä¸Šè¾¹ç•Œ</span></span><br><span class="line">    gutter_down = decision_boundary - margin  <span class="comment"># ä¸‹è¾¹ç•Œ</span></span><br><span class="line">    <span class="keyword">if</span> sv:</span><br><span class="line">        svs = svm_clf.support_vectors_  <span class="comment"># è·å–æ”¯æŒå‘é‡</span></span><br><span class="line">        plt.scatter(svs[:, <span class="number">0</span>], svs[:, <span class="number">1</span>], s=<span class="number">180</span>, facecolors=<span class="string">&#x27;#FFAAAA&#x27;</span>)  <span class="comment"># ç»˜åˆ¶æ”¯æŒå‘é‡</span></span><br><span class="line">    plt.plot(x0, decision_boundary, <span class="string">&#x27;k-&#x27;</span>, linewidth=<span class="number">2</span>)  <span class="comment"># ç»˜åˆ¶å†³ç­–è¾¹ç•Œçº¿</span></span><br><span class="line">    plt.plot(x0, gutter_up, <span class="string">&#x27;k--&#x27;</span>, linewidth=<span class="number">2</span>)  <span class="comment"># ç»˜åˆ¶ä¸Šè¾¹é™…çº¿</span></span><br><span class="line">    plt.plot(x0, gutter_down, <span class="string">&#x27;k--&#x27;</span>, linewidth=<span class="number">2</span>)  <span class="comment"># ç»˜åˆ¶ä¸‹è¾¹é™…çº¿</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºå›¾å½¢çª—å£</span></span><br><span class="line">plt.figure(figsize=(<span class="number">14</span>, <span class="number">4</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»˜åˆ¶ç¬¬ä¸€ä¸ªå­å›¾</span></span><br><span class="line">plt.subplot(<span class="number">121</span>)  <span class="comment"># é€‰æ‹©ç¬¬ä¸€ä¸ªå­å›¾</span></span><br><span class="line">plt.plot(X[:, <span class="number">0</span>][y == <span class="number">1</span>], X[:, <span class="number">1</span>][y == <span class="number">1</span>], <span class="string">&#x27;bs&#x27;</span>)  <span class="comment"># ç»˜åˆ¶ç±»åˆ«ä¸º 1 çš„æ•°æ®ç‚¹ï¼ˆè“è‰²æ–¹å—ï¼‰</span></span><br><span class="line">plt.plot(X[:, <span class="number">0</span>][y == <span class="number">0</span>], X[:, <span class="number">1</span>][y == <span class="number">0</span>], <span class="string">&#x27;ys&#x27;</span>)  <span class="comment"># ç»˜åˆ¶ç±»åˆ«ä¸º 0 çš„æ•°æ®ç‚¹ï¼ˆé»„è‰²æ–¹å—ï¼‰</span></span><br><span class="line">plt.plot(x0, pred_1, <span class="string">&#x27;g--&#x27;</span>, linewidth=<span class="number">2</span>)  <span class="comment"># ç»˜åˆ¶ç¬¬ä¸€æ¡é¢„æµ‹çº¿ï¼ˆç»¿è‰²è™šçº¿ï¼‰</span></span><br><span class="line">plt.plot(x0, pred_2, <span class="string">&#x27;m-&#x27;</span>, linewidth=<span class="number">2</span>)  <span class="comment"># ç»˜åˆ¶ç¬¬äºŒæ¡é¢„æµ‹çº¿ï¼ˆå“çº¢è‰²å®çº¿ï¼‰</span></span><br><span class="line">plt.plot(x0, pred_3, <span class="string">&#x27;r-&#x27;</span>, linewidth=<span class="number">2</span>)  <span class="comment"># ç»˜åˆ¶ç¬¬ä¸‰æ¡é¢„æµ‹çº¿ï¼ˆçº¢è‰²å®çº¿ï¼‰</span></span><br><span class="line">plt.axis([<span class="number">0</span>, <span class="number">5.5</span>, <span class="number">0</span>, <span class="number">2</span>])  <span class="comment"># è®¾ç½® x å’Œ y è½´çš„èŒƒå›´</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»˜åˆ¶ç¬¬äºŒä¸ªå­å›¾</span></span><br><span class="line">plt.subplot(<span class="number">122</span>)  <span class="comment"># é€‰æ‹©ç¬¬äºŒä¸ªå­å›¾</span></span><br><span class="line">plot_svc_decision_boundary(svm_clf, <span class="number">0</span>, <span class="number">5.5</span>)  <span class="comment"># ç»˜åˆ¶ SVM å†³ç­–è¾¹ç•Œ</span></span><br><span class="line">plt.plot(X[:, <span class="number">0</span>][y == <span class="number">1</span>], X[:, <span class="number">1</span>][y == <span class="number">1</span>], <span class="string">&#x27;bs&#x27;</span>)  <span class="comment"># ç»˜åˆ¶ç±»åˆ«ä¸º 1 çš„æ•°æ®ç‚¹ï¼ˆè“è‰²æ–¹å—ï¼‰</span></span><br><span class="line">plt.plot(X[:, <span class="number">0</span>][y == <span class="number">0</span>], X[:, <span class="number">1</span>][y == <span class="number">0</span>], <span class="string">&#x27;ys&#x27;</span>)  <span class="comment"># ç»˜åˆ¶ç±»åˆ«ä¸º 0 çš„æ•°æ®ç‚¹ï¼ˆé»„è‰²æ–¹å—ï¼‰</span></span><br><span class="line">plt.axis([<span class="number">0</span>, <span class="number">5.5</span>, <span class="number">0</span>, <span class="number">2</span>])  <span class="comment"># è®¾ç½® x å’Œ y è½´çš„èŒƒå›´</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºå›¾å½¢</span></span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ”¯æŒå‘é‡æœºä¸ä»…å¯ä»¥ä½œä¸ºäºŒåˆ†ç±»æ¨¡å‹ï¼Œè¿˜å¯ä»¥ä½œä¸ºå›å½’é¢„æµ‹æ¨¡å‹ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> StandardScaler</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line"><span class="keyword">from</span> sklearn.svm <span class="keyword">import</span> SVR</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> mean_squared_error</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> warnings</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">warnings.filterwarnings(<span class="string">&#x27;ignore&#x27;</span>)</span><br><span class="line"><span class="comment"># åŠ è½½æ³¢å£«é¡¿æˆ¿å±‹æ•°æ®é›†</span></span><br><span class="line">data_url = <span class="string">&quot;http://lib.stat.cmu.edu/datasets/boston&quot;</span></span><br><span class="line">raw_df = pd.read_csv(data_url, sep=<span class="string">&quot;\s+&quot;</span>, skiprows=<span class="number">22</span>, header=<span class="literal">None</span>)</span><br><span class="line">data = np.hstack([raw_df.values[::<span class="number">2</span>, :], raw_df.values[<span class="number">1</span>::<span class="number">2</span>, :<span class="number">2</span>]])</span><br><span class="line">target = raw_df.values[<span class="number">1</span>::<span class="number">2</span>, <span class="number">2</span>]</span><br><span class="line">X = data</span><br><span class="line">y = target</span><br><span class="line"></span><br><span class="line">scaler = StandardScaler()</span><br><span class="line">X = scaler.fit_transform(X)</span><br><span class="line"></span><br><span class="line">X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=<span class="number">0.2</span>, random_state=<span class="number">42</span>)</span><br><span class="line"></span><br><span class="line">svm = SVR(kernel=<span class="string">&#x27;linear&#x27;</span>)</span><br><span class="line">svm.fit(X_train, y_train)</span><br><span class="line"></span><br><span class="line">y_pred = svm.predict(X_test)</span><br><span class="line"></span><br><span class="line">mse = mean_squared_error(y_test, y_pred)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;å‡æ–¹è¯¯å·®ï¼ˆMSEï¼‰ï¼š&quot;</span>, mse)</span><br><span class="line"></span><br><span class="line">plt.scatter(<span class="built_in">range</span>(<span class="built_in">len</span>(y_test)), y_test, color=<span class="string">&#x27;b&#x27;</span>, label=<span class="string">&#x27;Actual&#x27;</span>)</span><br><span class="line">plt.plot(<span class="built_in">range</span>(<span class="built_in">len</span>(y_test)), y_pred, color=<span class="string">&#x27;r&#x27;</span>, label=<span class="string">&#x27;Predicted&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;Sample&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;Price&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;SVM Regression&#x27;</span>)</span><br><span class="line">plt.legend()</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> æœºå™¨å­¦ä¹  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸»æˆåˆ†åˆ†æPCA</title>
      <link href="/2024/08/18/%E4%B8%BB%E6%88%90%E5%88%86%E5%88%86%E6%9E%90PCA/"/>
      <url>/2024/08/18/%E4%B8%BB%E6%88%90%E5%88%86%E5%88%86%E6%9E%90PCA/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸»æˆåˆ†åˆ†æ"><a href="#ä¸»æˆåˆ†åˆ†æ" class="headerlink" title="ä¸»æˆåˆ†åˆ†æ"></a>ä¸»æˆåˆ†åˆ†æ</h1><p>ä¸»æˆåˆ†åˆ†æï¼ˆPrincipal Component Analysis, PCAï¼‰æ˜¯ä¸€ç§ç»Ÿè®¡æŠ€æœ¯ï¼Œç”¨äºå°†é«˜ç»´æ•°æ®é™ç»´åˆ°è¾ƒä½çš„ç»´åº¦ï¼ŒåŒæ—¶ä¿ç•™æ•°æ®ä¸­å°½å¯èƒ½å¤šçš„åŸå§‹ä¿¡æ¯ã€‚å®ƒé€šè¿‡çº¿æ€§å˜æ¢æ¥æ‰¾åˆ°æ•°æ®ä¸­æ–¹å·®æœ€å¤§çš„æ–¹å‘ï¼Œå¹¶å°†æ•°æ®æŠ•å½±åˆ°è¿™äº›æ–¹å‘ä¸Šï¼Œä»è€Œå®ç°é™ç»´å’Œç‰¹å¾æå–ã€‚</p><p>ä¸€ä¸ªæœ€ç›´è§‚çš„ä¾‹å­ï¼Œå‡å¦‚æœ‰ä¸€ä¸ªäºŒç»´çš„æ•°æ®é›†ï¼Œå‡è®¾æ•£ç‚¹å›¾æ‰€å±•ç¤ºçš„å…³ç³»å¤§è‡´ä¸º:y = 2*X + 3ï¼Œé‚£ä¹ˆå¯ä»¥å‘ç°ï¼Œå½“xè¶Šå¤§ï¼Œyä¹Ÿå°±è¶Šå¤§ï¼Œè¿™å°±å«å…±çº¿æ€§ï¼Œä¹Ÿå«åšä¿¡æ¯å†—ä½™ï¼Œè€Œå¯¹äºå®é™…çš„æœºå™¨å­¦ä¹ é—®é¢˜æ¥è¯´ï¼Œæˆ‘ä»¬æ›´å¤šæƒ³è¦çš„æ˜¯çº¿æ€§å¯åˆ†çš„ç‰¹å¾å˜é‡ï¼Œå¦‚æœæˆ‘ä»¬å¯¹è¿™ä¸ªx,yè½´è¿›è¡Œæ—‹è½¬çš„è¯ï¼Œé‚£ä¹ˆå°±å¯ä»¥å¾—åˆ°ä¸€ç§æƒ…å†µï¼Œå³åœ¨æ–°çš„xï¼Œyå›¾åƒä¸Šï¼Œè¿™ä¸ªå€¾æ–œçš„ç›´çº¿å˜æˆäº†ä¸€æ¡æ°´å¹³æˆ–ç«–ç›´çš„ç›´çº¿ï¼Œè¿™ç§æƒ…å†µä¸‹çš„æ–°ç‰¹å¾x,yå°±å˜å¾—çº¿æ€§å¯åˆ†äº†ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æƒ³è¦çš„è¿™ç§æƒ…å†µã€‚</p><p>ç”±äºæ—‹è½¬åä»¥åŠæ²¡æœ‰äº†ä¿¡æ¯å†—ä½™ï¼Œè€Œæˆ‘ä»¬åˆæƒ³çŸ¥é“æ–°ç”Ÿæˆçš„ç‰¹å¾æ‰€æºå¸¦çš„ä¿¡æ¯é‡å¦‚ä½•ï¼Œå°±å¯ä»¥é€šè¿‡æ–¹å·®æ¥è§‚å¯Ÿï¼Œæ—‹è½¬åå¾—åˆ°çš„å„ä¸ªå˜é‡æ˜¯ç‹¬ç«‹åœ°ä»£è¡¨æ ·æœ¬çš„æŸéƒ¨åˆ†ä¿¡æ¯ï¼Œ<br>æ¯”å¦‚ï¼Œxçš„æ–¹å·®ä¸º6ï¼Œy çš„æ–¹å·®ä¸º4ï¼Œé‚£ä¹ˆç›¸å½“äºxæºå¸¦äº†60%çš„æ ·æœ¬ä¿¡æ¯ï¼Œyæºå¸¦äº†40%çš„ä¿¡æ¯ï¼Œå› æ­¤ç§°æ—‹è½¬åå¾—åˆ°çš„å„ä¸ªå˜é‡ä¸ºä¸»æˆä»½å¹¶æ ¹æ®æ–¹å·®çš„å¤§å°å‘½åä¸ºnä¸»æˆä»½ï¼Œé€šè¿‡æ–¹å·®æ’åºã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.datasets <span class="keyword">import</span> load_iris</span><br><span class="line"><span class="keyword">from</span> sklearn.decomposition <span class="keyword">import</span> PCA</span><br><span class="line">iris   = load_iris()    </span><br><span class="line">X      = iris.data      </span><br><span class="line">x_mean = X.mean(axis=<span class="number">0</span>)  <span class="comment"># æ ·æœ¬ä¸­å¿ƒ </span></span><br><span class="line"></span><br><span class="line">clf = PCA() </span><br><span class="line">clf.fit(X)    </span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;ä¸»æˆä»½ç³»æ•°çŸ©é˜µA:\n A=&#x27;</span>,clf.components_)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;ä¸»æˆä»½æ–¹å·®var:&#x27;</span>,clf.explained_variance_)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;ä¸»æˆä»½è´¡çŒ®å æ¯”(æ–¹å·®å æ¯”)Pr:&#x27;</span>,clf.explained_variance_ratio_)</span><br><span class="line"></span><br><span class="line">y = clf.transform(X)                <span class="comment"># transformæ–¹æ³•è·å–ä¸»æˆä»½æ•°æ®  </span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> æœºå™¨å­¦ä¹  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Kmeansèšç±»</title>
      <link href="/2024/08/18/Kmeans%E8%81%9A%E7%B1%BB/"/>
      <url>/2024/08/18/Kmeans%E8%81%9A%E7%B1%BB/</url>
      
        <content type="html"><![CDATA[<h1 id="Kmeansèšç±»"><a href="#Kmeansèšç±»" class="headerlink" title="Kmeansèšç±»"></a>Kmeansèšç±»</h1><p>Kmeansæ˜¯ä¸€ç§ç»å…¸çš„æ— ç›‘ç£èšç±»ç®—æ³•ï¼Œå®ƒè¯•å›¾å°†æ•°æ®åˆ†æˆ K ä¸ªç°‡ï¼ˆclustersï¼‰ï¼Œä½¿å¾—ç°‡å†…çš„æ•°æ®ç‚¹å°½å¯èƒ½ç›¸ä¼¼ï¼Œè€Œç°‡é—´çš„æ•°æ®ç‚¹å°½å¯èƒ½ä¸åŒã€‚ç®—æ³•çš„ç›®æ ‡æ˜¯æœ€å°åŒ–ç°‡å†…æ•°æ®ç‚¹åˆ°ç°‡å¿ƒçš„è·ç¦»çš„å¹³æ–¹å’Œã€‚</p><p>é¦–å…ˆéšæœºé€‰æ‹© K ä¸ªæ•°æ®ç‚¹ä½œä¸ºåˆå§‹ç°‡å¿ƒï¼ˆcentroidsï¼‰ï¼Œå¯¹äºæ•°æ®é›†ä¸­çš„æ¯ä¸ªæ•°æ®ç‚¹ï¼Œè®¡ç®—å…¶åˆ° K ä¸ªç°‡å¿ƒçš„è·ç¦»ï¼Œå¹¶å°†å…¶åˆ†é…åˆ°è·ç¦»æœ€è¿‘çš„ç°‡å¿ƒæ‰€åœ¨çš„ç°‡ï¼Œæ¥ç€é‡æ–°è®¡ç®—æ¯ä¸ªç°‡çš„ç°‡å¿ƒï¼Œä½œä¸ºå½“å‰ç°‡å†…æ‰€æœ‰ç‚¹çš„å‡å€¼ã€‚é‡å¤ä¸Šè¿°çš„åˆ†é…æ­¥éª¤å’Œæ›´æ–°æ­¥éª¤ï¼Œç›´åˆ°ç°‡å¿ƒä¸å†å˜åŒ–æˆ–å˜åŒ–éå¸¸å°ï¼ˆå³æ”¶æ•›ï¼‰ã€‚</p><script type="math/tex; mode=display">J = \sum_{i=1}^K \sum_{x \in C_i} \| x - \mu_i \|^2</script><p>K æ˜¯ç°‡çš„æ•°é‡ã€‚Ci æ˜¯ç¬¬ i ä¸ªç°‡ï¼Œx æ˜¯ç°‡ Ci ä¸­çš„ä¸€ä¸ªæ•°æ®ç‚¹ã€‚Î¼i æ˜¯ç¬¬ i ä¸ªç°‡çš„ç°‡å¿ƒï¼ˆå‡å€¼ï¼‰ã€‚</p><script type="math/tex; mode=display">\mu_i = \frac{1}{|C_i|} \sum_{x \in C_i} x</script><p>å…¶ä¸­ âˆ£Ciâˆ£ æ˜¯ç°‡ Ci ä¸­çš„æ•°æ®ç‚¹æ•°é‡ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> sklearn.cluster <span class="keyword">import</span> KMeans</span><br><span class="line"><span class="keyword">from</span> sklearn.datasets <span class="keyword">import</span> make_blobs</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”Ÿæˆç¤ºä¾‹æ•°æ®</span></span><br><span class="line">X, _ = make_blobs(n_samples=<span class="number">300</span>, centers=<span class="number">4</span>, cluster_std=<span class="number">0.60</span>, random_state=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">kmeans = KMeans(n_clusters=<span class="number">4</span>)</span><br><span class="line">kmeans.fit(X)</span><br><span class="line"></span><br><span class="line"><span class="comment"># é¢„æµ‹ç°‡</span></span><br><span class="line">y_kmeans = kmeans.predict(X)</span><br><span class="line"></span><br><span class="line">plt.scatter(X[:, <span class="number">0</span>], X[:, <span class="number">1</span>], c=y_kmeans, s=<span class="number">50</span>, cmap=<span class="string">&#x27;viridis&#x27;</span>)</span><br><span class="line">centers = kmeans.cluster_centers_</span><br><span class="line">plt.scatter(centers[:, <span class="number">0</span>], centers[:, <span class="number">1</span>], c=<span class="string">&#x27;red&#x27;</span>, s=<span class="number">200</span>, alpha=<span class="number">0.75</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;Customer Segmentation&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;Feature 1&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;Feature 2&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><h1 id="Kmeans-èšç±»"><a href="#Kmeans-èšç±»" class="headerlink" title="Kmeans++èšç±»"></a>Kmeans++èšç±»</h1><p>K-Means++ æ˜¯ K-Means ç®—æ³•çš„ä¸€ç§æ”¹è¿›ç‰ˆæœ¬ï¼Œæ—¨åœ¨é€šè¿‡æ”¹è¿›ç°‡å¿ƒçš„åˆå§‹åŒ–è¿‡ç¨‹æ¥æé«˜ç®—æ³•çš„æ€§èƒ½å’Œç¨³å®šæ€§ã€‚ä¼ ç»Ÿçš„ K-Means ç®—æ³•å¯¹åˆå§‹ç°‡å¿ƒçš„é€‰æ‹©éå¸¸æ•æ„Ÿï¼Œå¯èƒ½ä¼šå¯¼è‡´ç®—æ³•æ”¶æ•›åˆ°å±€éƒ¨æœ€ä¼˜è§£ã€‚K-Means++ é€šè¿‡ä¼˜åŒ–åˆå§‹åŒ–è¿‡ç¨‹æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä»è€Œæé«˜æœ€ç»ˆèšç±»çš„è´¨é‡ã€‚</p><p>é¦–å…ˆä»æ•°æ®é›†ä¸­éšæœºé€‰æ‹©ä¸€ä¸ªæ•°æ®ç‚¹ä½œä¸ºç¬¬ä¸€ä¸ªç°‡å¿ƒã€‚å¯¹äºæ•°æ®é›†ä¸­æ¯ä¸ªç‚¹ï¼Œè®¡ç®—å…¶åˆ°æœ€è¿‘ç°‡å¿ƒçš„è·ç¦»ï¼Œå¹¶æ ¹æ®è¿™äº›è·ç¦»è®¡ç®—ä¸€ä¸ªåŠ æƒæ¦‚ç‡åˆ†å¸ƒã€‚æ ¹æ®ä¸Šè¿°åŠ æƒæ¦‚ç‡åˆ†å¸ƒéšæœºé€‰æ‹©ä¸‹ä¸€ä¸ªç°‡å¿ƒï¼Œè·ç¦»å·²ç»é€‰æ‹©çš„ç°‡å¿ƒè¾ƒè¿œçš„æ•°æ®ç‚¹è¢«é€‰æ‹©çš„æ¦‚ç‡æ›´å¤§ã€‚é‡å¤è®¡ç®—è·ç¦»å’Œé€‰æ‹©ç°‡å¿ƒçš„è¿‡ç¨‹ï¼Œç›´åˆ°é€‰æ‹©å‡ºæ‰€æœ‰ K ä¸ªç°‡å¿ƒã€‚</p><p>è¿™æ ·åšå¯ä»¥<strong>å‡å°‘å±€éƒ¨æœ€ä¼˜è§£çš„é£é™©</strong>ï¼Œé€šè¿‡ä¼˜åŒ–åˆå§‹ç°‡å¿ƒçš„é€‰æ‹©ï¼ŒK-Means++ å¯ä»¥æ›´å¥½åœ°è¦†ç›–æ•°æ®ç©ºé—´ï¼Œä»è€Œå‡å°‘æ”¶æ•›åˆ°å±€éƒ¨æœ€ä¼˜è§£çš„é£é™©ï¼ŒåŒæ—¶<strong>æé«˜èšç±»è´¨é‡</strong>ï¼Œé€šå¸¸ä¼šè·å¾—æ›´å¥½çš„èšç±»ç»“æœå’Œæ›´ä½çš„è¯¯å·®å¹³æ–¹å’Œã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> sklearn.cluster <span class="keyword">import</span> KMeans</span><br><span class="line"><span class="keyword">from</span> sklearn.datasets <span class="keyword">import</span> make_blobs</span><br><span class="line"></span><br><span class="line">X, _ = make_blobs(n_samples=<span class="number">300</span>, centers=<span class="number">4</span>, cluster_std=<span class="number">0.60</span>, random_state=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºK-Means++æ¨¡å‹</span></span><br><span class="line">kmeans = KMeans(n_clusters=<span class="number">4</span>, init=<span class="string">&#x27;k-means++&#x27;</span>)</span><br><span class="line">kmeans.fit(X)</span><br><span class="line"></span><br><span class="line"><span class="comment"># é¢„æµ‹</span></span><br><span class="line">y_kmeans = kmeans.predict(X)</span><br><span class="line"></span><br><span class="line">plt.scatter(X[:, <span class="number">0</span>], X[:, <span class="number">1</span>], c=y_kmeans, s=<span class="number">50</span>, cmap=<span class="string">&#x27;viridis&#x27;</span>)</span><br><span class="line">centers = kmeans.cluster_centers_</span><br><span class="line">plt.scatter(centers[:, <span class="number">0</span>], centers[:, <span class="number">1</span>], c=<span class="string">&#x27;red&#x27;</span>, s=<span class="number">200</span>, alpha=<span class="number">0.75</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;K-Means++ Clustering&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;Feature 1&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;Feature 2&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> sklearn.cluster <span class="keyword">import</span> KMeans</span><br><span class="line"><span class="keyword">from</span> sklearn.datasets <span class="keyword">import</span> make_blobs</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸‰ä¸ªfeatrue</span></span><br><span class="line">X, _ = make_blobs(n_samples=<span class="number">300</span>, centers=<span class="number">4</span>, n_features=<span class="number">3</span>, cluster_std=<span class="number">0.60</span>, random_state=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">kmeans = KMeans(n_clusters=<span class="number">4</span>, init=<span class="string">&#x27;k-means++&#x27;</span>)</span><br><span class="line">kmeans.fit(X)</span><br><span class="line"></span><br><span class="line">y_kmeans = kmeans.predict(X)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”±äºç‰¹å¾æ•°å¤§äº2ï¼Œåªèƒ½é€‰æ‹©ä¸¤ä¸ªç‰¹å¾è¿›è¡Œå¯è§†åŒ–</span></span><br><span class="line">plt.figure(figsize=(<span class="number">10</span>, <span class="number">7</span>))</span><br><span class="line">plt.scatter(X[:, <span class="number">0</span>], X[:, <span class="number">1</span>], c=y_kmeans, s=<span class="number">50</span>, cmap=<span class="string">&#x27;viridis&#x27;</span>)</span><br><span class="line">centers = kmeans.cluster_centers_</span><br><span class="line">plt.scatter(centers[:, <span class="number">0</span>], centers[:, <span class="number">1</span>], c=<span class="string">&#x27;red&#x27;</span>, s=<span class="number">200</span>, alpha=<span class="number">0.75</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;K-Means Clustering with 3 Features (visualized with 2)&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;Feature 1&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;Feature 2&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p>é‚£å¦‚ä½•é€‰æ‹©Kmeansçš„kå€¼å‘¢ï¼Ÿä¸€èˆ¬æ¥è¯´æˆ‘ä»¬å¯ä»¥é€‰æ‹©ä¸åŒçš„kå€¼æ¥å°è¯•ï¼Œä¹Ÿå¯ä»¥ç”¨ä¸¤ç§æ–¹æ³•ï¼Œæ‰‹è‚˜æ³•ï¼ˆElbow Methodï¼‰å’Œè½®å»“ç³»æ•°æ³•ï¼ˆSilhouette Scoreï¼‰æ˜¯ä¸¤ç§ç”¨äºè¯„ä¼°å’Œé€‰æ‹©èšç±»ç®—æ³•ä¸­ç°‡æ•° K çš„æ–¹æ³•ã€‚</p><h3 id="æ‰‹è‚˜æ³•ï¼ˆElbow-Methodï¼‰"><a href="#æ‰‹è‚˜æ³•ï¼ˆElbow-Methodï¼‰" class="headerlink" title="æ‰‹è‚˜æ³•ï¼ˆElbow Methodï¼‰"></a>æ‰‹è‚˜æ³•ï¼ˆElbow Methodï¼‰</h3><p>æ‰‹è‚˜æ³•ç”¨äºç¡®å®š K-Means èšç±»ä¸­ç°‡çš„æ•°é‡ Kã€‚å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯ç»˜åˆ¶æ¯ä¸ªå¯èƒ½çš„ K å€¼å¯¹åº”çš„æ€»å¹³æ–¹è¯¯å·®ï¼ˆWithin-Cluster Sum of Squares, WCSSï¼‰ï¼Œå¹¶è§‚å¯Ÿå›¾å½¢ä¸­çš„â€œè‚˜éƒ¨â€ä½ç½®ï¼Œä»¥ç¡®å®šæœ€ä½³çš„ K å€¼ã€‚</p><script type="math/tex; mode=display">\text{WCSS} = \sum_{i=1}^K \sum_{x \in C_i} \| x - \mu_i \|^2</script><p>å…¶ä¸­ K æ˜¯ç°‡çš„æ•°é‡ï¼ŒCiæ˜¯ç¬¬ i ä¸ªç°‡ï¼Œx æ˜¯ç°‡ Ci ä¸­çš„ä¸€ä¸ªæ•°æ®ç‚¹ï¼ŒÎ¼i æ˜¯ç¬¬ i ä¸ªç°‡çš„ç°‡å¿ƒã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> sklearn.cluster <span class="keyword">import</span> KMeans</span><br><span class="line"><span class="keyword">from</span> sklearn.datasets <span class="keyword">import</span> make_blobs</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”Ÿæˆç¤ºä¾‹æ•°æ®</span></span><br><span class="line">X, _ = make_blobs(n_samples=<span class="number">300</span>, centers=<span class="number">4</span>, cluster_std=<span class="number">0.60</span>, random_state=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¡ç®—WCSS</span></span><br><span class="line">wcss = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">11</span>):</span><br><span class="line">    kmeans = KMeans(n_clusters=i, init=<span class="string">&#x27;k-means++&#x27;</span>)</span><br><span class="line">    kmeans.fit(X)</span><br><span class="line">    wcss.append(kmeans.inertia_)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»˜åˆ¶æ‰‹è‚˜å›¾</span></span><br><span class="line">plt.plot(<span class="built_in">range</span>(<span class="number">1</span>, <span class="number">11</span>), wcss, marker=<span class="string">&#x27;o&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;Elbow Method for Optimal k&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;Number of clusters&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;WCSS&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p>å›¾ä¸­é€šå¸¸ä¼šå‡ºç°ä¸€ä¸ªè‚˜éƒ¨ï¼Œå³ WCSS éš K å¢åŠ çš„é€Ÿåº¦æ€¥å‰§å‡ç¼“çš„ä½ç½®ã€‚è¯¥ä½ç½®çš„ K å€¼è¢«è®¤ä¸ºæ˜¯æœ€ä½³ç°‡æ•°ã€‚</p><h3 id="è½®å»“ç³»æ•°æ³•ï¼ˆSilhouette-Scoreï¼‰"><a href="#è½®å»“ç³»æ•°æ³•ï¼ˆSilhouette-Scoreï¼‰" class="headerlink" title="è½®å»“ç³»æ•°æ³•ï¼ˆSilhouette Scoreï¼‰"></a>è½®å»“ç³»æ•°æ³•ï¼ˆSilhouette Scoreï¼‰</h3><p>è½®å»“ç³»æ•°æ³•ç”¨äºè¯„ä¼°èšç±»è´¨é‡å’Œé€‰æ‹©æœ€ä½³çš„ç°‡æ•° Kã€‚å®ƒæµ‹é‡äº†æ¯ä¸ªæ•°æ®ç‚¹ä¸å…¶ç°‡å†…å…¶ä»–ç‚¹çš„ç›¸ä¼¼åº¦ä»¥åŠä¸æœ€è¿‘ç°‡çš„ç›¸ä¼¼åº¦ï¼Œå¾—å‡ºä¸€ä¸ªç»¼åˆè¯„ä»·æŒ‡æ ‡ã€‚</p><p><strong>ç°‡å†…ç›¸ä¼¼åº¦ï¼ˆaiï¼‰</strong>ï¼š æ•°æ®ç‚¹ i ä¸å…¶ç°‡å†…æ‰€æœ‰å…¶ä»–æ•°æ®ç‚¹çš„å¹³å‡è·ç¦»ï¼š</p><script type="math/tex; mode=display">a_i = \frac{1}{|C_i| - 1} \sum_{j \in C_i, j \neq i} \| x_i - x_j \|</script><p><strong>æœ€è¿‘ç°‡çš„ç›¸ä¼¼åº¦ï¼ˆbiï¼‰</strong>ï¼š æ•°æ®ç‚¹ i åˆ°æœ€è¿‘ç°‡ï¼ˆä¸åŒ…å«å…¶å½“å‰ç°‡ï¼‰çš„æ‰€æœ‰æ•°æ®ç‚¹çš„å¹³å‡è·ç¦»ï¼š</p><script type="math/tex; mode=display">b_i = \min_{C_k \neq C_i} \frac{1}{|C_k|} \sum_{j \in C_k} \| x_i - x_j \|</script><p>è®¡ç®—è½®å»“ç³»æ•° siï¼š</p><script type="math/tex; mode=display">s_i = \frac{b_i - a_i}{\max(a_i, b_i)}</script><p>é€‰æ‹©å…·æœ‰æœ€é«˜å¹³å‡è½®å»“ç³»æ•°çš„ K ä½œä¸ºæœ€ä½³ç°‡æ•°ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> silhouette_score</span><br><span class="line"><span class="keyword">from</span> sklearn.datasets <span class="keyword">import</span> make_blobs</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”Ÿæˆç¤ºä¾‹æ•°æ®</span></span><br><span class="line">X, _ = make_blobs(n_samples=<span class="number">300</span>, centers=<span class="number">4</span>, cluster_std=<span class="number">0.60</span>, random_state=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¡ç®—ä¸åŒKå€¼çš„è½®å»“ç³»æ•°</span></span><br><span class="line">silhouette_avg = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>, <span class="number">11</span>):</span><br><span class="line">    kmeans = KMeans(n_clusters=i, init=<span class="string">&#x27;k-means++&#x27;</span>)</span><br><span class="line">    kmeans.fit(X)</span><br><span class="line">    cluster_labels = kmeans.labels_</span><br><span class="line">    silhouette_avg.append(silhouette_score(X, cluster_labels))</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»˜åˆ¶è½®å»“ç³»æ•°å›¾</span></span><br><span class="line">plt.plot(<span class="built_in">range</span>(<span class="number">2</span>, <span class="number">11</span>), silhouette_avg, marker=<span class="string">&#x27;o&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;Silhouette Score for Optimal k&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;Number of clusters&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;Average Silhouette Score&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> æœºå™¨å­¦ä¹  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°æ®æ¢ç´¢</title>
      <link href="/2024/08/18/%E6%95%B0%E6%8D%AE%E6%8E%A2%E7%B4%A2%E4%B8%AD%E7%9A%84%E6%AD%A3%E6%80%81%E5%88%86%E5%B8%83/"/>
      <url>/2024/08/18/%E6%95%B0%E6%8D%AE%E6%8E%A2%E7%B4%A2%E4%B8%AD%E7%9A%84%E6%AD%A3%E6%80%81%E5%88%86%E5%B8%83/</url>
      
        <content type="html"><![CDATA[<h1 id="æ•°æ®æ¢ç´¢"><a href="#æ•°æ®æ¢ç´¢" class="headerlink" title="æ•°æ®æ¢ç´¢"></a>æ•°æ®æ¢ç´¢</h1><p>å¯¹äºä¸€äº›æœºå™¨å­¦ä¹ é¢†åŸŸçš„é—®é¢˜æ±‚è§£æ¥è¯´ï¼Œåˆ¤æ–­æ•°æ®æ˜¯å¦ç¬¦åˆæ­£æ€åˆ†å¸ƒæ˜¯ååˆ†é‡è¦çš„ï¼Œå› ä¸ºå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå¾ˆå¤šæ¨¡å‹åªæœ‰åœ¨æ•°æ®ä¸ºæ­£æ€åˆ†å¸ƒçš„æƒ…å†µä¸‹ï¼Œæ¨¡å‹çš„æ•ˆæœæ‰ä¼šæ›´å¥½ï¼Œæ‰€ä»¥å¦‚ä½•å¯¹æ•°æ®è¿›è¡Œæ­£æ€åˆ†å¸ƒæ£€éªŒæ¢ç´¢ååˆ†å¿…è¦ã€‚</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œæ£€éªŒæ­£æ€åˆ†å¸ƒæœ‰ä¸¤ä¸ªå¤§çš„æ–¹å‘ï¼Œä¸€ä¸ªæ˜¯å¯è§†åŒ–æ•°æ®ï¼Œå¦ä¸€ä¸ªåˆ™æ˜¯ç»Ÿè®¡åˆ†æã€‚</p><h2 id="æ•°æ®çš„å¯è§†åŒ–"><a href="#æ•°æ®çš„å¯è§†åŒ–" class="headerlink" title="æ•°æ®çš„å¯è§†åŒ–"></a>æ•°æ®çš„å¯è§†åŒ–</h2><p>è¿™é‡Œä¸å…‰æ˜¯ä»‹ç»æ•°æ®çš„å¯è§†åŒ–ï¼Œè¿˜è¦é¡ºå¸¦çš„æŠŠæ•°æ®æ¢ç´¢ä¸­çš„å…¶ä»–æ–¹é¢ä¹Ÿå…¨éƒ½ä»‹ç»ä¸€ä¸‹ã€‚</p><p>é¦–å…ˆå¯¹å˜é‡è¿›è¡Œåˆ†æï¼Œå¯¹äºè¿ç»­å‹å•å˜é‡ï¼Œéœ€è¦ç»Ÿè®¡æ•°æ®çš„ä¸­å¿ƒåˆ†å¸ƒè¶‹åŠ¿å’Œå˜é‡åˆ†å¸ƒï¼Œå¯¹äºç±»åˆ«å‹å˜é‡ï¼Œä¸€èˆ¬ä½¿ç”¨é¢‘æ¬¡æˆ–å æ¯”è¡¨ç¤ºæ¯ä¸€ä¸ªç±»åˆ«çš„åˆ†å¸ƒæƒ…å†µï¼Œè¡¡é‡æŒ‡æ ‡åˆ†åˆ«æ˜¯ç±»åˆ«å˜é‡çš„é¢‘æ¬¡å’Œé¢‘ç‡ï¼Œå¯ä»¥ç”¨æŸ±å½¢å›¾æ¥è¡¨ç¤ºå¯è§†åŒ–åˆ†å¸ƒã€‚</p><p>è€Œå¯¹äºå¤šå˜é‡åˆ†æè€Œè¨€ï¼Œåˆåˆ†ä¸ºä¸‰ç§ï¼š</p><ul><li>è¿ç»­å‹ä¸è¿ç»­å‹ï¼Œå¯ä»¥é€šè¿‡ç»˜åˆ¶æ•£ç‚¹å›¾å’Œè®¡ç®—ç›¸å…³æ€§ç³»æ•°æ¥åˆ†æ</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">X = np.array([<span class="number">65</span>,<span class="number">72</span>,<span class="number">78</span>,<span class="number">65</span>,<span class="number">72</span>,<span class="number">70</span>,<span class="number">65</span>,<span class="number">68</span>])</span><br><span class="line">y = np.array([<span class="number">72</span>,<span class="number">69</span>,<span class="number">79</span>,<span class="number">69</span>,<span class="number">84</span>,<span class="number">75</span>,<span class="number">60</span>,<span class="number">73</span>])</span><br><span class="line"></span><br><span class="line">np.corrcoef(X,y)</span><br><span class="line"></span><br><span class="line">plt.scatter(X,y)</span><br><span class="line">plt.title(<span class="string">&#x27;corr&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;X&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;y&#x27;</span>)</span><br></pre></td></tr></table></figure><p><code>corrcoef</code>æ˜¯è®¡ç®—ç›¸å…³æ€§ç³»æ•°çš„å‡½æ•°ï¼Œ<code>scatter</code>æ˜¯pltåŒ…å†…ç½®çš„æ•£ç‚¹å›¾å‡½æ•°ã€‚</p><ul><li>ç±»åˆ«å‹ä¸ç±»åˆ«å‹ï¼Œå¯ä»¥é€šè¿‡åŒå‘è¡¨ï¼Œå †å æŸ±çŠ¶å›¾å’Œå¡æ–¹æ£€éªŒæ¥åˆ†æ</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.datasets <span class="keyword">import</span> load_iris</span><br><span class="line"><span class="keyword">from</span> sklearn.feature_selection <span class="keyword">import</span> chi2</span><br><span class="line"><span class="keyword">from</span> sklearn.feature_selection <span class="keyword">import</span> SelectKBest</span><br><span class="line">iris = load_iris()</span><br><span class="line">X,y = iris.data,iris.target</span><br><span class="line">chiValues = chi2(X,y)</span><br><span class="line">X_new = SelectKBest(chi2,k=<span class="number">2</span>).fit_transform(X,y)</span><br></pre></td></tr></table></figure><p>å¡æ–¹æ£€éªŒä¸»è¦ç”¨äºä¸¤ä¸ªå’Œä¸¤ä¸ªä»¥ä¸Šæ ·æœ¬ç‡åŠä¸¤ä¸ªäºŒå€¼å‹ç¦»æ•£å˜é‡çš„å…³è”æ€§åˆ†æã€‚å¯ä»¥ä½¿ç”¨å¡æ–¹æ£€éªŒæ¥ç­›é€‰ä¸ç›®æ ‡å˜é‡ç›¸å…³çš„ç‰¹å¾ã€‚</p><ul><li>ç±»åˆ«å‹ä¸è¿ç»­å‹ï¼Œå¯ä»¥ç”¨å°æç´å›¾æˆ–ç®±çº¿å›¾æ¥åˆ†æ</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> sklearn.datasets <span class="keyword">import</span> load_iris</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">%matplotlib inline</span><br><span class="line"></span><br><span class="line">iris = load_iris()</span><br><span class="line">X, y = iris.data, iris.target</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†æ•°æ®è½¬æ¢ä¸º DataFrame ä»¥ä¾¿ä½¿ç”¨ Seaborn</span></span><br><span class="line">iris_df = pd.DataFrame(X, columns=iris.feature_names)</span><br><span class="line">iris_df[<span class="string">&#x27;species&#x27;</span>] = pd.Categorical.from_codes(y, iris.target_names)</span><br><span class="line"><span class="comment"># pd.Categorical.from_codes(y, iris.target_names) åˆ›å»ºäº†ä¸€ä¸ª pandas.Categorical å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å°† y ä¸­çš„æ•´æ•°ä»£ç è½¬æ¢ä¸ºç›¸åº”çš„ç±»åˆ«åç§°ã€‚</span></span><br><span class="line">plt.figure(figsize=(<span class="number">10</span>, <span class="number">6</span>))</span><br><span class="line">sns.violinplot(x=<span class="string">&#x27;species&#x27;</span>, y=<span class="string">&#x27;sepal length (cm)&#x27;</span>, data=iris_df)</span><br><span class="line"></span><br><span class="line">plt.title(<span class="string">&#x27;Violin Plot of Sepal Length by Iris Species&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><h2 id="ç¼ºå¤±å€¼ä¸å¼‚å¸¸å€¼"><a href="#ç¼ºå¤±å€¼ä¸å¼‚å¸¸å€¼" class="headerlink" title="ç¼ºå¤±å€¼ä¸å¼‚å¸¸å€¼"></a>ç¼ºå¤±å€¼ä¸å¼‚å¸¸å€¼</h2><p>ç¼ºå¤±å€¼çš„äº§ç”Ÿæœ‰å¤šç§åŸå› ï¼Œæ¯”å¦‚æ•°æ®å­˜å‚¨å¤±è´¥ï¼Œæœºæ¢°æ•…éšœï¼Œæˆ–äººçš„ä¸»è§‚å¤±è¯¯ã€å±€é™ã€æœ‰æ„éšç’ç­‰æœºæ¢°åŸå› å’Œäººä¸ºåŸå› é€ æˆçš„ã€‚<br>ç¼ºå¤±å€¼ä¸»è¦åˆ†ä¸ºå››ç±»ï¼šå®Œå…¨éšæœºä¸¢å¤±ï¼Œéšæœºä¸¢å¤±ï¼Œä¸å¯é¢„æµ‹æŸå¤±ä¸å–å†³äºè‡ªèº«çš„æŸå¤±ã€‚</p><p>æˆåˆ—åˆ é™¤ä¼šå¯¼è‡´æ ·æœ¬å‡å°‘ï¼Œæ‹Ÿåˆç¨‹åº¦ä¸‹é™ï¼Œè€Œæˆå¯¹åˆ é™¤ä¼šä¿ç•™æ›´å¤šçš„æ ·æœ¬ï¼Œä¸åŒçš„å˜é‡ä½¿ç”¨å¤§å°ä¸åŒçš„æ ·æœ¬é›†ï¼Œä¹Ÿå¯ä»¥ç”¨å¹³å‡å€¼ã€ä¼—æ•°ã€ä¸­å€¼å¡«å……ï¼Œå…·ä½“æ“ä½œåˆåˆ†ä¸ºï¼šä¸€èˆ¬å¡«å……å’Œç›¸ä¼¼æ ·æœ¬å¡«å……ã€‚ä¸€èˆ¬å¡«å……æ˜¯æŒ‡ç”¨è¯¥å˜é‡ä¸‹çš„æ‰€æœ‰éç¼ºå¤±å€¼çš„å¹³å‡å€¼æˆ–ä¸­å€¼æ¥å¡«å……ï¼Œè€Œç›¸ä¼¼æ ·æœ¬å¡«å……æ˜¯åˆ©ç”¨å…·æœ‰ç›¸ä¼¼ç‰¹å¾çš„æ ·æœ¬çš„å€¼æˆ–è€…è¿‘ä¼¼å€¼è¿›è¡Œå¡«å……ã€‚</p><p>ä¸€èˆ¬å¯ä»¥ç”¨<code>fillna()</code>è¿›è¡Œç®€å•çš„ç¼ºå¤±å€¼å¡«å……ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">data = &#123;</span><br><span class="line">    <span class="string">&#x27;A&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>, np.nan, <span class="number">4</span>],</span><br><span class="line">    <span class="string">&#x27;B&#x27;</span>: [np.nan, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>],</span><br><span class="line">    <span class="string">&#x27;C&#x27;</span>: [<span class="number">8</span>, np.nan, <span class="number">10</span>, <span class="number">11</span>]</span><br><span class="line">&#125;</span><br><span class="line">df = pd.DataFrame(data)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å°†æ‰€æœ‰ NaN æ›¿æ¢ä¸º 0</span></span><br><span class="line">df_filled = df.fillna(<span class="number">0</span>)</span><br><span class="line"><span class="comment"># ç”¨å„åˆ—çš„å‡å€¼å¡«å…… NaN</span></span><br><span class="line">df_filled_mean = df.fillna(df.mean()</span><br></pre></td></tr></table></figure><p>å¼‚å¸¸å€¼çš„äº§ç”ŸåŸå› ä¸»è¦åŒ…æ‹¬æ•°æ®å½•å…¥é”™è¯¯ã€æ•°æ®æµ‹é‡è¯¯å·®ã€æ•°æ®éšæœºè¯¯å·®ã€è§‚æµ‹æ•°æ®ç¼ºå°‘é‡è¦è‡ªå˜é‡ã€ç¼ºå°‘è§‚æµ‹æ•°æ®ã€æ¨¡å‹é€‰æ‹©é”™è¯¯ã€éçº¿æ€§å›å½’ã€ä»¥åŠè‡ªç„¶å˜å¼‚ç­‰ã€‚</p><p>æ•°æ®å½•å…¥é”™è¯¯ï¼šå¯èƒ½æ˜¯ç”±äºäººä¸ºå› ç´ å¯¼è‡´çš„é”™è¯¯è¾“å…¥ï¼Œä¾‹å¦‚æ‹¼å†™é”™è¯¯æˆ–æ ¼å¼é”™è¯¯ï¼Œè¿™äº›é”™è¯¯å¯èƒ½å¯¼è‡´æ•°æ®ä¸å®é™…å€¼äº§ç”Ÿåå·®ï¼Œä»è€Œå½¢æˆå¼‚å¸¸å€¼ã€‚ æ•°æ®æµ‹é‡è¯¯å·®ï¼šåœ¨è¿›è¡Œæ•°æ®æµ‹é‡æ—¶ï¼Œç”±äºæµ‹é‡å·¥å…·çš„ç²¾åº¦é™åˆ¶æˆ–æ“ä½œäººå‘˜çš„è¯¯å·®ï¼Œå¯èƒ½ä¼šå¯¼è‡´æµ‹é‡ç»“æœåç¦»çœŸå®å€¼ï¼Œå½¢æˆå¼‚å¸¸å€¼ã€‚ æ•°æ®éšæœºè¯¯å·®ï¼šå³ä½¿åœ¨æœ€å¥½çš„æ¡ä»¶ä¸‹è¿›è¡Œæµ‹é‡ï¼Œç”±äºéšæœºå› ç´ çš„å½±å“ï¼Œæ•°æ®ä¹Ÿå¯èƒ½å‡ºç°åå·®ï¼Œè¿™ç§åå·®å¯èƒ½å¯¼è‡´å¼‚å¸¸å€¼çš„å‡ºç°ã€‚ è§‚æµ‹æ•°æ®ç¼ºå°‘é‡è¦è‡ªå˜é‡ï¼šå¦‚æœåœ¨è¿›è¡Œæ•°æ®åˆ†ææ—¶ç¼ºå°‘å…³é”®çš„è‡ªå˜é‡ä¿¡æ¯ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ¨¡å‹æ— æ³•å‡†ç¡®é¢„æµ‹ç»“æœï¼Œä»è€Œäº§ç”Ÿå¼‚å¸¸å€¼ã€‚ ç¼ºå°‘è§‚æµ‹æ•°æ®ï¼šåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œç”±äºæŸäº›æ•°æ®ç‚¹çš„ç¼ºå¤±ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ¨¡å‹æ— æ³•å‡†ç¡®æ‹Ÿåˆæ•°æ®ï¼Œè¿›è€Œäº§ç”Ÿå¼‚å¸¸å€¼ã€‚ æ¨¡å‹é€‰æ‹©é”™è¯¯ï¼šå¦‚æœé€‰æ‹©çš„æ¨¡å‹ä¸æ•°æ®ç‰¹æ€§ä¸åŒ¹é…ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ¨¡å‹é¢„æµ‹ç»“æœå‡ºç°åå·®ï¼Œå½¢æˆå¼‚å¸¸å€¼ã€‚ éçº¿æ€§å›å½’ï¼šåœ¨è¿›è¡Œéçº¿æ€§å›å½’åˆ†ææ—¶ï¼Œå¦‚æœæ¨¡å‹è®¾å®šä¸æ­£ç¡®æˆ–æ•°æ®ä¸ç¬¦åˆæ¨¡å‹çš„å‡è®¾ï¼Œå¯èƒ½ä¼šå¯¼è‡´å¼‚å¸¸å€¼çš„å‡ºç°ã€‚ è‡ªç„¶å˜å¼‚ï¼šåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¼‚å¸¸å€¼å¯èƒ½æ˜¯ç”±äºæ•°æ®çš„è‡ªç„¶å˜å¼‚å¯¼è‡´çš„ï¼Œä¾‹å¦‚åœ¨ä¸€ä¸ªç­çº§ä¸­ï¼Œå­¦ç”Ÿçš„èº«é«˜æ™®éåœ¨170cmå·¦å³ï¼Œä½†æœ‰ä¸€ä½åŒå­¦çš„èº«é«˜è¾¾åˆ°äº†220cmï¼Œè¿™æ ·çš„æç«¯å€¼å°±å¯ä»¥è§†ä¸ºå¼‚å¸¸å€¼ã€‚</p><h2 id="Pandasçš„æ•°æ®æ“ä½œ"><a href="#Pandasçš„æ•°æ®æ“ä½œ" class="headerlink" title="Pandasçš„æ•°æ®æ“ä½œ"></a>Pandasçš„æ•°æ®æ“ä½œ</h2><p>å‡å¦‚æƒ³è¦åˆ é™¤æŸäº›ç‰¹å¾åˆ—ï¼Œå¯ä»¥é‡‡å–<code>drop()</code>æ“ä½œï¼Œè¿™é‡Œä»¥ç›¸å…³æ€§ç³»æ•°å°äº0.5æ¥å‰”é™¤ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">threshold = <span class="number">0.5</span></span><br><span class="line">corr_matrix = train_data1.corr().<span class="built_in">abs</span>()</span><br><span class="line">drop_col=corr_matrix[corr_matrix[<span class="string">&quot;target&quot;</span>]&lt;threshold].index</span><br><span class="line">train_x =  train_data.drop([<span class="string">&#x27;target&#x27;</span>], axis=<span class="number">1</span>)</span><br><span class="line">data_all = pd.concat([train_x,test_data]) </span><br><span class="line">data_all.drop(drop_col,axis=<span class="number">1</span>,inplace=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><p>å‡å¦‚ä½ æƒ³è¦å–å‡ºç‰¹å®šçš„æŸä¸ªå€¼ï¼Œå¯ä»¥ä½¿ç”¨<code>loc</code>ä¸<code>iloc</code>æ“ä½œï¼Œ<code>loc</code> é€šè¿‡æ ‡ç­¾ï¼ˆlabelï¼‰é€‰æ‹©æ•°æ®ï¼Œè€Œ <code>iloc</code> é€šè¿‡æ•´æ•°ä½ç½®ï¼ˆindexï¼‰é€‰æ‹©æ•°æ®ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">data = &#123;</span><br><span class="line">    <span class="string">&#x27;Name&#x27;</span>: [<span class="string">&#x27;Alice&#x27;</span>, <span class="string">&#x27;Bob&#x27;</span>, <span class="string">&#x27;Charlie&#x27;</span>, <span class="string">&#x27;David&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;Age&#x27;</span>: [<span class="number">24</span>, <span class="number">27</span>, <span class="number">22</span>, <span class="number">32</span>],</span><br><span class="line">    <span class="string">&#x27;Score&#x27;</span>: [<span class="number">85</span>, <span class="number">91</span>, <span class="number">78</span>, <span class="number">88</span>]</span><br><span class="line">&#125;</span><br><span class="line">df = pd.DataFrame(data)</span><br><span class="line"><span class="comment"># ä½¿ç”¨ loc é€‰æ‹©æ ‡ç­¾ä¸º 1 çš„è¡Œï¼ˆå³ç¬¬äºŒè¡Œï¼‰</span></span><br><span class="line">row = df.loc[<span class="number">1</span>]</span><br><span class="line"><span class="built_in">print</span>(row)</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Name     Bob</span><br><span class="line">Age       <span class="number">27</span></span><br><span class="line">Score     <span class="number">91</span></span><br><span class="line">Name: <span class="number">1</span>, dtype: <span class="built_in">object</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é€‰æ‹©æ ‡ç­¾ä¸º 0 å’Œ 2 çš„è¡Œï¼Œä»¥åŠåˆ— &quot;Name&quot; å’Œ &quot;Score&quot;</span></span><br><span class="line">selected_data = df.loc[[<span class="number">0</span>, <span class="number">2</span>], [<span class="string">&#x27;Name&#x27;</span>, <span class="string">&#x27;Score&#x27;</span>]]</span><br><span class="line"><span class="built_in">print</span>(selected_data)</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">      Name  Score</span><br><span class="line"><span class="number">0</span>    Alice     <span class="number">85</span></span><br><span class="line"><span class="number">2</span>  Charlie     <span class="number">78</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨ iloc é€‰æ‹©ç¬¬ 1 è¡Œï¼ˆå³ç¬¬äºŒè¡Œï¼‰</span></span><br><span class="line">row = df.iloc[<span class="number">1</span>]</span><br><span class="line"><span class="built_in">print</span>(row)</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Name     Bob</span><br><span class="line">Age       <span class="number">27</span></span><br><span class="line">Score     <span class="number">91</span></span><br><span class="line">Name: <span class="number">1</span>, dtype: <span class="built_in">object</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é€‰æ‹©ç¬¬ 0 å’Œ 2 è¡Œï¼Œä»¥åŠç¬¬ 0 å’Œ 2 åˆ—</span></span><br><span class="line">selected_data = df.iloc[[<span class="number">0</span>, <span class="number">2</span>], [<span class="number">0</span>, <span class="number">2</span>]]</span><br><span class="line"><span class="built_in">print</span>(selected_data)</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">      Name  Score</span><br><span class="line"><span class="number">0</span>    Alice     <span class="number">85</span></span><br><span class="line"><span class="number">2</span>  Charlie     <span class="number">78</span></span><br></pre></td></tr></table></figure><p>åœ¨pandasä¸­ä¸å…‰å¯ä»¥æŸ¥çœ‹ç‰¹å¾å˜é‡çš„ç±»å‹ï¼Œè¿˜å¯ä»¥ä¿®æ”¹ç±»å‹ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">df.dtypes</span><br><span class="line">df[<span class="string">&#x27;Column1&#x27;</span>] = df[<span class="string">&#x27;Column1&#x27;</span>].astype(<span class="string">&#x27;float64&#x27;</span>)</span><br></pre></td></tr></table></figure><p>åŒæ—¶ï¼Œè¿˜å¯ä»¥è¿›è¡Œæ•°æ®çš„åˆå¹¶ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># çºµå‘åˆå¹¶</span></span><br><span class="line">pd.concat([df1, df2], ignore_index=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># æ¨ªå‘åˆå¹¶</span></span><br><span class="line">pd.merge(df1, df2, on=<span class="string">&#x27;Column1&#x27;</span>)</span><br></pre></td></tr></table></figure><h2 id="æ•°æ®å¯è§†åŒ–"><a href="#æ•°æ®å¯è§†åŒ–" class="headerlink" title="æ•°æ®å¯è§†åŒ–"></a>æ•°æ®å¯è§†åŒ–</h2><p>å¯ä»¥ç”¨å¾ˆå¤šæ–¹æ³•æ¥è¿›è¡Œæ•°æ®çš„å¯è§†åŒ–å±•ç¤ºï¼Œæ¯”å¦‚ç®±çº¿å›¾ï¼Œç›´æ–¹å›¾ï¼ŒQ-Qå›¾ï¼Œçƒ­åŠ›å›¾ï¼ŒæŠ˜çº¿å›¾ï¼Œé¥¼å›¾ï¼Œæ•£ç‚¹å›¾ç­‰ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">iris = load_iris()</span><br><span class="line">X, y = iris.data, iris.target</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†æ•°æ®è½¬æ¢ä¸º DataFrame ä»¥ä¾¿ä½¿ç”¨ Seaborn</span></span><br><span class="line">iris_df = pd.DataFrame(X, columns=iris.feature_names)</span><br><span class="line">iris_df[<span class="string">&#x27;species&#x27;</span>] = pd.Categorical.from_codes(y, iris.target_names)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨ Seaborn ç»˜åˆ¶ç®±çº¿å›¾</span></span><br><span class="line">plt.figure(figsize=(<span class="number">10</span>, <span class="number">6</span>))</span><br><span class="line">sns.boxplot(x=<span class="string">&#x27;species&#x27;</span>, y=<span class="string">&#x27;sepal length (cm)&#x27;</span>, data=iris_df)</span><br><span class="line"></span><br><span class="line">plt.title(<span class="string">&#x27;Box Plot of Sepal Length by Iris Species&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;Iris Species&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;Sepal Length (cm)&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p>ç®±çº¿å›¾æ˜¾ç¤ºäº†æ•°æ®çš„å››åˆ†ä½æ•°ã€ä¸­ä½æ•°ã€æœ€å¤§å€¼ã€æœ€å°å€¼ï¼Œä»¥åŠå¯èƒ½çš„ç¦»ç¾¤å€¼ï¼ˆé€šè¿‡ç®±å­ä¹‹å¤–çš„ç‚¹è¡¨ç¤ºï¼‰ã€‚</p><p>ä¸­ä½æ•°ï¼šç®±å­ä¸­çš„æ°´å¹³çº¿è¡¨ç¤ºæ•°æ®çš„ä¸­ä½æ•°ã€‚ å››åˆ†ä½æ•°ï¼šç®±å­çš„ä¸Šä¸‹è¾¹ç•Œåˆ†åˆ«è¡¨ç¤ºç¬¬ä¸€å››åˆ†ä½æ•° (Q1) å’Œç¬¬ä¸‰å››åˆ†ä½æ•° (Q3)ã€‚ èƒ¡é¡»ï¼šèƒ¡é¡»ï¼ˆç®±å­ä¸Šä¸‹çš„çº¿æ¡ï¼‰å»¶ä¼¸åˆ°ä¸è¶…è¿‡ 1.5 å€å››åˆ†ä½è·çš„èŒƒå›´å†…çš„æ•°æ®ç‚¹ã€‚ ç¦»ç¾¤ç‚¹ï¼šè¶…å‡ºèƒ¡é¡»èŒƒå›´çš„ç‚¹è¢«è®¤ä¸ºæ˜¯ç¦»ç¾¤ç‚¹ï¼Œé€šå¸¸ç”¨å•ç‹¬çš„ç‚¹æ ‡ç¤ºã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨ Seaborn ç»˜åˆ¶ç›´æ–¹å›¾</span></span><br><span class="line">plt.figure(figsize=(<span class="number">8</span>, <span class="number">6</span>))</span><br><span class="line">sns.histplot(iris_df[<span class="string">&#x27;sepal length (cm)&#x27;</span>], bins=<span class="number">20</span>, kde=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">plt.title(<span class="string">&#x27;Histogram of Sepal Length&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;Sepal Length (cm)&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;Frequency&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨ Seaborn ç»˜åˆ¶æ•£ç‚¹å›¾</span></span><br><span class="line">plt.figure(figsize=(<span class="number">8</span>, <span class="number">6</span>))</span><br><span class="line"><span class="comment"># sns.scatterplot(x=&#x27;sepal length (cm)&#x27;, y=&#x27;sepal width (cm)&#x27;, hue=&#x27;species&#x27;, data=iris_df)</span></span><br><span class="line"><span class="comment"># ç­›é€‰å‡º &#x27;setosa&#x27; ç±»åˆ«çš„æ•°æ®</span></span><br><span class="line">setosa_df = iris_df[iris_df[<span class="string">&#x27;species&#x27;</span>] == <span class="string">&#x27;setosa&#x27;</span>]</span><br><span class="line">sns.scatterplot(x=<span class="string">&#x27;sepal length (cm)&#x27;</span>, y=<span class="string">&#x27;sepal width (cm)&#x27;</span>, hue=<span class="string">&#x27;species&#x27;</span>, data=setosa_df)</span><br><span class="line">plt.title(<span class="string">&#x27;Scatter Plot of Sepal Length vs Sepal Width&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;Sepal Length (cm)&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;Sepal Width (cm)&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p>ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ªexcelæ–‡ä»¶åï¼Œé¦–å…ˆè¦é€šè¿‡pandasçš„<code>read_excel</code>å‡½æ•°æ¥è¿›è¡Œæ–‡ä»¶å½•å…¥ï¼Œå¾—åˆ°ä¸€ä¸ªpandasæ¡†æ¶ï¼Œå‡å¦‚å‘½åä¸º<code>data</code>ï¼Œé‚£ä¹ˆé¦–å…ˆå¯ä»¥é€šè¿‡ä¸€äº›æ¦‚è¿°æ€§ç»Ÿè®¡æ¥è¿›è¡Œç²—ç•¥çš„åˆæ­¥æ¢ç´¢ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">data.head()</span><br><span class="line">data.info()</span><br><span class="line">data.describe()</span><br><span class="line">data.tail()</span><br><span class="line">data.<span class="built_in">sum</span>()</span><br><span class="line">data.mean()</span><br></pre></td></tr></table></figure><p>ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬æƒ³å¾—åˆ°è¿™ä¸ªæ•°æ®é›†çš„ç‰¹å¾å˜é‡åä¸ç›®æ ‡å˜é‡åï¼Œè¿™æ—¶å°±è¦é€šè¿‡ä»¥ä¸‹æ“ä½œè¿›è¡Œï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">column = data.columns.tolist()</span><br><span class="line">target = data.target.tolist()</span><br></pre></td></tr></table></figure><p>åœ¨Pythonä¸­ï¼Œaxis = 1æ˜¯é’ˆå¯¹åˆ—æ“ä½œï¼Œaxis = 0æ˜¯é’ˆå¯¹è¡Œæ“ä½œã€‚</p><p>å‡å¦‚æˆ‘ä»¬æƒ³æŸ¥çœ‹è¿™ä¸ªæ•°æ®æ˜¯å¦ç¬¦åˆæ­£æ€åˆ†å¸ƒï¼Œå¯ä»¥ä½¿ç”¨<code>Q-Q</code>å›¾ï¼Œå…·ä½“æ“ä½œå¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scipy <span class="keyword">import</span> stats</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">plt.figure(figsize=(<span class="number">10</span>, <span class="number">5</span>))</span><br><span class="line"></span><br><span class="line">ax = plt.subplot(<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>)</span><br><span class="line">sns.histplot(train_data[<span class="string">&#x27;V0&#x27;</span>], kde=<span class="literal">True</span>, stat=<span class="string">&quot;density&quot;</span>, line_kws=&#123;<span class="string">&#x27;color&#x27;</span>:<span class="string">&#x27;red&#x27;</span>&#125;, ax=ax)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ æ­£æ€åˆ†å¸ƒæ‹Ÿåˆ</span></span><br><span class="line">xmin, xmax = plt.xlim()</span><br><span class="line">x = np.linspace(xmin, xmax, <span class="number">100</span>)</span><br><span class="line">p = stats.norm.pdf(x, train_data[<span class="string">&#x27;V0&#x27;</span>].mean(), train_data[<span class="string">&#x27;V0&#x27;</span>].std())</span><br><span class="line">plt.plot(x, p, linewidth=<span class="number">2</span>, color=<span class="string">&#x27;red&#x27;</span>) </span><br><span class="line"></span><br><span class="line">ax = plt.subplot(<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>)</span><br><span class="line">res = stats.probplot(train_data[<span class="string">&#x27;V0&#x27;</span>], plot=plt)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p>å¦‚æœè¿™ä¸ªæ•°æ®è¶Šæ¥è¿‘æ­£æ€åˆ†å¸ƒï¼Œé‚£ä¹ˆæ•°æ®ç‚¹å°†ä¼šå…¨éƒ¨è½åœ¨å³é¢çš„ç›´çº¿ä¸Šã€‚</p><p>å½“ç„¶ï¼Œè¿˜å¯ä»¥ç”¨KDEå›¾ï¼ŒKDEå›¾ä¸å…‰å¯ä»¥å±•ç¤ºåˆ†å¸ƒæƒ…å†µï¼Œè¿˜å¯ä»¥ç”¨æ¥è¿›è¡Œå‰åç‰¹å¾çš„åˆ†å¸ƒå¯¹æ¯”ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ax = sns.kdeplot(train_data[<span class="string">&#x27;V0&#x27;</span>], color=<span class="string">&quot;Red&quot;</span>, fill=<span class="literal">True</span>)</span><br><span class="line">ax = sns.kdeplot(test_data[<span class="string">&#x27;V0&#x27;</span>], color=<span class="string">&quot;Blue&quot;</span>, fill=<span class="literal">True</span>)</span><br><span class="line">ax.set_xlabel(<span class="string">&#x27;V0&#x27;</span>)</span><br><span class="line">ax.set_ylabel(<span class="string">&quot;Frequency&quot;</span>)</span><br><span class="line">ax = ax.legend([<span class="string">&quot;train&quot;</span>,<span class="string">&quot;test&quot;</span>])</span><br></pre></td></tr></table></figure><p>å¯¹äºç³»æ•°çŸ©é˜µçš„è®¡ç®—ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å¯¹æ•°æ®é›†è¿›è¡Œ<code>corr()</code>æ“ä½œï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">corr_matrix = data.corr()</span><br><span class="line"><span class="comment"># ç”»å‡ºç›¸å…³æ€§çƒ­åŠ›å›¾</span></span><br><span class="line">ax = plt.subplots(figsize=(<span class="number">20</span>, <span class="number">16</span>))</span><br><span class="line">ax = sns.heatmap(train_corr, vmax=<span class="number">.8</span>, square=<span class="literal">True</span>, annot=<span class="literal">True</span>)<span class="comment">#ç”»çƒ­åŠ›å›¾   annot=True æ˜¾ç¤ºç³»æ•°</span></span><br></pre></td></tr></table></figure><p>å¦ä¸€ç§ä¸‹ä¸‰è§’çƒ­åŠ›å›¾å±•ç¤ºã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">plt.figure(figsize=(<span class="number">20</span>, <span class="number">16</span>))  </span><br><span class="line">column = train_data_scaler.columns.tolist()  </span><br><span class="line">mcorr = train_data_scaler[column].corr(method=<span class="string">&quot;spearman&quot;</span>)  </span><br><span class="line">mask = np.zeros_like(mcorr, dtype=np.bool_)  </span><br><span class="line">mask[np.triu_indices_from(mask)] = <span class="literal">True</span>  </span><br><span class="line">cmap = sns.diverging_palette(<span class="number">220</span>, <span class="number">10</span>, as_cmap=<span class="literal">True</span>)  </span><br><span class="line">g = sns.heatmap(mcorr, mask=mask, cmap=cmap, square=<span class="literal">True</span>, annot=<span class="literal">True</span>, fmt=<span class="string">&#x27;0.2f&#x27;</span>)  </span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬è¿˜å¯ä»¥ç”¨é¥¼å›¾æ¥å±•ç¤ºå æ¯”æ•ˆæœã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">sort_huaye = <span class="built_in">len</span>(huaye_index)</span><br><span class="line">sort_jun = <span class="built_in">len</span>(jun_index)</span><br><span class="line">sort_qie = <span class="built_in">len</span>(qie_index)</span><br><span class="line">sort_lajiao = <span class="built_in">len</span>(lajiao_index)</span><br><span class="line">sort_huacai = <span class="built_in">len</span>(huacai_index)</span><br><span class="line">sort_shuisheng = <span class="built_in">len</span>(shuisheng_index)</span><br><span class="line">sort_data = [sort_huaye,sort_lajiao,sort_qie,sort_jun,sort_huacai,sort_shuisheng]</span><br><span class="line">labels = [<span class="string">&#x27;èŠ±å¶ç±»&#x27;</span>,<span class="string">&#x27;è¾£æ¤’ç±»&#x27;</span>,<span class="string">&#x27;èŒ„ç±»&#x27;</span>,<span class="string">&#x27;é£Ÿç”¨èŒ&#x27;</span>,<span class="string">&#x27;èŠ±èœç±»&#x27;</span>,<span class="string">&#x27;æ°´ç”Ÿæ ¹èŒç±»&#x27;</span>,]</span><br><span class="line">plt.figure(figsize=(<span class="number">7</span>,<span class="number">7</span>))</span><br><span class="line">plt.title(<span class="string">&#x27;ç§ç±»ä¸°å¯Œåº¦å æ¯”&#x27;</span>,fontsize = <span class="number">15</span>)</span><br><span class="line">colors =  [<span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;blue&#x27;</span>, <span class="string">&#x27;green&#x27;</span>, <span class="string">&#x27;yellow&#x27;</span>, <span class="string">&#x27;lightgray&#x27;</span>,<span class="string">&#x27;orange&#x27;</span>]</span><br><span class="line">plt.pie(sort_data,labels=labels,autopct=<span class="string">&#x27;%.1f %%&#x27;</span>,colors=colors,startangle=<span class="number">90</span>)</span><br></pre></td></tr></table></figure><p>æŠ˜çº¿å›¾å¯ä»¥ç”¨æ¥å±•ç¤ºéšæŸä¸€å˜é‡å˜åŒ–çš„è¶‹åŠ¿ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">huayeXsl[<span class="string">&#x27;é”€å”®æ—¥æœŸ&#x27;</span>] = pd.to_datetime(huayeXsl[<span class="string">&#x27;é”€å”®æ—¥æœŸ&#x27;</span>]).dt.date</span><br><span class="line">huacaiXsl[<span class="string">&#x27;é”€å”®æ—¥æœŸ&#x27;</span>] = pd.to_datetime(huacaiXsl[<span class="string">&#x27;é”€å”®æ—¥æœŸ&#x27;</span>]).dt.date</span><br><span class="line">junXsl[<span class="string">&#x27;é”€å”®æ—¥æœŸ&#x27;</span>] = pd.to_datetime(junXsl[<span class="string">&#x27;é”€å”®æ—¥æœŸ&#x27;</span>]).dt.date</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†é”€å”®é‡æŒ‰ç…§æ—¥æœŸè¿›è¡Œæ±‚å’Œ</span></span><br><span class="line">huaye_daily = huayeXsl.groupby(<span class="string">&#x27;é”€å”®æ—¥æœŸ&#x27;</span>)[<span class="string">&#x27;é”€é‡(åƒå…‹)&#x27;</span>].<span class="built_in">sum</span>().reset_index()</span><br><span class="line">huacai_daily = huacaiXsl.groupby(<span class="string">&#x27;é”€å”®æ—¥æœŸ&#x27;</span>)[<span class="string">&#x27;é”€é‡(åƒå…‹)&#x27;</span>].<span class="built_in">sum</span>().reset_index()</span><br><span class="line">jun_daily = junXsl.groupby(<span class="string">&#x27;é”€å”®æ—¥æœŸ&#x27;</span>)[<span class="string">&#x27;é”€é‡(åƒå…‹)&#x27;</span>].<span class="built_in">sum</span>().reset_index()</span><br><span class="line"></span><br><span class="line">x1 = huaye_daily[<span class="string">&#x27;é”€å”®æ—¥æœŸ&#x27;</span>]</span><br><span class="line">x2 = huacai_daily[<span class="string">&#x27;é”€å”®æ—¥æœŸ&#x27;</span>]</span><br><span class="line">x3 = jun_daily[<span class="string">&#x27;é”€å”®æ—¥æœŸ&#x27;</span>]</span><br><span class="line">y1 = huaye_daily[<span class="string">&#x27;é”€é‡(åƒå…‹)&#x27;</span>]</span><br><span class="line">y2 = huacai_daily[<span class="string">&#x27;é”€é‡(åƒå…‹)&#x27;</span>]</span><br><span class="line">y3 = jun_daily[<span class="string">&#x27;é”€é‡(åƒå…‹)&#x27;</span>]</span><br><span class="line"></span><br><span class="line">plt.figure(figsize=(<span class="number">15</span>, <span class="number">6</span>))</span><br><span class="line"></span><br><span class="line">plt.plot(x1, y1, linewidth=<span class="number">1</span>, color=<span class="string">&#x27;r&#x27;</span>,label=<span class="string">&quot;èŠ±å¶ç±»&quot;</span>)</span><br><span class="line">plt.plot(x2, y2, linewidth=<span class="number">1</span>, color=<span class="string">&#x27;g&#x27;</span>,label=<span class="string">&quot;èŠ±èœç±»&quot;</span>)</span><br><span class="line">plt.plot(x3, y3, linewidth=<span class="number">1</span>, color=<span class="string">&#x27;b&#x27;</span>,label=<span class="string">&quot;é£Ÿç”¨èŒ&quot;</span>)</span><br><span class="line"></span><br><span class="line">plt.title(<span class="string">&#x27;æ¯å¤©é”€å”®é‡éšæ—¶é—´å˜åŒ–å›¾&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;é”€å”®æ—¥æœŸ&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;é”€é‡(åƒå…‹)&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.xticks(rotation=<span class="number">45</span>)</span><br><span class="line">plt.legend(loc=<span class="string">&#x27;upper left&#x27;</span>)</span><br><span class="line">plt.tight_layout()</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><h2 id="ç‰¹å¾å·¥ç¨‹"><a href="#ç‰¹å¾å·¥ç¨‹" class="headerlink" title="ç‰¹å¾å·¥ç¨‹"></a>ç‰¹å¾å·¥ç¨‹</h2><p>ä¸€èˆ¬æ¥è¯´ï¼Œæœ‰æ•°æ®çš„æ ‡å‡†åŒ–ï¼Œå½’ä¸€åŒ–ç­‰ï¼Œå¦‚æœå¯¹è¾“å‡ºèŒƒå›´æœ‰è¦æ±‚ï¼Œåˆ™ç”¨å½’ä¸€åŒ–ï¼Œå¦‚æœæ•°æ®è¾ƒä¸ºç¨³å®šï¼Œä¸å­˜åœ¨æç«¯æœ€å¤§å€¼å’Œæœ€å°å€¼åˆ™ç”¨å½’ä¸€åŒ–ï¼Œè‹¥å­˜åœ¨å¼‚å¸¸å€¼å’Œè¾ƒå¤šå™ªå£°åˆ™ç”¨æ ‡å‡†åŒ–ã€‚å…·ä½“æ–¹æ³•ä¸ºï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> Normalizer<span class="comment"># æ ‡å‡†åŒ–</span></span><br><span class="line"></span><br><span class="line">norm = Normalizer()</span><br><span class="line">new_data_all = norm.fit_transform(data_all)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> StandardScaler <span class="comment"># æ ‡å‡†åŒ–</span></span><br><span class="line"></span><br><span class="line">stand = StandardScaler()</span><br><span class="line">NewData = stand.fit_transform(data_all)</span><br></pre></td></tr></table></figure><p>ç‹¬çƒ­ç¼–ç å’Œå“‘ç¼–ç æ˜¯æ•°æ®é¢„å¤„ç†ä¸­å¸¸è§çš„ä¸¤ç§ç¼–ç æ–¹å¼ï¼Œç”¨äºå°†åˆ†ç±»ç‰¹å¾è½¬åŒ–ä¸ºæ•°å€¼å‹æ•°æ®ã€‚ç‹¬çƒ­ç¼–ç ä¸ºæ¯ä¸ªç±»åˆ«åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„äºŒè¿›åˆ¶å˜é‡ï¼Œè€Œå“‘ç¼–ç åˆ™é€šè¿‡N-1ä¸ªå˜é‡æ¥è¡¨ç¤ºNä¸ªç±»åˆ«ï¼Œæœ€åä¸€ä¸ªç±»åˆ«é€šè¿‡æ’é™¤å…¶ä»–æ‰€æœ‰ç±»åˆ«æ¥ç¡®å®šã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.impute <span class="keyword">import</span> SimpleImputer</span><br><span class="line"></span><br><span class="line">imputer = SimpleImputer(strategy=<span class="string">&#x27;median&#x27;</span>)<span class="comment"># ä½¿ç”¨å‡å€¼å¡«å……</span></span><br><span class="line">X_train_imputed = imputer.fit_transform(train_data1)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> Binarizer</span><br><span class="line"></span><br><span class="line">Bin = Binarizer()</span><br><span class="line">data_1 = Bin.fit_transform(data_all)</span><br></pre></td></tr></table></figure><p>è¿›è¡Œå®Œæ•°æ®çš„æ¢ç´¢åï¼Œæˆ‘ä»¬æƒ³å¯¹æ•°æ®è¿›è¡Œè½¬æ¢ï¼Œæ¥ç¬¦åˆæ­£æ€åˆ†å¸ƒã€‚</p><p>åŸºäºå¤šé¡¹å¼è½¬æ¢ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> PolynomialFeatures</span><br><span class="line"><span class="keyword">from</span> sklearn.datasets <span class="keyword">import</span> load_iris</span><br><span class="line"></span><br><span class="line">data1 = load_iris()</span><br><span class="line">X = data1.data</span><br><span class="line">poly = PolynomialFeatures()</span><br><span class="line">data2 = poly.fit_transform(X)</span><br></pre></td></tr></table></figure><p>åŸºäºå¯¹æ•°å˜æ¢,é€šè¿‡è‡ªå®šä¹‰å•å…ƒè¿›è¡Œæ•°æ®è½¬æ¢:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> numpy <span class="keyword">import</span> log1p</span><br><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> FunctionTransformer</span><br><span class="line"></span><br><span class="line">fun = FunctionTransformer(log1p,validate=<span class="literal">False</span>)</span><br><span class="line">data3 = fun.fit_transform(X)</span><br></pre></td></tr></table></figure><p>å¯¹äºç‰¹å¾æ•°é‡è¿‡å¤šçš„æ•°æ®é›†ï¼Œæˆ‘ä»¬å¯èƒ½è¿˜éœ€è¦è¿›è¡Œæ•°æ®é™ç»´ï¼Œé™ç»´æ˜¯æŒ‡åœ¨æŸäº›é™å®šæ¡ä»¶ä¸‹ï¼Œé™ä½éšæœºå˜é‡(ç‰¹å¾)ä¸ªæ•°ï¼Œå¾—åˆ°ä¸€ç»„â€œä¸ç›¸å…³â€ä¸»å˜é‡çš„è¿‡ç¨‹,ä¸€èˆ¬åˆ†ä¸ºç‰¹å¾é€‰æ‹©å’Œçº¿æ€§é™ç»´ï¼Œç‰¹å¾é€‰æ‹©ä¸€èˆ¬æœ‰ï¼šè¿‡æ»¤æ³•ï¼ŒåŒ…è£…æ³•ï¼ŒåµŒå…¥æ³•</p><p>å¯¹äºè¿‡æ»¤æ³•ï¼Œåˆ™ä¸€èˆ¬ç”¨VarianceThresholdå’ŒSelectKBestç±»æ¥å®ç°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.feature_selection <span class="keyword">import</span> VarianceThreshold</span><br><span class="line"></span><br><span class="line">Vari = VarianceThreshold(threshold=<span class="number">3</span>)<span class="comment"># é€‰æ‹©æ–¹å·®é—¨æ§›ä¸º3</span></span><br><span class="line">data4 = Vari.fit_transform(X)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.feature_selection <span class="keyword">import</span> SelectKBest</span><br><span class="line"><span class="keyword">from</span> sklearn.datasets <span class="keyword">import</span> load_iris</span><br><span class="line"><span class="keyword">from</span> scipy.stats <span class="keyword">import</span> pearsonr</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># åŠ è½½æ•°æ®é›†</span></span><br><span class="line">iris = load_iris()</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰ Pearson ç›¸å…³ç³»æ•°ä½œä¸ºè¯„åˆ†å‡½æ•°</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">pearson_corr</span>(<span class="params">X, y</span>):</span><br><span class="line">    <span class="comment"># å¯¹æ¯ä¸ªç‰¹å¾è®¡ç®—ä¸ç›®æ ‡å˜é‡çš„ Pearson ç›¸å…³ç³»æ•°ï¼Œè¿”å›ç›¸å…³ç³»æ•°å’Œpå€¼</span></span><br><span class="line">    <span class="keyword">return</span> np.array([pearsonr(X[:, i], y)[<span class="number">0</span>] <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(X.shape[<span class="number">1</span>])])</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨ SelectKBest é€‰æ‹©æœ€ç›¸å…³çš„ä¸¤ä¸ªç‰¹å¾</span></span><br><span class="line">selector = SelectKBest(score_func=pearson_corr, k=<span class="number">2</span>)</span><br><span class="line">X_new = selector.fit_transform(iris.data, iris.target)</span><br></pre></td></tr></table></figure><p>å¯ä»¥ä½¿ç”¨å¡æ–¹æ£€éªŒæ¥è¿›è¡Œç‰¹å¾çš„é€‰æ‹©ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.feature_selection <span class="keyword">import</span> chi2</span><br><span class="line">SelectKBest(chi2,k=<span class="number">2</span>).fit_transform(iris.data,iris.target)</span><br></pre></td></tr></table></figure><p>RFEæ³•ä¹Ÿå¯ä»¥ç”¨æ¥è¿›è¡Œç‰¹å¾é€‰æ‹©ï¼Œå®ƒæ˜¯ä¸€ç§è¿­ä»£æ¨¡å‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> LogisticRegression</span><br><span class="line"><span class="keyword">from</span> sklearn.feature_selection <span class="keyword">import</span> RFE</span><br><span class="line"></span><br><span class="line">RFE(estimator=LogisticRegression(multi_class=<span class="string">&#x27;auto&#x27;</span>,solver=<span class="string">&#x27;lbfgs&#x27;</span>,max_iter=<span class="number">500</span>),n_features_to_select=<span class="number">2</span>).fit_transform(iris.data,iris.target)</span><br></pre></td></tr></table></figure><p>çº¿æ€§é™ç»´ï¼Œä¸€èˆ¬æœ‰ä¸»æˆåˆ†åˆ†ææ³•ä¸çº¿æ€§åˆ¤åˆ«åˆ†ææ³•</p><p>ä¸»æˆåˆ†åˆ†ææ³•å¸Œæœ›æ‰¾åˆ°æŸç§çº¿æ€§æŠ•å½±ï¼Œä½¿æ•°æ®æŠ•åˆ°ä½ç»´ç©ºé—´ä¸­çš„æ•°æ®æ–¹å·®æœ€å¤§ï¼Œä»¥è¾¾åˆ°ä½¿ç”¨è¾ƒå°‘æ•°æ®ç»´åº¦æ¥ä¿ç•™è¾ƒå¤šæ•°æ®åŸå§‹ç‰¹å¾çš„æ•ˆæœ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.decomposition <span class="keyword">import</span> PCA</span><br><span class="line"></span><br><span class="line">PCA(n_components=<span class="number">2</span>).fit_transform(iris.data)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.discriminant_analysis <span class="keyword">import</span> LinearDiscriminantAnalysis <span class="keyword">as</span> LDA <span class="comment"># çº¿æ€§åˆ¤åˆ«æ³•</span></span><br><span class="line"></span><br><span class="line">LDA(n_components=<span class="number">2</span>).fit_transform(iris.data,iris.target)</span><br></pre></td></tr></table></figure><h2 id="æ­£æ€åˆ†å¸ƒç»Ÿè®¡é‡çš„æ£€éªŒ"><a href="#æ­£æ€åˆ†å¸ƒç»Ÿè®¡é‡çš„æ£€éªŒ" class="headerlink" title="æ­£æ€åˆ†å¸ƒç»Ÿè®¡é‡çš„æ£€éªŒ"></a>æ­£æ€åˆ†å¸ƒç»Ÿè®¡é‡çš„æ£€éªŒ</h2><p>ä¸å…‰å¯ä»¥ç”¨å¯è§†åŒ–æ¥è§‚å¯Ÿï¼Œè¿˜å¯ä»¥é€šè¿‡ç»Ÿè®¡é‡æè¿°æ¥åˆ¤æ–­æ•°æ®æ˜¯å¦ç¬¦åˆæ­£æ€åˆ†å¸ƒï¼ŒShapiro-Wilkæ£€éªŒã€Kolmogorov-Smirnov (KS) æ£€éªŒä»¥åŠAnderson-Darlingæ£€éªŒæ˜¯å¸¸ç”¨çš„æ­£æ€æ€§æ£€éªŒæ–¹æ³•ï¼Œä¸»è¦ç”¨äºæ£€æµ‹æ ·æœ¬æ•°æ®æ˜¯å¦ç¬¦åˆæ­£æ€åˆ†å¸ƒã€‚</p><h3 id="Shapiro-Wilkæ£€éªŒ"><a href="#Shapiro-Wilkæ£€éªŒ" class="headerlink" title="Shapiro-Wilkæ£€éªŒ"></a>Shapiro-Wilkæ£€éªŒ</h3><p>Shapiro-Wilkæ£€éªŒé€šè¿‡æ¯”è¾ƒæ ·æœ¬çš„é¡ºåºç»Ÿè®¡é‡ï¼ˆå³æ ·æœ¬æ•°æ®çš„æœ‰åºæ’åˆ—ï¼‰ä¸æ­£æ€åˆ†å¸ƒä¸‹ç›¸åº”çš„ç†è®ºé¡ºåºç»Ÿè®¡é‡æ¥æ£€éªŒæ•°æ®çš„æ­£æ€æ€§ã€‚è¯¥æ£€éªŒçš„ç»Ÿè®¡é‡Wæ˜¯é€šè¿‡å¦‚ä¸‹å…¬å¼è®¡ç®—çš„ï¼š</p><script type="math/tex; mode=display">W = \frac{\left(\sum_{i=1}^{n} a_i x_{(i)}\right)^2}{\sum_{i=1}^{n} (x_i - \bar{x})^2}</script><p>ä¸æ˜¾è‘—æ€§æ°´å¹³ï¼ˆå¦‚0.05ï¼‰æ¯”è¾ƒpå€¼ï¼Œè‹¥på€¼å°äºæ˜¾è‘—æ€§æ°´å¹³ï¼Œæ‹’ç»åŸå‡è®¾ï¼ˆæ•°æ®ä¸æœä»æ­£æ€åˆ†å¸ƒï¼‰:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scipy <span class="keyword">import</span> stats</span><br><span class="line"></span><br><span class="line">statistic, p_value = stats.shapiro(data)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Shapiro-Wilkæ£€éªŒç»Ÿè®¡é‡: <span class="subst">&#123;statistic&#125;</span>, på€¼: <span class="subst">&#123;p_value&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure><h3 id="Kolmogorov-Smirnov-KS-æ£€éªŒ"><a href="#Kolmogorov-Smirnov-KS-æ£€éªŒ" class="headerlink" title="Kolmogorov-Smirnov (KS) æ£€éªŒ"></a>Kolmogorov-Smirnov (KS) æ£€éªŒ</h3><p>Kolmogorov-Smirnovæ£€éªŒç”¨äºæ¯”è¾ƒæ ·æœ¬çš„ç»éªŒåˆ†å¸ƒå‡½æ•°ï¼ˆEmpirical Distribution Function, EDFï¼‰ä¸ç†è®ºåˆ†å¸ƒå‡½æ•°ï¼Œæˆ–æ¯”è¾ƒä¸¤ä¸ªæ ·æœ¬çš„EDFã€‚æ£€éªŒçš„ç»Ÿè®¡é‡æ˜¯æ ·æœ¬EDFä¸ç†è®ºåˆ†å¸ƒæˆ–å¦ä¸€ä¸ªæ ·æœ¬EDFä¹‹é—´çš„æœ€å¤§å·®è·ã€‚</p><script type="math/tex; mode=display">D_n = \sup_x |F_n(x) - F(x)|</script><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scipy <span class="keyword">import</span> stats</span><br><span class="line"></span><br><span class="line">statistic, p_value = stats.kstest(data, <span class="string">&#x27;norm&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Kolmogorov-Smirnovæ£€éªŒç»Ÿè®¡é‡: <span class="subst">&#123;statistic&#125;</span>, på€¼: <span class="subst">&#123;p_value&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure><h3 id="Anderson-Darlingæ£€éªŒ"><a href="#Anderson-Darlingæ£€éªŒ" class="headerlink" title="Anderson-Darlingæ£€éªŒ"></a>Anderson-Darlingæ£€éªŒ</h3><p>Anderson-Darlingæ£€éªŒæ˜¯å¯¹Kolmogorov-Smirnovæ£€éªŒçš„æ”¹è¿›ï¼Œå¢å¼ºäº†å°¾éƒ¨çš„æ£€éªŒèƒ½åŠ›ã€‚å®ƒä½¿ç”¨äº†åŠ æƒçš„EDFï¼Œä½¿å¾—åœ¨åˆ†å¸ƒå°¾éƒ¨çš„å·®å¼‚è´¡çŒ®æ›´å¤§ã€‚</p><script type="math/tex; mode=display">A^2 = -n - \frac{1}{n} \sum_{i=1}^{n} \left[ (2i-1) \ln(F(x_i)) + (2n+1-2i) \ln(1-F(x_{n+1-i})) \right]</script><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scipy <span class="keyword">import</span> stats</span><br><span class="line"></span><br><span class="line">result = stats.anderson(data, dist=<span class="string">&#x27;norm&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Anderson-Darlingæ£€éªŒç»Ÿè®¡é‡: <span class="subst">&#123;result.statistic&#125;</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;ä¸´ç•Œå€¼: <span class="subst">&#123;result.critical_values&#125;</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;æ˜¾è‘—æ€§æ°´å¹³: <span class="subst">&#123;result.significance_level&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure><p><strong>Shapiro-Wilkæ£€éªŒ</strong>: é€‚ç”¨äºå°æ ·æœ¬ï¼Œè®¡ç®—å¤æ‚ä½†ç²¾åº¦è¾ƒé«˜ï¼Œé€‚åˆæ­£æ€æ€§æ£€éªŒã€‚</p><p><strong>Kolmogorov-Smirnovæ£€éªŒ</strong>: é€šç”¨æ€§å¼ºï¼Œå¯ç”¨äºä»»æ„åˆ†å¸ƒçš„æ£€éªŒï¼Œä½†å¯¹å°¾éƒ¨å·®å¼‚ä¸æ•æ„Ÿã€‚</p><p><strong>Anderson-Darlingæ£€éªŒ</strong>: é€‚ç”¨äºæ›´å¹¿æ³›çš„åˆ†å¸ƒï¼Œå¢å¼ºäº†å¯¹å°¾éƒ¨å·®å¼‚çš„æ•æ„Ÿæ€§ï¼Œé€‚åˆæ ·æœ¬é‡è¾ƒå¤§æ—¶ä½¿ç”¨ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> æ•°æ®åˆ†æ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>éå‚æ•°æ£€éªŒ</title>
      <link href="/2024/08/17/%E9%9D%9E%E5%8F%82%E6%95%B0%E6%A3%80%E9%AA%8C/"/>
      <url>/2024/08/17/%E9%9D%9E%E5%8F%82%E6%95%B0%E6%A3%80%E9%AA%8C/</url>
      
        <content type="html"><![CDATA[<h1 id="éå‚æ•°æ£€éªŒ"><a href="#éå‚æ•°æ£€éªŒ" class="headerlink" title="éå‚æ•°æ£€éªŒ"></a>éå‚æ•°æ£€éªŒ</h1><p>éå‚æ•°æ£€éªŒæ˜¯åœ¨æ€»ä½“æ–¹å·®æœªçŸ¥æˆ–çŸ¥é“ç”šå°‘çš„æƒ…å†µä¸‹ï¼Œåˆ©ç”¨æ ·æœ¬æ•°æ®å¯¹æ€»ä½“åˆ†å¸ƒå½¢æ€ç­‰è¿›è¡Œæ¨æ–­çš„æ–¹æ³•ã€‚ä¸€èˆ¬æ¥è¯´å‚æ•°æ£€éªŒä¾§é‡äºæ ·æœ¬æ•´ä½“çš„å‡å€¼ï¼Œè€Œéå‚æ•°æ£€éªŒæ›´ä¾§é‡äºæ ·æœ¬çš„ä¸­ä½å€¼ï¼Œè¿™ä¹Ÿå°±æ„å‘³å¯¹äºæå·®è¾ƒå¤§çš„æ•°æ®æ¥è¯´ï¼Œéå‚æ•°æ£€éªŒä¸å®¹æ˜“æ”¶åˆ°æç«¯å€¼çš„å¹²æ‰°ã€‚</p><p>å‚æ•°æ£€éªŒåº”ç”¨çš„å‰ææ˜¯æ•°æ®ç¬¦åˆæ­£æ€åˆ†å¸ƒï¼Œè€Œç°å®æƒ…å†µä¸­å¾ˆå¤šæ•°æ®çš„åˆ†å¸ƒå¹¶ä¸æœä»æ­£æ€åˆ†å¸ƒï¼Œè™½ç„¶å¯¹äºæ ·æœ¬é‡å¾ˆå¤§çš„æ•°æ®æ¥è¯´ï¼Œå³ä½¿å…¶ä¸ç¬¦åˆæ­£æ€åˆ†å¸ƒï¼Œä½†åº”ç”¨å‚æ•°æ£€éªŒä¹Ÿèƒ½å–åˆ°è¾ƒå¥½çš„æ•ˆæœï¼Œä½†å¯¹äºé‚£äº›æ—¢ä¸ç¬¦åˆæ­£æ€åˆ†å¸ƒï¼ŒåŒæ—¶æ ·æœ¬é‡è¾ƒå°çš„æƒ…å†µä¸‹ï¼Œåˆ™æ›´é€‚åˆç”¨éå‚æ•°æ£€éªŒã€‚</p><p>è¿™äº›æ£€éªŒæ–¹æ³•éƒ½å¯ä»¥åœ¨SPSSä¸­å¿«é€Ÿå®ç°ï¼Œæœ¬æ–‡åªæ˜¯ç®€å•å¯¹å„ç±»æ–¹æ³•è¿›è¡Œç®€è¦çš„åŸç†ä»‹ç»å’Œé€‚ç”¨æ¡ä»¶æ¦‚æ‹¬ã€‚</p><h2 id="å¡æ–¹æ£€éªŒ-Chi-Square-Test"><a href="#å¡æ–¹æ£€éªŒ-Chi-Square-Test" class="headerlink" title="å¡æ–¹æ£€éªŒ(Chi-Square Test)"></a>å¡æ–¹æ£€éªŒ(Chi-Square Test)</h2><p>åœ¨è¿™ä¹ˆå¤šçš„éå‚æ•°æ£€éªŒæ–¹æ³•ä¸­ï¼Œå¡æ–¹æ£€éªŒæ— ç–‘æ˜¯æœ€å¸¸ç”¨çš„æ–¹æ³•ä¹‹ä¸€ï¼Œå…¶å¸¸ç”¨äºæ£€éªŒå˜é‡ä¹‹é—´çš„å…³è”æ€§æˆ–æ£€éªŒè§‚æµ‹æ•°æ®ä¸æœŸæœ›åˆ†å¸ƒä¹‹é—´çš„é€‚åˆåº¦ã€‚</p><script type="math/tex; mode=display">\chi^2 = \sum \frac{(O_i - E_i)^2}{E_i}</script><p>å…¶ä¸­ï¼Œ$Oi$æ˜¯è§‚æµ‹é¢‘æ•°ï¼Œ$Ei$ æ˜¯æœŸæœ›é¢‘æ•°ã€‚</p><p>æ¯”å¦‚å‡è®¾ä½ æ˜¯ä¸€åå¸‚åœºç ”ç©¶äººå‘˜ï¼Œæƒ³è¦ç ”ç©¶æ¶ˆè´¹è€…çš„æ€§åˆ«ï¼ˆç”·æ€§æˆ–å¥³æ€§ï¼‰ä¸ä»–ä»¬è´­ä¹°æŸç§æ–°äº§å“çš„æ„æ„¿ï¼ˆæ„¿æ„è´­ä¹°ã€ä¸æ„¿æ„è´­ä¹°ã€å°šæœªå†³å®šï¼‰ä¹‹é—´æ˜¯å¦å­˜åœ¨å…³è”ã€‚</p><p>ä½ è°ƒæŸ¥äº†200ä½æ¶ˆè´¹è€…ï¼Œæ”¶é›†äº†ä»–ä»¬çš„æ€§åˆ«ä»¥åŠå¯¹è´­ä¹°è¯¥äº§å“çš„æ„æ„¿ï¼Œå¹¶å°†ç»“æœæ•´ç†æˆä»¥ä¸‹çš„åˆ—è”è¡¨ï¼š</p><div class="table-container"><table><thead><tr><th>æ€§åˆ«</th><th>æ„¿æ„è´­ä¹°</th><th>ä¸æ„¿æ„è´­ä¹°</th><th>å°šæœªå†³å®š</th><th>åˆè®¡</th></tr></thead><tbody><tr><td>ç”·æ€§</td><td>30</td><td>50</td><td>20</td><td>100</td></tr><tr><td>å¥³æ€§</td><td>40</td><td>30</td><td>30</td><td>100</td></tr><tr><td><strong>åˆè®¡</strong></td><td><strong>70</strong></td><td><strong>80</strong></td><td><strong>50</strong></td><td><strong>200</strong></td></tr></tbody></table></div><p><strong>é—®é¢˜</strong>:<br>ä½ æƒ³çŸ¥é“æ€§åˆ«å’Œè´­ä¹°æ„æ„¿ä¹‹é—´æ˜¯å¦å­˜åœ¨æ˜¾è‘—å…³è”ï¼Œæˆ–è€…è¯´æ€§åˆ«æ˜¯å¦ä¼šå½±å“æ¶ˆè´¹è€…çš„è´­ä¹°å†³ç­–ã€‚</p><p><strong>è§£å†³æ–¹æ³•</strong>:<br>ç”±äºæ€§åˆ«å’Œè´­ä¹°æ„æ„¿éƒ½æ˜¯åˆ†ç±»å˜é‡ï¼Œå¹¶ä¸”æ•°æ®ä»¥åˆ—è”è¡¨çš„å½¢å¼å‘ˆç°ï¼Œå¯ä»¥ä½¿ç”¨<strong>å¡æ–¹æ£€éªŒ</strong>æ¥æ£€éªŒæ€§åˆ«å’Œè´­ä¹°æ„æ„¿ä¹‹é—´çš„ç‹¬ç«‹æ€§ã€‚</p><h2 id="Fisherç²¾ç¡®æ£€éªŒ-Fisherâ€™s-Exact-Test"><a href="#Fisherç²¾ç¡®æ£€éªŒ-Fisherâ€™s-Exact-Test" class="headerlink" title="Fisherç²¾ç¡®æ£€éªŒ(Fisherâ€™s Exact Test)"></a>Fisherç²¾ç¡®æ£€éªŒ(Fisherâ€™s Exact Test)</h2><p>Fisherç²¾ç¡®æ£€éªŒå…¶å®ä¸å¡æ–¹æ£€éªŒå¾ˆåƒï¼Œä½†å…¶é€‚ç”¨äºå½“æ ·æœ¬é‡å°äº20ï¼Œæˆ–æ˜¯æŸäº›å•å…ƒæ ¼çš„æœŸæœ›é¢‘æ•°å°äº5çš„æƒ…å†µã€‚</p><script type="math/tex; mode=display">p = \frac{(a+b)!(c+d)!(a+c)!(b+d)!}{a!b!c!d!n!}</script><p>å…¶ä¸­ï¼Œ$a,b,c,d$æ˜¯åˆ—è”è¡¨ä¸­çš„å››ä¸ªå•å…ƒæ ¼é¢‘æ•°ï¼Œ$n$ æ˜¯æ ·æœ¬æ€»æ•°ã€‚</p><h2 id="Wilcoxonç¬¦å·ç§©æ£€éªŒ-Wilcoxon-Signed-Rank-Test"><a href="#Wilcoxonç¬¦å·ç§©æ£€éªŒ-Wilcoxon-Signed-Rank-Test" class="headerlink" title="Wilcoxonç¬¦å·ç§©æ£€éªŒ (Wilcoxon Signed-Rank Test)"></a>Wilcoxonç¬¦å·ç§©æ£€éªŒ (Wilcoxon Signed-Rank Test)</h2><p>ç¬¦å·æ£€éªŒåªè€ƒè™‘çš„åˆ†å¸ƒåœ¨ä¸­ä½æ•°ä¸¤ä¾§çš„æ ·æœ¬æ•°æ®çš„ä¸ªæ•°ï¼Œå¹¶æ²¡æœ‰è€ƒè™‘ä¸­ä½æ•°ä¸¤ä¾§æ•°æ®åˆ†å¸ƒçš„ç–å¯†ç¨‹åº¦ï¼Œè€ŒWilcoxonç¬¦åˆç§©æ£€éªŒä¾¿è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><script type="math/tex; mode=display">W = \sum \text{sign}(x_i - y_i) \times R(|x_i - y_i|)</script><p>å…¶ä¸­ï¼Œ$x_i$å’Œ $y_i$æ˜¯æˆå¯¹æ ·æœ¬çš„å€¼ï¼Œ$R(âˆ£x_iâˆ’y_iâˆ£)$ æ˜¯å·®å€¼çš„ç§©ã€‚</p><p><strong>èƒŒæ™¯</strong>:<br>å‡è®¾ä½ æ˜¯ä¸€åå¿ƒç†å­¦å®¶ï¼Œæ­£åœ¨ç ”ç©¶ä¸€ç§æ–°å‹çš„å†¥æƒ³ç–—æ³•å¯¹å‡è½»ç„¦è™‘ç—‡çŠ¶çš„æ•ˆæœã€‚ä½ æ‹›å‹Ÿäº†ä¸€ç»„10åæ‚£æœ‰ç„¦è™‘ç—‡çš„æ‚£è€…ï¼Œåˆ†åˆ«åœ¨æ²»ç–—å‰å’Œæ²»ç–—åæµ‹é‡ä»–ä»¬çš„ç„¦è™‘è¯„åˆ†ã€‚ä½ çš„ç›®çš„æ˜¯ç¡®å®šå†¥æƒ³ç–—æ³•æ˜¯å¦æ˜¾è‘—é™ä½äº†ç„¦è™‘è¯„åˆ†ã€‚</p><p>ä»¥ä¸‹æ˜¯æ¯ä½æ‚£è€…æ²»ç–—å‰åçš„ç„¦è™‘è¯„åˆ†ï¼š</p><div class="table-container"><table><thead><tr><th>æ‚£è€…ç¼–å·</th><th>æ²»ç–—å‰è¯„åˆ†</th><th>æ²»ç–—åè¯„åˆ†</th><th>å·®å€¼ï¼ˆæ²»ç–—å - æ²»ç–—å‰ï¼‰</th></tr></thead><tbody><tr><td>1</td><td>25</td><td>20</td><td>-5</td></tr><tr><td>2</td><td>28</td><td>22</td><td>-6</td></tr><tr><td>3</td><td>31</td><td>27</td><td>-4</td></tr><tr><td>4</td><td>29</td><td>25</td><td>-4</td></tr><tr><td>5</td><td>34</td><td>30</td><td>-4</td></tr><tr><td>6</td><td>32</td><td>28</td><td>-4</td></tr><tr><td>7</td><td>30</td><td>24</td><td>-6</td></tr><tr><td>8</td><td>27</td><td>22</td><td>-5</td></tr><tr><td>9</td><td>35</td><td>30</td><td>-5</td></tr><tr><td>10</td><td>33</td><td>29</td><td>-4</td></tr></tbody></table></div><p><strong>é—®é¢˜</strong>:<br>ä½ æƒ³çŸ¥é“æ²»ç–—å‰åçš„ç„¦è™‘è¯„åˆ†æ˜¯å¦å­˜åœ¨æ˜¾è‘—å·®å¼‚ã€‚</p><p><strong>è§£å†³æ–¹æ³•</strong>:<br>ç”±äºæ•°æ®æ˜¯é…å¯¹çš„ï¼ˆåŒä¸€ç»„æ‚£è€…åœ¨æ²»ç–—å‰ååˆ†åˆ«æµ‹é‡äº†ç„¦è™‘è¯„åˆ†ï¼‰ï¼Œè€Œä¸”ä½ ä¸ç¡®å®šæ•°æ®æ˜¯å¦æœä»æ­£æ€åˆ†å¸ƒï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ <strong>Wilcoxonç¬¦å·ç§©æ£€éªŒ</strong> æ¥æ£€éªŒæ²»ç–—å‰åçš„å·®å¼‚æ˜¯å¦æ˜¾è‘—ã€‚</p><h2 id="Mann-Whitneyæ£€éªŒ-Mann-Whitney-U-Test"><a href="#Mann-Whitneyæ£€éªŒ-Mann-Whitney-U-Test" class="headerlink" title="Mann-Whitneyæ£€éªŒ (Mann-Whitney U Test)"></a>Mann-Whitneyæ£€éªŒ (Mann-Whitney U Test)</h2><p>Mann-Whitneyæ£€éªŒæ˜¯ä¸€ç§ç”¨äºæ¯”è¾ƒä¸¤ç»„ç‹¬ç«‹æ ·æœ¬çš„éå‚æ•°æ£€éªŒæ–¹æ³•ï¼Œå®ƒæ£€éªŒä¸¤ç»„æ ·æœ¬æ˜¯å¦æ¥è‡ªå…·æœ‰ç›¸åŒåˆ†å¸ƒçš„æ€»ä½“ã€‚è¯¥æ£€éªŒæ˜¯Wilcoxonç§©å’Œæ£€éªŒçš„å˜ä½“ã€‚</p><script type="math/tex; mode=display">U = n_1n_2 + \frac{n_1(n_1+1)}{2} - R_1</script><p>å…¶ä¸­ï¼Œ$n_1$ å’Œ $n_2$æ˜¯ä¸¤ç»„æ ·æœ¬çš„å¤§å°ï¼Œ$R_1$â€‹æ˜¯ç¬¬ä¸€ç»„æ ·æœ¬çš„ç§©å’Œã€‚</p><p><strong>å®é™…ä¾‹å­</strong>:<br>å‡è®¾ä½ æ˜¯ä¸€åè¯ç‰©ç ”ç©¶äººå‘˜ï¼Œæ­£åœ¨ç ”ç©¶ä¸¤ç§è¯ç‰©ï¼ˆAå’ŒBï¼‰å¯¹é™ä½è¡€å‹çš„æ•ˆæœã€‚ä½ éšæœºé€‰æ‹©äº†ä¸¤ç»„ä¸åŒçš„å¿—æ„¿è€…ï¼Œæ¯ç»„20äººï¼Œå¹¶åˆ†åˆ«ç»™äºˆè¯ç‰©Aå’Œè¯ç‰©Bæ²»ç–—ä¸€æ®µæ—¶é—´ï¼Œç„¶åæµ‹é‡æ¯ä½å¿—æ„¿è€…çš„è¡€å‹å˜åŒ–å€¼ï¼ˆæ²»ç–—å‰åè¡€å‹çš„å·®å¼‚ï¼‰ã€‚</p><ul><li><strong>è¯ç‰©Aç»„çš„è¡€å‹å˜åŒ–å€¼</strong>: 12,15,14,10,18,13,11,16,19,14,15,17,12,14,15,13,11,18,17,16</li><li><strong>è¯ç‰©Bç»„çš„è¡€å‹å˜åŒ–å€¼</strong>: 10,9,12,11,14,10,13,12,11,9,8,14,10,11,12,10,9,11,10,13</li></ul><p><strong>é—®é¢˜</strong>:<br>ä½ æƒ³çŸ¥é“è¯ç‰©Aå’Œè¯ç‰©Bçš„æ•ˆæœæ˜¯å¦æœ‰æ˜¾è‘—å·®å¼‚ã€‚</p><p><strong>è§£å†³æ–¹æ³•</strong>:<br>ç”±äºä¸¤ä¸ªç»„çš„å¿—æ„¿è€…æ˜¯ç‹¬ç«‹çš„ï¼ˆä¸åŒçš„äººï¼‰ï¼Œè€Œä¸”å‡è®¾æ•°æ®ä¸æœä»æ­£æ€åˆ†å¸ƒï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨<strong>Mann-Whitneyæ£€éªŒ</strong>æ¥æ¯”è¾ƒä¸¤ç»„æ•°æ®çš„åˆ†å¸ƒæ˜¯å¦å­˜åœ¨æ˜¾è‘—å·®å¼‚ã€‚</p><p><strong>åº”ç”¨åœºæ™¯</strong>:</p><p>Mann-Whitneyæ£€éªŒé€‚ç”¨äºè¿™ç§æƒ…å†µï¼Œå› ä¸ºå®ƒä¸éœ€è¦æ•°æ®æœä»æ­£æ€åˆ†å¸ƒï¼Œå¹¶ä¸”å¯ä»¥å¤„ç†ç‹¬ç«‹æ ·æœ¬é—´çš„æ¯”è¾ƒã€‚</p><h2 id="Kruskal-Wallisæ£€éªŒ-Kruskal-Wallis-H-Test"><a href="#Kruskal-Wallisæ£€éªŒ-Kruskal-Wallis-H-Test" class="headerlink" title="Kruskal-Wallisæ£€éªŒ (Kruskal-Wallis H Test)"></a>Kruskal-Wallisæ£€éªŒ (Kruskal-Wallis H Test)</h2><p>Kruskal-Wallisæ£€éªŒæ˜¯Mann-Whitneyæ£€éªŒçš„æ‰©å±•ï¼Œé€‚ç”¨äºæ¯”è¾ƒä¸¤ç»„ä»¥ä¸Šçš„ç‹¬ç«‹æ ·æœ¬ã€‚å®ƒæ˜¯ä¸€ç§ç§©å’Œæ£€éªŒï¼Œç”¨äºæ£€éªŒå¤šä¸ªæ ·æœ¬æ˜¯å¦æ¥è‡ªåŒä¸€åˆ†å¸ƒã€‚</p><script type="math/tex; mode=display">H = \frac{12}{N(N+1)} \sum_{i=1}^k \frac{R_i^2}{n_i} - 3(N+1)</script><p>å…¶ä¸­ï¼Œ$N$ æ˜¯æ‰€æœ‰æ ·æœ¬çš„æ€»æ•°ï¼Œ$R_i$æ˜¯ç¬¬$i$ç»„æ ·æœ¬çš„ç§©å’Œï¼Œ$n_i$æ˜¯ç¬¬$i$ç»„çš„æ ·æœ¬é‡ï¼Œ$k$æ˜¯ç»„æ•°ã€‚</p><p><strong>èƒŒæ™¯</strong>:<br>å‡è®¾ä½ æ˜¯ä¸€åæ•™è‚²ç ”ç©¶äººå‘˜ï¼Œæ­£åœ¨ç ”ç©¶ä¸‰ç§ä¸åŒæ•™å­¦æ–¹æ³•ï¼ˆä¼ ç»Ÿæ•™å­¦ã€åœ¨çº¿æ•™å­¦ã€æ··åˆæ•™å­¦ï¼‰å¯¹å­¦ç”ŸæœŸæœ«è€ƒè¯•æˆç»©çš„å½±å“ã€‚ä½ ä»ä¸‰æ‰€ä¸åŒçš„å­¦æ ¡ä¸­éšæœºé€‰æ‹©äº†30åå­¦ç”Ÿï¼Œåˆ†åˆ«æ¥å—è¿™ä¸‰ç§ä¸åŒçš„æ•™å­¦æ–¹æ³•ï¼Œæ¯ç»„10åå­¦ç”Ÿã€‚æœŸæœ«è€ƒè¯•ç»“æŸåï¼Œä½ æ”¶é›†äº†æ¯ä¸ªå­¦ç”Ÿçš„è€ƒè¯•æˆç»©ï¼Œå¹¶å¸Œæœ›ç¡®å®šä¸åŒæ•™å­¦æ–¹æ³•ä¹‹é—´çš„æˆç»©æ˜¯å¦æœ‰æ˜¾è‘—å·®å¼‚ã€‚</p><p>ä»¥ä¸‹æ˜¯å„ç»„å­¦ç”Ÿçš„è€ƒè¯•æˆç»©ï¼š</p><ul><li><strong>ä¼ ç»Ÿæ•™å­¦ç»„</strong>: 78, 85, 82, 88, 90, 83, 79, 81, 87, 84</li><li><strong>åœ¨çº¿æ•™å­¦ç»„</strong>: 70, 75, 68, 80, 77, 72, 74, 76, 69, 73</li><li><strong>æ··åˆæ•™å­¦ç»„</strong>: 85, 88, 90, 92, 89, 91, 87, 86, 90, 88</li></ul><p><strong>é—®é¢˜</strong>:<br>ä½ æƒ³çŸ¥é“è¿™ä¸‰ç§ä¸åŒçš„æ•™å­¦æ–¹æ³•æ˜¯å¦å¯¼è‡´äº†å­¦ç”Ÿæˆç»©çš„æ˜¾è‘—å·®å¼‚ã€‚</p><p><strong>è§£å†³æ–¹æ³•</strong>:<br>å› ä¸ºä½ åœ¨æ¯”è¾ƒä¸‰ä¸ªç‹¬ç«‹ç»„çš„æ•°æ®ï¼Œå¹¶ä¸”ä¸ç¡®å®šè¿™äº›æ•°æ®æ˜¯å¦æœä»æ­£æ€åˆ†å¸ƒï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ <strong>Kruskal-Wallisæ£€éªŒ</strong> æ¥æ£€éªŒä¸‰ç»„æ•°æ®çš„ä¸­ä½æ•°æ˜¯å¦å­˜åœ¨æ˜¾è‘—å·®å¼‚ã€‚</p><h2 id="Friedmanæ£€éªŒï¼ˆFriedman-Testï¼‰"><a href="#Friedmanæ£€éªŒï¼ˆFriedman-Testï¼‰" class="headerlink" title="Friedmanæ£€éªŒï¼ˆFriedman Testï¼‰"></a>Friedmanæ£€éªŒï¼ˆFriedman Testï¼‰</h2><script type="math/tex; mode=display">Q = \frac{12}{nk(k+1)} \sum_{j=1}^k R_j^2 - 3n(k+1)</script><p>å…¶ä¸­ï¼Œnæ˜¯è¢«è¯•çš„æ•°é‡ï¼Œkæ˜¯æµ‹é‡æ¬¡æ•°ï¼Œ$R_j$â€‹æ˜¯ç¬¬jä¸ªæ¡ä»¶çš„ç§©å’Œã€‚</p><p><strong>èƒŒæ™¯</strong>:<br>å‡è®¾ä½ æ˜¯ä¸€åè¥å…»å­¦ç ”ç©¶äººå‘˜ï¼Œæ­£åœ¨ç ”ç©¶ä¸‰ç§ä¸åŒé¥®é£Ÿè®¡åˆ’å¯¹ä½“é‡å˜åŒ–çš„æ•ˆæœã€‚ä½ ä»åŒä¸€ç»„å¿—æ„¿è€…ä¸­é€‰æ‹©äº†10åå¿—æ„¿è€…ï¼Œä¾æ¬¡è®©ä»–ä»¬æ¥å—ä¸‰ç§ä¸åŒçš„é¥®é£Ÿè®¡åˆ’ï¼Œæ¯ä¸ªé¥®é£Ÿè®¡åˆ’æŒç»­ä¸€ä¸ªæœˆã€‚ä¸ºäº†æ§åˆ¶å˜é‡ï¼Œæ¯åå¿—æ„¿è€…åœ¨æ¯ç§é¥®é£Ÿè®¡åˆ’ä¹‹é—´æœ‰ä¸€æ®µæ¸…æ´—æœŸï¼Œä»¥ç¡®ä¿å‰ä¸€é¥®é£Ÿè®¡åˆ’çš„å½±å“ä¸ä¼šå½±å“åä¸€é¥®é£Ÿè®¡åˆ’ã€‚</p><p>ä»¥ä¸‹æ˜¯æ¯åå¿—æ„¿è€…åœ¨æ¯ä¸ªé¥®é£Ÿè®¡åˆ’åçš„ä½“é‡å‡è½»æƒ…å†µï¼ˆå•ä½ï¼šå…¬æ–¤ï¼‰ï¼š</p><div class="table-container"><table><thead><tr><th>å¿—æ„¿è€…ç¼–å·</th><th>é¥®é£Ÿè®¡åˆ’A</th><th>é¥®é£Ÿè®¡åˆ’B</th><th>é¥®é£Ÿè®¡åˆ’C</th></tr></thead><tbody><tr><td>1</td><td>2.1</td><td>2.5</td><td>1.9</td></tr><tr><td>2</td><td>3.4</td><td>3.0</td><td>2.8</td></tr><tr><td>3</td><td>1.5</td><td>2.0</td><td>1.7</td></tr><tr><td>4</td><td>2.3</td><td>2.2</td><td>2.0</td></tr><tr><td>5</td><td>3.0</td><td>2.8</td><td>2.5</td></tr><tr><td>6</td><td>2.8</td><td>3.2</td><td>2.6</td></tr><tr><td>7</td><td>1.9</td><td>2.4</td><td>1.8</td></tr><tr><td>8</td><td>2.6</td><td>2.7</td><td>2.2</td></tr><tr><td>9</td><td>2.4</td><td>2.6</td><td>2.3</td></tr><tr><td>10</td><td>2.9</td><td>3.1</td><td>2.7</td></tr></tbody></table></div><p><strong>é—®é¢˜</strong>:<br>ä½ æƒ³çŸ¥é“è¿™ä¸‰ç§é¥®é£Ÿè®¡åˆ’æ˜¯å¦å¯¹ä½“é‡å‡è½»æ•ˆæœæœ‰æ˜¾è‘—ä¸åŒçš„å½±å“ã€‚</p><p><strong>è§£å†³æ–¹æ³•</strong>:<br>ç”±äºè¿™æ˜¯åŒä¸€ç»„å¿—æ„¿è€…åœ¨ä¸‰ç§ä¸åŒæ¡ä»¶ä¸‹çš„é‡å¤æµ‹é‡æ•°æ®ï¼Œå¹¶ä¸”ä½ ä¸ç¡®å®šæ•°æ®æ˜¯å¦æœä»æ­£æ€åˆ†å¸ƒï¼Œå¯ä»¥ä½¿ç”¨ <strong>Friedmanæ£€éªŒ</strong> æ¥æ£€éªŒä¸‰ç§é¥®é£Ÿè®¡åˆ’å¯¹ä½“é‡å‡è½»æ•ˆæœçš„å·®å¼‚æ˜¯å¦æ˜¾è‘—ã€‚</p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><ul><li><strong>å¡æ–¹æ£€éªŒ</strong>å’Œ<strong>Fisherç²¾ç¡®æ£€éªŒ</strong>ç”¨äºç±»åˆ«æ•°æ®ä¹‹é—´çš„å…³è”æ€§æ£€éªŒï¼ŒåŒºåˆ«åœ¨äºå¡æ–¹æ£€éªŒæ›´é€‚åˆå¤§æ ·æœ¬ï¼Œè€ŒFisherç²¾ç¡®æ£€éªŒæ›´é€‚åˆå°æ ·æœ¬ã€‚</li><li><strong>Mann-Whitneyæ£€éªŒ</strong>å’Œ<strong>Kruskal-Wallisæ£€éªŒ</strong>ç”¨äºæ¯”è¾ƒç‹¬ç«‹æ ·æœ¬çš„æ•°æ®åˆ†å¸ƒï¼ŒMann-Whitneyæ£€éªŒé€‚ç”¨äºä¸¤ç»„æ•°æ®ï¼ŒKruskal-Wallisæ£€éªŒé€‚ç”¨äºä¸¤ç»„ä»¥ä¸Šæ•°æ®ã€‚</li><li><strong>Friedmanæ£€éªŒ</strong>å’Œ<strong>Wilcoxonç¬¦å·ç§©æ£€éªŒ</strong>ç”¨äºæ¯”è¾ƒç›¸å…³æ ·æœ¬çš„æ•°æ®åˆ†å¸ƒï¼ŒFriedmanæ£€éªŒé€‚ç”¨äºå¤šç»„æ•°æ®ï¼ŒWilcoxonç¬¦å·ç§©æ£€éªŒé€‚ç”¨äºä¸¤ç»„æ•°æ®ã€‚</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> å‡è®¾æ£€éªŒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Lassoå›å½’ä¸å²­å›å½’</title>
      <link href="/2024/08/16/Lasso%E5%9B%9E%E5%BD%92%E4%B8%8E%E5%B2%AD%E5%9B%9E%E5%BD%92/"/>
      <url>/2024/08/16/Lasso%E5%9B%9E%E5%BD%92%E4%B8%8E%E5%B2%AD%E5%9B%9E%E5%BD%92/</url>
      
        <content type="html"><![CDATA[<h1 id="å›å½’é—®é¢˜"><a href="#å›å½’é—®é¢˜" class="headerlink" title="å›å½’é—®é¢˜"></a>å›å½’é—®é¢˜</h1><p>å›å½’é—®é¢˜ä¸€èˆ¬æ˜¯é¢„æµ‹ä¸€ä¸ªæˆ–å¤šä¸ªå› å˜é‡ä¸ä¸€ä¸ªæˆ–å¤šä¸ªè‡ªå˜é‡çš„å…³ç³»ï¼Œä¸€èˆ¬çš„å›å½’æ–¹æ³•æœ‰å¾ˆå¤šç§ï¼Œæ¯”å¦‚çº¿æ€§å›å½’ï¼ŒLogisticå›å½’ï¼Œåˆæˆ–æ˜¯å†³ç­–æ ‘å›å½’ï¼Œé›†æˆçš„éšæœºæ£®æ—å›å½’ä¸æ”¯æŒå‘é‡æœºå›å½’ï¼Œè¿˜æœ‰ä¸¤ä¸ªå›å½’æ–¹æ³•ååˆ†å…¸å‹ï¼Œä¸€ä¸ªæ˜¯Lassoå›å½’ï¼Œä¸€ä¸ªæ˜¯å²­å›å½’ï¼Œå°†è¿™ä¸¤ä¸ªå›å½’æ–¹æ³•æ”¾åœ¨ä¸€èµ·è®¨è®ºæ˜¯å› ä¸ºå®ƒä»¬éƒ½ç”¨åˆ°äº†<strong>æ­£åˆ™åŒ–</strong>è¿™é¡¹æŠ€æœ¯ã€‚</p><h1 id="L1ä¸L2æ­£åˆ™åŒ–"><a href="#L1ä¸L2æ­£åˆ™åŒ–" class="headerlink" title="L1ä¸L2æ­£åˆ™åŒ–"></a>L1ä¸L2æ­£åˆ™åŒ–</h1><p>L1 å’Œ L2 æ­£åˆ™åŒ–æ˜¯ä¸¤ç§å¸¸ç”¨çš„æ­£åˆ™åŒ–æ–¹æ³•ï¼Œé€šå¸¸ç”¨äºé˜²æ­¢æœºå™¨å­¦ä¹ æ¨¡å‹è¿‡æ‹Ÿåˆã€‚å®ƒä»¬é€šè¿‡åœ¨æ¨¡å‹çš„æŸå¤±å‡½æ•°ä¸­åŠ å…¥ä¸€ä¸ªæ­£åˆ™åŒ–é¡¹æ¥é™åˆ¶æ¨¡å‹çš„å¤æ‚åº¦ï¼Œä»è€Œæé«˜æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ã€‚</p><p>L1 æ­£åˆ™åŒ–çš„æ ¸å¿ƒæ€æƒ³æ˜¯å¯¹æ¨¡å‹å‚æ•°çš„ç»å¯¹å€¼è¿›è¡Œæƒ©ç½šã€‚å®ƒåœ¨æŸå¤±å‡½æ•°ä¸­åŠ å…¥ä¸€ä¸ªæ­£åˆ™åŒ–é¡¹ï¼Œè¯¥é¡¹æ˜¯æ‰€æœ‰æ¨¡å‹å‚æ•°ç»å¯¹å€¼ä¹‹å’Œçš„æŸä¸ªå€æ•°ï¼Œå³ï¼š$\lambda \sum_{i=1}^n|\omega_i|$ï¼Œå…¶ä¸­$\lambda$æ˜¯æ­£åˆ™åŒ–çš„æƒé‡é¡¹ï¼Œ$\omega$åˆ™æ˜¯å‚æ•°ï¼ŒL1 æ­£åˆ™åŒ–ä¼šå¯¼è‡´æŸäº›å‚æ•°è¢«ç¼©å‡ä¸ºé›¶ï¼Œå› æ­¤å®ƒå…·æœ‰å†…ç½®çš„ç‰¹å¾é€‰æ‹©åŠŸèƒ½ï¼Œä½¿å¾—å®ƒç‰¹åˆ«é€‚åˆé«˜ç»´åº¦æ•°æ®é›†ã€‚é€šè¿‡å¼ºåˆ¶ä¸€äº›å‚æ•°ä¸ºé›¶ï¼ŒL1 æ­£åˆ™åŒ–å¯ä»¥äº§ç”Ÿç¨€ç–æ¨¡å‹ï¼Œæ›´æ–¹ä¾¿è§£é‡Šï¼Œæ‰€ä»¥ä¸€èˆ¬æ¥è¯´ï¼ŒLassoå›å½’ä¸ä»…é€‚ç”¨äºå›å½’ï¼Œä¹Ÿåº”ç”¨åœ¨ä¸€äº›<strong>ç‰¹å¾é™ç»´</strong>çš„æ–¹é¢ä¸Šï¼Œä½†æ˜¯å®ƒçš„åŸç†ä¸ä¸»æˆåˆ†åˆ†æåˆä¸åŒï¼ŒLassoå›å½’æ˜¯é€‰æ‹©ä¸€äº›ä¸ç›®æ ‡å˜é‡æœ€ç›¸å…³çš„å‡ ä¸ªç‰¹å¾ï¼Œè€Œä¸»æˆåˆ†åˆ†ææ˜¯é€šè¿‡ä¸€ä¸ªç©ºé—´ï¼Œå°†é«˜ç»´æ•°æ®æœ€å¤§ç¨‹åº¦çš„æ˜ å°„ä¸ºä½ç»´æ•°æ®ï¼Œæ‰€ä»¥è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼ŒLassoå›å½’å¹¶æ²¡æœ‰äº§ç”Ÿæ–°çš„å˜é‡ã€‚</p><p>è€ŒL2 æ­£åˆ™åŒ–çš„æ ¸å¿ƒæ€æƒ³æ˜¯å¯¹æ¨¡å‹å‚æ•°çš„å¹³æ–¹è¿›è¡Œæƒ©ç½šã€‚å®ƒåœ¨æŸå¤±å‡½æ•°ä¸­åŠ å…¥ä¸€ä¸ªæ­£åˆ™åŒ–é¡¹ï¼Œè¯¥é¡¹æ˜¯æ‰€æœ‰æ¨¡å‹å‚æ•°å¹³æ–¹å’Œçš„æŸä¸ªå€æ•°ï¼Œå³ï¼š$\lambda \sum_{i=1}^n\omega_i^2$ï¼ŒL2 æ­£åˆ™åŒ–ä¸ä¼šåƒ L1 æ­£åˆ™åŒ–é‚£æ ·å°†å‚æ•°ç¼©å‡ä¸ºé›¶ï¼Œè€Œæ˜¯ä¼šä½¿å¾—æ‰€æœ‰å‚æ•°éƒ½è¶‹å‘äºè¾ƒå°çš„å€¼ï¼Œå› æ­¤å®ƒä¸èƒ½è¿›è¡Œç‰¹å¾é€‰æ‹©ã€‚L2 æ­£åˆ™åŒ–èƒ½å¤Ÿæœ‰æ•ˆåœ°å‡å°æ¨¡å‹çš„å¤æ‚åº¦ï¼Œå‡å°‘å¯¹è®­ç»ƒæ•°æ®çš„è¿‡æ‹Ÿåˆï¼Œä½†ä¿ç•™æ‰€æœ‰çš„ç‰¹å¾ã€‚</p><p>è¿™é‡Œçš„æ­£åˆ™åŒ–æ˜¯æœ€ä¼˜åŒ–ç†è®ºçš„ä¸€äº›æ¦‚å¿µã€‚å¯ä»¥ç±»æ¯”ä¸ºä¸€ä¸ª<strong>Lp</strong>è·ç¦»ï¼Œå¯¹äºL1æ­£åˆ™åŒ–ï¼Œå…¶è·ç¦»ç±»ä¼¼äºæ›¼å“ˆé¡¿è·ç¦»ï¼Œå¯¹L2æ­£åˆ™åŒ–è€Œè¨€ï¼Œè·ç¦»åˆ™å˜ä¸ºäº†ä¸€ä¸ªå®Œæ•´çš„åœ†ï¼Œç”±äºåœ†å’Œè±å½¢éƒ½æ˜¯ä¸€ä¸ªå‡¸ä¼˜åŒ–å›¾å½¢ï¼Œæ‰€ä»¥è¿™æ–¹ä¾¿äº†ç›®æ ‡å‡½æ•°çš„æœ€ä¼˜åŒ–ã€‚</p><p>é‚£Lassoå›å½’ä¸å²­å›å½’æ˜¯ç”¨æ¥è§£å†³ä»€ä¹ˆé—®é¢˜çš„å‘¢ï¼Ÿé€šè¿‡çº¦æŸæ€§æˆ‘ä»¬ä¸éš¾å‘ç°ï¼Œè¿™ä¸¤ç§æ­£åˆ™åŒ–å›å½’æ˜¯ä¸ºäº†è§£å†³è¿‡æ‹Ÿåˆé—®é¢˜ï¼Œä¹Ÿå°±æ˜¯è§£å†³æ•°æ®é«˜åº¦ç›¸å…³çš„æƒ…å†µä¸‹ï¼Œæ‰€ä»¥å½“è‡ªå˜é‡é«˜åº¦ç›¸å…³æ—¶ï¼Œå³å¤šé‡å…±çº¿æ€§ï¼Œæˆ‘ä»¬ä¸€èˆ¬ç”¨æ­£åˆ™åŒ–å›å½’ã€‚</p><h1 id="å¤šé‡å…±çº¿æ€§"><a href="#å¤šé‡å…±çº¿æ€§" class="headerlink" title="å¤šé‡å…±çº¿æ€§"></a>å¤šé‡å…±çº¿æ€§</h1><p><strong>å¤šé‡å…±çº¿æ€§(Multicollinearity)</strong>æ˜¯æŒ‡ä¸¤ä¸ªæˆ–æ›´å¤šçš„è‡ªå˜é‡ä¹‹é—´å­˜åœ¨æ˜æ˜¾çš„ç›¸å…³æ€§ã€‚å³è¿™äº›è‡ªå˜é‡ä¹‹é—´æœ‰æ˜¾è‘—çš„çº¿æ€§å…³ç³»ï¼Œå› æ­¤å®ƒä»¬æ— æ³•ä¸ºå›å½’åˆ†ææä¾›ä»»ä½•ç‹¬ç‰¹çš„ä¿¡æ¯ã€‚è¿™æ ·ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿå¾ˆæ˜¾ç„¶ï¼Œè¿™æ ·çš„åæœæ˜¯æ¨¡å‹æ— æ³•å‡†ç¡®çš„è¯†åˆ«å‡ºæ˜¯å“ªä¸ªå˜é‡åœ¨èµ·ä½œç”¨ï¼Œå¯è§£é‡Šæ€§å˜å·®ï¼ŒåŒæ—¶æ•°æ®ä¸­çš„å…±çº¿æ€§ä¼šå¢åŠ æ–¹å·®å¹¶å¯¼è‡´æ¨¡å‹è¿‡æ‹Ÿåˆï¼Œä»è€Œå¯¼è‡´æ¨¡å‹åœ¨æ¨ç†æ—¶å¯¹çœ‹ä¸è§çš„æ•°æ®çš„æ€§èƒ½ä¸ä½³ã€‚</p><p>å®é™…ä¸Šï¼Œå„ç§æ•°æ®é›†éƒ½æˆ–å¤šæˆ–å°‘çš„å­˜åœ¨éƒ¨åˆ†ç‰¹å¾å…±çº¿æ€§çš„æƒ…å†µï¼Œåªä¸è¿‡æ˜¯ç¨‹åº¦æœ‰å¤§æœ‰å°ï¼Œè€Œå¯¹äºæ¯”è¾ƒä¸¥é‡çš„å¤šé‡å…±çº¿æ€§çš„æƒ…å†µï¼Œä¹Ÿå°±æ˜¯æœ‰å¾ˆå¤šç‰¹å¾å­˜åœ¨ç€è¿™æ ·çš„é—®é¢˜ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦é¦–å…ˆåˆ¤æ–­æ˜¯å“ªäº›ç‰¹å¾æ˜¯å…±çº¿æ€§çš„ï¼Œä¸€èˆ¬æ¥è¯´å¯è§†åŒ–æ–¹æ³•æœ‰ï¼Œç›¸å…³ç³»æ•°çŸ©é˜µçš„çƒ­åŠ›å›¾ï¼Œèšç±»å›¾ï¼Œæˆ–æ˜¯VIFã€‚</p><p>ä»€ä¹ˆæ˜¯VIFï¼Ÿæ–¹å·®è†¨èƒ€å› å­ï¼ˆVIFï¼‰æ˜¯å›å½’åˆ†æä¸­å¤šé‡å…±çº¿æ€§ç¨‹åº¦çš„è¡¡é‡æŒ‡æ ‡ã€‚VIFç”¨äºç¡®å®šä¸€ä¸ªè‡ªå˜é‡ä¸ä¸€ç»„å…¶ä»–å˜é‡ä¹‹é—´çš„ç›¸å…³æ€§ã€‚VIFçš„æ•°å€¼è¶Šä½è¶Šå¥½ã€‚å¤§äº4æˆ–5çš„å€¼è¢«è®¤ä¸ºæ˜¯ä¸­åº¦åˆ°é«˜åº¦çš„ï¼Œå¤§äº10çš„å€¼åˆ™è¢«è®¤ä¸ºéå¸¸é«˜ã€‚ä¸€èˆ¬æƒ…å†µä¸‹é€šå¸¸å°†VIF = 5ä½œä¸ºé˜ˆå€¼ï¼Œæ‰€æœ‰å¤§äºè¿™ä¸ªé—¨æ§›çš„è‡ªå˜é‡éƒ½éœ€è¦ç§»é™¤ã€‚è™½ç„¶å¾ˆå¤šæ•™æä¸­åªæœ‰å½“VIF &gt; 10æ—¶æ‰è¢«è®¤ä¸ºæ˜¯ä¸¥é‡çš„å¤šé‡å…±çº¿æ€§ã€‚</p><script type="math/tex; mode=display">VIF =  \frac{1}{1-R_i^2}</script><h1 id="å²­å›å½’-Ridge-regression"><a href="#å²­å›å½’-Ridge-regression" class="headerlink" title="å²­å›å½’(Ridge regression)"></a>å²­å›å½’(Ridge regression)</h1><p>å²­å›å½’ä¸»è¦ç”¨åœ¨è§£å†³å¤šé‡å…±çº¿æ€§é—®é¢˜ï¼Œæ‰€ä»¥å…¶é€‚ç”¨äºé«˜ç»´æ•°æ®é›†ï¼ŒåŒæ—¶å…¶æ›²çº¿ä¸€èˆ¬æ¥è¯´æ˜¯å¹³æ»‘çš„ï¼Œå› ä¸ºå¹³æ–¹é¡¹çš„ç³»æ•°ä¸å®¹æ˜“å˜ä¸º0ï¼Œæ‰€ä»¥ä¸€èˆ¬æ¥è¯´ä¸ä¼šæ˜¯ä¸€æ¡ç›´çº¿ï¼Œè€Œæ˜¯ä¸€æ¡æ›²çº¿ã€‚</p><script type="math/tex; mode=display">min_\beta (\sum_{i=1}^n(y_i-X_i\beta)^2+\lambda\sum_{j=1}^p\beta_j^2)</script><p>å…¶ä¸­çš„å‰é¢ä¸€éƒ¨åˆ†å°±æ˜¯æ™®é€šçš„æœ€å°äºŒä¹˜æ³•ï¼Œåé¢åˆ™æ˜¯L2æ­£åˆ™åŒ–çš„çº¦æŸé¡¹ã€‚</p><p>è®¸å¤šæœºå™¨å­¦ä¹ æ¨¡å‹ï¼ˆå¦‚çº¿æ€§å›å½’ã€å²­å›å½’ã€æ”¯æŒå‘é‡æœºç­‰ï¼‰åªèƒ½å¤„ç†æ•°å€¼æ•°æ®ã€‚è¿™äº›æ¨¡å‹éœ€è¦å°†æ‰€æœ‰è¾“å…¥ç‰¹å¾è½¬æ¢ä¸ºæ•°å€¼å½¢å¼ï¼Œæˆ‘ä»¬é€‰æ‹©ä¸€ä¸ªå…·æœ‰å¤šé‡å…±çº¿æ€§ç‰¹å¾çš„æ•°æ®é›†:BMIï¼Œå¹¶éœ€è¦å°† <code>&#39;Male&#39;</code> å’Œ <code>&#39;Female&#39;</code> è½¬æ¢ä¸ºæ•°å­—ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> statsmodels.stats.outliers_influence <span class="keyword">import</span> variance_inflation_factor</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">url = <span class="string">&quot;https://github.com/gouravsinghbais/Detecting-and-Remedying-Multicollinearity-in-Your-Data-Analysis/raw/master/bmi.csv&quot;</span></span><br><span class="line">bmi = pd.read_csv(url)</span><br><span class="line"><span class="comment"># å°†æ€§åˆ«è½¬æ¢ä¸ºæ•°å€¼</span></span><br><span class="line"><span class="comment"># åˆ›å»ºä¸€ä¸ªåä¸º&quot;Gender&quot;çš„æ–°åˆ—ï¼Œç”¨äºå­˜å‚¨æ€§åˆ«çš„è™šæ‹Ÿå˜é‡</span></span><br><span class="line"><span class="comment"># å°†&quot;Gender&quot;åˆ—ä¸­çš„&quot;Male&quot;æ›¿æ¢ä¸º0ï¼Œ&quot;Female&quot;æ›¿æ¢ä¸º1ï¼Œä»¥åˆ›å»ºæ€§åˆ«çš„è™šæ‹Ÿå˜é‡</span></span><br><span class="line">bmi[<span class="string">&#x27;Gender&#x27;</span>] = bmi[<span class="string">&#x27;Gender&#x27;</span>].<span class="built_in">map</span>(&#123;<span class="string">&#x27;Male&#x27;</span>:<span class="number">0</span>, <span class="string">&#x27;Female&#x27;</span>:<span class="number">1</span>&#125;)</span><br></pre></td></tr></table></figure><p>ç»˜åˆ¶çƒ­åŠ›å›¾</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">plt.figure(figsize = (<span class="number">6</span>, <span class="number">6</span>))</span><br><span class="line">heatmap = sns.heatmap(raw_bmi.corr(), vmin = -<span class="number">1</span>, vmax = <span class="number">1</span>, annot = <span class="literal">True</span>)  <span class="comment"># vminå’Œvmaxå‚æ•°æŒ‡å®šé¢œè‰²æ˜ å°„çš„èŒƒå›´ä¸º-1åˆ°1ï¼Œannotå‚æ•°ä¸ºTrueè¡¨ç¤ºåœ¨çƒ­åŠ›å›¾ä¸Šæ˜¾ç¤ºç›¸å…³ç³»æ•°çš„æ•°å€¼</span></span><br><span class="line">heatmap.set_title(<span class="string">&#x27;BMI Correlation Heatmap&#x27;</span>, fontdict = &#123;<span class="string">&#x27;fontsize&#x27;</span> : <span class="number">18</span>&#125;, pad = <span class="number">12</span>)  <span class="comment"># å­—ä½“å¤§å°ä¸º18ï¼Œæ ‡é¢˜ä¸å›¾åƒä¹‹é—´çš„é—´è·ä¸º12åƒç´ </span></span><br></pre></td></tr></table></figure><p>ç»˜åˆ¶èšç±»å›¾</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">plt.figure(figsize = (<span class="number">4</span>, <span class="number">4</span>))</span><br><span class="line"><span class="comment"># ä½¿ç”¨clustermapå‡½æ•°</span></span><br><span class="line">clustermap = sns.clustermap(bmi.corr(), vmin = -<span class="number">1</span>, vmax = <span class="number">1</span>, annot = <span class="literal">True</span>)</span><br></pre></td></tr></table></figure><p>è®¡ç®—VIF</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">X = bmi[[<span class="string">&#x27;Gender&#x27;</span>, <span class="string">&#x27;Height&#x27;</span>, <span class="string">&#x27;Weight&#x27;</span>]]</span><br><span class="line"></span><br><span class="line">vif_data = pd.DataFrame()</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†è‡ªå˜é‡çš„åç§°æ·»åŠ åˆ°VIFæ•°æ®æ¡†ä¸­</span></span><br><span class="line">vif_data[<span class="string">&quot;Feature&quot;</span>] = X.columns</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¡ç®—æ¯ä¸ªè‡ªå˜é‡çš„VIFå€¼</span></span><br><span class="line">vif_data[<span class="string">&quot;VIF&quot;</span>] = [variance_inflation_factor(X.values, i)</span><br><span class="line">                          <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(X.columns))]</span><br><span class="line">vif_data</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœä¸º:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  Feature        VIF</span><br><span class="line">0  Gender   2.028864</span><br><span class="line">1  Height  11.623103</span><br><span class="line">2  Weight  10.688377</span><br></pre></td></tr></table></figure><p>å¯ä»¥å‘ç°ï¼ŒHeightä¸weightä¹‹é—´çš„å­˜åœ¨ä¸¥é‡çš„å…±çº¿æ€§ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ†ç¦»ç‰¹å¾å’Œç›®æ ‡å˜é‡</span></span><br><span class="line">X = bmi.drop(columns=[<span class="string">&#x27;Index&#x27;</span>]) </span><br><span class="line">y = bmi[<span class="string">&#x27;Index&#x27;</span>] </span><br><span class="line"></span><br><span class="line">X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=<span class="number">0.2</span>, random_state=<span class="number">42</span>)</span><br><span class="line"></span><br><span class="line">scaler = StandardScaler()</span><br><span class="line">X_train = scaler.fit_transform(X_train)</span><br><span class="line">X_test = scaler.transform(X_test)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> LinearRegression, Ridge</span><br><span class="line"></span><br><span class="line">lin_reg = LinearRegression()</span><br><span class="line">ridge_reg = Ridge(alpha=<span class="number">50.0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®­ç»ƒæ¨¡å‹</span></span><br><span class="line">lin_reg.fit(X_train, y_train)</span><br><span class="line">y_pred_lin = lin_reg.predict(X_test)</span><br><span class="line">ridge_reg.fit(X_train, y_train)</span><br><span class="line">y_pred_ridge = ridge_reg.predict(X_test)</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> r2_score, mean_squared_error</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¯„ä¼°æ¨¡å‹</span></span><br><span class="line">r2_lin = r2_score(y_test, y_pred_lin)</span><br><span class="line">mse_lin = mean_squared_error(y_test, y_pred_lin)</span><br><span class="line">r2_ridge = r2_score(y_test, y_pred_ridge)</span><br><span class="line">mse_ridge = mean_squared_error(y_test, y_pred_ridge)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;çº¿æ€§å›å½’ RÂ²: <span class="subst">&#123;r2_lin:<span class="number">.4</span>f&#125;</span>, å‡æ–¹è¯¯å·®: <span class="subst">&#123;mse_lin:<span class="number">.4</span>f&#125;</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;å²­å›å½’ RÂ²: <span class="subst">&#123;r2_ridge:<span class="number">.4</span>f&#125;</span>, å‡æ–¹è¯¯å·®: <span class="subst">&#123;mse_ridge:<span class="number">.4</span>f&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure><h1 id="Lassoå›å½’"><a href="#Lassoå›å½’" class="headerlink" title="Lassoå›å½’"></a>Lassoå›å½’</h1><p>å…¶å…¬å¼åŸç†ä¸å²­å›å½’åŸºæœ¬ç›¸åŒï¼Œæ‰€è°ƒç”¨å‡½æ•°çš„æ–¹æ³•ä¹ŸåŸºæœ¬ç›¸åŒ</p><script type="math/tex; mode=display">min_\beta (\sum_{i=1}^n(y_i-X_i\beta)^2+\lambda\sum_{j=1}^p|\beta_j|)</script><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> Lasso</span><br><span class="line"></span><br><span class="line">lasso_reg = Lasso(alpha=<span class="number">0.1</span>) </span><br><span class="line"></span><br><span class="line">lasso_reg.fit(X_train, y_train)</span><br><span class="line">y_pred_lasso = lasso_reg.predict(X_test)</span><br><span class="line">r2_lasso = r2_score(y_test, y_pred_lasso)</span><br><span class="line">mse_lasso = mean_squared_error(y_test, y_pred_lasso)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Lasso å›å½’ RÂ²: <span class="subst">&#123;r2_lasso:<span class="number">.4</span>f&#125;</span>, å‡æ–¹è¯¯å·®: <span class="subst">&#123;mse_lasso:<span class="number">.4</span>f&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure><p>ä¸‰ä¸ªæ¨¡å‹çš„å¯¹æ¯”ï¼Œç»è¿‡å¾®è°ƒåï¼Œå¯¹äºå²­å›å½’ï¼ŒÎ±é€‚åˆé€‰æ‹©ä¸º50é™„è¿‘ï¼Œè€ŒLassoå›å½’åˆ™é€‚åˆä¸º0.1ï¼Œå…¶ä»–æƒ…å†µä¼šå˜å¾—å¾ˆç³Ÿç³•ï¼Œå¦‚æœLassoå›å½’çš„ç³»æ•°è¿‡å¤§ï¼Œä¼šå¯¼è‡´é€‰æ‹©ç‰¹å¾è¿‡å°‘ï¼Œæœ€åçš„è¯¯å·®å¾ˆå¤§ï¼Œæœ€åæ˜¯ä¸‰ä¸ªæ¨¡å‹çš„å¯¹æ¯”æ•ˆæœ:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">çº¿æ€§å›å½’ RÂ²: 0.7963, å‡æ–¹è¯¯å·®: 0.3394</span><br><span class="line">å²­å›å½’ RÂ²: 0.8099, å‡æ–¹è¯¯å·®: 0.3166</span><br><span class="line">Lasso å›å½’ RÂ²: 0.8119, å‡æ–¹è¯¯å·®: 0.3133</span><br></pre></td></tr></table></figure><p>ä¼šå‘ç°ï¼Œå²­å›å½’å¯¹äºè§£å†³å…±çº¿æ€§é—®é¢˜è¿˜æ˜¯æœ‰æ¯”è¾ƒå¥½çš„æå‡çš„ï¼Œä½†æ˜¯ç”±äºbmiæœ¬èº«çš„ç‰¹å¾å˜é‡æ¯”è¾ƒå°‘ï¼Œæ‰€ä»¥ç›¸æ¯”äºçº¿æ€§å›å½’æ¥è¯´æå‡ä¸å¤§ï¼ŒåŒæ—¶åœ¨è¯¥åœºæ™¯ä¸‹ï¼ŒLassoå›å½’çš„å–å€¼æœ€å¥½ã€‚</p><h1 id="å­¦ä¹ æ›²çº¿"><a href="#å­¦ä¹ æ›²çº¿" class="headerlink" title="å­¦ä¹ æ›²çº¿"></a>å­¦ä¹ æ›²çº¿</h1><p>ç»˜åˆ¶éšç€$\alpha$çš„ä¸æ–­å˜æ¢ï¼Œå…¶Scoreæœ€åçš„æ•ˆæœå¦‚ä½•ï¼Œå¯ä»¥ç”¨ä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> Ridge, Lasso</span><br><span class="line"></span><br><span class="line">alphas = np.logspace(-<span class="number">4</span>, <span class="number">0</span>, <span class="number">50</span>)</span><br><span class="line"></span><br><span class="line">coefs_lasso = []</span><br><span class="line">coefs_ridge = []</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯¹æ¯ä¸ª alpha è®­ç»ƒ Lasso å’Œ Ridge æ¨¡å‹ï¼Œå¹¶è®°å½•ç³»æ•°</span></span><br><span class="line"><span class="keyword">for</span> a <span class="keyword">in</span> alphas:</span><br><span class="line">    lasso = Lasso(alpha=a, max_iter=<span class="number">10000</span>)</span><br><span class="line">    ridge = Ridge(alpha=a)</span><br><span class="line">    </span><br><span class="line">    lasso.fit(X_train, y_train)</span><br><span class="line">    ridge.fit(X_train, y_train)</span><br><span class="line">    </span><br><span class="line">    coefs_lasso.append(lasso.coef_)</span><br><span class="line">    coefs_ridge.append(ridge.coef_)</span><br><span class="line"></span><br><span class="line">plt.figure(figsize=(<span class="number">14</span>, <span class="number">6</span>))</span><br><span class="line"></span><br><span class="line">plt.subplot(<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>)</span><br><span class="line">plt.plot(alphas, coefs_lasso)</span><br><span class="line">plt.xscale(<span class="string">&#x27;log&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;alpha&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;Coefficients&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;Lasso Coefficients Path&#x27;</span>)</span><br><span class="line">plt.axis(<span class="string">&#x27;tight&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.subplot(<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>)</span><br><span class="line">plt.plot(alphas, coefs_ridge)</span><br><span class="line">plt.xscale(<span class="string">&#x27;log&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;alpha&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;Coefficients&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;Ridge Coefficients Path&#x27;</span>)</span><br><span class="line">plt.axis(<span class="string">&#x27;tight&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p>è‹¥æ˜¯æƒ³æŸ¥çœ‹æ‹Ÿåˆç¨‹åº¦ç©¶ç«Ÿå¦‚ä½•ï¼Œå¯ä»¥ç”¨ä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = [<span class="string">&#x27;SimHei&#x27;</span>]<span class="comment"># é¿å…ä¸­æ–‡ä¹±ç </span></span><br><span class="line">plt.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>] = <span class="literal">False</span></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">y_pred_lasso = lasso_reg.predict(X_test)</span><br><span class="line">y_pred_ridge = ridge_reg.predict(X_test)</span><br><span class="line">y_pred_lin = lin_reg.predict(X_test)</span><br><span class="line"></span><br><span class="line">plt.figure(figsize=(<span class="number">14</span>, <span class="number">6</span>))</span><br><span class="line"></span><br><span class="line">plt.subplot(<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>)</span><br><span class="line">plt.scatter(y_test, y_pred_lasso, color=<span class="string">&#x27;blue&#x27;</span>, label=<span class="string">&#x27;Lasso é¢„æµ‹å€¼&#x27;</span>)</span><br><span class="line">plt.plot([y_test.<span class="built_in">min</span>(), y_test.<span class="built_in">max</span>()], [y_test.<span class="built_in">min</span>(), y_test.<span class="built_in">max</span>()], color=<span class="string">&#x27;red&#x27;</span>, linestyle=<span class="string">&#x27;--&#x27;</span>, label=<span class="string">&#x27;ç†æƒ³æ‹Ÿåˆçº¿&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;å®é™…å€¼&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;é¢„æµ‹å€¼&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;Lasso å›å½’: é¢„æµ‹å€¼ vs å®é™…å€¼&#x27;</span>)</span><br><span class="line">plt.legend()</span><br><span class="line"></span><br><span class="line">plt.subplot(<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>)</span><br><span class="line">plt.scatter(y_test, y_pred_ridge, color=<span class="string">&#x27;green&#x27;</span>, label=<span class="string">&#x27;Ridge é¢„æµ‹å€¼&#x27;</span>)</span><br><span class="line">plt.plot([y_test.<span class="built_in">min</span>(), y_test.<span class="built_in">max</span>()], [y_test.<span class="built_in">min</span>(), y_test.<span class="built_in">max</span>()], color=<span class="string">&#x27;red&#x27;</span>, linestyle=<span class="string">&#x27;--&#x27;</span>, label=<span class="string">&#x27;ç†æƒ³æ‹Ÿåˆçº¿&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;å®é™…å€¼&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;é¢„æµ‹å€¼&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;Ridge å›å½’: é¢„æµ‹å€¼ vs å®é™…å€¼&#x27;</span>)</span><br><span class="line">plt.legend()</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> æœºå™¨å­¦ä¹  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ¨¡æ‹Ÿé€€ç«ç®—æ³•</title>
      <link href="/2024/08/04/%E6%A8%A1%E6%8B%9F%E9%80%80%E7%81%AB%E7%AE%97%E6%B3%95/"/>
      <url>/2024/08/04/%E6%A8%A1%E6%8B%9F%E9%80%80%E7%81%AB%E7%AE%97%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h1 id="æ¨¡æ‹Ÿé€€ç«ç®—æ³•"><a href="#æ¨¡æ‹Ÿé€€ç«ç®—æ³•" class="headerlink" title="æ¨¡æ‹Ÿé€€ç«ç®—æ³•"></a>æ¨¡æ‹Ÿé€€ç«ç®—æ³•</h1><p>æ¨¡æ‹Ÿé€€ç«ç®—æ³•ï¼ˆSimulated Annealing, SAï¼‰æ˜¯ä¸€ç§åŸºäºæ¦‚ç‡çš„å…¨å±€ä¼˜åŒ–ç®—æ³•ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯æ ¸å¿ƒæ€æƒ³æ˜¯é€šè¿‡åœ¨è§£ç©ºé—´ä¸­æ¥å—å¯èƒ½ä¸æ˜¯å…¨å±€æœ€ä¼˜è§£çš„è§£ï¼Œä»¥ä¸€å®šçš„æ¦‚ç‡æ¥å—è¾ƒå·®çš„è§£ï¼Œé€æ­¥é™ä½æ¥å—è¾ƒå·®è§£çš„æ¦‚ç‡ï¼Œä»è€Œåœ¨æ•´ä¸ªè§£ç©ºé—´ä¸­æœç´¢åˆ°å…¨å±€æœ€ä¼˜è§£ã€‚</p><h2 id="ç”±æ¥"><a href="#ç”±æ¥" class="headerlink" title="ç”±æ¥"></a>ç”±æ¥</h2><p>æ¨¡æ‹Ÿé€€ç«ç®—æ³•çš„æ¦‚å¿µæºè‡ªç‰©ç†å­¦ä¸­çš„é€€ç«è¿‡ç¨‹ï¼Œé¦–æ¬¡æå‡ºäº1983å¹´ï¼Œç”±S. Kirkpatrickã€C. D. Gelattå’ŒM. P. Vecchiåœ¨ä»–ä»¬çš„è®ºæ–‡ã€ŠOptimization by Simulated Annealingã€‹ä¸­è¯¦ç»†ä»‹ç»ã€‚é€€ç«æ˜¯æŒ‡å°†é‡‘å±åŠ çƒ­åˆ°é«˜æ¸©åç¼“æ…¢å†·å´ï¼Œä½¿å…¶å†…éƒ¨ç»“æ„è¾¾åˆ°ç¨³å®šçš„ä½èƒ½æ€ï¼Œä»è€Œå¢å¼ºææ–™çš„éŸ§æ€§å’Œç¡¬åº¦ã€‚æ¨¡æ‹Ÿé€€ç«ç®—æ³•é€šè¿‡æ¨¡ä»¿è¿™ä¸€è¿‡ç¨‹ï¼Œåœ¨æ±‚è§£ä¼˜åŒ–é—®é¢˜æ—¶é€æ­¥é™ä½â€œæ¸©åº¦â€ï¼Œä»¥è·³å‡ºå±€éƒ¨æœ€ä¼˜è§£ï¼Œå¯»æ‰¾å…¨å±€æœ€ä¼˜è§£ã€‚</p><h2 id="æµç¨‹"><a href="#æµç¨‹" class="headerlink" title="æµç¨‹"></a>æµç¨‹</h2><p>ç”Ÿæˆåˆå§‹è§£ï¼Œå°†å…¶å®šä½œä¸ºå½“å‰æœ€ä¼˜è§£ï¼Œå¼€å§‹å¯¹æ—§è§£è¿›è¡Œéšæœºå°å¹…åº¦å¹²æ‰°ï¼Œå¾—åˆ°æ–°è§£ï¼Œåˆ¤æ–­æ–°è§£æ˜¯å¦æ˜¯å½“å‰æœ€ä¼˜è§£ï¼Œè‹¥æ˜¯åˆ™æ¥å—æ–°è§£ï¼Œè‹¥ä¸æ˜¯åˆ™æŒ‰ç…§Metropoliså‡†åˆ™æ¥å—æ–°è§£ï¼Œå¦‚æ­¤å¾ªç¯ç›´è‡³æœ€å¤§è¿­ä»£æ¬¡æ•°ï¼Œå¦‚æœç¬¦åˆæ¡ä»¶åˆ™è¾“å‡ºï¼Œè‹¥ä¸ç¬¦åˆæ¡ä»¶åˆ™ç¼“æ…¢é™ä½æ¸©åº¦å¹¶ä¸”é‡ç½®è¿­ä»£æ¬¡æ•°ã€‚</p><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">T0 = <span class="number">1000</span>  <span class="comment"># åˆå§‹æ¸©åº¦ åˆå§‹æ¸©åº¦è¶Šé«˜ï¼Œç®—æ³•åœ¨åˆæœŸçš„æœç´¢ç©ºé—´è¶Šå¤§</span></span><br><span class="line">T_min = <span class="number">1</span>  <span class="comment"># æœ€ä½æ¸©åº¦ æœ€ä½æ¸©åº¦è¶Šä½ï¼Œç®—æ³•æ›´æœ‰å¯èƒ½æ‰¾åˆ°å…¨å±€æœ€ä¼˜è§£ï¼Œä½†è®¡ç®—æ—¶é—´ä¹Ÿå¯èƒ½å¢åŠ ã€‚ä¸€èˆ¬è®¾å®šä¸ºä¸€ä¸ªè¾ƒå°çš„æ­£æ•°ã€‚</span></span><br><span class="line">alpha = <span class="number">0.9</span>  <span class="comment"># é™æ¸©ç³»æ•° è¶Šæ¥è¿‘1ï¼Œé™æ¸©è¶Šæ…¢ï¼Œä½†ç²¾åº¦æ›´é«˜ã€‚ä¸€èˆ¬ä¸º0.8è‡³0.99ã€‚</span></span><br><span class="line">max_iter = <span class="number">1000</span>  <span class="comment"># æ¯æ¬¡æ¸©åº¦ä¸‹çš„æœ€å¤§è¿­ä»£æ¬¡æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">objective_function</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">return</span> x**<span class="number">2</span> + <span class="number">10</span> * np.sin(x)</span><br><span class="line"></span><br><span class="line">current_solution = np.random.uniform(-<span class="number">10</span>, <span class="number">10</span>)</span><br><span class="line">current_value = objective_function(current_solution)</span><br><span class="line">T = T0</span><br><span class="line">best_solution = current_solution</span><br><span class="line">best_value = current_value</span><br><span class="line"> </span><br><span class="line"><span class="keyword">while</span> T &gt; T_min:</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(max_iter):</span><br><span class="line">        new_solution = current_solution + np.random.uniform(-<span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">        new_value = objective_function(new_solution)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> new_value &lt; current_value:</span><br><span class="line">            current_solution = new_solution</span><br><span class="line">            current_value = new_value</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            p = np.exp(-(new_value - current_value) / T)</span><br><span class="line">            <span class="keyword">if</span> np.random.rand() &lt; p:</span><br><span class="line">                current_solution = new_solution</span><br><span class="line">                current_value = new_value</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> current_value &lt; best_value:</span><br><span class="line">            best_solution = current_solution</span><br><span class="line">            best_value = current_value</span><br><span class="line"></span><br><span class="line">    T = T * alpha</span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Best solution: <span class="subst">&#123;best_solution&#125;</span>, Best value: <span class="subst">&#123;best_value&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure><h2 id="ä¼˜ç¼ºç‚¹"><a href="#ä¼˜ç¼ºç‚¹" class="headerlink" title="ä¼˜ç¼ºç‚¹"></a>ä¼˜ç¼ºç‚¹</h2><ul><li>å…¨å±€æœç´¢èƒ½åŠ›å¼ºï¼Œæ›´å®¹æ˜“è·³å‡ºå±€éƒ¨è§£ã€‚</li><li>ä½†æ˜¯è®¡ç®—æ•ˆç‡ä½ä¸‹ï¼Œéœ€è¦å¤§é‡çš„éšæœºæ‰°åŠ¨å’Œæœç´¢æ¥å¯»æ‰¾è§£ã€‚</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> æ™ºèƒ½ä¼˜åŒ–ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç²’å­ç¾¤ä¼˜åŒ–ç®—æ³•</title>
      <link href="/2024/08/04/%E7%B2%92%E5%AD%90%E7%BE%A4%E4%BC%98%E5%8C%96%E7%AE%97%E6%B3%95/"/>
      <url>/2024/08/04/%E7%B2%92%E5%AD%90%E7%BE%A4%E4%BC%98%E5%8C%96%E7%AE%97%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h1 id="ç²’å­ç¾¤ä¼˜åŒ–ç®—æ³•"><a href="#ç²’å­ç¾¤ä¼˜åŒ–ç®—æ³•" class="headerlink" title="ç²’å­ç¾¤ä¼˜åŒ–ç®—æ³•"></a>ç²’å­ç¾¤ä¼˜åŒ–ç®—æ³•</h1><h2 id="ç”±æ¥"><a href="#ç”±æ¥" class="headerlink" title="ç”±æ¥"></a>ç”±æ¥</h2><p>ç²’å­ç¾¤ä¼˜åŒ–ï¼ˆParticle Swarm Optimizationï¼ŒPSOï¼‰æ˜¯ä¸€ç§æºäºç¾¤ä½“æ™ºèƒ½çš„ä¼˜åŒ–ç®—æ³•ã€‚å®ƒæ¨¡æ‹Ÿé¸Ÿç¾¤è§…é£Ÿçš„è¡Œä¸ºï¼Œé€šè¿‡ä¸ªä½“ä¹‹é—´çš„åä½œå’Œä¿¡æ¯å…±äº«æ¥å¯»æ‰¾é—®é¢˜çš„æœ€ä¼˜è§£ã€‚PSOç®—æ³•çš„åŸºæœ¬æ€æƒ³æ˜¯é€šè¿‡ä¸€ç¾¤ç²’å­åœ¨æœç´¢ç©ºé—´ä¸­çš„ç›¸äº’ä½œç”¨ï¼Œæ‰¾åˆ°å…¨å±€æœ€ä¼˜è§£ã€‚</p><p>é¸Ÿç¾¤åœ¨æ•´ä¸ªæœå¯»è¿‡ç¨‹ä¸­ï¼Œé€šè¿‡ç›¸äº’ä¼ é€’ä½ç½®ä¿¡æ¯ï¼Œè®©å…¶ä»–é¸Ÿäº†è§£è‡ªå·±çš„ä½ç½®ï¼Œé€šè¿‡è¿™ç§åä½œæ–¹å¼æ¥åˆ¤æ–­è‡ªå·±æ‰¾åˆ°çš„æ˜¯å¦æ˜¯æœ€ä¼˜è§£ï¼ŒåŒæ—¶ä¹Ÿå°†æœ€ä¼˜è§£çš„ä¿¡æ¯ä¼ é€’ç»™æ•´ä¸ªé¸Ÿç¾¤ï¼Œæœ€ç»ˆä½¿å¾—æ•´ä¸ªé¸Ÿç¾¤èšé›†åœ¨é£Ÿç‰©æºå‘¨å›´ï¼Œå³æ‰¾åˆ°äº†æœ€ä¼˜è§£ã€‚</p><p>åœ¨ç²’å­ç¾¤ä¼˜åŒ–ï¼ˆPSOï¼‰ç®—æ³•ä¸­ï¼Œæ¯ä¸ªä¼˜åŒ–é—®é¢˜çš„è§£åœ¨æœç´¢ç©ºé—´ä¸­éƒ½ç›¸å½“äºä¸€åªé¸Ÿï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºâ€œç²’å­â€ã€‚æ‰€æœ‰ç²’å­éƒ½æœ‰ä¸€ä¸ªç”±è¢«ä¼˜åŒ–çš„å‡½æ•°å†³å®šçš„é€‚åº”å€¼ï¼ˆfitness valueï¼‰ï¼Œæ¯ä¸ªç²’å­è¿˜æœ‰é€Ÿåº¦æ¥å†³å®šå®ƒä»¬é£è¡Œçš„æ–¹å‘å’Œè·ç¦»ã€‚ç²’å­ä»¬é€šè¿‡è·Ÿéšå½“å‰çš„æœ€ä¼˜ç²’å­åœ¨è§£ç©ºé—´ä¸­æœç´¢æœ€ä¼˜è§£ã€‚</p><p>PSOç®—æ³•åˆå§‹åŒ–æ—¶ç”Ÿæˆä¸€ç¾¤éšæœºç²’å­ï¼ˆéšæœºè§£ï¼‰ï¼Œç„¶åé€šè¿‡è¿­ä»£æ‰¾åˆ°æœ€ä¼˜è§£ã€‚åœ¨æ¯æ¬¡è¿­ä»£ä¸­ï¼Œç²’å­é€šè¿‡è·Ÿè¸ªä¸¤ä¸ªâ€œæå€¼â€æ¥æ›´æ–°è‡ªå·±ã€‚ç¬¬ä¸€ä¸ªæå€¼æ˜¯ç²’å­è‡ªèº«æ‰¾åˆ°çš„æœ€ä¼˜è§£ï¼Œç§°ä¸ºä¸ªä½“æå€¼ï¼ˆpBestï¼‰ï¼›å¦ä¸€ä¸ªæå€¼æ˜¯æ•´ä¸ªç§ç¾¤ç›®å‰æ‰¾åˆ°çš„æœ€ä¼˜è§£ï¼Œç§°ä¸ºå…¨å±€æå€¼ï¼ˆgBestï¼‰ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåœ¨æ‰€æœ‰é‚»å±…ä¸­çš„æå€¼ç§°ä¸ºå±€éƒ¨æå€¼ã€‚</p><h2 id="ç†è®ºå…¬å¼"><a href="#ç†è®ºå…¬å¼" class="headerlink" title="ç†è®ºå…¬å¼"></a>ç†è®ºå…¬å¼</h2><script type="math/tex; mode=display">v_{i}(t+1) = \omega v_{i}(t) + c_1 r_1 (pbest_{i} - x_{i}(t)) + c_2 r_2 (gbest - x_{i}(t))</script><p>å…¶ä¸­ï¼Œ$v_i$æ˜¯ç²’å­çš„é€Ÿåº¦ï¼Œ$r_1,r_2$ä¸ºéšæœºæ•°ï¼Œ$c_1,c_2$ä¸ºå­¦ä¹ å› å­ï¼Œä¸€èˆ¬å‡ä¸º2ï¼Œ$pbest_i$æ˜¯ä¸ªäººå¯»å¾—çš„æœ€ä¼˜è§£ï¼Œ$gbest$æ˜¯å…¨å±€å¯»å¾—çš„æœ€ä¼˜è§£ã€‚$x_i$â€‹æ˜¯ç²’å­å½“å‰çš„ä½ç½®ã€‚</p><script type="math/tex; mode=display">x_i = x_i + v_i</script><p>$\omega$ç§°ä¸ºæƒ¯æ€§å› å­ï¼Œä¸ºéè´Ÿæ•°ï¼Œå½“$\omega$è¾ƒå¤§æ—¶ï¼Œå…¨å±€å¯»ä¼˜çš„èƒ½åŠ›è¾ƒå¼ºï¼Œè€Œå±€éƒ¨å¯»ä¼˜çš„èƒ½åŠ›è¾ƒå¼±ï¼Œå½“$\omega$è¾ƒå°æ—¶ï¼Œå…¨å±€å¯»ä¼˜èƒ½åŠ›è¾ƒå¼±ï¼Œè€Œå±€éƒ¨å¯»ä¼˜èƒ½åŠ›è¾ƒå¼ºã€‚$\omega$å¯ä»¥æ˜¯ä¸€ä¸ªé¢„å…ˆè®¾å®šå¥½çš„å€¼ï¼Œä¹Ÿå¯ä»¥éšç€ä¼˜åŒ–è¿‡ç¨‹è€Œé€æ¸å˜åŒ–ï¼Œå¸¸è§çš„ä¸€ç§æ–¹å¼å«åšçº¿æ€§é€’å‡æƒå€¼ç­–ç•¥(Linearly Decreasing weighï¼ŒLDW)ï¼Œå…¬å¼ä¸ºï¼š</p><script type="math/tex; mode=display">\omega = (\omega_{ini}-\omega_{end})(G_k-g)/G_{k}+\omega_{end}</script><h2 id="æµç¨‹"><a href="#æµç¨‹" class="headerlink" title="æµç¨‹"></a>æµç¨‹</h2><p>å…ˆéšæœºåˆå§‹åŒ–ä¸€ç¾¤ç²’å­ï¼Œå¼€å§‹è®¡ç®—æ¯ä¸ªç²’å­å¤„çš„ç›®æ ‡å€¼ï¼Œç„¶åå¾—åˆ°æ¯ä¸ªç²’å­çš„ä¸ªä½“æœ€ä¼˜å€¼$pbest_i$ä¸æ•´ä¸ªç¾¤ä½“çš„æœ€ä¼˜å€¼$gbest = min{pbest_i}$ï¼Œåˆ¤æ–­æ˜¯å¦æ»¡è¶³æ”¶æ•›æ¡ä»¶ï¼Œè‹¥æ»¡è¶³åˆ™è¾“å‡ºæœ€ä¼˜è§£å’Œè¿­ä»£æ¬¡æ•°ï¼Œå¦åˆ™æ›´æ–°æ¯ä¸ªç²’å­çš„ä½ç½®ä¸é€Ÿåº¦çŸ¢é‡ï¼Œå¦‚æ­¤åå¤è¿­ä»£ã€‚</p><h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><p>åœ¨æ•°å­¦æœ€ä¼˜åŒ–ä¸­ï¼Œ<strong>Rosenbrockå‡½æ•°</strong>æ˜¯ä¸€ä¸ªç”¨æ¥æµ‹è¯•æœ€ä¼˜åŒ–ç®—æ³•æ€§èƒ½çš„éå‡¸å‡½æ•°ï¼Œç”±Howard Harry Rosenbrockåœ¨1960å¹´æå‡ºã€‚ä¹Ÿç§°ä¸º<strong>Rosenbrockå±±è°·</strong>æˆ–<strong>Rosenbrocké¦™è•‰å‡½æ•°</strong>ï¼Œä¹Ÿç®€ç§°ä¸º<strong>é¦™è•‰å‡½æ•°</strong>ã€‚</p><p>å…¶å…¨å±€æœ€å°å€¼ä½äº(1,1,1,â€¦,1)ï¼Œè§£ä¸º0ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Particle</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, dim, bounds</span>):</span><br><span class="line">        self.position = np.random.uniform(bounds[<span class="number">0</span>], bounds[<span class="number">1</span>], dim)</span><br><span class="line">        self.velocity = np.random.uniform(-<span class="number">1</span>, <span class="number">1</span>, dim)</span><br><span class="line">        self.best_position = self.position.copy()</span><br><span class="line">        self.best_value = <span class="built_in">float</span>(<span class="string">&#x27;inf&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">update_velocity</span>(<span class="params">self, global_best_position, w, c1, c2</span>):</span><br><span class="line">        r1 = np.random.rand(self.position.shape[<span class="number">0</span>])</span><br><span class="line">        r2 = np.random.rand(self.position.shape[<span class="number">0</span>])</span><br><span class="line">        cognitive_velocity = c1 * r1 * (self.best_position - self.position)</span><br><span class="line">        social_velocity = c2 * r2 * (global_best_position - self.position)</span><br><span class="line">        self.velocity = w * self.velocity + cognitive_velocity + social_velocity</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">update_position</span>(<span class="params">self, bounds</span>):</span><br><span class="line">        self.position += self.velocity</span><br><span class="line">        self.position = np.clip(self.position, bounds[<span class="number">0</span>], bounds[<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># Rosenbrockå‡½æ•°</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">rosenbrock</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">return</span> np.<span class="built_in">sum</span>(<span class="number">100.0</span>*(x[<span class="number">1</span>:] - x[:-<span class="number">1</span>]**<span class="number">2.0</span>)**<span class="number">2.0</span> + (<span class="number">1</span> - x[:-<span class="number">1</span>])**<span class="number">2.0</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">pso</span>(<span class="params">objective_function, dim, bounds, num_particles, max_iter, w, c1, c2</span>):</span><br><span class="line">    particles = [Particle(dim, bounds) <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(num_particles)]</span><br><span class="line">    global_best_value = <span class="built_in">float</span>(<span class="string">&#x27;inf&#x27;</span>)</span><br><span class="line">    global_best_position = <span class="literal">None</span></span><br><span class="line">    fitness_values = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> iteration <span class="keyword">in</span> <span class="built_in">range</span>(max_iter):</span><br><span class="line">        <span class="keyword">for</span> particle <span class="keyword">in</span> particles:</span><br><span class="line">            fitness_value = objective_function(particle.position)</span><br><span class="line">            <span class="keyword">if</span> fitness_value &lt; particle.best_value:</span><br><span class="line">                particle.best_value = fitness_value</span><br><span class="line">                particle.best_position = particle.position.copy()</span><br><span class="line">            <span class="keyword">if</span> fitness_value &lt; global_best_value:</span><br><span class="line">                global_best_value = fitness_value</span><br><span class="line">                global_best_position = particle.position.copy()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> particle <span class="keyword">in</span> particles:</span><br><span class="line">            particle.update_velocity(global_best_position, w, c1, c2)</span><br><span class="line">            particle.update_position(bounds)</span><br><span class="line"></span><br><span class="line">        fitness_values.append(global_best_value)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> global_best_value &lt; <span class="number">1e-6</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&#x27;Converged at iteration <span class="subst">&#123;iteration&#125;</span>&#x27;</span>)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> global_best_position, global_best_value, fitness_values</span><br><span class="line"></span><br><span class="line">dim = <span class="number">5</span> <span class="comment"># ç»´åº¦</span></span><br><span class="line">bounds = [-<span class="number">5</span>, <span class="number">5</span>] <span class="comment"># å®šä¹‰åŸŸèŒƒå›´</span></span><br><span class="line">num_particles = <span class="number">200</span> <span class="comment"># ç²’å­æ•°ç›®</span></span><br><span class="line">max_iter = <span class="number">5000</span> <span class="comment"># æœ€å¤§è¿­ä»£æ¬¡æ•°</span></span><br><span class="line">w = <span class="number">0.5</span> <span class="comment"># æƒ¯æ€§æƒé‡</span></span><br><span class="line">c1 = <span class="number">2</span> <span class="comment"># è®¤çŸ¥å­¦ä¹ å› å­</span></span><br><span class="line">c2 = <span class="number">2</span> <span class="comment"># ç¤¾ä¼šå­¦ä¹ å› å­</span></span><br><span class="line"></span><br><span class="line">best_position, best_value, fitness_values = pso(rosenbrock, dim, bounds, num_particles, max_iter, w, c1, c2)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;Best Position: <span class="subst">&#123;best_position&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;Best Value: <span class="subst">&#123;best_value&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.plot(fitness_values)</span><br><span class="line">plt.title(<span class="string">&#x27;Fitness Value over Iterations&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;Iterations&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;Fitness Value&#x27;</span>)</span><br><span class="line">plt.yscale(<span class="string">&#x27;log&#x27;</span>) <span class="comment"># ä½¿ç”¨å¯¹æ•°åæ ‡</span></span><br><span class="line">plt.grid(<span class="literal">True</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">[best_position, best_value]</span> = <span class="title">pso</span><span class="params">(objective_function, dim, bounds, num_particles, max_iter, w, c1, c2)</span></span></span><br><span class="line">    position = <span class="built_in">repmat</span>(bounds(<span class="number">1</span>,:), num_particles, <span class="number">1</span>) + <span class="built_in">repmat</span>((bounds(<span class="number">2</span>,:) - bounds(<span class="number">1</span>,:)), num_particles, <span class="number">1</span>) .* <span class="built_in">rand</span>(num_particles, dim);</span><br><span class="line">    velocity = <span class="built_in">rand</span>(num_particles, dim);</span><br><span class="line">    best_position = position;</span><br><span class="line">    best_value = arrayfun(objective_function, best_position);</span><br><span class="line">    [global_best_value, best_idx] = <span class="built_in">min</span>(best_value);</span><br><span class="line">    global_best_position = best_position(best_idx, :);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> iter = <span class="number">1</span>:max_iter</span><br><span class="line">        <span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:num_particles</span><br><span class="line">            fitness_value = objective_function(position(<span class="built_in">i</span>, :));</span><br><span class="line">            <span class="keyword">if</span> fitness_value &lt; best_value(<span class="built_in">i</span>)</span><br><span class="line">                best_value(<span class="built_in">i</span>) = fitness_value;</span><br><span class="line">                best_position(<span class="built_in">i</span>, :) = position(<span class="built_in">i</span>, :);</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            <span class="keyword">if</span> fitness_value &lt; global_best_value</span><br><span class="line">                global_best_value = fitness_value;</span><br><span class="line">                global_best_position = position(<span class="built_in">i</span>, :);</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:num_particles</span><br><span class="line">            r1 = <span class="built_in">rand</span>(<span class="number">1</span>, dim);</span><br><span class="line">            r2 = <span class="built_in">rand</span>(<span class="number">1</span>, dim);</span><br><span class="line">            cognitive_velocity = c1 * r1 .* (best_position(<span class="built_in">i</span>, :) - position(<span class="built_in">i</span>, :));</span><br><span class="line">            social_velocity = c2 * r2 .* (global_best_position - position(<span class="built_in">i</span>, :));</span><br><span class="line">            velocity(<span class="built_in">i</span>, :) = w * velocity(<span class="built_in">i</span>, :) + cognitive_velocity + social_velocity;</span><br><span class="line">            position(<span class="built_in">i</span>, :) = position(<span class="built_in">i</span>, :) + velocity(<span class="built_in">i</span>, :);</span><br><span class="line">            position(<span class="built_in">i</span>, :) = <span class="built_in">max</span>(<span class="built_in">min</span>(position(<span class="built_in">i</span>, :), bounds(<span class="number">2</span>, :)), bounds(<span class="number">1</span>, :));</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> global_best_value &lt; <span class="number">1e-6</span></span><br><span class="line">            fprintf(<span class="string">&#x27;Converged at iteration %d\n&#x27;</span>, iter);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    best_position = global_best_position;</span><br><span class="line">    best_value = global_best_value;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">dim = <span class="number">2</span>;</span><br><span class="line">bounds = [<span class="number">-10</span> <span class="number">10</span>; <span class="number">-10</span> <span class="number">10</span>];</span><br><span class="line">num_particles = <span class="number">30</span>;</span><br><span class="line">max_iter = <span class="number">100</span>;</span><br><span class="line">w = <span class="number">0.5</span>;</span><br><span class="line">c1 = <span class="number">1.5</span>;</span><br><span class="line">c2 = <span class="number">1.5</span>;</span><br><span class="line"></span><br><span class="line">objective_function = @(x) sum(x.^<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">[best_position, best_value] = pso(objective_function, dim, bounds, num_particles, max_iter, w, c1, c2);</span><br><span class="line"></span><br><span class="line"><span class="built_in">disp</span>(<span class="string">&#x27;Best Position:&#x27;</span>);</span><br><span class="line"><span class="built_in">disp</span>(best_position);</span><br><span class="line"><span class="built_in">disp</span>(<span class="string">&#x27;Best Value:&#x27;</span>);</span><br><span class="line"><span class="built_in">disp</span>(best_value);</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šåˆ†åˆ«æ˜¯pythonå’Œmatlabä»£ç ï¼Œpythonä»£ç è¿è¡Œåç»“æœä¸ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Converged at iteration 1544</span><br><span class="line">Best Position: [0.99989184 0.99978585 0.99957005 0.99913691 0.99827794]</span><br><span class="line">Best Value: 9.903569513275998e-07</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°æ•ˆæœè‰¯å¥½ï¼Œéå¸¸æ¥è¿‘äºå…¨å±€æœ€ä¼˜è§£ã€‚</p><h2 id="ä¼˜ç¼ºç‚¹"><a href="#ä¼˜ç¼ºç‚¹" class="headerlink" title="ä¼˜ç¼ºç‚¹"></a>ä¼˜ç¼ºç‚¹</h2><ul><li>é€šç”¨æ€§å¼ºã€‚æ”¶æ•›é€Ÿåº¦å¿«ï¼Œæ›´å®¹æ˜“å…¨å±€æ”¶æ•›ã€‚</li></ul><ul><li>æ˜“é™·å…¥å±€éƒ¨æœ€ä¼˜</li><li>æœç´¢é€Ÿåº¦ä¸å¤ªç¨³å®šï¼Œæœ‰æ—¶ä¼šå‡ºç°è¿­ä»£æ¬¡æ•°è¾ƒå¤šçš„æƒ…å†µ</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> æ™ºèƒ½ä¼˜åŒ–ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸‰å¤§ç›¸å…³ç³»æ•°æ£€éªŒ</title>
      <link href="/2024/08/02/%E4%B8%89%E5%A4%A7%E7%9B%B8%E5%85%B3%E7%B3%BB%E6%95%B0%E6%A3%80%E9%AA%8C/"/>
      <url>/2024/08/02/%E4%B8%89%E5%A4%A7%E7%9B%B8%E5%85%B3%E7%B3%BB%E6%95%B0%E6%A3%80%E9%AA%8C/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸‰å¤§ç›¸å…³ç³»æ•°"><a href="#ä¸‰å¤§ç›¸å…³ç³»æ•°" class="headerlink" title="ä¸‰å¤§ç›¸å…³ç³»æ•°"></a>ä¸‰å¤§ç›¸å…³ç³»æ•°</h2><p>ä¸‰å¤§ç›¸å…³ç³»æ•°ååº”çš„æ˜¯ä¸¤ä¸ªå˜é‡ä¹‹é—´å˜åŒ–çš„è¶‹åŠ¿æ–¹å‘åŠç¨‹åº¦ï¼Œå–å€¼èŒƒå›´åœ¨-1åˆ°-+1ä¹‹é—´ï¼Œ0ä»£è¡¨ä¸ç›¸å…³ï¼Œæ­£å€¼ä»£è¡¨æ­£ç›¸å…³ï¼Œè´Ÿå€¼ä»£è¡¨è´Ÿç›¸å…³ï¼Œç»å¯¹å€¼è¶Šå¤§ç›¸å…³æ€§è¶Šå¼º,å¯ç”¨æ¥è¡¡é‡ä¸¤ä¸ªå˜é‡ä¹‹é—´çš„ç›¸å…³æ€§çš„å¤§å°ã€‚</p><p>ç›¸å…³ç³»æ•°åªæ˜¯ç”¨æ¥æ¥è¡¡é‡ä¸¤ä¸ªå˜é‡çº¿æ€§ç›¸å…³ç¨‹åº¦çš„æŒ‡æ ‡ï¼›å³æˆ‘å¿…é¡»<strong>å…ˆç¡®è®¤è¿™ä¸¤ä¸ªå˜é‡æ˜¯çº¿æ€§ç›¸å…³çš„</strong>ï¼Œç„¶åç›¸å…³ç³»æ•°æ‰èƒ½å‘Šè¯‰æ•°æ®çš„ç›¸å…³ç¨‹åº¦ï¼Œå¯å…ˆé€šè¿‡æ•°æ®å¯è§†åŒ–æ¥ç¡®å®šã€‚</p><h3 id="çš®å°”æ–¯ç›¸å…³ç³»æ•°-Pearson-Correlation-Coefficient"><a href="#çš®å°”æ–¯ç›¸å…³ç³»æ•°-Pearson-Correlation-Coefficient" class="headerlink" title="çš®å°”æ–¯ç›¸å…³ç³»æ•°(Pearson Correlation Coefficient)"></a>çš®å°”æ–¯ç›¸å…³ç³»æ•°(Pearson Correlation Coefficient)</h3><p>å®éªŒæ•°æ®é€šå¸¸å‡è®¾æ˜¯æˆå¯¹çš„æ¥è‡ªäºæ­£æ€åˆ†å¸ƒçš„æ€»ä½“ã€‚å¾—åˆ°çš®å°”é€Šç›¸å…³æ€§ç³»æ•°åï¼Œé€šå¸¸ä¼šç”¨tæ£€éªŒç­‰æ–¹æ³•è¿›è¡Œçš®å°”é€Šç›¸å…³æ€§ç³»æ•°æ£€éªŒã€‚<br>å®éªŒæ•°æ®é—´å·®è·ä¸èƒ½å¤ªå¤§ã€‚çš®å°”é€Šç›¸å…³æ€§ç³»æ•°å—å¼‚å¸¸å€¼å½±å“è¾ƒå¤§ï¼Œæ¯ç»„æ ·æœ¬ä¹‹é—´æ˜¯ç‹¬ç«‹æŠ½æ ·çš„ã€‚</p><p><strong>é›¶å‡è®¾ï¼ˆH0ï¼‰</strong>ï¼šå˜é‡ä¹‹é—´æ²¡æœ‰çº¿æ€§å…³ç³»ï¼Œå³çš®å°”æ–¯ç›¸å…³ç³»æ•° r=0ã€‚</p><p><strong>å¤‡æ‹©å‡è®¾ï¼ˆH1ï¼‰</strong>ï¼šå˜é‡ä¹‹é—´æœ‰çº¿æ€§å…³ç³»ï¼Œå³çš®å°”æ–¯ç›¸å…³ç³»æ•° râ‰ 0ã€‚</p><p>å…¬å¼ä¸º:</p><script type="math/tex; mode=display">r = \frac{\sum (X_i - \bar{X})(Y_i - \bar{Y})}{\sqrt{\sum (X_i - \bar{X})^2 \sum (Y_i - \bar{Y})^2}}</script><script type="math/tex; mode=display">t = r\sqrt{\frac{n-2}{1-r^2}}</script><p>æ ¹æ®è‡ªç”±åº¦ df=nâˆ’2 æŸ¥æ‰¾ t åˆ†å¸ƒè¡¨ç¡®å®šä¸´ç•Œå€¼ï¼Œæˆ–ç›´æ¥è®¡ç®— p å€¼ã€‚å¦‚æœ p å€¼å°äºæ˜¾è‘—æ€§æ°´å¹³ Î±ï¼ˆå¦‚0.05ï¼‰ï¼Œåˆ™æ‹’ç»é›¶å‡è®¾ï¼Œè®¤ä¸ºå˜é‡ä¹‹é—´å­˜åœ¨æ˜¾è‘—çš„çº¿æ€§å…³ç³»ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> scipy <span class="keyword">import</span> stats</span><br><span class="line"></span><br><span class="line">x = [<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>, <span class="number">50</span>]</span><br><span class="line">y = [<span class="number">12</span>, <span class="number">24</span>, <span class="number">33</span>, <span class="number">45</span>, <span class="number">51</span>]</span><br><span class="line"><span class="comment"># åˆ¤æ–­x,yæ˜¯å¦æ˜¯çº¿æ€§ç›¸å…³</span></span><br><span class="line">plt.scatter(x, y)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;X&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;Y&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;Scatter Plot&#x27;</span>)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line">correlation_coefficient, p_value = stats.pearsonr(x, y)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;çš®å°”æ–¯ç›¸å…³ç³»æ•°:&quot;</span>, correlation_coefficient)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;på€¼:&quot;</span>, p_value)</span><br><span class="line"></span><br><span class="line">alpha = <span class="number">0.05</span></span><br><span class="line"><span class="keyword">if</span> p_value &lt; alpha:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;æ‹’ç»é›¶å‡è®¾ï¼Œå˜é‡ä¹‹é—´å­˜åœ¨æ˜¾è‘—çš„çº¿æ€§å…³ç³»ã€‚&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;ä¸æ‹’ç»é›¶å‡è®¾ï¼Œå˜é‡ä¹‹é—´æ²¡æœ‰æ˜¾è‘—çš„çº¿æ€§å…³ç³»ã€‚&quot;</span>)</span><br></pre></td></tr></table></figure><p>åªæœ‰å½“æ•°æ®æ˜¯è¿ç»­æ•°æ®ï¼Œä¸”ç¬¦åˆæ­£æ€åˆ†å¸ƒä¸çº¿æ€§å…³ç³»æ‰å¯ä»¥ç”¨ï¼Œå…ˆç»˜åˆ¶æ•£ç‚¹å›¾ï¼Œå½“æ•°æ®æ˜¯çº¿æ€§æ—¶ï¼Œå†è®¡ç®—çš®å°”æ–¯ç›¸å…³ç³»æ•°ï¼Œç»è¿‡æ­£æ€åˆ†å¸ƒæ£€éªŒåï¼Œå†ç”¨å‡è®¾æ£€éªŒåˆ¤æ–­æ˜¾è‘—æ€§ã€‚</p><h3 id="æ­£æ€åˆ†å¸ƒæ£€éªŒ"><a href="#æ­£æ€åˆ†å¸ƒæ£€éªŒ" class="headerlink" title="æ­£æ€åˆ†å¸ƒæ£€éªŒ"></a>æ­£æ€åˆ†å¸ƒæ£€éªŒ</h3><h4 id="Jarque-Bera-æ£€éªŒ-JB-æ£€éªŒ"><a href="#Jarque-Bera-æ£€éªŒ-JB-æ£€éªŒ" class="headerlink" title="Jarque-Bera æ£€éªŒ (JB æ£€éªŒ)"></a>Jarque-Bera æ£€éªŒ (JB æ£€éªŒ)</h4><p><strong>é€‚ç”¨æ¡ä»¶</strong>ï¼šå¤§æ ·æœ¬(n&gt;30)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scipy.stats <span class="keyword">import</span> jarque_bera</span><br><span class="line"></span><br><span class="line"><span class="comment"># å‡è®¾ä½ çš„æ•°æ®ä¸º y</span></span><br><span class="line">statistic, p_value = jarque_bera(y)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;JB æ£€éªŒç»Ÿè®¡é‡:&#x27;</span>, statistic)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;p å€¼:&#x27;</span>, p_value)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> p_value &gt; <span class="number">0.05</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;æ•°æ®ç¬¦åˆæ­£æ€åˆ†å¸ƒ&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;æ•°æ®ä¸ç¬¦åˆæ­£æ€åˆ†å¸ƒ&quot;</span>)</span><br></pre></td></tr></table></figure><h4 id="Shapiro-Wilk-æ£€éªŒ"><a href="#Shapiro-Wilk-æ£€éªŒ" class="headerlink" title="Shapiro-Wilk æ£€éªŒ"></a>Shapiro-Wilk æ£€éªŒ</h4><p><strong>é€‚ç”¨æ¡ä»¶</strong>ï¼šç”¨äºæ£€éªŒæ•°æ®æ˜¯å¦ç¬¦åˆæ­£æ€åˆ†å¸ƒï¼Œé€‚ç”¨äºå°æ ·æœ¬æ•°æ®ï¼ˆé€šå¸¸ n &lt; 50ï¼‰ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scipy.stats <span class="keyword">import</span> shapiro</span><br><span class="line"></span><br><span class="line">statistic, p_value = shapiro(y)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Shapiro-Wilk æ£€éªŒç»Ÿè®¡é‡:&#x27;</span>, statistic)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;p å€¼:&#x27;</span>, p_value)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> p_value &gt; <span class="number">0.05</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;æ•°æ®ç¬¦åˆæ­£æ€åˆ†å¸ƒ&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;æ•°æ®ä¸ç¬¦åˆæ­£æ€åˆ†å¸ƒ&quot;</span>)</span><br></pre></td></tr></table></figure><h4 id="Q-Q-å›¾-Quantile-Quantile-Plot"><a href="#Q-Q-å›¾-Quantile-Quantile-Plot" class="headerlink" title="Q-Q å›¾ (Quantile-Quantile Plot)"></a>Q-Q å›¾ (Quantile-Quantile Plot)</h4><p><strong>é€‚ç”¨æ¡ä»¶</strong>ï¼šæ•°æ®é‡ç‰¹åˆ«å¤§</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> scipy.stats <span class="keyword">as</span> stats</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">stats.probplot(y, dist=<span class="string">&quot;norm&quot;</span>, plot=plt)</span><br><span class="line">plt.title(<span class="string">&#x27;Q-Q Plot&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><h3 id="Spearmanç­‰çº§ç›¸å…³ç³»æ•°"><a href="#Spearmanç­‰çº§ç›¸å…³ç³»æ•°" class="headerlink" title="Spearmanç­‰çº§ç›¸å…³ç³»æ•°"></a>Spearmanç­‰çº§ç›¸å…³ç³»æ•°</h3><p>Spearmanç­‰çº§ç›¸å…³ç³»æ•°ï¼ˆSpearmanâ€™s rank correlation coefficientï¼‰æ˜¯éå‚æ•°ç»Ÿè®¡çš„ä¸€ç§ï¼Œç”¨äºæµ‹é‡ä¸¤ä¸ªå˜é‡çš„å•è°ƒå…³ç³»ã€‚å®ƒåŸºäºä¸¤ä¸ªå˜é‡çš„æ’åºï¼Œè€Œä¸æ˜¯åŸå§‹æ•°æ®ã€‚</p><p>å°æ ·æœ¬ï¼ˆn<30ï¼‰:æŸ¥ä¸´ç•Œå€¼è¡¨ï¼Œå¤§æ ·æœ¬æƒ…å†µï¼ˆn > 30ï¼‰: På€¼æ³•</p><script type="math/tex; mode=display">r_s = 1 - \frac{6 \sum d_i^2}{n(n^2 - 1)}</script><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> scipy <span class="keyword">import</span> stats</span><br><span class="line"></span><br><span class="line">x = [<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>, <span class="number">50</span>, <span class="number">60</span>, <span class="number">70</span>, <span class="number">80</span>, <span class="number">90</span>, <span class="number">100</span>]</span><br><span class="line">y = [<span class="number">15</span>, <span class="number">30</span>, <span class="number">25</span>, <span class="number">35</span>, <span class="number">40</span>, <span class="number">60</span>, <span class="number">65</span>, <span class="number">70</span>, <span class="number">85</span>, <span class="number">95</span>]</span><br><span class="line"></span><br><span class="line">rho, p_value = stats.spearmanr(x, y)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Spearmanç›¸å…³ç³»æ•°:&quot;</span>, rho)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;på€¼:&quot;</span>, p_value)</span><br></pre></td></tr></table></figure><h3 id="Kendallç­‰çº§ç›¸å…³ç³»æ•°"><a href="#Kendallç­‰çº§ç›¸å…³ç³»æ•°" class="headerlink" title="Kendallç­‰çº§ç›¸å…³ç³»æ•°"></a>Kendallç­‰çº§ç›¸å…³ç³»æ•°</h3><p>Kendallç­‰çº§ç›¸å…³ç³»æ•°ï¼ˆKendallâ€™s tau coefficientï¼‰ä¹Ÿæ˜¯ä¸€ç§éå‚æ•°ç»Ÿè®¡ï¼Œç”¨äºæµ‹é‡ä¸¤ä¸ªå˜é‡ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚å…¶è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š</p><script type="math/tex; mode=display">\tau = \frac{(C - D)}{\sqrt{(C + D + T) \cdot (C + D + U)}}</script><p>é€‚ç”¨äºï¼š</p><ul><li>æ•°æ®ä¸ç¬¦åˆæ­£æ€åˆ†å¸ƒ</li><li>æ•°æ®å­˜åœ¨æ˜¾è‘—çš„å¼‚å¸¸å€¼</li><li>å˜é‡ä¹‹é—´çš„å…³ç³»å¯èƒ½æ˜¯éçº¿æ€§çš„</li><li>æ•°æ®é‡è¾ƒå°çš„æƒ…å†µä¸‹ï¼Œé€‚ç”¨æ€§è¾ƒé«˜</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> scipy <span class="keyword">import</span> stats</span><br><span class="line"></span><br><span class="line">x = [<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>, <span class="number">50</span>, <span class="number">60</span>, <span class="number">70</span>, <span class="number">80</span>, <span class="number">90</span>, <span class="number">100</span>]</span><br><span class="line">y = [<span class="number">15</span>, <span class="number">30</span>, <span class="number">25</span>, <span class="number">35</span>, <span class="number">40</span>, <span class="number">60</span>, <span class="number">65</span>, <span class="number">70</span>, <span class="number">85</span>, <span class="number">95</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¡ç®—Kendallç›¸å…³ç³»æ•°å’Œpå€¼</span></span><br><span class="line">tau, p_value = stats.kendalltau(x, y)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Kendallç›¸å…³ç³»æ•°:&quot;</span>, tau)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;på€¼:&quot;</span>, p_value)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> ç»Ÿè®¡åˆ†æ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>tå‡å€¼æ£€éªŒ</title>
      <link href="/2024/08/02/t%E5%9D%87%E5%80%BC%E6%A3%80%E9%AA%8C/"/>
      <url>/2024/08/02/t%E5%9D%87%E5%80%BC%E6%A3%80%E9%AA%8C/</url>
      
        <content type="html"><![CDATA[<h1 id="tå‡å€¼æ£€éªŒ"><a href="#tå‡å€¼æ£€éªŒ" class="headerlink" title="tå‡å€¼æ£€éªŒ"></a>tå‡å€¼æ£€éªŒ</h1><h2 id="å‡è®¾æ£€éªŒ"><a href="#å‡è®¾æ£€éªŒ" class="headerlink" title="å‡è®¾æ£€éªŒ"></a>å‡è®¾æ£€éªŒ</h2><h3 id="1-å‡è®¾æ£€éªŒ"><a href="#1-å‡è®¾æ£€éªŒ" class="headerlink" title="1.å‡è®¾æ£€éªŒ"></a>1.å‡è®¾æ£€éªŒ</h3><p>å‡è®¾æ£€éªŒ(Hypothesis Testing)ï¼Œåˆç§°ç»Ÿè®¡å‡è®¾æ£€éªŒï¼Œæ˜¯ç”¨æ¥åˆ¤æ–­æ ·æœ¬ä¸æ ·æœ¬ã€æ ·æœ¬ä¸æ€»ä½“çš„å·®å¼‚æ˜¯ç”±æŠ½æ ·è¯¯å·®å¼•èµ·è¿˜æ˜¯æœ¬è´¨å·®åˆ«é€ æˆçš„ç»Ÿè®¡æ¨æ–­æ–¹æ³•ã€‚</p><p><strong>é›¶å‡è®¾(åŸå‡è®¾ï¼‰H0</strong>ï¼šæŒ‡è§‚å¯Ÿåˆ°çš„ç°è±¡ä»…ç”±éšæœºæŠ½æ ·çš„è¯¯å·®æ‰€å¯¼è‡´çš„ï¼Œè¡¨ç¤ºä¸¤ä¸ªå˜é‡ä¹‹é—´æ²¡æœ‰å…³ç³»ã€‚</p><p><strong>å¤‡æ‹©å‡è®¾H1</strong>ï¼šæŒ‡åŸå‡è®¾çš„å¦å®šï¼Œæ˜¯æˆ‘ä»¬æƒ³è¦é€šè¿‡æ ·æœ¬æ•°æ®æ¥æä¾›è¯æ®æ‹’ç»åŸå‡è®¾ï¼Œæ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚</p><p><strong>På€¼</strong>ï¼šç”¨æ¥æ£€éªŒH0æˆç«‹çš„æ¦‚ç‡ã€‚</p><div class="table-container"><table><thead><tr><th>På€¼</th><th>å·§åˆæ¦‚ç‡</th><th>å¯¹æ— æ•ˆå‡è®¾</th><th>ç»Ÿè®¡æ„ä¹‰</th></tr></thead><tbody><tr><td>P&gt;0.05</td><td>å·§åˆå¯èƒ½æ€§å¤§äº5ï¼…</td><td>ä¸èƒ½å¦å®šH0</td><td>ä¸¤ç»„æ•°æ®å·®åˆ«æ— æ˜¾è‘—æ„ä¹‰</td></tr><tr><td>P&lt;0.05</td><td>å·§åˆå¯èƒ½æ€§å°äº5ï¼…</td><td>å¯ä»¥å¦å®šH0</td><td>ä¸¤ç»„æ•°æ®å·®åˆ«æœ‰æ˜¾è‘—æ„ä¹‰</td></tr><tr><td>p&lt;0.01</td><td>å·§åˆå¯èƒ½æ€§å°äº1ï¼…</td><td>å¯ä»¥å¦å®šH0</td><td>ä¸¤ç»„æ•°æ®å·®åˆ«æœ‰éå¸¸æ˜¾è‘—æ„ä¹‰</td></tr></tbody></table></div><h3 id="2-ä¸¤ç§é”™è¯¯"><a href="#2-ä¸¤ç§é”™è¯¯" class="headerlink" title="2.ä¸¤ç§é”™è¯¯"></a>2.ä¸¤ç§é”™è¯¯</h3><p><strong>ç¬¬ä¸€ç±»é”™è¯¯</strong>ï¼šæŒ‡åŸå‡è®¾H0æˆç«‹ï¼Œå´é”™è¯¯åœ°æ‹’ç»äº†åŸå‡è®¾ã€‚æŒ‡å³ä½¿å°äºæ˜¾è‘—æ€§æ°´å¹³Î±æ¥æ‹’ç»åŸå‡è®¾ï¼Œä¾æ—§æœ‰Î±çš„æ¦‚ç‡çŠ¯é”™ï¼Œé‚£ä¹ˆæœ‰1-Î±çš„æ¦‚ç‡æ­£ç¡®ï¼Œä¹Ÿç§°çœŸé˜´æ€§æˆ–ç‰¹å¼‚æ€§ã€‚</p><p><strong>ç¬¬äºŒç±»é”™è¯¯</strong>ï¼šæŒ‡å¤‡æ‹©å‡è®¾H1æˆç«‹ï¼Œä¸èƒ½æ‹’ç»åŸå‡è®¾h0çš„é”™è¯¯æ¦‚ç‡ï¼Œæ¦‚ç‡ä¸ºÎ²ï¼Œåˆ™çœŸæ­£æ­£ç¡®çš„æ¦‚ç‡ä¸º1-Î²ï¼Œä¹Ÿç§°çœŸé˜³æ€§æˆ–çµæ•åº¦ã€‚</p><h3 id="3-ä¸‰ç§æ£€éªŒ"><a href="#3-ä¸‰ç§æ£€éªŒ" class="headerlink" title="3.ä¸‰ç§æ£€éªŒ"></a>3.ä¸‰ç§æ£€éªŒ</h3><p><strong>å·¦å°¾æ£€éªŒ</strong>ï¼šç”¨äºæ£€éªŒæ ·æœ¬æ•°æ®æ˜¯å¦æ˜¾è‘—å°äºå‡è®¾çš„æ€»ä½“å‚æ•°å€¼ï¼Œå¦‚æœè®¡ç®—å¾—åˆ°çš„æ£€éªŒç»Ÿè®¡é‡å°äºä¸´ç•Œå€¼ï¼Œåˆ™æ‹’ç»é›¶å‡è®¾ï¼Œå¦‚æœè®¡ç®—å¾—åˆ°çš„æ£€éªŒç»Ÿè®¡é‡å¤§äºç­‰äºä¸´ç•Œå€¼ï¼Œåˆ™ä¸æ‹’ç»é›¶å‡è®¾ã€‚å³åŸå‡è®¾ H0:Î¼=0ï¼Œå¤‡æ‹©å‡è®¾H1:Î¼&lt;0ã€‚</p><p><strong>å³å°¾æ£€éªŒ</strong>ï¼šç”¨äºæ£€éªŒæ ·æœ¬æ•°æ®æ˜¯å¦æ˜¾è‘—å¤§äºå‡è®¾çš„æ€»ä½“å‚æ•°å€¼ï¼Œå¦‚æœè®¡ç®—å¾—åˆ°çš„æ£€éªŒç»Ÿè®¡é‡å¤§äºä¸´ç•Œå€¼ï¼Œåˆ™æ‹’ç»é›¶å‡è®¾ï¼Œå¦‚æœè®¡ç®—å¾—åˆ°çš„æ£€éªŒç»Ÿè®¡é‡å°äºç­‰äºä¸´ç•Œå€¼ï¼Œåˆ™ä¸æ‹’ç»é›¶å‡è®¾ã€‚å³åŸå‡è®¾ H0:Î¼=0ï¼Œå¤‡æ‹©å‡è®¾H1:Î¼ï¼0ã€‚</p><p><strong>åŒå°¾æ£€éªŒ</strong>ï¼šç”¨äºæ£€éªŒæ ·æœ¬æ•°æ®æ˜¯å¦æ˜¾è‘—ä¸åŒäºå‡è®¾çš„æ€»ä½“å‚æ•°å€¼ï¼Œæ— è®ºæ˜¯æ˜¾è‘—å¤§äºè¿˜æ˜¯æ˜¾è‘—å°äºï¼Œå³åŸå‡è®¾ H0:Î¼=0ï¼Œå¤‡æ‹©å‡è®¾H1:Î¼â‰ 0ã€‚</p><h2 id="Tæ£€éªŒ"><a href="#Tæ£€éªŒ" class="headerlink" title="Tæ£€éªŒ"></a>Tæ£€éªŒ</h2><p><strong>tæ£€éªŒ</strong>ï¼Œåˆå«å­¦ç”Ÿtæ£€éªŒï¼Œç”¨äºç»Ÿè®¡é‡æœä»æ­£æ€åˆ†å¸ƒï¼Œä½†æ–¹å·®æœªçŸ¥çš„æƒ…å†µï¼Œå‰ææ˜¯æ ·æœ¬æœä»æˆ–è¿‘ä¼¼æœä»æ­£æ€åˆ†å¸ƒï¼ˆå¯åˆ©ç”¨æ•°æ®å˜æ¢ï¼Œå¦‚å–å¯¹ï¼Œå¼€æ ¹ï¼Œå€’æ•°ï¼‰ï¼Œå¦‚æœä¸æ»¡è¶³æ­£æ€åˆ†å¸ƒï¼Œåˆ™åªèƒ½ç”¨éå‚æ•°æ£€éªŒã€‚</p><h3 id="1-å•æ ·æœ¬tæ£€éªŒ-One-sample-t-test"><a href="#1-å•æ ·æœ¬tæ£€éªŒ-One-sample-t-test" class="headerlink" title="1.å•æ ·æœ¬tæ£€éªŒ(One-sample t-test)"></a>1.å•æ ·æœ¬tæ£€éªŒ(One-sample t-test)</h3><p>æ£€éªŒå•æ ·æœ¬çš„å‡å€¼ä¸æŸä¸€å·²çŸ¥å€¼æ˜¯å¦æœ‰æ˜¾è‘—å·®å¼‚ï¼Œåªå¯¹ä¸€ç»„æ ·æœ¬è¿›è¡Œæ£€éªŒã€‚</p><p>è¦æ±‚æ€»ä½“æ–¹å·®æœªçŸ¥ï¼Œå¹¶ä¸”æ•°æ®æœä»æˆ–è¿‘ä¼¼æœä»æ­£æ€åˆ†å¸ƒã€‚</p><p>æ¯”å¦‚ä»æŸé«˜ä¸­æŠ½å‡ ä½è¿‘è§†å­¦ç”Ÿï¼Œæ£€éªŒå…¶è¿‘è§†åº¦æ•°æ˜¯å¦é«˜äºå…¨æ ¡å­¦ç”Ÿè¿‘è§†å¹³å‡æ°´å¹³ã€‚</p><p><strong>H0:æ ·æœ¬å‡å€¼ä¸å·²çŸ¥å€¼ç›¸åŒï¼ŒH1:æ ·æœ¬å‡å€¼ä¸å·²çŸ¥å€¼ä¸åŒ</strong>ï¼Œå…¬å¼ä¸ºï¼š</p><script type="math/tex; mode=display">t = \frac{\overline x-Î¼_0}{s/\sqrt{n}}</script><p>å‡è®¾æˆ‘ä»¬æƒ³è¦æ£€éªŒæŸå­¦æ ¡ä¸€ç»„å­¦ç”Ÿçš„è€ƒè¯•æˆç»©æ˜¯å¦æ˜¾è‘—é«˜äºå…¨å›½å¹³å‡æˆç»©ã€‚å·²çŸ¥å…¨å›½å¹³å‡æˆç»©Î¼0ä¸º 75 åˆ†ã€‚ä¸€ç»„å­¦ç”Ÿçš„è€ƒè¯•æˆç»©å¦‚ä¸‹ï¼š 78,82,75,79,83,76,81,77,80,74ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> scipy <span class="keyword">import</span> stats</span><br><span class="line"></span><br><span class="line">data = [<span class="number">78</span>, <span class="number">82</span>, <span class="number">75</span>, <span class="number">79</span>, <span class="number">83</span>, <span class="number">76</span>, <span class="number">81</span>, <span class="number">77</span>, <span class="number">80</span>, <span class="number">74</span>]</span><br><span class="line"></span><br><span class="line">sample_mean = np.mean(data)</span><br><span class="line">sample_std = np.std(data, ddof=<span class="number">1</span>)  <span class="comment"># ddof=1è¡¨ç¤ºä½¿ç”¨æ ·æœ¬æ ‡å‡†å·®</span></span><br><span class="line">n = <span class="built_in">len</span>(data)</span><br><span class="line">mu_0 = <span class="number">75</span>  <span class="comment"># å¹³å‡æˆç»©</span></span><br><span class="line"></span><br><span class="line">t_statistic = (sample_mean - mu_0) / (sample_std / np.sqrt(n))</span><br><span class="line"></span><br><span class="line">p_value = stats.t.sf(np.<span class="built_in">abs</span>(t_statistic), df=n-<span class="number">1</span>) * <span class="number">2</span>  <span class="comment"># åŒå°¾æ£€éªŒ</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;æ ·æœ¬å¹³å‡å€¼:&quot;</span>, sample_mean)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;æ ·æœ¬æ ‡å‡†å·®:&quot;</span>, sample_std)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;tå€¼:&quot;</span>, t_statistic)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;på€¼:&quot;</span>, p_value)</span><br><span class="line"></span><br><span class="line">alpha = <span class="number">0.05</span></span><br><span class="line"><span class="keyword">if</span> p_value &lt; alpha:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;æ‹’ç»é›¶å‡è®¾ï¼Œæ ·æœ¬å¹³å‡æˆç»©æ˜¾è‘—ä¸åŒäºå…¨å›½å¹³å‡æˆç»©ã€‚&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;ä¸æ‹’ç»é›¶å‡è®¾ï¼Œæ ·æœ¬å¹³å‡æˆç»©ä¸å…¨å›½å¹³å‡æˆç»©æ²¡æœ‰æ˜¾è‘—å·®å¼‚ã€‚&quot;</span>)</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ<code>stats.t.sf</code> æ˜¯SciPyåº“ä¸­çš„å‡½æ•°ï¼Œä»£è¡¨tåˆ†å¸ƒçš„ç”Ÿå­˜å‡½æ•°ï¼ˆsurvival functionï¼‰ï¼Œä¹Ÿå°±æ˜¯å³å°¾æ¦‚ç‡ã€‚å¯¹äºåŒå°¾æ£€éªŒï¼Œéœ€è¦è€ƒè™‘tåˆ†å¸ƒä¸¤ç«¯çš„æ¦‚ç‡ã€‚å› æ­¤è®¡ç®—å‡ºå³å°¾çš„æ¦‚ç‡åï¼Œå°†å…¶ä¹˜ä»¥2ä»¥å¾—åˆ°åŒå°¾çš„på€¼ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">p_value = stats.t.cdf(t_statistic, df=n-<span class="number">1</span>)  <span class="comment"># å·¦å°¾æ£€éªŒ</span></span><br><span class="line">p_value = stats.t.sf(t_statistic, df=n-<span class="number">1</span>)  <span class="comment"># å³å°¾æ£€éªŒ</span></span><br></pre></td></tr></table></figure><h3 id="2-é…å¯¹æ ·æœ¬tæ£€éªŒï¼ˆPaired-sample-t-testï¼‰"><a href="#2-é…å¯¹æ ·æœ¬tæ£€éªŒï¼ˆPaired-sample-t-testï¼‰" class="headerlink" title="2.é…å¯¹æ ·æœ¬tæ£€éªŒï¼ˆPaired-sample t-testï¼‰"></a>2.é…å¯¹æ ·æœ¬tæ£€éªŒï¼ˆPaired-sample t-testï¼‰</h3><p>æ£€éªŒåœ¨ä¸¤æ¬¡ä¸åŒæ¡ä»¶ä¸‹æ¥è‡ªç”¨ä¸€ç»„è§‚å¯Ÿå¯¹è±¡çš„ä¸¤ç»„æ ·æœ¬æ˜¯å¦å…·æœ‰ç›¸åŒçš„å‡å€¼,è¦æ±‚æ€»ä½“æ–¹å·®ç›¸ç­‰å¹¶ä¸”æ•°æ®æœä»æˆ–è¿‘ä¼¼æœä»æ­£æ€åˆ†å¸ƒï¼Œä¾‹å¦‚æ¯”è¾ƒæ²»ç–—å‰åçš„æ•ˆæœï¼Œæˆ–è€…æ¯”è¾ƒä¸¤ç§ä¸åŒæµ‹è¯•æ–¹æ³•çš„ç»“æœã€‚</p><p>å‡è®¾æˆ‘ä»¬æƒ³è¦æ£€éªŒæŸç§æ²»ç–—æ–¹æ³•åœ¨æ²»ç–—å‰åæ˜¯å¦å¯¹ç—…äººçš„è¡€å‹æœ‰æ˜¾è‘—å½±å“ã€‚æˆ‘ä»¬æœ‰ä¸€ç»„ç—…äººåœ¨æ²»ç–—å‰åçš„è¡€å‹æ•°æ®ã€‚</p><p>ç—…äººæ²»ç–—å‰åçš„è¡€å‹æ•°æ®å¦‚ä¸‹ï¼š</p><ul><li>æ²»ç–—å‰ï¼š[120, 130, 115, 140, 125, 135, 128, 150, 133, 145]</li><li>æ²»ç–—åï¼š[115, 128, 110, 138, 122, 130, 125, 145, 130, 140]</li></ul><p><strong>é›¶å‡è®¾ï¼ˆH0)</strong>ï¼šæ²»ç–—å‰åçš„å¹³å‡è¡€å‹æ²¡æœ‰æ˜¾è‘—å·®å¼‚ï¼Œå³ $H_0:Î¼_d=0$ï¼ˆ$Î¼_d$ æ˜¯å·®å€¼çš„å¹³å‡å€¼ï¼‰ã€‚</p><p><strong>å¤‡æ‹©å‡è®¾ï¼ˆH1)</strong>ï¼šæ²»ç–—å‰åçš„å¹³å‡è¡€å‹æœ‰æ˜¾è‘—å·®å¼‚ï¼Œå³ $H1:Î¼_dâ‰ 0 $</p><p>æŸ¥æ‰¾tåˆ†å¸ƒè¡¨ï¼Œä½¿ç”¨æ˜¾è‘—æ€§æ°´å¹³Î±/2=0.025å’Œè‡ªç”±åº¦df=nâˆ’1=9ï¼Œå¾—åˆ°ä¸´ç•Œå€¼å¤§çº¦ä¸º Â±2.262ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> scipy <span class="keyword">import</span> stats</span><br><span class="line"></span><br><span class="line">before_treatment = [<span class="number">120</span>, <span class="number">130</span>, <span class="number">115</span>, <span class="number">140</span>, <span class="number">125</span>, <span class="number">135</span>, <span class="number">128</span>, <span class="number">150</span>, <span class="number">133</span>, <span class="number">145</span>]</span><br><span class="line">after_treatment = [<span class="number">115</span>, <span class="number">128</span>, <span class="number">110</span>, <span class="number">138</span>, <span class="number">122</span>, <span class="number">130</span>, <span class="number">125</span>, <span class="number">145</span>, <span class="number">130</span>, <span class="number">140</span>]</span><br><span class="line"></span><br><span class="line">differences = np.array(before_treatment) - np.array(after_treatment)</span><br><span class="line"></span><br><span class="line">mean_diff = np.mean(differences)</span><br><span class="line">std_diff = np.std(differences, ddof=<span class="number">1</span>)</span><br><span class="line">n = <span class="built_in">len</span>(differences)</span><br><span class="line"></span><br><span class="line">t_statistic = mean_diff / (std_diff / np.sqrt(n))</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¡ç®—på€¼ï¼ˆåŒå°¾æ£€éªŒï¼‰</span></span><br><span class="line">p_value = stats.t.sf(np.<span class="built_in">abs</span>(t_statistic), df=n-<span class="number">1</span>) * <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;å·®å€¼çš„å¹³å‡å€¼:&quot;</span>, mean_diff)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;å·®å€¼çš„æ ‡å‡†å·®:&quot;</span>, std_diff)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;tå€¼:&quot;</span>, t_statistic)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;på€¼:&quot;</span>, p_value)</span><br><span class="line"></span><br><span class="line">alpha = <span class="number">0.05</span></span><br><span class="line"><span class="keyword">if</span> p_value &lt; alpha:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;æ‹’ç»é›¶å‡è®¾ï¼Œæ²»ç–—å‰åçš„å¹³å‡è¡€å‹æœ‰æ˜¾è‘—å·®å¼‚ã€‚&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;ä¸æ‹’ç»é›¶å‡è®¾ï¼Œæ²»ç–—å‰åçš„å¹³å‡è¡€å‹æ²¡æœ‰æ˜¾è‘—å·®å¼‚ã€‚&quot;</span>)</span><br></pre></td></tr></table></figure><h3 id="3-ç‹¬ç«‹åŒæ ·æœ¬tæ£€éªŒ-ï¼ˆIndependent-two-sample-t-testï¼‰"><a href="#3-ç‹¬ç«‹åŒæ ·æœ¬tæ£€éªŒ-ï¼ˆIndependent-two-sample-t-testï¼‰" class="headerlink" title="3.ç‹¬ç«‹åŒæ ·æœ¬tæ£€éªŒ ï¼ˆIndependent two-sample t-testï¼‰"></a>3.ç‹¬ç«‹åŒæ ·æœ¬tæ£€éªŒ ï¼ˆIndependent two-sample t-testï¼‰</h3><p>æ£€éªŒä¸¤å¯¹ç‹¬ç«‹çš„æ­£æ€æ•°æ®æˆ–è¿‘ä¼¼æ­£æ€çš„æ ·æœ¬çš„å‡å€¼æ˜¯å¦ç›¸ç­‰ï¼Œè¦æ±‚ä¸¤æ ·æœ¬ç‹¬ç«‹ä¸”æ•°æ®æœä»æˆ–è¿‘ä¼¼æœä»æ­£æ€åˆ†å¸ƒã€‚</p><p>è¿›è¡Œç‹¬ç«‹åŒæ ·æœ¬tæ£€éªŒä¹‹å‰ï¼Œåº”è¯¥è¿›è¡Œæ–¹å·®é½æ€§æ£€éªŒï¼ˆhomogeneity of variance testï¼‰ï¼Œå³æ£€æŸ¥ä¸¤ç»„æ ·æœ¬çš„æ€»ä½“æ–¹å·®æ˜¯å¦ç›¸åŒã€‚æ–¹å·®é½æ€§æ£€éªŒæœ¬èº«ä¹Ÿæ˜¯ä¸€ç§å‡è®¾æ£€éªŒï¼Œé€šç”¨çš„æ–¹æ³•æœ‰Hartleyæ£€éªŒã€Bartlettæ£€éªŒå’ŒLeyeneæ£€éªŒã€‚</p><p>å…¶ä¸­ï¼Œåˆå¹¶æ ‡å‡†å·®$S_p$ä¸$t$è®¡ç®—å…¬å¼ä¸ºï¼š</p><script type="math/tex; mode=display">S_p = \sqrt{\frac{(n_1-1)s_1^2+(n_2-1)s_2^2}{n_1+n_2-2}}\\t = \frac{\bar x_1-\bar x_2}{S_p\sqrt{1/n_1+1/n_2}}</script><p>å‡è®¾æ£€éªŒä¸¤ç§ä¸åŒæ•™å­¦æ–¹æ³•å¯¹å­¦ç”Ÿè€ƒè¯•æˆç»©çš„å½±å“æ˜¯å¦æœ‰æ˜¾è‘—å·®å¼‚ã€‚æœ‰ä¸¤ç»„å­¦ç”Ÿçš„è€ƒè¯•æˆç»©æ•°æ®ï¼Œåˆ†åˆ«æ¥å—äº†ä¸¤ç§ä¸åŒçš„æ•™å­¦æ–¹æ³•ã€‚ä¸¤ç»„å­¦ç”Ÿçš„è€ƒè¯•æˆç»©å¦‚ä¸‹ï¼š</p><ul><li>æ•™å­¦æ–¹æ³•Aç»„ï¼š85,90,88,92,85,87,91,89,90,86</li><li>æ•™å­¦æ–¹æ³•Bç»„ï¼š80,78,82,76,79,81,77,83,80,78</li></ul><p><strong>é›¶å‡è®¾ï¼ˆH0ï¼‰</strong>ï¼šä¸¤ç»„çš„å¹³å‡æˆç»©æ²¡æœ‰æ˜¾è‘—å·®å¼‚ï¼Œå³ $H_0:Î¼_1=Î¼_2$ã€‚</p><p><strong>å¤‡æ‹©å‡è®¾ï¼ˆH1ï¼‰</strong>ï¼šä¸¤ç»„çš„å¹³å‡æˆç»©æœ‰æ˜¾è‘—å·®å¼‚ï¼Œå³ $H_0:Î¼_1â‰ Î¼_2$ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> scipy <span class="keyword">import</span> stats</span><br><span class="line"></span><br><span class="line">group_a = [<span class="number">85</span>, <span class="number">90</span>, <span class="number">88</span>, <span class="number">92</span>, <span class="number">85</span>, <span class="number">87</span>, <span class="number">91</span>, <span class="number">89</span>, <span class="number">90</span>, <span class="number">86</span>]</span><br><span class="line">group_b = [<span class="number">80</span>, <span class="number">78</span>, <span class="number">82</span>, <span class="number">76</span>, <span class="number">79</span>, <span class="number">81</span>, <span class="number">77</span>, <span class="number">83</span>, <span class="number">80</span>, <span class="number">78</span>]</span><br><span class="line"></span><br><span class="line">mean_a = np.mean(group_a)</span><br><span class="line">mean_b = np.mean(group_b)</span><br><span class="line">std_a = np.std(group_a, ddof=<span class="number">1</span>)</span><br><span class="line">std_b = np.std(group_b, ddof=<span class="number">1</span>)</span><br><span class="line">n_a = <span class="built_in">len</span>(group_a)</span><br><span class="line">n_b = <span class="built_in">len</span>(group_b)</span><br><span class="line"></span><br><span class="line">t_statistic, p_value = stats.ttest_ind(group_a, group_b)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;ç»„Aå¹³å‡å€¼:&quot;</span>, mean_a)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;ç»„Bå¹³å‡å€¼:&quot;</span>, mean_b)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;ç»„Aæ ‡å‡†å·®:&quot;</span>, std_a)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;ç»„Bæ ‡å‡†å·®:&quot;</span>, std_b)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;tå€¼:&quot;</span>, t_statistic)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;på€¼:&quot;</span>, p_value)</span><br><span class="line"></span><br><span class="line">alpha = <span class="number">0.05</span></span><br><span class="line"><span class="keyword">if</span> p_value &lt; alpha:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;æ‹’ç»é›¶å‡è®¾ï¼Œä¸¤ç»„çš„å¹³å‡æˆç»©æœ‰æ˜¾è‘—å·®å¼‚ã€‚&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;ä¸æ‹’ç»é›¶å‡è®¾ï¼Œä¸¤ç»„çš„å¹³å‡æˆç»©æ²¡æœ‰æ˜¾è‘—å·®å¼‚ã€‚&quot;</span>)</span><br></pre></td></tr></table></figure><h3 id=""><a href="#" class="headerlink" title=" "></a> </h3>]]></content>
      
      
      
        <tags>
            
            <tag> ç»Ÿè®¡åˆ†æ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TOPSISç†µæƒæ³•</title>
      <link href="/2024/07/30/TOPSIS%E7%86%B5%E6%9D%83%E6%B3%95/"/>
      <url>/2024/07/30/TOPSIS%E7%86%B5%E6%9D%83%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h1 id="TOPSISæ³•"><a href="#TOPSISæ³•" class="headerlink" title="TOPSISæ³•"></a>TOPSISæ³•</h1><p>TOPSISï¼ˆTechnique for Order of Preference by Similarity to Ideal Solutionï¼Œç†æƒ³è§£é€¼è¿‘æ’åºæ³•ï¼‰æ˜¯ä¸€ç§ç”¨äºå¤šå±æ€§å†³ç­–åˆ†æçš„æ’åºæ–¹æ³•ã€‚å®ƒç”¨äºè¯„ä¼°å’Œé€‰æ‹©æœ€ä¼˜æ–¹æ¡ˆï¼Œå°¤å…¶é€‚ç”¨äºå½“å­˜åœ¨å¤šä¸ªè¯„ä»·æ ‡å‡†æ—¶ã€‚</p><p>TOPSISæ–¹æ³•é€šè¿‡è®¡ç®—å„ä¸ªæ–¹æ¡ˆä¸ç†æƒ³è§£å’Œè´Ÿç†æƒ³è§£çš„è·ç¦»æ¥è¿›è¡Œæ’åºã€‚ç†æƒ³è§£æ˜¯æ‰€æœ‰æ ‡å‡†ä¸‹æœ€å¥½è¡¨ç°çš„æ–¹æ¡ˆï¼Œè´Ÿç†æƒ³è§£æ˜¯æ‰€æœ‰æ ‡å‡†ä¸‹æœ€å·®è¡¨ç°çš„æ–¹æ¡ˆã€‚å¯¹æ¯ä¸ªæ–¹æ¡ˆï¼Œè®¡ç®—å…¶ä¸ç†æƒ³è§£å’Œè´Ÿç†æƒ³è§£çš„æ¬§å‡ é‡Œå¾—è·ç¦»ã€‚ç„¶åï¼Œç¡®å®šæ¯ä¸ªæ–¹æ¡ˆç›¸å¯¹äºè¿™ä¸¤ä¸ªè§£çš„è·ç¦»ã€‚é€šè¿‡æ¯”è¾ƒæ–¹æ¡ˆåˆ°ç†æƒ³è§£å’Œè´Ÿç†æƒ³è§£çš„è·ç¦»ï¼Œè®¡ç®—æ¯ä¸ªæ–¹æ¡ˆçš„ç›¸å¯¹æ¥è¿‘åº¦ã€‚ç›¸å¯¹æ¥è¿‘åº¦é«˜çš„æ–¹æ¡ˆè¢«è®¤ä¸ºæ›´ä¼˜ã€‚æ ¹æ®ç›¸å¯¹æ¥è¿‘åº¦å¯¹æ‰€æœ‰æ–¹æ¡ˆè¿›è¡Œæ’åºï¼Œé€‰æ‹©æ¥è¿‘ç†æƒ³è§£ä¸”è¿œç¦»è´Ÿç†æƒ³è§£çš„æ–¹æ¡ˆä½œä¸ºæœ€ä¼˜æ–¹æ¡ˆã€‚</p><div class="table-container"><table><thead><tr><th style="text-align:center">å§“å</th><th style="text-align:center">æˆç»©</th><th style="text-align:center">æ’å</th><th style="text-align:center">SCORE</th></tr></thead><tbody><tr><td style="text-align:center">å°æ</td><td style="text-align:center">72</td><td style="text-align:center">2</td><td style="text-align:center">2 /10 = 0. 2</td></tr><tr><td style="text-align:center">å°æ˜</td><td style="text-align:center">56</td><td style="text-align:center">1</td><td style="text-align:center">1 / 10 = 0.1</td></tr><tr><td style="text-align:center">å°å</td><td style="text-align:center">85</td><td style="text-align:center">3</td><td style="text-align:center">3 / 10 = 0.3</td></tr><tr><td style="text-align:center">å°ç‹</td><td style="text-align:center">96</td><td style="text-align:center">4</td><td style="text-align:center">4 / 10 = 0.4</td></tr></tbody></table></div><p>ä¾‹å¦‚ï¼Œå¦‚æœæŒ‰ç…§æ¯ä¸ªäººçš„æ’åæ¥ä¹‹é—´èµ‹åˆ†çš„æ’åæ¥å†³å®š<strong>SCORE</strong>å€¼ï¼Œè¿™ç§æ–¹å¼ä»…è€ƒè™‘äº†æ’åçš„å…ˆåæ€§ï¼Œä½†å´å¿½ç•¥äº†å®é™…æ•°å€¼ä¸­çš„è·ç¦»å·®å¼‚ï¼Œæ¯”å¦‚å¦‚æœå°æ˜è€ƒäº†20åˆ†ï¼Œé‚£ä»–æœ€åçš„SOCREè¿˜æ˜¯0.1ï¼Œè¿™å°±ä¸å¤ªèƒ½æ»¡è¶³æˆ‘ä»¬å®é™…çš„éœ€æ±‚ã€‚æˆ‘ä»¬éœ€è¦çš„è¿™ä¸ªSCOREå¯ä»¥ç»¼åˆè€ƒè™‘å¤šä¸ªç‰¹å¾å€¼ã€‚</p><p>äº‹å®ä¸Šï¼Œå¯¹äºå±‚æ¬¡åˆ†ææ³•è€Œè¨€ï¼Œç”±äºå…¶ä¸»è§‚æ€§æŒ‡æ ‡å¤ªå¼ºï¼Œæœ‰æ—¶å€™è¯„ä»·çš„æ¨¡å‹å¾ˆéš¾æœ‰è¯´æœåŠ›ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬é‡‡ç”¨å…·æœ‰å®¢è§‚æ€§æŒ‡æ ‡çš„æ¨¡å‹æ¥è¿›è¡Œè¯„ä»·ï¼Œè€ŒTOPSISæ³•ä¾¿èƒ½æ»¡è¶³è¿™ä¸€éœ€æ±‚ï¼ŒTOPSISä¸ä»…è€ƒè™‘äº†æ’åçš„å…ˆåæ€§ï¼Œä¹Ÿèƒ½æ¯”è¾ƒæ•°æ®çš„å·®å¼‚ç¨‹åº¦æ¥è¿›è¡Œç»¼åˆè¯„åˆ¤ã€‚</p><h2 id="TOPSISçš„æ­¥éª¤"><a href="#TOPSISçš„æ­¥éª¤" class="headerlink" title="TOPSISçš„æ­¥éª¤"></a>TOPSISçš„æ­¥éª¤</h2><ul><li>å°†åŸå§‹çŸ©é˜µæ­£å‘åŒ–ã€‚</li></ul><p>æ ¹æ®ä¸åŒçš„æ•°æ®ç±»å‹ï¼Œä»¥åŠæœŸæœ›çš„æŒ‡æ ‡ç±»å‹ï¼Œå°†è¿›è¡Œè¯„åˆ¤çš„æ•°æ®æŒ‡æ ‡è¿›è¡Œæ­£å‘åŒ–å¤„ç†ï¼Œå°†æ‰€æœ‰æŒ‡æ ‡ç±»å‹ç»Ÿä¸€å˜ä¸ºæå¤§å‹æŒ‡æ ‡ã€‚</p><p>åˆ†ä¸ºå››ç§æŒ‡æ ‡ï¼Œåˆ†åˆ«æ˜¯ï¼š<strong><em>æå¤§å‹æŒ‡æ ‡ï¼Œè¾ƒå°å‹æŒ‡æ ‡ï¼Œä¸­é—´å‹æŒ‡æ ‡ï¼ŒåŒºé—´å‹æŒ‡æ ‡</em></strong>ã€‚</p><p><strong>æå¤§å‹æŒ‡æ ‡</strong>æ˜¯æŒ‡è¶Šå¤§è¶Šå¥½çš„æŒ‡æ ‡ï¼Œåˆå«æ•ˆç›Šå‹æŒ‡æ ‡ï¼Œæ¯”å¦‚ç»æµæ•ˆç›Šï¼Œæˆç»©ç­‰ã€‚</p><p><strong>è¾ƒå°å‹æŒ‡æ ‡</strong>æ˜¯æŒ‡è¶Šå°è¶Šå¥½çš„æŒ‡æ ‡ã€‚åˆå«æˆæœ¬å‹æŒ‡æ ‡ï¼Œæ¯”å¦‚æ±¡æŸ“å€¼ï¼Œæˆæœ¬ç­‰ã€‚</p><p><strong>ä¸­é—´å‹æŒ‡æ ‡</strong>æ˜¯æŒ‡è¶Šè´´è¿‘æŸä¸ªæ•°å€¼è¶Šå¥½çš„æŒ‡æ ‡ï¼Œæ¯”å¦‚é€‚åˆçš„PHå€¼ç­‰ã€‚</p><p><strong>åŒºé—´å‹æŒ‡æ ‡</strong>æ˜¯æŒ‡åœ¨æŸä¸ªåŒºé—´è¶Šå¥½çš„æŒ‡æ ‡ï¼Œæ¯”å¦‚é€‚åˆçš„æ¸©åº¦åŒºé—´ç­‰ã€‚</p><p>åä¸‰ä¸ªæŒ‡æ ‡è½¬åŒ–æˆæå¤§å‹æŒ‡æ ‡çš„æ–¹æ³•ï¼š</p><p><strong>è¾ƒå°å‹æŒ‡æ ‡è½¬æ¢ä¸ºæå¤§å‹æŒ‡æ ‡</strong>ï¼š</p><script type="math/tex; mode=display">\hat x_i  =max - xi \ or \ \ \frac{1}{xi}</script><p><strong>ä¸­é—´å‹æŒ‡æ ‡è½¬æ¢ä¸ºæå¤§å‹æŒ‡æ ‡</strong>ï¼š</p><p>å‡è®¾$x_p$ä¸ºæœ€ä½³æŒ‡æ ‡ã€‚</p><script type="math/tex; mode=display">\hat x_i = 1 - \frac{\mid x_i - x_p\mid}{max \{ \mid {x_i-x_p}\mid\}}</script><p><strong>åŒºé—´å‹æŒ‡æ ‡è½¬æ¢ä¸ºæå¤§å‹æŒ‡æ ‡</strong>ï¼š</p><p>å‡è®¾$[a,b]$ä¸ºæœ€ä½³åŒºé—´ã€‚</p><script type="math/tex; mode=display">\hat x_i = \left\{\begin{align*}1 - \frac{a-x_i}{max \{ a-min(x_i),max(x_i)-b\} }  \ \ \ \ x_i\leq a\\ 1 - \frac{x_i-b}{max \{ a-min(x_i),max(x_i)-b\} }\ \ \ \ x_i>b\\ \end{align*}\right.</script><ul><li>å°†æ­£å‘åŒ–çŸ©é˜µæ ‡å‡†åŒ–</li></ul><p>æ­£å‘åŒ–çŸ©é˜µç”¨æ¥æ¶ˆé™¤ä¸åŒé‡çº²çš„å½±å“ã€‚</p><script type="math/tex; mode=display">X = \begin{pmatrix}        x_{11} & x_{12} & \cdots & x_{1m}\\        x_{21} & x_{22} & \cdots & x_{2m}\\        \vdots & \vdots & \ddots & \vdots\\        x_{n1} & x_{n2} & \cdots & x_{nm}\\    \end{pmatrix}</script><p>æ ‡å‡†åŒ–åçš„çŸ©é˜µ$Z$ä¸ºï¼š</p><script type="math/tex; mode=display">Z_{ij} = \frac{x_{ij}}{\sqrt{\sum_{i=1}^{n}x_{ij}^{2}}}</script><ul><li>è®¡ç®—å¾—åˆ†å¹¶å½’ä¸€åŒ–</li></ul><script type="math/tex; mode=display">Z_{max} = (Z_{max}^{1},Z_{max}^{2},...,Z_{max}^{m})</script><script type="math/tex; mode=display">Z_{min} = (Z_{min}^{1},Z_{min}^{2},...,Z_{min}^{m})</script><script type="math/tex; mode=display">D_{max}^{i} = \sqrt{\sum_{j=1}^{m}\omega_{j}(Z_{max}^{j}-z_{ij})^{2}}</script><script type="math/tex; mode=display">D_{min}^{i} = \sqrt{\sum_{j=1}^{m}\omega_{j}(Z_{min}^{j}-z_{ij})^{2}}</script><p>å¾—åˆ°æ¯ä¸ªæŒ‡æ ‡çš„æœ€å¤§å€¼$Z<em>{max}$å’Œæœ€å°å€¼$Z</em>{min}$åï¼Œè®¡ç®—$z<em>{ij}$ä¸å®ƒä»¬ä¹‹é—´çš„è·ç¦»ï¼Œå¾—åˆ°$D</em>{max}^{i}$ä¸$D<em>{min}^{i}$ï¼Œç´§æ¥ç€å‡ºç¬¬$i$ä¸ªå¯¹è±¡çš„æŒ‡æ ‡è¯„åˆ†$S_i$ï¼Œå…¶ä¸­$\omega</em>{j}$æ˜¯æƒé‡ã€‚</p><script type="math/tex; mode=display">S_i = \frac{D_{min}^{i}}{D_{min}^{i}+D_{max}^{i}}</script><p>å†è¿›è¡Œå½’ä¸€åŒ–ï¼Œå¾—åˆ°$\hat S_{i{}}$:</p><script type="math/tex; mode=display">\hat S_i = \frac{S_i}{\sum_{i=1}^{n}S_i}</script><h2 id="æƒé‡è®¡ç®—ï¼šç†µæƒæ³•"><a href="#æƒé‡è®¡ç®—ï¼šç†µæƒæ³•" class="headerlink" title="æƒé‡è®¡ç®—ï¼šç†µæƒæ³•"></a>æƒé‡è®¡ç®—ï¼šç†µæƒæ³•</h2><p>æƒé‡çš„è®¡ç®—æ–¹å¼æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚å±‚æ¬¡åˆ†ææ³•ï¼Œä½†å…¶ä¸»è§‚æ€§å¤ªå¼ºï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™é‡Œé€‰æ‹©ç†µæƒæ³•ã€‚</p><script type="math/tex; mode=display">p_{ij} = \frac{x_{ij}}{\sum_{i=1}^{m} x_{ij}}e_j = -k \sum_{i=1}^{m} p_{ij} \ln p_{ij}</script><p>$p_{ij}$ è¡¨ç¤ºç¬¬ $i$ ä¸ªæ–¹æ¡ˆåœ¨ç¬¬ $j$ ä¸ªæŒ‡æ ‡ä¸Šçš„æ ‡å‡†åŒ–å€¼ï¼Œæ˜¯ä¸€ä¸ªå¸¸æ•°ï¼Œ$k = 1/ln \ m$ç”¨äºä¿è¯ $e_j$ çš„å–å€¼èŒƒå›´åœ¨ [0,1] ä¹‹é—´ã€‚ </p><h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æå°å‹è½¬ä¸ºæå¤§å‹æŒ‡æ ‡</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">dataDirection_1</span>(<span class="params">datas, offset=<span class="number">0</span></span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">normalization</span>(<span class="params">data</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span> / (data + offset)</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">list</span>(<span class="built_in">map</span>(normalization, datas))</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment"># ä¸­é—´å‹æŒ‡æ ‡è½¬ä¸ºæå¤§å‹æŒ‡æ ‡</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">dataDirection_2</span>(<span class="params">datas, x_min, x_max</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">normalization</span>(<span class="params">data</span>):</span><br><span class="line">        <span class="keyword">if</span> data &lt;= x_min <span class="keyword">or</span> data &gt;= x_max:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">elif</span> data &gt; x_min <span class="keyword">and</span> data &lt; (x_min + x_max) / <span class="number">2</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">2</span> * (data - x_min) / (x_max - x_min)</span><br><span class="line">        <span class="keyword">elif</span> data &lt; x_max <span class="keyword">and</span> data &gt;= (x_min + x_max) / <span class="number">2</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">2</span> * (x_max - data) / (x_max - x_min)</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">list</span>(<span class="built_in">map</span>(normalization, datas))</span><br><span class="line"> </span><br><span class="line"><span class="comment"># åŒºé—´å‹æŒ‡æ ‡è½¬ä¸ºæå¤§å‹æŒ‡æ ‡</span></span><br><span class="line"><span class="comment"># [x_min, x_max]æœ€ä½³ç¨³å®šåŒºé—´, [x_minimum, x_maximum]å®¹å¿åŒºé—´</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">dataDirection_3</span>(<span class="params">datas, x_min, x_max, x_minimum, x_maximum</span>):  </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">normalization</span>(<span class="params">data</span>):</span><br><span class="line">        <span class="keyword">if</span> data &gt;= x_min <span class="keyword">and</span> data &lt;= x_max:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">        <span class="keyword">elif</span> data &lt;= x_minimum <span class="keyword">or</span> data &gt;= x_maximum:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">elif</span> data &gt; x_max <span class="keyword">and</span> data &lt; x_maximum:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span> - (data - x_max) / (x_maximum - x_max)</span><br><span class="line">        <span class="keyword">elif</span> data &lt; x_min <span class="keyword">and</span> data &gt; x_minimum:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span> - (x_min - data) / (x_min - x_minimum)</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">list</span>(<span class="built_in">map</span>(normalization, datas))</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">entropyWeight</span>(<span class="params">data</span>):</span><br><span class="line">    data = np.array(data)</span><br><span class="line">    <span class="comment"># è®¡ç®—ç¬¬jä¸ªæŒ‡æ ‡ä¸‹ç¬¬iä¸ªæ ·æœ¬æ‰€å çš„æ¯”é‡ï¼Œç›¸å¯¹ç†µè®¡ç®—ä¸­ç”¨åˆ°çš„æ¦‚ç‡</span></span><br><span class="line">    P = data / data.<span class="built_in">sum</span>(axis=<span class="number">0</span>)  <span class="comment"># å‹ç¼©è¡Œ</span></span><br><span class="line">    <span class="comment"># è®¡ç®—ç†µå€¼</span></span><br><span class="line">    E = np.nansum(-P * np.log(P) / np.log(<span class="built_in">len</span>(data)), axis=<span class="number">0</span>)</span><br><span class="line">    <span class="comment"># ä¿¡æ¯æ•ˆç”¨å€¼</span></span><br><span class="line">    d = (<span class="number">1</span> - E)</span><br><span class="line">    <span class="comment"># è®¡ç®—æƒç³»æ•°</span></span><br><span class="line">    W = d / d.<span class="built_in">sum</span>()</span><br><span class="line">    <span class="keyword">return</span> W</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> ç»¼åˆè¯„ä»· </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å†³ç­–æ ‘ä¸éšæœºæ£®æ—</title>
      <link href="/2024/07/27/%E5%86%B3%E7%AD%96%E6%A0%91%E4%B8%8E%E9%9A%8F%E6%9C%BA%E6%A3%AE%E6%9E%97/"/>
      <url>/2024/07/27/%E5%86%B3%E7%AD%96%E6%A0%91%E4%B8%8E%E9%9A%8F%E6%9C%BA%E6%A3%AE%E6%9E%97/</url>
      
        <content type="html"><![CDATA[<h1 id="å†³ç­–æ ‘"><a href="#å†³ç­–æ ‘" class="headerlink" title="å†³ç­–æ ‘"></a>å†³ç­–æ ‘</h1><p>å†³ç­–æ ‘(decision tree)æ˜¯æœ‰ç›‘ç£å­¦ä¹ ä¸‹çš„ä¸€ç§åŸºæœ¬çš„åˆ†ç±»ä¸å›å½’ç®—æ³•ï¼Œå…¶æ ¹æ®ç‰¹å¾æ¥å¯¹å®é™…è¿›è¡Œif-thenæ¡ä»¶çš„åˆ¤æ–­æ¥è¿›è¡Œåˆ†ç±»ã€‚å†³ç­–æ ‘çš„å­¦ä¹ åŒ…æ‹¬ä¸‰ä¸ªæ­¥éª¤ï¼šç‰¹å¾é€‰æ‹©ï¼Œå†³ç­–æ ‘çš„ç”Ÿæˆå’Œè£å‰ªã€‚</p><h2 id="æ¨¡å‹"><a href="#æ¨¡å‹" class="headerlink" title="æ¨¡å‹"></a>æ¨¡å‹</h2><p>å†³ç­–æ ‘ç”±ç»“ç‚¹(node)å’Œæœ‰å‘è¾¹(directed edge)ç»„æˆï¼Œç»“ç‚¹æœ‰ä¸¤ç§ç±»å‹ï¼šå†…éƒ¨ç»“ç‚¹(internal node)å’Œå¶ç»“ç‚¹(leaf node)ï¼Œå†…éƒ¨ç»“ç‚¹è¡¨ç¤ºä¸€ä¸ªç‰¹å¾æˆ–å±æ€§ï¼Œå¶æ ‡ç‚¹è¡¨ç¤ºä¸€ä¸ªç±»ã€‚</p><h3 id="if-thenè§„åˆ™"><a href="#if-thenè§„åˆ™" class="headerlink" title="if-thenè§„åˆ™"></a>if-thenè§„åˆ™</h3><p>if-thenè§„åˆ™çš„æ€§è´¨æ˜¯ï¼šäº’æ–¥ä¸”å®Œå¤‡ï¼Œè¿™æ„å‘³ç€æ¯ä¸€ä¸ªå®ä¾‹éƒ½è¢«ä¸€æ¡è·¯å¾„æˆ–ä¸€æ¡è§„åˆ™æ‰€è¦†ç›–ï¼Œä¸”åªèƒ½è¢«ä¸€æ¡è·¯å¾„æˆ–ä¸€æ¡è§„åˆ™æ‰€è¦†ç›–ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">         [Feature 1]</span><br><span class="line">        /           \</span><br><span class="line">   [Value A]      [Value B]</span><br><span class="line">     /               \</span><br><span class="line">[Leaf 1]         [Feature 2]</span><br><span class="line">                    /       \</span><br><span class="line">             [Value X]   [Value Y]</span><br><span class="line">               /            \</span><br><span class="line">          [Leaf 2]       [Leaf 3]</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å†³ç­–æ ‘çš„æ ‘æ¦‚å¿µå¯ä»¥ä»¥kdæ ‘ä¸ºåŸºç¡€è¿›è¡Œç†è§£ï¼Œåœ¨ç‰¹å¾ç©ºé—´ä¸‹ï¼Œæ ¹æ®ä¸åŒçš„ç‰¹å¾å®šä¹‰ä¸åŒçš„åˆ’åˆ†æ¥åˆ’åˆ†ä¸ºä¸åŒçš„å•å…ƒæˆ–åŒºåŸŸï¼Œå‡è®¾$X$ä¸ºè¡¨ç¤ºç‰¹å¾çš„éšæœºå˜é‡ï¼Œ$Y$ä¸ºè¡¨ç¤ºç±»çš„éšæœºå˜é‡ï¼Œé‚£ä¹ˆæ¡ä»¶æ¦‚ç‡åˆ†å¸ƒè¡¨ç¤ºä¸º$P(Y\mid X)$ï¼Œ$X$å–å€¼äºç»™å®šåˆ’åˆ†ä¸‹å•å…ƒçš„é›†åˆï¼Œ$Y$å–å€¼äºç±»çš„é›†åˆï¼Œå„å¶ç»“ç‚¹ä¸Šçš„æ¡ä»¶æ¦‚ç‡å¾€å¾€åå‘äºæŸä¸€ä¸ªç±»ï¼Œå†³ç­–æ ‘åˆ†ç±»æ—¶å°†è¯¥ç»“ç‚¹çš„å®ä¾‹å¼ºè¡Œåˆ’åˆ†åˆ°æ¡ä»¶æ¦‚ç‡å¤§çš„é‚£ä¸€ç±»å»ã€‚</p><p>ä¸è®­ç»ƒæ•°æ®é›†ä¸ç›¸çŸ›ç›¾çš„å†³ç­–æ ‘å¯èƒ½æœ‰å¤šä¸ªï¼Œä¹Ÿå¯èƒ½ä¸€ä¸ªéƒ½æ²¡æœ‰ï¼Œä¸€èˆ¬æˆ‘ä»¬é€‰æ‹©ä¸è®­ç»ƒæ•°æ®çŸ›ç›¾è¾ƒå°ä¸”å…·æœ‰å¾ˆå¥½æ³›åŒ–èƒ½åŠ›çš„å†³ç­–æ ‘ã€‚</p><p>å†³ç­–æ ‘å­¦ä¹ çš„ç®—æ³•é€šå¸¸æ˜¯ä¸€ä¸ªé€’å½’åœ°é€‰æ‹©æœ€ä¼˜ç‰¹å¾ï¼Œå¹¶æ ¹æ®ç‰¹å¾æ¥è‡ªå¯¹è®­ç»ƒæ•°æ®è¿›è¡Œåˆ†å‰²ã€‚</p><ul><li>æ„å»ºæ ¹ç»“ç‚¹ï¼Œå°†æ‰€æœ‰è®­ç»ƒæ•°æ®éƒ½æ”¾åœ¨æ ¹èŠ‚ç‚¹ã€‚</li><li>é€‰æ‹©ä¸€ä¸ªæœ€ä¼˜ç‰¹å¾ï¼Œæ ¹æ®ç‰¹å¾æ¥å°†è®­ç»ƒæ•°æ®åˆ’åˆ†ä¸ºå­é›†ï¼Œä½¿å¾—æ¯ä¸ªå­é›†æœ‰ä¸€ä¸ªåœ¨å½“å‰æ¡ä»¶ä¸‹æœ€å¥½çš„åˆ†ç±»ã€‚</li><li>å¦‚æœè¿™äº›å­é›†å·²ç»èƒ½å¤Ÿè¢«åŸºæœ¬æ­£ç¡®åˆ†ç±»ï¼Œé‚£ä¹ˆæ„å»ºå¶ç»“ç‚¹ï¼Œå¹¶å°†å­é›†åˆ’åˆ†åˆ°å¶èŠ‚ç‚¹ä¸­ï¼Œå¦‚æœä¸èƒ½è¢«åŸºæœ¬æ­£ç¡®åˆ†ç±»ï¼Œé‚£ä¹ˆå°±ç»§ç»­é€‰æ‹©æœ€ä¼˜ç‰¹å¾è¿›è¡Œåˆ†å‰²ï¼Œç›´è‡³èƒ½åŸºæœ¬åˆ†ç±»æ­£ç¡®ï¼Œè¿›è¡Œé€’å½’ã€‚</li></ul><p>è¿™æ ·çš„æ ‘ä¼šæœ‰å¾ˆå¥½çš„åˆ†ç±»èƒ½åŠ›ï¼Œä½†æ˜¯ä¼šå‡ºç°è¿‡æ‹Ÿåˆç°è±¡ï¼Œæ‰€ä»¥è¦å‰ªææ¥ä½¿å…¶å…·æœ‰æ›´å¥½çš„æ³›åŒ–èƒ½åŠ›ã€‚</p><p>å†³ç­–æ ‘çš„ç”Ÿæˆåªè€ƒè™‘å±€éƒ¨æœ€ä¼˜ï¼Œè€Œå‰ªæè€ƒè™‘å…¨å±€æœ€ä¼˜ã€‚</p><h3 id="ç‰¹å¾é€‰æ‹©"><a href="#ç‰¹å¾é€‰æ‹©" class="headerlink" title="ç‰¹å¾é€‰æ‹©"></a>ç‰¹å¾é€‰æ‹©</h3><p>é€‰å–å¯¹è®­ç»ƒæ•°æ®å…·æœ‰åˆ†ç±»èƒ½åŠ›çš„ç‰¹å¾ï¼Œè€Œä¸æ˜¯æ²¡æœ‰ä½œç”¨çš„ç‰¹å¾å¯ä»¥æé«˜å†³ç­–æ ‘çš„å­¦ä¹ æ•ˆç‡ï¼Œå†³ç­–æ ‘é€‰ç”¨ä¿¡æ¯å¢ç›Šå‡†åˆ™æ¥é€‰æ‹©ç‰¹å¾ã€‚</p><h4 id="ä¿¡æ¯å¢ç›Šå‡†åˆ™"><a href="#ä¿¡æ¯å¢ç›Šå‡†åˆ™" class="headerlink" title="ä¿¡æ¯å¢ç›Šå‡†åˆ™"></a>ä¿¡æ¯å¢ç›Šå‡†åˆ™</h4><p><strong>ç†µ</strong>ï¼ˆentropy) æ˜¯è¡¨ç¤ºéšæœºå˜é‡ä¸ç¡®å®šæ€§çš„åº¦é‡ï¼Œè®¾$X$æ˜¯ä¸€ä¸ªå–æœ‰é™ä¸ªå€¼çš„ç¦»æ•£éšæœºå˜é‡ï¼Œå…¶æ¦‚ç‡åˆ†å¸ƒä¸º:$P(X=x<em>i)=p_i$ï¼Œåˆ™éšæœºå˜é‡$X$çš„ç†µå®šä¹‰ä¸º:$H(X)=-\sum</em>{i=1}^{n}p_ilogp_i$ã€‚ä¸€èˆ¬å¯¹æ•°ä»¥2æˆ–$e$ä¸ºåº•ï¼Œæ­¤æ—¶å•ä½åˆ†å¸ƒä¸ºæ¯”ç‰¹(bit)æˆ–çº³ç‰¹(nat)ï¼Œæ‰€ä»¥ç†µåªä¾èµ–äº$X$çš„åˆ†å¸ƒè€Œä¸$X$çš„å–å€¼æ— å…³ï¼Œè®°ä½œ$H(p)$ã€‚ç†µè¶Šå¤§ï¼Œéšæœºå˜é‡çš„ä¸ç¡®å®šæ€§è¶Šå¤§ï¼Œæœ‰$0\leq H(p)\leq log\ n$ã€‚</p><p>ä¾‹å¦‚ï¼Œå½“éšæœºå˜é‡åªæœ‰0ï¼Œ1æ—¶ï¼Œ$P(X=1)=p,P(X=0)=1-p$ï¼Œæ­¤æ—¶$H(p)$çš„å›¾åƒå‘ˆç°å‘ä¸‹çš„äºŒæ¬¡å‡½æ•°å½¢å¼ï¼Œå½“æ—¶$p=0$æˆ–$p=1$æ—¶ï¼Œéšæœºå˜é‡å®Œå…¨æ²¡æœ‰ä¸ç¡®å®šæ€§ï¼Œå½“$p=0.5$æ—¶ï¼Œ$H(p)=1$ï¼Œç†µå€¼æœ€å¤§ã€‚</p><p>è®¾éšæœºå˜é‡$(X,Y)$ï¼Œå…¶æ¦‚ç‡åˆ†å¸ƒä¸º$P(X=x<em>i,Y=y_i)=p</em>{ij}$ï¼Œæ¡ä»¶ç†µ$H(Y\mid X)$è¡¨ç¤ºåœ¨å·²çŸ¥éšæœºå˜é‡Xçš„æ¡ä»¶ä¸‹éšæœºå˜é‡$Y$çš„ä¸ç¡®å®šæ€§ã€‚å…¶ä¸­ï¼š</p><script type="math/tex; mode=display">H(Y\mid X) = \sum_{i=1}^{n}p_iH(Y\mid X=x_i)</script><p>è¿™é‡Œçš„$p_i=P(X=x_i)$ã€‚</p><p>å½“ç†µå’Œæ¡ä»¶ç†µä¸­çš„æ¦‚ç‡ç”±æ•°æ®ä¼°è®¡ï¼ˆç‰¹åˆ«æ˜¯æå¤§ä¼¼ç„¶ä¼°è®¡ï¼‰å¾—åˆ°çš„æ—¶å€™ï¼Œæ‰€å¯¹åº”çš„å€¼åˆ†å¸ƒç§°ä¸ºç»éªŒç†µï¼ˆempirical entropy)å’Œç»éªŒæ¡ä»¶ç†µ(empirical conditional entropy)ã€‚</p><p><strong>ä¿¡æ¯å¢ç›Š</strong>è¡¨ç¤ºå¾—çŸ¥ç‰¹å¾$X$çš„ä¿¡æ¯è€Œä½¿ç±»$Y$çš„ä¿¡æ¯ä¸ç¡®å®šæ€§å‡å°‘çš„ç¨‹åº¦ï¼Œå®šä¹‰ä¸º$g(D, A)$</p><script type="math/tex; mode=display">g(D,A)=H(D)-H(D\mid A)</script><p>ä¸€èˆ¬åœ°ï¼Œç†µ$H(Y)$ä¸æ¡ä»¶ç†µ$H(Y\mid X)$ä¹‹å·®ç§°ä¸ºäº’ä¿¡æ¯ï¼Œä¿¡æ¯å¢ç›Šè¶Šå¤§è¶Šå¥½ã€‚</p><h2 id="ä¿¡æ¯å¢ç›Šç®—æ³•"><a href="#ä¿¡æ¯å¢ç›Šç®—æ³•" class="headerlink" title="ä¿¡æ¯å¢ç›Šç®—æ³•"></a>ä¿¡æ¯å¢ç›Šç®—æ³•</h2><p>å‡è®¾è®­ç»ƒæ•°æ®é›†ä¸º$D$ï¼Œ$\mid D \mid$è¡¨ç¤ºå…¶æ ·æœ¬å®¹é‡ï¼Œå³æ ·æœ¬ä¸ªæ•°ï¼Œè®¾æœ‰$K$ä¸ªç±»$C<em>k,k=0,1,2,â€¦$ï¼Œ$\mid C_k \mid$ä¸ºå±äºç±»$C_k$çš„æ ·æœ¬ä¸ªæ•°ï¼Œ$\sum</em>{k=1}^K \mid C<em>k\mid = \mid D \mid$ã€‚è®¾æœ‰ç‰¹å¾$A$æœ‰$n$ä¸ªä¸åŒçš„å–å€¼${a_1,a_2,â€¦,a_n}$ï¼Œæ ¹æ®ç‰¹å¾$A$çš„å–å€¼å°†$D$åˆ’åˆ†ä¸º$n$ä¸ªå­é›†$D_1,D_2,â€¦,D_n$ï¼Œ$\mid D_i \mid$ä¸º$D_i$çš„ä¸ªæ ·æœ¬ä¸ªæ•°ï¼Œ$\sum</em>{i=1}^n \mid D<em>i\mid =\mid D \mid$ï¼Œè®°å­é›†$D_i$ä¸­å±äºç±»$C_k$çš„æ ·æœ¬é›†åˆä¸º$D</em>{ik}$ï¼Œå³$D<em>{ik}=Di\cap C_k$ï¼Œ$\mid D</em>{ik}\mid$ä¸º$D_ik$çš„æ ·æœ¬ä¸ªæ•°ã€‚</p><p>é¦–å…ˆè¾“å…¥è®­ç»ƒæ•°æ®é›†$D$å’Œç‰¹å¾$A$ï¼Œæ¥è¾“å‡ºç‰¹å¾$A$å¯¹$D$çš„ä¿¡æ¯å¢ç›Š$g(D,A)$ã€‚</p><ul><li><p>è®¡ç®—ç»éªŒç†µ$H(D)$ï¼Œæœ‰$H(D)=-\sum_{k=1}^K \frac{\mid C_k \mid}{\mid D \mid}log_2\frac{\mid C_k\mid}{\mid D\mid}$</p></li><li><p>$H(D\mid A)=\sum<em>{i=1}^{n}\frac{\mid D_i\mid}{\mid D\mid}H(D_i)=-\sum</em>{i=1}^{n}\frac{\mid D<em>i\mid}{\mid D\mid}\sum</em>{k=1}^K \frac{\mid C_k \mid}{\mid D \mid}log_2\frac{\mid C_k\mid}{\mid D\mid}$â€‹</p></li><li>è®¡ç®—ä¿¡æ¯å¢ç›Š$g(D,A)=H(D)-H(D\mid A)$â€‹</li></ul><p>æ­¤å¤–ï¼Œè¿˜æœ‰<strong>ä¿¡æ¯å¢ç›Šæ¯”</strong>çš„æ¦‚å¿µ</p><h2 id="å†³ç­–æ ‘çš„ç”Ÿæˆ"><a href="#å†³ç­–æ ‘çš„ç”Ÿæˆ" class="headerlink" title="å†³ç­–æ ‘çš„ç”Ÿæˆ"></a>å†³ç­–æ ‘çš„ç”Ÿæˆ</h2><h3 id="ID3ç®—æ³•"><a href="#ID3ç®—æ³•" class="headerlink" title="ID3ç®—æ³•"></a>ID3ç®—æ³•</h3><h3 id="ID4-5ç®—æ³•"><a href="#ID4-5ç®—æ³•" class="headerlink" title="ID4.5ç®—æ³•"></a>ID4.5ç®—æ³•</h3><h2 id="CARTæ ‘"><a href="#CARTæ ‘" class="headerlink" title="CARTæ ‘"></a>CARTæ ‘</h2><h1 id="éšæœºæ£®æ—"><a href="#éšæœºæ£®æ—" class="headerlink" title="éšæœºæ£®æ—"></a>éšæœºæ£®æ—</h1><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line"><span class="keyword">from</span> sklearn.ensemble <span class="keyword">import</span> RandomForestClassifier</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> accuracy_score, classification_report, confusion_matrix</span><br><span class="line"><span class="keyword">from</span> sklearn.datasets <span class="keyword">import</span> load_wine</span><br><span class="line">data = load_wine()</span><br><span class="line"></span><br><span class="line">X = data.data</span><br><span class="line">y = data.target</span><br><span class="line"></span><br><span class="line">X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=<span class="number">0.3</span>, random_state=<span class="number">42</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹ç‰¹å¾åç§°å’Œå‰äº”ä¸ªæ ·æœ¬</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Feature names:&quot;</span>, data.feature_names)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;First 5 samples of X:\n&quot;</span>, X[:<span class="number">5</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ç›®æ ‡ç±»åˆ«åç§°å’Œå‰äº”ä¸ªæ ‡ç­¾</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Target names:&quot;</span>, data.target_names)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;First 5 samples of y:\n&quot;</span>, y[:<span class="number">5</span>])</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">clf = RandomForestClassifier(n_estimators=<span class="number">100</span>, random_state=<span class="number">42</span>)</span><br><span class="line"></span><br><span class="line">clf.fit(X_train, y_train)</span><br><span class="line"></span><br><span class="line">y_pred = clf.predict(X_test)</span><br><span class="line"><span class="comment"># è¾“å‡ºç‰¹å¾é‡è¦æ€§</span></span><br><span class="line">importances = clf.feature_importances_</span><br><span class="line">feature_importance = pd.Series(importances, index=data.feature_names)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Feature importances:\n&quot;</span>, feature_importance.sort_values(ascending=<span class="literal">False</span>))</span><br><span class="line">accuracy = accuracy_score(y_test, y_pred)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;Accuracy: <span class="subst">&#123;accuracy:<span class="number">.2</span>f&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;\nClassification Report:&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(classification_report(y_test, y_pred))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Confusion Matrix:&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(confusion_matrix(y_test, y_pred))</span><br></pre></td></tr></table></figure><p>ç»˜åˆ¶ç‰¹å¾é‡è¦æ€§å›¾</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">importances = clf.feature_importances_</span><br><span class="line">feature_importance = pd.Series(importances, index=data.feature_names)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»˜åˆ¶ç‰¹å¾é‡è¦æ€§æ¡å½¢å›¾</span></span><br><span class="line">feature_importance.sort_values(ascending=<span class="literal">False</span>).plot(kind=<span class="string">&#x27;bar&#x27;</span>, figsize=(<span class="number">10</span>, <span class="number">6</span>))</span><br><span class="line">plt.title(<span class="string">&#x27;Feature Importances&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;Importance Score&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> confusion_matrix</span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line"></span><br><span class="line">cm = confusion_matrix(y_test, y_pred)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»˜åˆ¶çƒ­å›¾</span></span><br><span class="line">plt.figure(figsize=(<span class="number">8</span>, <span class="number">6</span>))</span><br><span class="line">sns.heatmap(cm, annot=<span class="literal">True</span>, fmt=<span class="string">&#x27;d&#x27;</span>, cmap=<span class="string">&#x27;Blues&#x27;</span>, xticklabels=data.target_names, yticklabels=data.target_names)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;Predicted&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;Actual&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;Confusion Matrix&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> æœºå™¨å­¦ä¹  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœ´ç´ è´å¶æ–¯ç®—æ³•åŠå®ç°</title>
      <link href="/2024/07/27/%E6%9C%B4%E7%B4%A0%E8%B4%9D%E5%8F%B6%E6%96%AF%E7%AE%97%E6%B3%95%E5%8F%8A%E5%AE%9E%E7%8E%B0/"/>
      <url>/2024/07/27/%E6%9C%B4%E7%B4%A0%E8%B4%9D%E5%8F%B6%E6%96%AF%E7%AE%97%E6%B3%95%E5%8F%8A%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="æœ´ç´ è´å¶æ–¯"><a href="#æœ´ç´ è´å¶æ–¯" class="headerlink" title="æœ´ç´ è´å¶æ–¯"></a>æœ´ç´ è´å¶æ–¯</h1><p>æœ´ç´ è´å¶æ–¯(naive Bayes)æ³•æ˜¯åŸºäºè´å¶æ–¯å®šç†ä¸ç‰¹å¾æ¡ä»¶ç‹¬ç«‹å‡è®¾çš„åˆ†ç±»æ–¹æ³•ï¼Œå¯¹äºç»™å®šè®­ç»ƒæ•°æ®é›†ï¼ŒåŸºäºç‰¹å¾æ¡ä»¶ç‹¬ç«‹å‡è®¾å­¦ä¹ è¾“å…¥è¾“å‡ºçš„è”åˆæ¦‚ç‡åˆ†å¸ƒï¼Œç„¶ååŸºäºæ­¤æ¨¡å‹å¯¹ç»™å®šçš„è¾“å…¥ x ï¼Œåˆ©ç”¨è´å¶æ–¯å®šç†æ±‚å‡ºåéªŒæ¦‚ç‡æœ€å¤§çš„è¾“å‡º y ã€‚</p><h2 id="è´å¶æ–¯å®šç†"><a href="#è´å¶æ–¯å®šç†" class="headerlink" title="è´å¶æ–¯å®šç†"></a>è´å¶æ–¯å®šç†</h2><p>è´å¶æ–¯å®šç†ï¼ˆBayesâ€™ Theoremï¼‰æ˜¯æ¦‚ç‡è®ºä¸­çš„ä¸€ä¸ªé‡è¦å…¬å¼ï¼Œç”¨äºè®¡ç®—åœ¨å·²çŸ¥æŸäº›äº‹ä»¶å‘ç”Ÿçš„æƒ…å†µä¸‹ï¼Œå¦ä¸€äº‹ä»¶å‘ç”Ÿçš„æ¦‚ç‡ã€‚å®ƒå»ºç«‹äº†åéªŒæ¦‚ç‡ï¼ˆposterior probabilityï¼‰å’Œå…ˆéªŒæ¦‚ç‡ï¼ˆprior probabilityï¼‰ã€æ¡ä»¶æ¦‚ç‡ï¼ˆconditional probabilityï¼‰ä¹‹é—´çš„å…³ç³»ã€‚</p><script type="math/tex; mode=display">\begin{align*}P(A \mid B) = \frac{P(B \mid A) \, P(A)}{P(B)}\end{align*}</script><p>å…¶ä¸­ï¼ŒP(Aâˆ£B) æ˜¯åœ¨äº‹ä»¶ B å‘ç”Ÿåäº‹ä»¶ A å‘ç”Ÿçš„åéªŒæ¦‚ç‡ï¼ŒP(A) æ˜¯äº‹ä»¶ A çš„å…ˆéªŒæ¦‚ç‡ï¼ŒP(Bâˆ£A) æ˜¯åœ¨äº‹ä»¶ A å‘ç”Ÿçš„æƒ…å†µä¸‹äº‹ä»¶ B å‘ç”Ÿçš„æ¡ä»¶æ¦‚ç‡ï¼ŒP(B) æ˜¯äº‹ä»¶ B çš„è¾¹ç¼˜æ¦‚ç‡ã€‚</p><h2 id="ç®—æ³•"><a href="#ç®—æ³•" class="headerlink" title="ç®—æ³•"></a>ç®—æ³•</h2><p>æˆ‘ä»¬å°†ç±»åˆ«è®¾ä¸ºCï¼Œè¾“å…¥ç‰¹å¾å‘é‡ä¸º x = {x1,x2,â€¦,xn}ï¼Œé‚£ä¹ˆæ ¹æ®è´å¶æ–¯å®šç†ï¼š</p><script type="math/tex; mode=display">\begin{equation}P(C \mid \mathbf{x}) = \frac{P(\mathbf{x} \mid C) P(C)}{P(\mathbf{x})}\end{equation}</script><p>å…¶ä¸­ï¼ŒP(x) æ˜¯ç‰¹å¾å‘é‡ x çš„è¾¹ç¼˜æ¦‚ç‡ï¼Œ P(C) æ˜¯ç±»åˆ«çš„å…ˆéªŒæ¦‚ç‡ï¼ŒP(xâˆ£C) æ˜¯ä¼¼ç„¶å‡½æ•°ï¼Œå³åœ¨ç»™å®šç±»åˆ« C çš„æƒ…å†µä¸‹ï¼Œè§‚å¯Ÿåˆ°ç‰¹å¾å‘é‡ x çš„æ¦‚ç‡ï¼ŒP(Câˆ£x) æ˜¯åéªŒæ¦‚ç‡ï¼Œå³åœ¨ç»™å®šç‰¹å¾å‘é‡ x çš„æƒ…å†µä¸‹ï¼Œç±»åˆ« C çš„æ¦‚ç‡ã€‚</p><p>åœ¨æœ´ç´ è´å¶æ–¯æ¨¡å‹ä¸­ï¼Œå‡è®¾ç‰¹å¾æ˜¯æ¡ä»¶ç‹¬ç«‹çš„,æ•…P(C|x)æ­£æ¯”äºè¿™äº›å•ç‹¬æ¡ä»¶æ¦‚ç‡çš„ä¹˜ç§¯ã€‚</p><script type="math/tex; mode=display">\begin{equation}P(C \mid \mathbf{x}) \propto P(C) \prod_{i=1}^{n} P(x_i \mid C)\end{equation}</script><p>ä¸ºäº†åˆ†ç±»ï¼Œæˆ‘ä»¬é€‰æ‹©å…·æœ‰æœ€å¤§åéªŒæ¦‚ç‡çš„ç±»åˆ« CMAP,å°†å…¶ä½œä¸ºxçš„ç±»è¾“å‡ºï¼ŒåéªŒæ¦‚ç‡è®¡ç®—ï¼š</p><script type="math/tex; mode=display">\begin{equation}C_{\text{MAP}} = \arg\max_C P(C \mid \mathbf{x}) = \arg\max_C P(C) \prod_{i=1}^{n} P(x_i \mid C)\end{equation}</script><h2 id="åéªŒæ¦‚ç‡æœ€å¤§åŒ–"><a href="#åéªŒæ¦‚ç‡æœ€å¤§åŒ–" class="headerlink" title="åéªŒæ¦‚ç‡æœ€å¤§åŒ–"></a>åéªŒæ¦‚ç‡æœ€å¤§åŒ–</h2><p>å¯ä»¥çœ‹åˆ°ï¼Œæœ´ç´ è´å¶æ–¯å°†å®ä¾‹åˆ†åˆ°äº†åéªŒæ¦‚ç‡æœ€å¤§çš„ç±»ä¸­ï¼Œå…¶ç­‰äºæœŸæœ›é£é™©æœ€å°åŒ–ã€‚</p><p>å®šä¹‰0-1æŸå¤±å‡½æ•°:</p><script type="math/tex; mode=display">L(Y,f(X)) = \left\{\begin{align*}1,Yâ‰ f(X)\\0,Y=f(X)\end{align*}\right.</script><p>å…¶ä¸­ï¼Œf(X)æ˜¯åˆ†ç±»å†³ç­–å‡½æ•°ï¼Œæ­¤æ—¶çš„æœŸæœ›é£é™©å‡½æ•°ä¸º:$R_{exp}(f) = E[L(Y,f(X))]$ï¼Œè¿™é‡Œå¦‚æœf(X)çš„ç±»å’Œ Y ä¸åŒï¼Œé‚£ä¹ˆåˆ™å®šä¸º1ï¼Œè¿™æ ·ä¸åŒçš„ç±»æ•°è¶Šå¤šï¼ŒæŸå¤±å‡½æ•°è¶Šå¤§ã€‚æœŸæœ›æ˜¯å¯¹è”åˆåˆ†å¸ƒ$P(X,Y)$â€‹å–çš„ï¼Œæ‰€ä»¥æ¡ä»¶æœŸæœ›å˜ä¸ºï¼š</p><script type="math/tex; mode=display">\begin{equation}R_{exp}(f) = E_{X}\sum_{k=1}^{K} [L(c_{k},f(X))]P(c_{k}|X)\end{equation}</script><p>ä¸ºäº†ä½¿æœŸæœ›é£é™©æœ€å°åŒ–ï¼Œåªéœ€å¯¹X=xé€ä¸ªæå°åŒ–ã€‚</p><script type="math/tex; mode=display">f(x) = argmin_{yâˆˆY}\sum_{k=1}^{K} L(c_{k},y)P(c_{k}|X=x)\\=argmin_{yâˆˆY}(1-\sum_{k=1}^{K}P(yâ‰ c_{k}|X=x))\\=argmax_{yâˆˆY}P(y=c_{k}|X=x)</script><p>è¿™æ ·ï¼ŒæœŸæœ›é£é™©æœ€å°åŒ–å‡†åˆ™å°±å˜æˆäº†åéªŒæ¦‚ç‡æœ€å¤§åŒ–å‡†åˆ™ï¼Œå³æœ´ç´ è´å¶æ–¯é‡‡ç”¨çš„åŸç†ã€‚</p><h2 id="å‚æ•°ä¼°è®¡"><a href="#å‚æ•°ä¼°è®¡" class="headerlink" title="å‚æ•°ä¼°è®¡"></a>å‚æ•°ä¼°è®¡</h2><h3 id="æå¤§ä¼¼ç„¶ä¼°è®¡"><a href="#æå¤§ä¼¼ç„¶ä¼°è®¡" class="headerlink" title="æå¤§ä¼¼ç„¶ä¼°è®¡"></a>æå¤§ä¼¼ç„¶ä¼°è®¡</h3><script type="math/tex; mode=display">P(Y = C_{k}) = \frac{ \sum_{i=1}^{N} I(y_i=C_k)}{N}</script><p>å…¶ä¸­ï¼Œ$I(y_i=c_k)$åˆ¤æ–­æ˜¯å¦å±äº$C_k$ç±»ï¼Œæ±‚å’Œåé™¤ä»¥æ€»æ•°Nä¾¿æ˜¯ç±»åˆ«$C_k$çš„å…ˆéªŒæ¦‚ç‡ã€‚</p><p>ç´§æ¥ç€è®¡ç®—æ¡ä»¶æ¦‚ç‡:</p><script type="math/tex; mode=display">P(X^{j}=a_{jl} \mid Y = c_k) = \frac{\sum_{i=1}^{N}I(x_i^{(j)}=a_{jl},y_i=c_k)}{\sum_{i=1}^{N}I(y_i=c_k)}</script><p>å…¶ä¸­ï¼Œ$x<em>i$ æ˜¯æ•°æ®é›†ï¼Œè€Œ $x_i^{(j)}$ æ˜¯æŒ‡ç¬¬ $i$ ä¸ªæ ·æœ¬çš„ç¬¬ $j$ ä¸ªç‰¹å¾ï¼Œ$a</em>{jl}$ æ˜¯ç¬¬ $ j$ ä¸ªç‰¹å¾å¯èƒ½å–çš„ç¬¬ $l$ ä¸ªå€¼ã€‚</p><p>è¿™æ ·æ¥è®¡ç®—ï¼š</p><script type="math/tex; mode=display">P(Y=c_k)\prod_{j=1}^{n}P(X^{(j)}=x^{(j)} \mid Y = c_k)</script><p>æœ€ååœ¨å–åéªŒæ¦‚ç‡æœ€å¤§å€¼å°±å¯ä»¥äº†ã€‚</p><h3 id="è´å¶æ–¯ä¼°è®¡"><a href="#è´å¶æ–¯ä¼°è®¡" class="headerlink" title="è´å¶æ–¯ä¼°è®¡"></a>è´å¶æ–¯ä¼°è®¡</h3><p>ç”¨æå¤§ä¼¼ç„¶ä¼°è®¡å¯èƒ½ä¼šå‡ºç°æ¦‚ç‡å€¼ä¸º0çš„æƒ…å†µï¼Œæ‰€ä»¥ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œå¼•å…¥ä¸€ä¸ªæ­£æ•° $\lambda$ï¼Œå˜ä¸º</p><script type="math/tex; mode=display">P(X^{j}=a_{jl} \mid Y = c_k) = \frac{\sum_{i=1}^{N}I(x_i^{(j)}=a_{jl},y_i=c_k)+\lambda}{\sum_{i=1}^{N}I(y_i=c_k)+S_j\lambda}</script><p>å½“$\lambda$ = 1æ—¶ï¼Œç§°ä¸ºæ‹‰æ™®æ‹‰æ–¯å¹³æ»‘(Laplacian smoothing)ï¼Œä¸€èˆ¬ä¹Ÿå–ä¸º1ã€‚</p><h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><p>å·¥å…·ç®±ä¸€èˆ¬æœ‰MultinomialNBï¼ŒBernoulliNB()ï¼Œå…¶ä¸­alphaå‚æ•°ä¾¿æ˜¯ä¸Šè¿°çš„$\lambda$ï¼Œä¸€èˆ¬å–<code>Î±=1.0</code>ã€‚GaussianNB()ï¼Œå…¶è‡ªåŠ¨é€šè¿‡é«˜æ–¯åˆ†å¸ƒæ¥ä¼°è®¡ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.naive_bayes <span class="keyword">import</span> MultinomialNB</span><br><span class="line"><span class="keyword">from</span> sklearn.datasets <span class="keyword">import</span> load_iris</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> accuracy_score</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿™é‡Œé€‰æ‹©ç»å…¸çš„irisæ•°æ®é›†</span></span><br><span class="line">data = load_iris()</span><br><span class="line">X = data.data</span><br><span class="line">y = data.target</span><br><span class="line"></span><br><span class="line">X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=<span class="number">0.3</span>, random_state=<span class="number">42</span>)</span><br><span class="line"></span><br><span class="line">model = MultinomialNB()</span><br><span class="line"></span><br><span class="line">model.fit(X_train, y_train)</span><br><span class="line"></span><br><span class="line">y_pred = model.predict(X_test)</span><br><span class="line"></span><br><span class="line">accuracy = accuracy_score(y_test, y_pred)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;Accuracy: <span class="subst">&#123;accuracy:<span class="number">.2</span>f&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æœ€åå‡†ç¡®ç‡ä¸º0.96ï¼Œè¿˜æ˜¯æ¯”è¾ƒé«˜çš„ã€‚</p><h2 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h2><p>å½“ç‰¹å¾åœ¨ç»™å®šç±»åˆ«çš„æ¡ä»¶ä¸‹è¿‘ä¼¼ç‹¬ç«‹æ—¶ï¼Œæœ´ç´ è´å¶æ–¯åˆ†ç±»å™¨çš„å‡è®¾è¾ƒä¸ºåˆç†ï¼Œå¦‚æœç‰¹å¾ä¹‹é—´æœ‰å¾ˆå¼ºçš„ç›¸å…³æ€§ï¼Œå­˜åœ¨å¼ºä¾èµ–å…³ç³»æˆ–äº¤äº’ä½œç”¨ï¼Œæœ´ç´ è´å¶æ–¯çš„å‡è®¾å¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚</p><p>å¦‚æœæ•°æ®ç‰¹å¾éå¸¸å¤æ‚ä¸”ä¸èƒ½è¢«ç®€å•çš„æ¡ä»¶ç‹¬ç«‹å‡è®¾æ•æ‰ï¼Œåˆ™éœ€è¦è€ƒè™‘å…¶ä»–æ›´å¤æ‚çš„æ¨¡å‹ï¼ˆå¦‚å†³ç­–æ ‘ã€éšæœºæ£®æ—ï¼‰ï¼Œæœ´ç´ è´å¶æ–¯åˆ†ç±»å™¨æœ€é€‚åˆé«˜ç»´ã€ç¨€ç–çš„ç¦»æ•£æ•°æ®ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> æœºå™¨å­¦ä¹  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>KNNç®—æ³•åŠå…¶å®ç°</title>
      <link href="/2024/07/27/KNN%E7%AE%97%E6%B3%95%E5%8F%8A%E5%85%B6%E5%AE%9E%E7%8E%B0/"/>
      <url>/2024/07/27/KNN%E7%AE%97%E6%B3%95%E5%8F%8A%E5%85%B6%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="KNNç®—æ³•"><a href="#KNNç®—æ³•" class="headerlink" title="KNNç®—æ³•"></a>KNNç®—æ³•</h1><p>Kè¿‘é‚»ç®—æ³• (K-nearest neighbor, K-NN)ï¼Œæ˜¯ä¸€ç§åŸºæœ¬çš„åˆ†ç±»ä¸å›å½’ç®—æ³•ï¼Œå…¶ä¸å…·æœ‰æ˜¾å¼çš„å­¦ä¹ è¿‡ç¨‹ï¼Œåˆ©ç”¨è®­ç»ƒæ•°æ®é›†å¯¹ç‰¹å¾å‘é‡ç©ºé—´è¿›è¡Œåˆ’åˆ†ï¼Œå¹¶ä½œä¸ºåˆ†ç±»çš„æ¨¡å‹ã€‚</p><h2 id="ç®—æ³•å®ç°"><a href="#ç®—æ³•å®ç°" class="headerlink" title="ç®—æ³•å®ç°"></a>ç®—æ³•å®ç°</h2><p>KNNé€šè¿‡ç»™å®šä¸€ä¸ªè®­ç»ƒæ•°æ®é›†ï¼Œå¯¹æ–°çš„è¾“å…¥å®ä¾‹ï¼Œåœ¨è®­ç»ƒæ•°æ®é›†ä¸­æ‰¾åˆ°ä¸å…¶æœ€é‚»è¿‘çš„kä¸ªå®ä¾‹ï¼Œå¦‚æœè¿™kä¸ªå®ä¾‹çš„å¤šæ•°å±äºæŸä¸ªç±»ï¼Œé‚£ä¹ˆå°±æŠŠè¿™ä¸ªæ–°è¾“å…¥çš„å®ä¾‹åˆ’åˆ†ä¸ºè¿™ä¸ªç±»ã€‚</p><p>é€šè¿‡ç»™å®šè¾“å…¥è®­ç»ƒæ•°æ®é›†:<em>T = {( (X1,Y1),(X2,Y2),(Xn,Yn) )}</em>ï¼Œæ¥è¾“å‡ºå®ä¾‹xæ‰€å±çš„ç±»yã€‚</p><ul><li>æ ¹æ®ç»™å®šçš„è·ç¦»é‡åº¦ï¼Œåœ¨è®­ç»ƒæ•°æ®é›†Tä¸­æ‰¾å‡ºä¸xæœ€è¿‘é‚»çš„kä¸ªç‚¹ï¼Œæ¶µç›–è¿™kä¸ªç‚¹çš„xé‚»åŸŸç§°ä¸ºNk(x)</li><li>åœ¨Nk(x)ä¸­æ ¹æ®åˆ†ç±»å†³ç­–è§„åˆ™æ¥å†³å®šxçš„ç±»åˆ«y</li></ul><p>å½“ k=1 æ—¶ï¼Œç§°ä¸ºæœ€è¿‘é‚»ç®—æ³•ã€‚</p><h2 id="æ¨¡å‹"><a href="#æ¨¡å‹" class="headerlink" title="æ¨¡å‹"></a>æ¨¡å‹</h2><p>æœ¬è´¨ä¸Šæ˜¯å¯¹è®­ç»ƒçš„ç‰¹å¾ç©ºé—´è¿›è¡Œåˆ’åˆ†ï¼Œå®šä¹‰æ¯ä¸ªè®­ç»ƒç‚¹<em>x_{i}</em>ï¼Œè·ç¦»è¯¥ç‚¹æ¯”å…¶ä»–ç‚¹æ›´è¿‘çš„æ‰€æœ‰ç‚¹ç»„æˆçš„ä¸€ä¸ªåŒºåŸŸå«åšå•å…ƒ(cell)ã€‚å¯¹äºç»™å®šæ–°çš„è¾“å…¥å®ä¾‹ç‚¹ï¼ŒkNNéƒ½èƒ½æ ¹æ®è§„åˆ™å’Œæ¨¡å‹æ¥å”¯ä¸€ç¡®å®šè¿™ä¸ªç‚¹æ‰€å±çš„ç±»ã€‚</p><h2 id="è·ç¦»é‡åº¦"><a href="#è·ç¦»é‡åº¦" class="headerlink" title="è·ç¦»é‡åº¦"></a>è·ç¦»é‡åº¦</h2><p>é‚£ä¹ˆå¦‚ä½•åŒºåˆ†ä¸¤ä¸ªå®ä¾‹ç‚¹ä¹‹é—´çš„ç›¸ä¼¼ç¨‹åº¦å‘¢ï¼Ÿè¿™é‡Œå¯ä»¥ç”¨å¤šä¸ªæ–¹æ³•ï¼Œæ¯”å¦‚Lpï¼ˆLp distance)è·ç¦»ä¸Minkowskiè·ç¦»ï¼Œä»¥ä¸‹æ˜¯Lpè·ç¦»çš„å…¬å¼ï¼š</p><script type="math/tex; mode=display">\begin{align*}L_p(\mathbf{x}, \mathbf{y}) = \left( \sum_{i=1}^n \left| x_i - y_i \right|^p \right)^{\frac{1}{p}}\end{align*}</script><ul><li>p = 2æ—¶ï¼Œç§°ä¸ºæ¬§æ°è·ç¦»(Euclidean distance)ï¼Œå¸¸ç”¨äºä¸€èˆ¬æƒ…å†µä¸‹åˆ†æä¸¤ç‚¹ä¹‹é—´çš„ç›¸ä¼¼ç¨‹åº¦ã€‚</li><li><p>p = 1æ—¶ï¼Œç§°ä¸ºæ›¼å“ˆé¡¿è·ç¦»(Manhatten distance)ï¼Œä¸€èˆ¬ç”¨äºåŸå¸‚è§„åˆ’ç­‰ã€‚</p></li><li><p>p = âˆæ—¶ï¼Œå®ƒæ˜¯å„ä¸ªåæ ‡è·ç¦»çš„æœ€å¤§å€¼ã€‚</p></li></ul><p>kå€¼çš„é€‰æ‹©ä¼šå¯¹ç»“æœäº§ç”Ÿé‡å¤§å½±å“ï¼Œå½“kå€¼é€‰æ‹©çš„è¾ƒå°ï¼Œå…¶è¿‘ä¼¼è¯¯å·®ä¼šå‡å°ï¼Œä½†æ˜¯ä¼°è®¡è¯¯å·®ä¼šå¢å¤§ï¼Œå…¶ä¼šå¯¼è‡´å¯¹è¿‘é‚»ç‚¹æ•æ„Ÿï¼Œæ‰€ä»¥å¦‚æœæ•°æ®é›†ä¸­å­˜åœ¨å™ªå£°ç‚¹ï¼Œä¼šå¯¹è¾“å‡ºç»“æœé€ æˆæå¤§å½±å“ï¼Œæ¨¡å‹ä¼šå˜å¾—å¤æ‚ä¸è¿‡æ‹Ÿåˆã€‚</p><p>å¦‚æœkå€¼é€‰æ‹©è¾ƒå¤§ï¼Œé‚£ä¹ˆè¿‘ä¼¼è¯¯å·®ä¼šå¢å¤§ï¼Œä¼°è®¡è¯¯å·®ä¼šå‡å°ï¼Œæ­¤æ—¶æ¨¡å‹ä¼šå˜å¾—ç®€å•ï¼Œè¾ƒè¿œçš„ç‚¹ä¹Ÿä¼šå¯¹åˆ†ç±»é€ æˆå½±å“ï¼Œ</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œkå€¼é€‰æ‹©è¾ƒå°çš„æ•°å€¼ã€‚ç”¨äº¤å‰éªŒè¯æ³•æ¥é€‰å–æœ€ä¼˜çš„å€¼ã€‚</p><h2 id="åˆ†ç±»å†³ç­–è§„åˆ™"><a href="#åˆ†ç±»å†³ç­–è§„åˆ™" class="headerlink" title="åˆ†ç±»å†³ç­–è§„åˆ™"></a>åˆ†ç±»å†³ç­–è§„åˆ™</h2><p>kè¿‘é‚»ä¸€èˆ¬é‡‡ç”¨å¤šæ•°è¡¨å†³ç­–ç•¥ï¼Œå¤šæ•°è¡¨å†³è§„åˆ™ç­‰ä»·äºç»éªŒé£é™©æœ€å°åŒ–ã€‚</p><h2 id="kdæ ‘"><a href="#kdæ ‘" class="headerlink" title="kdæ ‘"></a>kdæ ‘</h2><p>ä¸€èˆ¬æ¥è¯´ï¼Œè®­ç»ƒæ•°æ®å¯èƒ½è¿‡å¤§ï¼Œè€Œåˆä¸å¯èƒ½å¯¹æ¯ä¸€ä¸ªç‚¹è¿›è¡Œè·ç¦»çš„è®¡ç®—ï¼Œé‚£æ ·è®¡ç®—é‡ä¼šç‰¹åˆ«å¤§ï¼Œä¸ºäº†å‡å°‘è®¡ç®—é‡ï¼Œå¯ä»¥é‡‡ç”¨ç‰¹æ®Šçš„å­˜å‚¨ç»“æ„æ¥å­˜å‚¨è®­ç»ƒçš„æ•°æ®ï¼Œå…¶ä¸­ä¹‹ä¸€ä¾¿æ˜¯kdæ ‘ (kd tree) æ–¹æ³•ã€‚</p><h4 id="kdæ ‘çš„æ„å»º"><a href="#kdæ ‘çš„æ„å»º" class="headerlink" title="kdæ ‘çš„æ„å»º"></a>kdæ ‘çš„æ„å»º</h4><ul><li>é¦–å…ˆï¼Œé€‰æ‹©è½´ï¼Œå¦‚æœæ˜¯äºŒç»´å¹³é¢ï¼Œé‚£ä¹ˆç¬¬ä¸€å±‚ä½¿ç”¨Xè½´æ¥è¿›è¡Œæ•°æ®ç‚¹çš„åˆ†å‰²ï¼Œç¬¬äºŒå±‚ä½¿ç”¨Yè½´ï¼Œç„¶åå†å›åˆ°Xè½´ï¼Œä»¥æ­¤ç±»æ¨ã€‚</li><li>å…¶æ¬¡ï¼Œåœ¨æ¯ä¸€æ›¾ä¸Šé€‰æ‹©ä¸€ä¸ªç‚¹ä½œä¸ºåˆ†å‰²ç‚¹ï¼Œå¹¶å°†å…¶ä»–ç‚¹åˆ†ä¸ºä¸¤ä¸ªå­é›†ï¼Œè¿™é‡Œæœ‰ç‚¹ç±»ä¼¼äºäºŒåˆ†æŸ¥æ‰¾çš„æ€æƒ³ï¼Œå³ä¸ºäº†ä¿è¯æ ‘çš„å¹³è¡¡æ€§ï¼Œæˆ‘ä»¬ä¸€èˆ¬é€‰æ‹©è¿™ä¸€å±‚ä¸Šçš„ä¸­ä½ç‚¹ä½œä¸ºæ•°æ®åˆ†å‰²ç‚¹ã€‚</li><li>ç„¶åï¼Œå¯¹æ¯ä¸ªå­é›†è¿›è¡Œé‡å¤ä¸Šè¿°æ“ä½œï¼Œä¸æ–­åˆ†å‰²é€’å½’ï¼Œç›´è‡³æ¯ä¸ªå­é›†åªåŒ…å«ä¸€ä¸ªç‚¹æˆ–è¾¾åˆ°æŸä¸ªåœæ­¢æ¡ä»¶ã€‚</li></ul><h4 id="kdæ ‘çš„æŸ¥æ‰¾"><a href="#kdæ ‘çš„æŸ¥æ‰¾" class="headerlink" title="kdæ ‘çš„æŸ¥æ‰¾"></a>kdæ ‘çš„æŸ¥æ‰¾</h4><ul><li>å…ˆä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œæ£€æŸ¥åˆ†å‰²ç‚¹ä¸æŸ¥è¯¢ç‚¹çš„è·ç¦»ã€‚å¦‚æœæŸ¥è¯¢ç‚¹åœ¨åˆ†å‰²ç‚¹çš„å·¦ä¾§ï¼Œæˆ‘ä»¬é¦–å…ˆæœç´¢å·¦å­æ ‘ï¼Œå¦åˆ™æœç´¢å³å­æ ‘ã€‚</li><li>åœ¨æœç´¢è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬é€’å½’åœ°è®¿é—®å­æ ‘ï¼Œå¹¶è®¡ç®—æ¯ä¸ªç‚¹åˆ°æŸ¥è¯¢ç‚¹çš„è·ç¦»ã€‚æ¯æ¬¡è®¿é—®ä¸€ä¸ªèŠ‚ç‚¹æ—¶ï¼Œæˆ‘ä»¬ä¼šæ£€æŸ¥æ˜¯å¦æœ‰å¯èƒ½å­˜åœ¨æ¯”å½“å‰æ‰¾åˆ°çš„æœ€è¿‘é‚»æ›´æ¥è¿‘çš„ç‚¹ã€‚</li><li>åœ¨æœç´¢è¿‡ç¨‹å‰ªææ‰ä¸å¿…è¦çš„éƒ¨åˆ†ã€‚å¦‚æœæŸä¸ªå­æ ‘çš„åˆ†å‰²è¶…çƒä½“ä¸æŸ¥è¯¢ç‚¹çš„è·ç¦»å¤§äºå½“å‰å·²çŸ¥çš„æœ€è¿‘é‚»è·ç¦»ï¼Œä¾¿å¯ä»¥è·³è¿‡è¿™ä¸ªå­æ ‘çš„æœç´¢ï¼Œä»¥æ­¤åŠ é€ŸæŸ¥æ‰¾è¿‡ç¨‹ã€‚</li></ul><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">    <span class="built_in">D</span>(<span class="number">7</span>, <span class="number">7</span>)</span><br><span class="line">   / </span><br><span class="line">  <span class="selector-tag">B</span>(<span class="number">3</span>, <span class="number">5</span>)</span><br><span class="line"> / \</span><br><span class="line"><span class="selector-tag">A</span>(<span class="number">1</span>, <span class="number">2</span>) <span class="built_in">C</span>(<span class="number">4</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure><p>æ¯”å¦‚ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªè¾“å…¥ç‚¹E (5,5)ï¼Œç„¶åé€‰æ‹©D (7,7)ä½œä¸ºèµ·å§‹æ ¹ç»“ç‚¹ï¼Œå‘ç°Bç‚¹æ›´æ¥è¿‘Eç‚¹ï¼Œæ­¤æ—¶å°†æœ€è¿‘ç‚¹æ›´æ–°ä¸ºBï¼Œè¿™æ—¶å‘ç°Bç‚¹ç”Ÿæˆçš„å¶ç»“ç‚¹å°±åªå‰©Aä¸Cï¼Œå†å°†A,Cåˆ†åˆ«ä¸Då¯¹æ¯”ï¼Œæœ€ååˆ¤æ–­Dçš„ç±»,æ›´æ–°æœ€è¿‘é‚»ä¸º Cï¼Œå› ä¸º C æ¯” Bæ›´æ¥è¿‘ (5, 5)ã€‚</p><h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Sklearnå·¥å…·ç®±æ¥è°ƒç”¨knnç®—æ³•ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> sklearn.neighbors <span class="keyword">import</span> KNeighborsClassifier</span><br><span class="line"></span><br><span class="line">X = np.array([[<span class="number">1</span>, <span class="number">2</span>], [<span class="number">2</span>, <span class="number">3</span>], [<span class="number">3</span>, <span class="number">4</span>], [<span class="number">5</span>, <span class="number">5</span>], [<span class="number">6</span>, <span class="number">6</span>]])</span><br><span class="line">y = np.array([<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># k=3</span></span><br><span class="line">knn = KNeighborsClassifier(n_neighbors=<span class="number">3</span>)</span><br><span class="line">knn.fit(X, y)</span><br><span class="line"></span><br><span class="line">test_points = np.array([[<span class="number">4</span>, <span class="number">4</span>]])</span><br><span class="line">predictions = knn.predict(test_points)</span><br><span class="line"></span><br><span class="line">plt.figure(figsize=(<span class="number">8</span>, <span class="number">6</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i, point <span class="keyword">in</span> <span class="built_in">enumerate</span>(X):</span><br><span class="line">    plt.scatter(point[<span class="number">0</span>], point[<span class="number">1</span>], c=<span class="string">&#x27;red&#x27;</span> <span class="keyword">if</span> y[i] == <span class="number">0</span> <span class="keyword">else</span> <span class="string">&#x27;blue&#x27;</span>, label=<span class="string">f&#x27;Class <span class="subst">&#123;y[i]&#125;</span>&#x27;</span> <span class="keyword">if</span> i == <span class="number">0</span> <span class="keyword">else</span> <span class="string">&quot;&quot;</span>)</span><br><span class="line">    </span><br><span class="line"><span class="keyword">for</span> i, point <span class="keyword">in</span> <span class="built_in">enumerate</span>(test_points):</span><br><span class="line">    plt.scatter(point[<span class="number">0</span>], point[<span class="number">1</span>], c=<span class="string">&#x27;green&#x27;</span>, marker=<span class="string">&#x27;x&#x27;</span>, s=<span class="number">100</span>, label=<span class="string">&#x27;Test Point&#x27;</span> <span class="keyword">if</span> i == <span class="number">0</span> <span class="keyword">else</span> <span class="string">&quot;&quot;</span>)</span><br><span class="line">    plt.text(point[<span class="number">0</span>] + <span class="number">0.1</span>, point[<span class="number">1</span>], <span class="string">f&#x27;Prediction: <span class="subst">&#123;predictions[i]&#125;</span>&#x27;</span>, fontsize=<span class="number">12</span>)</span><br><span class="line"></span><br><span class="line">plt.xlabel(<span class="string">&#x27;Feature 1&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;Feature 2&#x27;</span>)</span><br><span class="line">plt.legend()</span><br><span class="line">plt.title(<span class="string">&#x27;kNN Classification with scikit-learn&#x27;</span>)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥æ ¹æ®åŸç†æ¥å†™ä¸€ä¸‹å†…éƒ¨ä»£ç æ˜¯ä»€ä¹ˆæ ·çš„ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¡ç®—æ¬§æ°è·ç¦»</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">euclidean_distance</span>(<span class="params">point1, point2</span>):</span><br><span class="line">    <span class="keyword">return</span> np.sqrt(np.<span class="built_in">sum</span>((point1 - point2) ** <span class="number">2</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">k_nearest_neighbors</span>(<span class="params">X, y, test_point, k=<span class="number">3</span></span>):</span><br><span class="line">    distances = [euclidean_distance(x, test_point) <span class="keyword">for</span> x <span class="keyword">in</span> X]</span><br><span class="line">    k_indices = np.argsort(distances)[:k]</span><br><span class="line">    k_nearest_labels = [y[i] <span class="keyword">for</span> i <span class="keyword">in</span> k_indices]</span><br><span class="line">    most_common = Counter(k_nearest_labels).most_common(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> most_common[<span class="number">0</span>][<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">X = np.array([[<span class="number">1</span>, <span class="number">2</span>], [<span class="number">2</span>, <span class="number">3</span>], [<span class="number">3</span>, <span class="number">4</span>], [<span class="number">5</span>, <span class="number">5</span>], [<span class="number">6</span>, <span class="number">6</span>]])</span><br><span class="line">y = np.array([<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">test_points = np.array([[<span class="number">4</span>, <span class="number">4</span>]])</span><br><span class="line">predictions = [k_nearest_neighbors(X, y, tp, k=<span class="number">3</span>) <span class="keyword">for</span> tp <span class="keyword">in</span> test_points]</span><br></pre></td></tr></table></figure><h2 id="å¯æ”¹è¿›ç‚¹"><a href="#å¯æ”¹è¿›ç‚¹" class="headerlink" title="å¯æ”¹è¿›ç‚¹"></a>å¯æ”¹è¿›ç‚¹</h2><p>æ¯”å¦‚è¿›è¡Œå…·ä½“çš„è·ç¦»è§„åˆ’ï¼Œè€Œä¸æ˜¯ç»Ÿä¸€çš„ç®€å•çš„æ¬§å¼è·ç¦»ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> æœºå™¨å­¦ä¹  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RNNä¸LSTMåŸç†åŠä»£ç å®ç°</title>
      <link href="/2024/07/08/RNN-%E5%BE%AA%E7%8E%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C-%E5%8E%9F%E7%90%86%E5%8F%8A%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0/"/>
      <url>/2024/07/08/RNN-%E5%BE%AA%E7%8E%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C-%E5%8E%9F%E7%90%86%E5%8F%8A%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="RNNä¸LSTM"><a href="#RNNä¸LSTM" class="headerlink" title="RNNä¸LSTM"></a>RNNä¸LSTM</h1><h2 id="ä¸€ä¸ªå…³äºRNNç”±æ¥çš„ä¾‹å­"><a href="#ä¸€ä¸ªå…³äºRNNç”±æ¥çš„ä¾‹å­" class="headerlink" title="ä¸€ä¸ªå…³äºRNNç”±æ¥çš„ä¾‹å­"></a>ä¸€ä¸ªå…³äºRNNç”±æ¥çš„ä¾‹å­</h2><p><img src="imgs\image-20240708212505196.png" alt="image-20240708212505196"></p><p>å¦‚æœæƒ³è§£å†³è¯æ±‡ç¼–ç çš„é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡Word hashingæ¥è¡¨ç¤ºã€‚</p><p><img src="imgs\image-20240708212659170.png" alt="image-20240708212659170"></p><p>å¯¹äºç®€å•çš„è¿™ç§ç½‘ç»œï¼Œåªèƒ½ç®€å•è¯†åˆ«å‡ºTaipeiæ˜¯ç›®çš„åœ°æˆ–æ˜¯å‡ºå‘åœ°ï¼Œè€Œä¸æ˜¯ç²¾å‡†çš„åˆ¤æ–­Taipeiåˆ°åº•æ˜¯å‡ºå‘åœ°è¿˜æ˜¯ç›®çš„åœ°ï¼Œå¯¹äºleaveå’Œarriveè¿™ä¸¤ä¸ªè¯è¢«åˆ’åˆ†åˆ°äº†â€™otherâ€™ç»´åº¦ï¼Œæ‰€ä»¥æƒ³è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°±éœ€è¦ä¸€ä¸ªæœ‰è®°å¿†åŠ›çš„ç¥ç»ç½‘ç»œï¼Œè¿™å°±æ˜¯Recurrent Neural Network(RNN)ã€‚</p><h2 id="å®ç°åŸç†"><a href="#å®ç°åŸç†" class="headerlink" title="å®ç°åŸç†"></a>å®ç°åŸç†</h2><p><img src="imgs\image-20240708213056663.png" alt="image-20240708213056663"></p><p>é‚£ä¹ˆï¼Œéœ€è¦åˆ›å»ºæ–°çš„a1ä¸a2ï¼Œæ¥åˆ†åˆ«å­˜å‚¨hidden layerçš„outputï¼Œå¹¶ä¸”ï¼Œä¸‹ä¸€æ¬¡hidden layerçš„inputä¸å…‰æ˜¯x1å’Œx2çš„è¾“å…¥ï¼Œè¿˜åŒ…æ‹¬a1å’Œa2çš„è¾“å…¥ã€‚</p><p><img src="imgs\image-20240708213531877.png" alt="image-20240708213531877"></p><p>è¿™æ ·çš„è¯ï¼Œå°±å¯ä»¥å®ç°ä¸€æ•´ä¸ªè¯­å¥çš„è¾“å…¥äº†ã€‚</p><p><img src="imgs\image-20240708213742365.png" alt="image-20240708213742365"></p><p>å½“ç„¶ä¹Ÿå¯ä»¥å®ç°æ›´æ·±çš„RNNã€‚</p><p><img src="imgs\image-20240708213814636.png" alt="image-20240708213814636"></p><p>å¦å¤–è¿˜æœ‰ä¸¤ç§Networkï¼Œä¸€ä¸ªæ˜¯Elman Networkå’ŒJordan Networkï¼ŒJordan Networkæ˜¯æ ¹æ®å‰ä¸€ä¸ªçš„æœ€åè¾“å‡ºæ¥è¿›è¡Œå­˜å‚¨ã€‚</p><p><img src="imgs\image-20240708214010297.png" alt="image-20240708214010297"></p><p>æ­¤å¤–è¿˜æœ‰åŒå‘çš„RNNï¼Œå³è€ƒè™‘äº†æ­£å‘å’Œåå‘ï¼Œå¹¶å°†ä¸¤è€…çš„outputè¾“å‡ºï¼Œå¾—åˆ°Yt,è¿™æ ·çš„è¯èŒƒå›´æ›´å¹¿ã€‚</p><p><img src="imgs\image-20240708214359660.png" alt="image-20240708214359660"></p><p>LSTMï¼ˆLong short-term Memoryï¼‰åˆ™æ˜¯ä¸€ä¸ªæ›´åŠ å¤æ‚çš„RNNï¼Œå…¶ä¸­æœ‰å››ä¸ªinputå’Œä¸€ä¸ªoutputï¼Œåˆ†åˆ«æœ‰è¾“å‡ºé—¨ï¼Œè¾“å…¥é—¨å’Œé—å¿˜é—¨æ¥æ§åˆ¶ä¿¡å·æ˜¯å¦è¾“å…¥ã€‚</p><p><img src="imgs\image-20240708215757390.png" alt="image-20240708215757390"></p><p>å¯¹äºä¸Šé¢çš„æµç¨‹ï¼Œå…ˆå¯¹zä¿¡æ¯è¾“å…¥ï¼Œç»è¿‡simoid functionå¾—åˆ°g(z)ï¼Œç„¶åä¸Input Gateè¾“å‡ºçš„f(zi)ç›¸ä¹˜ï¼Œå¾—åˆ°g(z)f(zi)ï¼Œä¸­é—´Cellå­˜å‚¨çš„åˆå€¼ä¸ºcï¼Œå†ç»è¿‡Forget Gateçš„è¾“å‡ºåï¼Œç›¸ä¹˜å¾—åˆ°cf(zf)ï¼Œè¿™æ ·ä¸å‰é¢çš„å€¼ç›¸åŠ ï¼Œå¾—åˆ°c`ï¼Œæ¥ç€å†é€šè¿‡sigmoid functionï¼Œè¾“å‡ºç»“æœä¸Output Gateçš„è¾“å‡ºç›¸ä¹˜ï¼Œå¾—åˆ°Î±ã€‚</p><p><img src="imgs\image-20240708220212126.png" alt="image-20240708220212126"></p><p>è¿™æ˜¯ä¸€ä¸ªç®€çŸ­çš„ä¸¾ä¾‹ï¼Œå¦‚æœx2=1ï¼Œé‚£ä¹ˆå°†x1çš„å€¼æ·»åŠ åˆ°Memoryä¸­ï¼Œè‹¥x2=-1ï¼Œåˆ™é‡Šæ”¾æ‰Memoryï¼Œå¦‚æœx3=1ï¼Œé‚£ä¹ˆå°†Memoryä¸­å‚¨å­˜çš„å€¼è¾“å‡ºå‡ºæ¥ï¼Œå¯ä»¥çœ‹åˆ°3+4=7ã€‚</p><h2 id="å…·ä½“è®¡ç®—è¿‡ç¨‹"><a href="#å…·ä½“è®¡ç®—è¿‡ç¨‹" class="headerlink" title="å…·ä½“è®¡ç®—è¿‡ç¨‹"></a>å…·ä½“è®¡ç®—è¿‡ç¨‹</h2><p><img src="imgs\image-20240708220653433.png" alt="image-20240708220653433"></p><p>è¿™ä¸ªæ˜¯LSTMä¸€ä¸ªCellçš„æœ€åˆå½¢æ€ï¼Œå³x1,x2,x3å’Œbiasä¸º1çš„è¾“å…¥ï¼Œé‚£ä¹ˆå¯¹äºå³ä¸‹è§’çš„åºåˆ—è¾“å…¥ï¼Œå¯å…·ä½“å±•ç¤ºä¸ºä»¥ä¸‹è¿‡ç¨‹ï¼š</p><p><img src="imgs\image-20240708222500230.png" alt="image-20240708222500230"></p><p>é¦–å…ˆè¾“å…¥åºåˆ—ä¸º3ï¼Œ1ï¼Œ0ï¼Œè®¡ç®—è¿‡ç¨‹å¦‚å›¾æ‰€ç¤ºï¼ŒInput Gateçš„ä¿¡å·æœ€åè¾“å‡ºä¸º1ï¼Œè¿™æ ·çš„è¯ä¸3ç›¸ä¹˜åç»“æœä¾æ—§ä¸º3ï¼Œå®ç°äº†è¾“å…¥é—¨çš„ä½¿èƒ½åŠŸèƒ½ï¼Œæ¥ç€ï¼ŒForget Gateä¹Ÿè¾“å‡º1ï¼Œä»£è¡¨æ²¡æœ‰é—å¿˜ï¼Œæœ€åä¸åŸcellä¸­çš„å€¼ç›¸åŠ åï¼Œå¾—åˆ°3ï¼Œæœ€åçš„Output Gateä¸º0ï¼Œä»£è¡¨è¾“å‡ºä¿¡å·ç¦æ­¢é€‰é€šï¼Œæœ€åå®é™…è¾“å‡º0ï¼Œä½†æ˜¯cellçš„å€¼å·²ç»ä»0å˜åŒ–åˆ°äº†3ï¼Œåé¢çš„æ­¥éª¤ä¾æ¬¡ç±»æ¨ã€‚</p><p><img src="imgs\image-20240708222947885.png" alt="image-20240708222947885"></p><p><img src="imgs\image-20240708223017862.png" alt="image-20240708223017862"></p><p><img src="imgs\image-20240708223035398.png" alt="image-20240708223035398"></p><p><img src="imgs\image-20240708223056973.png" alt="image-20240708223056973"></p><h2 id="æ€»ä½“å±•ç¤º"><a href="#æ€»ä½“å±•ç¤º" class="headerlink" title="æ€»ä½“å±•ç¤º"></a>æ€»ä½“å±•ç¤º</h2><p><img src="imgs\image-20240708221858291.png" alt="image-20240708221858291"></p><p><img src="imgs\image-20240708221935324.png" alt="image-20240708221935324"></p><p>è¿™æ ·çš„è¯å°±å¯ä»¥å®ç°LSTMï¼Œå°†ä¸Šä¸€ä¸ªçš„è¾“å‡ºæ¥åˆ°ä¸‹ä¸€ä¸ªçš„è¾“å…¥ï¼ŒåŒæ—¶è€ƒè™‘Xtä¿¡æ¯ä¸­çš„é—¨æ§ä¿¡å·å’Œé”å­˜ä¿¡å·ï¼Œç±»ä¼¼äºæ—¶åºé€»è¾‘ç”µè·¯ã€‚</p><p><img src="imgs\image-20240708222110442.png" alt="image-20240708222110442"></p><p><img src="imgs\image-20240708222221308.png" alt="image-20240708222221308"></p><p>ä»¥ä¸Šæ˜¯LSTMå¹¶è”çš„å®Œæ•´ä½“ï¼Œå³è¾“å…¥ä¿¡æ¯è¿˜é¢å¤–åŒ…æ‹¬äº†Cä¸Hä¿¡æ¯ï¼Œä¹Ÿå«peepholeã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è‡ªæ³¨æ„åŠ›æœºåˆ¶(Self-Attention)</title>
      <link href="/2024/07/08/%E8%87%AA%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6-Self-Attention/"/>
      <url>/2024/07/08/%E8%87%AA%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6-Self-Attention/</url>
      
        <content type="html"><![CDATA[<h1 id="è‡ªæ³¨æ„åŠ›æœºåˆ¶-Self-Attention"><a href="#è‡ªæ³¨æ„åŠ›æœºåˆ¶-Self-Attention" class="headerlink" title="è‡ªæ³¨æ„åŠ›æœºåˆ¶(Self-Attention)"></a>è‡ªæ³¨æ„åŠ›æœºåˆ¶(Self-Attention)</h1><p>è¯¥ç¬”è®°çš„èµ„æ–™ä¸å›¾ç‰‡æ¥æºäºå°æ¹¾å¤§å­¦æå®æ¯…æ•™æˆçš„æœºå™¨å­¦ä¹ è¯¾ç¨‹ã€‚</p><h2 id="åŸç†è®²è§£"><a href="#åŸç†è®²è§£" class="headerlink" title="åŸç†è®²è§£"></a>åŸç†è®²è§£</h2><p>è‡ªæ³¨æ„åŠ›æœºåˆ¶åº”ç”¨äºå¤šä¸ªå‘é‡è¾“å…¥å¹¶è¾“å‡ºä¿¡æ¯ã€‚</p><p><img src="D:\BlogFile\source\_posts\è‡ªæ³¨æ„åŠ›æœºåˆ¶-Self-Attention.assets\b252ecea4d2f109cef89a77069faf61d.png" alt="b252ecea4d2f109cef89a77069faf61d"></p><p>æ¯”å¦‚æœ‰è¯­éŸ³è¾¨è¯†åœºæ™¯ï¼Œæ–‡å­—èŠå¤©ï¼ŒGraphå›¾ç­‰åœºæ™¯ï¼Œä¸€èˆ¬æ¥è¯´å¯¹äºè¯ä¹‰è¡¨ç¤ºæœ‰One-Hot Encodingï¼ˆç‹¬çƒ­ç¼–ç )æˆ–æ˜¯Word Embeddingï¼Œå¯¹äºè¯­éŸ³è¾¨è¯†åˆ™æœ‰frameæ»‘åŠ¨ã€‚</p><p>å¯¹äºè¾“å‡ºè€Œè¨€ï¼Œåˆ™æœ‰ä»¥ä¸‹å‡ ç§åœºæ™¯ï¼š</p><ul><li>è¾“å…¥çš„inputæ•°é‡å’Œè¾“å‡ºçš„outputæ•°é‡ç›¸åŒï¼Œæ¯”å¦‚è¯´POS tagging(è¯æ€§æ ‡æ³¨)ï¼ŒSocial Networkç­‰</li></ul><p><img src="D:\BlogFile\source\_posts\è‡ªæ³¨æ„åŠ›æœºåˆ¶-Self-Attention.assets\bfda8ed45180b27278da3bac1be3e5ec.png" alt="bfda8ed45180b27278da3bac1be3e5ec"></p><ul><li>Modelä»…è¾“å‡ºä¸€ä¸ªlabelï¼Œæ¯”å¦‚Sentiment Analysis(æƒ…æ„Ÿåˆ†æ)</li></ul><p><img src="D:\BlogFile\source\_posts\è‡ªæ³¨æ„åŠ›æœºåˆ¶-Self-Attention.assets\519dc35935218cfa1aab2922b9c1d566.png" alt="519dc35935218cfa1aab2922b9c1d566"></p><ul><li><p>æœºå™¨è‡ªå·±å†³å®šè¾“å‡ºçš„outputæ•°é‡ï¼Œåˆå«Seq2Seqä»»åŠ¡</p><p><img src="D:\BlogFile\source\_posts\è‡ªæ³¨æ„åŠ›æœºåˆ¶-Self-Attention.assets\fc0e73b3b63ab324047ee54838ffa6b8.png" alt="fc0e73b3b63ab324047ee54838ffa6b8"></p></li></ul><p>å¯¹äºä»¥å¾€çš„æƒ…å†µï¼Œè‹¥æ˜¯ç›´æ¥è¿ç”¨Fully connected networkï¼Œåˆ™ä¼šå‡ºç°è¾“å…¥ä¿¡æ¯æ— é¡ºåºæ€§çš„æƒ…å†µï¼Œè¿™ç§æƒ…å†µå°±ä¸èƒ½è¿ç”¨æœ‰é¡ºåºçš„ä¿¡æ¯ï¼Œå¦‚è¯­å¥ã€æ—¶åºä¿¡æ¯ç­‰ï¼Œ</p><p><img src="D:\BlogFile\source\_posts\è‡ªæ³¨æ„åŠ›æœºåˆ¶-Self-Attention.assets\image-20240708203700532.png" alt="image-20240708203700532"></p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåœ¨Fully connected networkå‰é¢åŠ å…¥ä¸€ä¸ªSelf-attentionæœºåˆ¶ï¼Œè¿™æ ·å°±å¯ä»¥è€ƒè™‘è¾“å…¥ä¿¡å·çš„Sequenceè¿è´¯æ€§ï¼Œä¸æ˜¯ä¿¡æ¯çš„å±€éƒ¨æ€§è€Œæ˜¯æ•´ä½“æ€§ã€‚è€Œä¸”Self-attentionæ¨¡å—å¹¶ä¸ä»…ä»…åªèƒ½åŠ å…¥åˆ°æ•´ä¸ªæ¨¡å‹çš„æœ€å‰æ–¹ï¼Œåœ¨FCä¸FCä¹‹é—´ä¹Ÿå¯ä»¥æ·»åŠ ã€‚</p><p><img src="D:\BlogFile\source\_posts\è‡ªæ³¨æ„åŠ›æœºåˆ¶-Self-Attention.assets\image-20240708204027574.png" alt="image-20240708204027574"></p><p>å¦‚å›¾ï¼Œè¿™æ˜¯Self-attentionå†…éƒ¨çš„ç®€å•å®ç°ï¼Œè¿™æ ·å°±å¯ä»¥è€ƒè™‘æ•´ä¸ªSequenceæ¥è¾“å‡ºä¸€ä¸ªSequenceã€‚</p><p><img src="D:\BlogFile\source\_posts\è‡ªæ³¨æ„åŠ›æœºåˆ¶-Self-Attention.assets\image-20240708204208371.png" alt="image-20240708204208371"></p><p>è‹¥æƒ³å¾—åˆ°è¾“å‡ºçš„ä¿¡æ¯ï¼Œå¦‚b1å‘é‡ï¼Œéœ€è¦æ‰¾å‡ºa1å’Œå…¶ä»–å“ªäº›ä¿¡æ¯æ˜¯ç›¸å…³çš„ï¼Œç›¸å…³çš„ç¨‹åº¦Î±å¤§å°æ˜¯å¤šå°‘ã€‚</p><p>è®¡ç®—ç›¸å…³åº¦çš„æ–¹æ³•ï¼Œå¯ä»¥ç”±ä»¥ä¸‹æ¨¡å—æ¥å®ç°</p><p><img src="D:\BlogFile\source\_posts\è‡ªæ³¨æ„åŠ›æœºåˆ¶-Self-Attention.assets\image-20240708204430516.png" alt="image-20240708204430516"></p><p>å·¦é¢æ˜¯æœ€å¸¸ç”¨çš„æ–¹æ³•ï¼Œå¯¹äºä¸¤ä¸ªè¾“å…¥ä¿¡æ¯ï¼Œåˆ†åˆ«è¿›è¡ŒWqä¸Wkçš„çŸ©é˜µç›¸ä¹˜ï¼Œå¾—åˆ°qä¸kï¼Œå†è¿›è¡Œç‚¹ä¹˜ï¼Œå¾—åˆ°Î±ï¼Œå³è¾¹åˆ™å°†ä¸¤ä¸ªçŸ©é˜µç›¸ä¹˜çš„ç»“æœè¿›è¡Œç›¸åŠ åæ”¾å…¥åˆ°tanhå‡½æ•°ä¸­ï¼Œæ¥ä¸WçŸ©é˜µç›¸ä¹˜å¾—åˆ°Î±ã€‚</p><p><img src="D:\BlogFile\source\_posts\è‡ªæ³¨æ„åŠ›æœºåˆ¶-Self-Attention.assets\image-20240708204818516.png" alt="image-20240708204818516"></p><p>dot-productä¸­çš„queryå’Œkeyæ˜¯é€šè¿‡å°†a1å’ŒWqç›¸ä¹˜ï¼Œå¾—åˆ°q1ï¼ŒWkå’Œa2ç›¸ä¹˜å¾—åˆ°k2ï¼Œå†è®©q1å’Œk2ç‚¹ä¹˜å¾—åˆ°Î±1,2ï¼ˆå«åšattention scoreï¼‰ï¼Œæœ€åå†æ¥ä¸€ä¸ªsoftmaxæ¨¡å—æ¥æ ‡å‡†åŒ–å¾—åˆ°Î±`ï¼Œä½†æ˜¯softmaxæ¨¡å—å¹¶ä¸æ˜¯å¿…é¡»çš„ï¼Œä¹Ÿå¯ä»¥æ¥Reluç­‰ã€‚</p><p><img src="D:\BlogFile\source\_posts\è‡ªæ³¨æ„åŠ›æœºåˆ¶-Self-Attention.assets\image-20240708205229517.png" alt="image-20240708205229517"></p><p>ä¸ºäº†æå–å‡ºç›¸å…³æ€§ï¼Œå†å°†aä¸Wvç›¸ä¹˜ï¼Œå¾—åˆ°vä¿¡æ¯ï¼Œç„¶åå†å°†vä¸Î±ç›¸ä¹˜å†ç›¸åŠ ï¼Œå¾—åˆ°bä¿¡æ¯ã€‚</p><p><img src="D:\BlogFile\source\_posts\è‡ªæ³¨æ„åŠ›æœºåˆ¶-Self-Attention.assets\image-20240708205419310.png" alt="image-20240708205419310"></p><p>å¯¹äºb1ï¼Œb2ï¼Œb3ç­‰ä¿¡æ¯ï¼Œå®ƒä»¬æ˜¯å¹¶è¡Œè¾“å‡ºçš„ï¼Œæ•…æ²¡æœ‰å…ˆåçš„é¡ºåºæ€§ã€‚</p><p><img src="D:\BlogFile\source\_posts\è‡ªæ³¨æ„åŠ›æœºåˆ¶-Self-Attention.assets\image-20240708205850709.png" alt="image-20240708205850709"></p><p>æ ¹æ®qï¼Œkï¼Œvçš„è®¡ç®—å…¬å¼ï¼Œå°†å…¶æ•´åˆä¸ºä¸€ä¸ªçŸ©é˜µï¼Œå¾—åˆ°Qï¼ŒKï¼ŒVçŸ©é˜µï¼Œ</p><p><img src="D:\BlogFile\source\_posts\è‡ªæ³¨æ„åŠ›æœºåˆ¶-Self-Attention.assets\image-20240708210101186.png" alt="image-20240708210101186"></p><p>æ¥ç€å°†KçŸ©é˜µè½¬ç½®åä¸Qç›¸ä¹˜ï¼Œå¾—åˆ°åˆ†æ•°çŸ©é˜µAï¼Œå†è¿›è¡Œsoftmaxå¾—åˆ°A`ã€‚</p><p><img src="D:\BlogFile\source\_posts\è‡ªæ³¨æ„åŠ›æœºåˆ¶-Self-Attention.assets\image-20240708210238361.png" alt="image-20240708210238361"></p><p>å†å°†VçŸ©é˜µå’ŒA`çŸ©é˜µç›¸ä¹˜ï¼Œæœ€åå¾—åˆ°OçŸ©é˜µï¼Œè¿™æ ·å°±å¾—åˆ°äº†bä¿¡æ¯çš„è¾“å‡ºäº†ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­çš„WçŸ©é˜µæ˜¯æ¨¡å‹è®­ç»ƒå¾—åˆ°çš„ã€‚</p><p><img src="D:\BlogFile\source\_posts\è‡ªæ³¨æ„åŠ›æœºåˆ¶-Self-Attention.assets\image-20240708210557402.png" alt="image-20240708210557402"></p><p>å¯¹äºMulti-head Self-attentionçš„è¯ï¼Œåˆ™éœ€è¦æ›´å¤šçš„qkvæ¥è¡¨ç¤ºæ–°çš„ç§ç±»ã€‚</p><p>ä½†æ˜¯ä»¥ä¸Šè¿™ç§æ–¹å¼ä¹Ÿç¼ºå°‘äº†ä½ç½®ä¿¡æ¯ï¼Œæ•…é‡‡ç”¨Postional Encodingæ–¹æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå³å‘aä¿¡æ¯ä¸Šæ·»åŠ eä¿¡æ¯ã€‚</p><p><img src="D:\BlogFile\source\_posts\è‡ªæ³¨æ„åŠ›æœºåˆ¶-Self-Attention.assets\image-20240708211233152.png" alt="image-20240708211233152"></p><p>å¯¹äºè¯­éŸ³è¾¨è¯†æ—¶ï¼Œå¯èƒ½æœ‰æ—¶å€™ä¸éœ€è¦è€ƒè™‘æ•´ä¸ªå£°éŸ³ä¿¡å·ï¼Œåªéœ€è¦è€ƒè™‘ä¸€éƒ¨åˆ†ï¼Œè¿™æ ·å¯ä»¥å‡å°‘è®¡ç®—é‡ï¼Œå«åšTruncated Self-attentionï¼Œä¸€èˆ¬æ¥è¯´Self-attentionå¹¿æ³›åº”ç”¨åœ¨Transformerå’ŒBertä¸Šã€‚</p><p>Self-attentionå’ŒCNNä¹‹é—´ä¹Ÿæœ‰ä¸€äº›åŒºåˆ«ï¼ŒCNNçš„receptive fieldæ˜¯éƒ¨åˆ†èŒƒå›´çš„ï¼Œè€ŒSelf-attentionæ˜¯æ•´ä½“çš„ï¼Œå¯ä»¥è¯´CNNæ˜¯ç®€åŒ–ç‰ˆçš„Self-attentionï¼Œæˆ–è€…è¯´Self-attentionæ˜¯å¤æ‚ç‰ˆçš„CNNã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CNNå·ç§¯ç¥ç»ç½‘ç»œ</title>
      <link href="/2024/07/05/CNN%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/"/>
      <url>/2024/07/05/CNN%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/</url>
      
        <content type="html"><![CDATA[<h1 id="CNNç¥ç»ç½‘ç»œ"><a href="#CNNç¥ç»ç½‘ç»œ" class="headerlink" title="CNNç¥ç»ç½‘ç»œ"></a>CNNç¥ç»ç½‘ç»œ</h1><h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><h3 id="ç›¸å…³åŒ…çš„å¯¼å…¥"><a href="#ç›¸å…³åŒ…çš„å¯¼å…¥" class="headerlink" title="ç›¸å…³åŒ…çš„å¯¼å…¥"></a>ç›¸å…³åŒ…çš„å¯¼å…¥</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"><span class="keyword">import</span> torchvision.transforms <span class="keyword">as</span> transforms</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">from</span> torch.utils.data <span class="keyword">import</span> ConcatDataset, DataLoader, Subset, Dataset</span><br><span class="line"><span class="keyword">from</span> torchvision.datasets <span class="keyword">import</span> DatasetFolder, VisionDataset</span><br><span class="line"><span class="keyword">from</span> tqdm.auto <span class="keyword">import</span> tqdm</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line">myseed = <span class="number">6666</span></span><br></pre></td></tr></table></figure><p>å¯¼å…¥ç»å…¸çš„æ•°æ®åˆ†æåŒ…ã€‚torchåŒ…çš„æ•´ä½“å¯¼å…¥ï¼Œå¹¶ä¸”å¯¼å…¥nnæ¨¡å—ä¸ä¼˜åŒ–å™¨ï¼Œå¯¼å…¥dataç±»ï¼Œå¹¶è®¾ç½®ç§å­ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">test_tfm = transforms.Compose([</span><br><span class="line">    transforms.Resize((<span class="number">128</span>, <span class="number">128</span>)),</span><br><span class="line">    transforms.ToTensor(),</span><br><span class="line">])</span><br></pre></td></tr></table></figure><p>æ„å»º<code>test_tfm()</code>ï¼Œå…¶æ˜¯ä¸€ä¸ªtransformçš„ç»„åˆç»“æ„ï¼ŒåŒ…æ‹¬å°†å›¾ç‰‡å¤§å°å¼ºåˆ¶è½¬æ¢ä¸º128*128ï¼ŒåŒæ—¶å°†å›¾åƒçš„é€šé“é¡ºåºä» HWCï¼ˆé«˜åº¦ã€å®½åº¦ã€é€šé“ï¼‰è½¬æ¢ä¸º CHWï¼ˆé€šé“ã€é«˜åº¦ã€å®½åº¦ï¼‰ï¼Œå˜ä¸ºtensorå¼ é‡ç±»å‹ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">train_tfm = transforms.Compose([</span><br><span class="line">    transforms.Resize((<span class="number">128</span>, <span class="number">128</span>)),</span><br><span class="line">     transforms.RandomChoice(transforms=[</span><br><span class="line">        transforms.TrivialAugmentWide(),</span><br><span class="line">        transforms.Lambda(<span class="keyword">lambda</span> x: x),</span><br><span class="line">    ],</span><br><span class="line">                            p=[<span class="number">0.9</span>, <span class="number">0.1</span>]),</span><br><span class="line">    transforms.ToTensor(),</span><br><span class="line">])</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>transforms.TrivialAugmentWide()</code>ï¼šä½¿ç”¨ TrivialAugmentWide æ–¹æ³•å¯¹å›¾åƒè¿›è¡Œæ•°æ®å¢å¼ºã€‚è¿™ç§æ–¹æ³•ä¼šéšæœºåº”ç”¨å„ç§å›¾åƒå¢å¼ºæ“ä½œï¼Œå¦‚æ—‹è½¬ã€ç¿»è½¬ã€é¢œè‰²è°ƒæ•´ç­‰ã€‚<code>transforms.Lambda(lambda x: x)</code>ï¼šè¿”å›åŸå§‹å›¾åƒï¼Œå³ä¸åšä»»ä½•å˜æ¢ã€‚æ¦‚ç‡åˆ†åˆ«ä¸º0.9å’Œ0.1ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">FoodDataset</span>(<span class="title class_ inherited__">Dataset</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,path,tfm=test_tfm,files = <span class="literal">None</span></span>):</span><br><span class="line">        <span class="built_in">super</span>(FoodDataset).__init__()</span><br><span class="line">        self.path = path</span><br><span class="line">        self.files = <span class="built_in">sorted</span>([os.path.join(path,x) <span class="keyword">for</span> x <span class="keyword">in</span> os.listdir(path) <span class="keyword">if</span> x.endswith(<span class="string">&quot;.jpg&quot;</span>)])</span><br><span class="line">        <span class="keyword">if</span> files != <span class="literal">None</span>:</span><br><span class="line">            self.files = files</span><br><span class="line">            </span><br><span class="line">        self.transform = tfm</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__len__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">len</span>(self.files)</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__getitem__</span>(<span class="params">self,idx</span>):</span><br><span class="line">        fname = self.files[idx]</span><br><span class="line">        im = Image.<span class="built_in">open</span>(fname)</span><br><span class="line">        im = self.transform(im)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            label = <span class="built_in">int</span>(fname.split(<span class="string">&quot;/&quot;</span>)[-<span class="number">1</span>].split(<span class="string">&quot;_&quot;</span>)[<span class="number">0</span>])</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            label = -<span class="number">1</span> </span><br><span class="line">            </span><br><span class="line">        <span class="keyword">return</span> im,label</span><br></pre></td></tr></table></figure><p>å®šä¹‰<code>FoodDataset</code>ç±»ï¼Œ<code>__init__()</code>ææ„å‡½æ•°ç”¨æ¥åˆå§‹åŒ–æ•°æ®ï¼Œ<code>__len__()</code>ç”¨æ¥è·å¾—æ•°æ®é›†çš„æ•´ä¸ªå¤§å°ï¼Œ<code>__getitem__()</code>ç”¨æ¥è·å¾—å…·ä½“indexä¸‹çš„æ•°æ®æ–‡ä»¶ï¼Œå¹¶è¿”å›transformåçš„å›¾åƒã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Classifier</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>(Classifier, self).__init__()</span><br><span class="line">        <span class="comment"># torch.nn.Conv2d(in_channels, out_channels, kernel_size, stride, padding)</span></span><br><span class="line">        <span class="comment"># torch.nn.MaxPool2d(kernel_size, stride, padding)</span></span><br><span class="line">        <span class="comment"># input ç¶­åº¦ [3, 128, 128]</span></span><br><span class="line">        self.cnn = nn.Sequential(</span><br><span class="line">            nn.Conv2d(<span class="number">3</span>, <span class="number">64</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">1</span>),  <span class="comment"># [64, 128, 128]</span></span><br><span class="line">            nn.BatchNorm2d(<span class="number">64</span>),</span><br><span class="line">            nn.ReLU(),</span><br><span class="line">            nn.MaxPool2d(<span class="number">2</span>, <span class="number">2</span>, <span class="number">0</span>),      <span class="comment"># [64, 64, 64]</span></span><br><span class="line"></span><br><span class="line">            nn.Conv2d(<span class="number">64</span>, <span class="number">128</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">1</span>), <span class="comment"># [128, 64, 64]</span></span><br><span class="line">            nn.BatchNorm2d(<span class="number">128</span>),</span><br><span class="line">            nn.ReLU(),</span><br><span class="line">            nn.MaxPool2d(<span class="number">2</span>, <span class="number">2</span>, <span class="number">0</span>),      <span class="comment"># [128, 32, 32]</span></span><br><span class="line"></span><br><span class="line">            nn.Conv2d(<span class="number">128</span>, <span class="number">256</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">1</span>), <span class="comment"># [256, 32, 32]</span></span><br><span class="line">            nn.BatchNorm2d(<span class="number">256</span>),</span><br><span class="line">            nn.ReLU(),</span><br><span class="line">            nn.MaxPool2d(<span class="number">2</span>, <span class="number">2</span>, <span class="number">0</span>),      <span class="comment"># [256, 16, 16]</span></span><br><span class="line"></span><br><span class="line">            nn.Conv2d(<span class="number">256</span>, <span class="number">512</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">1</span>), <span class="comment"># [512, 16, 16]</span></span><br><span class="line">            nn.BatchNorm2d(<span class="number">512</span>),</span><br><span class="line">            nn.ReLU(),</span><br><span class="line">            nn.MaxPool2d(<span class="number">2</span>, <span class="number">2</span>, <span class="number">0</span>),       <span class="comment"># [512, 8, 8]</span></span><br><span class="line">            </span><br><span class="line">            nn.Conv2d(<span class="number">512</span>, <span class="number">512</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">1</span>), <span class="comment"># [512, 8, 8]</span></span><br><span class="line">            nn.BatchNorm2d(<span class="number">512</span>),</span><br><span class="line">            nn.ReLU(),</span><br><span class="line">            nn.MaxPool2d(<span class="number">2</span>, <span class="number">2</span>, <span class="number">0</span>),       <span class="comment"># [512, 4, 4]</span></span><br><span class="line">        )</span><br><span class="line">        self.fc = nn.Sequential(</span><br><span class="line">            nn.Linear(<span class="number">512</span>*<span class="number">4</span>*<span class="number">4</span>, <span class="number">1024</span>),</span><br><span class="line">            nn.ReLU(),</span><br><span class="line">            nn.Linear(<span class="number">1024</span>, <span class="number">512</span>),</span><br><span class="line">            nn.ReLU(),</span><br><span class="line">            nn.Linear(<span class="number">512</span>, <span class="number">11</span>)</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        out = self.cnn(x)</span><br><span class="line">        out = out.view(out.size()[<span class="number">0</span>], -<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> self.fc(out)</span><br></pre></td></tr></table></figure><p>å®šä¹‰CNNçš„model</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">device = <span class="string">&quot;cuda&quot;</span> <span class="keyword">if</span> torch.cuda.is_available() <span class="keyword">else</span> <span class="string">&quot;cpu&quot;</span></span><br><span class="line">model = Classifier().to(device)</span><br><span class="line">batch_size = <span class="number">64</span></span><br><span class="line">n_epochs = <span class="number">24</span> </span><br><span class="line">patience = <span class="number">300</span></span><br><span class="line">loss_fn = nn.CrossEntropyLoss()</span><br><span class="line"></span><br><span class="line">optimizer = torch.optim.Adam(model.parameters(), lr=<span class="number">0.0003</span>, weight_decay=<span class="number">1e-5</span>)</span><br></pre></td></tr></table></figure><p>å¦‚æœç”µè„‘æœ‰cudaï¼Œé‚£ä¹ˆç”¨cudaæ¥è®­ç»ƒï¼Œå¦åˆ™ç”¨cpuï¼ŒåŒæ—¶å®šä¹‰modelå¯¹è±¡ï¼Œbatch_sizeï¼Œn_epochesä¸patienceï¼Œå®šä¹‰Adamä¼˜åŒ–å™¨æ¥ä¼˜åŒ–ï¼Œå…¶ä¸­å­¦ä¹ ç‡ä¸º0.0003ï¼Œä¼ æ’­ç‡ä¸º0.00001ï¼Œpatienceä¸ºè€å¿ƒè½®æ•°ï¼Œloss_fnä¸ºæŸå¤±å‡½æ•°ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">train_set = FoodDataset(<span class="string">&quot;.../train&quot;</span>, tfm=train_tfm)</span><br><span class="line">train_loader = DataLoader(train_set, batch_size=batch_size, shuffle=<span class="literal">True</span>, num_workers=<span class="number">0</span>, pin_memory=<span class="literal">True</span>)</span><br><span class="line">valid_set = FoodDataset(<span class="string">&quot;.../valid&quot;</span>, tfm=test_tfm)</span><br><span class="line">valid_loader = DataLoader(valid_set, batch_size=batch_size, shuffle=<span class="literal">True</span>, num_workers=<span class="number">0</span>, pin_memory=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><p>å®šä¹‰train_setå’Œloaderï¼Œvalid_setå’Œloaderï¼Œåˆ†åˆ«ä¸ºè®­ç»ƒé›†å’ŒéªŒè¯é›†ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">stale = <span class="number">0</span></span><br><span class="line">best_acc = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(n_epochs):</span><br><span class="line"></span><br><span class="line">    model.train()</span><br><span class="line"></span><br><span class="line">    train_loss = []</span><br><span class="line">    train_accs = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> batch <span class="keyword">in</span> tqdm(train_loader):</span><br><span class="line"></span><br><span class="line">        imgs, labels = batch</span><br><span class="line"></span><br><span class="line">        logits = model(imgs.to(device))</span><br><span class="line"></span><br><span class="line">        loss = criterion(logits, labels.to(device))</span><br><span class="line"></span><br><span class="line">        optimizer.zero_grad()</span><br><span class="line">        loss.backward()</span><br><span class="line"></span><br><span class="line">        grad_norm = nn.utils.clip_grad_norm_(model.parameters(), max_norm=<span class="number">10</span>)</span><br><span class="line">        optimizer.step()</span><br><span class="line"></span><br><span class="line">        acc = (logits.argmax(dim=-<span class="number">1</span>) == labels.to(device)).<span class="built_in">float</span>().mean()</span><br><span class="line"></span><br><span class="line">        train_loss.append(loss.item())</span><br><span class="line">        train_accs.append(acc)</span><br><span class="line">        </span><br><span class="line">    train_loss = <span class="built_in">sum</span>(train_loss) / <span class="built_in">len</span>(train_loss)</span><br><span class="line">    train_acc = <span class="built_in">sum</span>(train_accs) / <span class="built_in">len</span>(train_accs)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;[ Train | <span class="subst">&#123;epoch + <span class="number">1</span>:03d&#125;</span>/<span class="subst">&#123;n_epochs:03d&#125;</span> ] loss = <span class="subst">&#123;train_loss:<span class="number">.5</span>f&#125;</span>, acc = <span class="subst">&#123;train_acc:<span class="number">.5</span>f&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">    model.<span class="built_in">eval</span>()</span><br><span class="line"></span><br><span class="line">    valid_loss = []</span><br><span class="line">    valid_accs = []</span><br><span class="line">    <span class="keyword">for</span> imgs, labels <span class="keyword">in</span> tqdm(valid_loader):</span><br><span class="line">        <span class="keyword">with</span> torch.no_grad():</span><br><span class="line">            logits = model(imgs.to(device))</span><br><span class="line">        loss = loss_fn(logits, labels.to(device))</span><br><span class="line">        acc = (logits.argmax(dim=-<span class="number">1</span>) == labels.to(device)).<span class="built_in">float</span>().mean()</span><br><span class="line"></span><br><span class="line">        valid_loss.append(loss.item())</span><br><span class="line">        valid_accs.append(acc)</span><br><span class="line"></span><br><span class="line">    valid_loss = <span class="built_in">sum</span>(valid_loss) / <span class="built_in">len</span>(valid_loss)</span><br><span class="line">    valid_acc = <span class="built_in">sum</span>(valid_accs) / <span class="built_in">len</span>(valid_accs)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;[ Valid | <span class="subst">&#123;epoch + <span class="number">1</span>:03d&#125;</span>/<span class="subst">&#123;n_epochs:03d&#125;</span> ] loss = <span class="subst">&#123;valid_loss:<span class="number">.5</span>f&#125;</span>, acc = <span class="subst">&#123;valid_acc:<span class="number">.5</span>f&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> valid_acc &gt; best_acc:</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">f&quot;./<span class="subst">&#123;_exp_name&#125;</span>_log.txt&quot;</span>,<span class="string">&quot;a&quot;</span>):</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;[ Valid | <span class="subst">&#123;epoch + <span class="number">1</span>:03d&#125;</span>/<span class="subst">&#123;n_epochs:03d&#125;</span> ] loss = <span class="subst">&#123;valid_loss:<span class="number">.5</span>f&#125;</span>, acc = <span class="subst">&#123;valid_acc:<span class="number">.5</span>f&#125;</span> -&gt; best&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">f&quot;./<span class="subst">&#123;_exp_name&#125;</span>_log.txt&quot;</span>,<span class="string">&quot;a&quot;</span>):</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;[ Valid | <span class="subst">&#123;epoch + <span class="number">1</span>:03d&#125;</span>/<span class="subst">&#123;n_epochs:03d&#125;</span> ] loss = <span class="subst">&#123;valid_loss:<span class="number">.5</span>f&#125;</span>, acc = <span class="subst">&#123;valid_acc:<span class="number">.5</span>f&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> valid_acc &gt; best_acc:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;Best model found at epoch <span class="subst">&#123;epoch&#125;</span>, saving model&quot;</span>)</span><br><span class="line">        torch.save(model.state_dict(), <span class="string">f&quot;<span class="subst">&#123;_exp_name&#125;</span>_best.ckpt&quot;</span>)</span><br><span class="line">        best_acc = valid_acc</span><br><span class="line">        stale = <span class="number">0</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        stale += <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> stale &gt; patience:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;No improvment <span class="subst">&#123;patience&#125;</span> consecutive epochs, early stopping&quot;</span>)</span><br><span class="line">            <span class="keyword">break</span></span><br></pre></td></tr></table></figure><p>å¼€å§‹è®­ç»ƒ,<code>stale</code>ï¼šè®°å½•è¿ç»­æœªæ”¹å–„çš„epochæ¬¡æ•°ï¼Œç”¨äºæ—©åœæœºåˆ¶ã€‚<code>best_acc</code>ç”¨äºè®°å½•æœ€ä½³éªŒè¯é›†å‡†ç¡®ç‡,ä½¿ç”¨ <code>nn.utils.clip_grad_norm_</code> å¯ä»¥æœ‰æ•ˆé˜²æ­¢æ¢¯åº¦çˆ†ç‚¸é—®é¢˜ï¼Œç¡®ä¿è®­ç»ƒè¿‡ç¨‹æ›´åŠ ç¨³å®šå’Œæ”¶æ•›ã€‚è¿™ä¸ªå‡½æ•°é€šè¿‡é™åˆ¶æ¢¯åº¦çš„æœ€å¤§èŒƒæ•°ï¼Œä½¿å¾—æ¯æ¬¡å‚æ•°æ›´æ–°ä¸ä¼šå› ä¸ºè¿‡å¤§çš„æ¢¯åº¦è€Œå‘ç”Ÿå‰§çƒˆå˜åŒ–ã€‚å¦‚æœåœæ»è½®æ•°å¤§äºè€å¿ƒè½®æ•°ï¼Œé‚£ä¹ˆç»ˆæ­¢è®­ç»ƒï¼Œå¦åˆ™ä¿å­˜æ¨¡å‹ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŠ¨æ€æ•°ç»„</title>
      <link href="/2024/06/28/%E5%8A%A8%E6%80%81%E6%95%B0%E7%BB%84/"/>
      <url>/2024/06/28/%E5%8A%A8%E6%80%81%E6%95%B0%E7%BB%84/</url>
      
        <content type="html"><![CDATA[<h1 id="åŠ¨æ€æ•°ç»„"><a href="#åŠ¨æ€æ•°ç»„" class="headerlink" title="åŠ¨æ€æ•°ç»„"></a>åŠ¨æ€æ•°ç»„</h1><p>æ•°ç»„æ˜¯ä¸€ç»„å…ƒç´ ç»„æˆçš„æ•°æ®ç»“æ„ï¼Œæ¯ä¸ªå…ƒç´ è‡³å°‘æœ‰ä¸€ä¸ªindexæˆ–keyæ¥æ ‡è¯†ã€‚</p><p>æ•°ç»„çš„å…ƒç´ æ˜¯è¿ç»­å­˜å‚¨ï¼Œæ‰€ä»¥åœ°å€å¯ä»¥é€šè¿‡indexç´¢å¼•æ¥è®¡ç®—å‡ºæ¥ã€‚</p><p>é€šè¿‡æ•°ç»„çš„èµ·å§‹åœ°å€<em>BaseAddress</em>ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å…¬å¼<em>BaseAddress</em> + i*sizeæ¥è®¡ç®—å‡ºç´¢å¼•iå…ƒç´ çš„åœ°å€ï¼Œå…¶ä¸­iä½ç´¢å¼•ï¼Œsizeä¸ºæ¯ä¸ªå…ƒç´ æ‰€å å­—èŠ‚å¤§å°ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>[] array = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;;</span><br></pre></td></tr></table></figure><h1 id="æ€§èƒ½"><a href="#æ€§èƒ½" class="headerlink" title="æ€§èƒ½"></a>æ€§èƒ½</h1><h2 id="ç©ºé—´å ç”¨"><a href="#ç©ºé—´å ç”¨" class="headerlink" title="ç©ºé—´å ç”¨"></a>ç©ºé—´å ç”¨</h2><p>Javaä¸­æ•°ç»„ç»“æ„æœ‰8å­—èŠ‚çš„markwordï¼Œ4å­—èŠ‚çš„classæŒ‡é’ˆï¼Œ4å­—èŠ‚çš„æ•°ç»„å¤§å°ï¼ˆJavaä¸­æ‰€æœ‰å¯¹è±¡å¤§å°éƒ½æ˜¯8å­—èŠ‚çš„æ•´æ•°å€ï¼Œä¸è¶³çš„è¯è¦å¯¹é½å­—èŠ‚è¡¥è¶³ï¼‰</p><p>ä¾‹å¦‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>[] array = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;;</span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆå…¶å¤§å°ä¸º40å­—èŠ‚ï¼Œ8 + 4 + 4 + 5*4 + 4(alignment)ï¼Œå…¶ä¸­çš„alignmentæ˜¯ç”¨è¡¥å……æ•´ä½“ä¸º8çš„å€æ•°çš„ã€‚</p><h2 id="éšæœºè®¿é—®"><a href="#éšæœºè®¿é—®" class="headerlink" title="éšæœºè®¿é—®"></a>éšæœºè®¿é—®</h2><p>æ ¹æ®ç´¢å¼•æŸ¥æ‰¾å…ƒç´ ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(1)ã€‚</p><h1 id="åŸºç¡€ä»£ç å®ç°"><a href="#åŸºç¡€ä»£ç å®ç°" class="headerlink" title="åŸºç¡€ä»£ç å®ç°"></a>åŸºç¡€ä»£ç å®ç°</h1><p>å¦‚æœæƒ³å®ç°ä¸€ä¸ªæœ€åŸºæœ¬çš„åŠ¨æ€æ•°ç»„ï¼Œé‚£ä¹ˆå…¶ä¸­è¦æœ‰çš„å±æ€§æœ‰ï¼šè¿™ä¸ªåŠ¨æ€æ•°ç»„çš„å®¹é‡å¤§å°ä¸å®é™…é€»è¾‘å¤§å°ï¼Œè€Œé™æ€æ•°ç»„å¾€å¾€æ˜¯å·²ç»è®¾å®šå¥½ï¼Œä¸”ä¸å¯ä»¥æ‰©å®¹çš„ï¼Œä¸ºæ­¤æˆ‘ä»¬è‹¥æƒ³ç”¨é™æ€æ•°ç»„ä¸ºæ ¹æœ¬æ¥å®ç°åŠ¨æ€æ•°ç»„ï¼Œæˆ‘ä»¬éœ€è¦åˆ¤æ–­å¦‚æœé€»è¾‘å¤§å°å¤§äºå®¹é‡å¤§å°ï¼Œåˆ™éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„é™æ€æ•°ç»„ï¼Œä¸”è¿™ä¸ªæ–°çš„é™æ€æ•°ç»„çš„å®¹é‡å¤§å°è¦å¤§äºæ‰€éœ€æ•°ç»„çš„é€»è¾‘å¤§å°ï¼Œå…¶ä¸­æˆ‘ä»¬ç”¨åˆ°çš„ä¸€ä¸ªæ–¹æ³•å«åš<em>arraycopy( )</em>ï¼Œä½¿ç”¨ç”¨æ³•ä¸ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">System.arraycopy(ori_array, ori_index, new_array, new_index, size);</span><br></pre></td></tr></table></figure><p>å…¶ä¸­<code>ori_array</code>ä¸ºæºæ•°ç»„ï¼Œ<code>ori_index</code>ä¸ºå¤åˆ¶çš„èµ·å§‹indexï¼Œ<code>new_array</code>ä¸ºç›®æ ‡æ•°ç»„ï¼Œ<code>new_index</code>ä¸ºè¦å¤åˆ¶åˆ°çš„ç›®æ ‡indexï¼Œ<code>size</code>ä¸ºè¦å¤åˆ¶çš„å¤§å°ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DynamicArray</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> <span class="number">0</span>; <span class="comment">// é€»è¾‘å¤§å°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">capacity</span> <span class="operator">=</span> <span class="number">8</span>; <span class="comment">// å®¹é‡</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>[] array = <span class="keyword">new</span> <span class="title class_">int</span>[capacity];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addLast</span><span class="params">(<span class="type">int</span> element)</span>&#123;</span><br><span class="line">        add(size,element);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> index,<span class="type">int</span> element)</span>&#123; <span class="comment">// indexä¸ºè¦æ’å…¥çš„ä½ç½®</span></span><br><span class="line">        <span class="keyword">if</span>(index &gt;= <span class="number">0</span> &amp;&amp; index &lt; size) &#123;</span><br><span class="line">            System.arraycopy(array, index, array, index + <span class="number">1</span>, size - index); </span><br><span class="line">        &#125; <span class="comment">// è¿™é‡Œçš„addæ–¹æ³•åŒ…æ‹¬äº†addLastæ–¹æ³•</span></span><br><span class="line">        array[index] = element;</span><br><span class="line">        size++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>arraycopyæ–¹æ³•ä»indexå¼€å§‹æ‹·è´ï¼Œç›®æ ‡æ•°ç»„è¿˜æ˜¯arrayï¼Œæ‹·è´åˆ°ç›®æ ‡æ•°ç»„çš„èµ·å§‹ä½ç½®ä¸ºindex + 1ï¼Œæ‹·è´çš„å…ƒç´ ä¸ºindexåé¢çš„å…ƒç´ å‡å³ç§»ä¸€ä½ï¼Œæ•…size - indexä¸ªæ•°ï¼Œè¿™æ ·å®ç°äº†è¦æ’å…¥çš„æ•°ç»„çš„åˆå§‹åŒ–ï¼Œå³ä»åŸæ¥çš„(1,2,3,4,5,6)å˜ä¸ºäº†(1,2,3,3,4,5,6)ï¼Œè¿™é‡Œå‡è®¾indexä¸º2ï¼Œç„¶ååœ¨index=2å¤„æ’å…¥ä½ æƒ³è¦çš„å…ƒç´ ã€‚</p><h2 id="åŠŸèƒ½æ‹“å±•"><a href="#åŠŸèƒ½æ‹“å±•" class="headerlink" title="åŠŸèƒ½æ‹“å±•"></a>åŠŸèƒ½æ‹“å±•</h2><p>ä¸ºäº†æƒ³çœ‹æ˜ç™½è¿™ä¸ªæ•°ç»„çš„å®ç°æƒ…å†µï¼Œæˆ‘ä»¬æƒ³çŸ¥é“å†…éƒ¨ç©¶ç«Ÿå‘ç”Ÿäº†ä»€ä¹ˆï¼Œä½†åˆä¸èƒ½ç›´æ¥å°†ç§æœ‰å±æ€§capacityä¸sizeå±•ç¤ºå‡ºæ¥ï¼Œä¸ºæ­¤æˆ‘ä»¬æä¾›ä¸¤ç§æ–¹æ³•æ¥å¯¹å¤–å±•ç¤ºï¼Œä¸€ç§æ˜¯éå†å¾ªç¯ï¼Œå¦ä¸€ç§æ˜¯ç´¢å¼•æŸ¥æ‰¾ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">get</span><span class="params">(<span class="type">int</span> index)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> array[index];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">forEach</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">            System.out.println(array[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>getæ–¹æ³•ç”¨æ¥å®ç°ç‰¹å®šindexçš„å…ƒç´ æŸ¥è¯¢ï¼Œè€ŒforEachæ–¹æ³•å®ç°æ‰€æœ‰å…ƒç´ çš„æŸ¥çœ‹</p>]]></content>
      
      
      
        <tags>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±åº¦å­¦ä¹ çš„ä¸€èˆ¬æ¡†æ¶ï¼ˆé¸Ÿä¸é£æœºä¸¾ä¾‹ï¼‰</title>
      <link href="/2024/06/04/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E4%B8%80%E8%88%AC%E6%A1%86%E6%9E%B6%EF%BC%88%E9%B8%9F%E4%B8%8E%E9%A3%9E%E6%9C%BA%E4%B8%BE%E4%BE%8B%EF%BC%89/"/>
      <url>/2024/06/04/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84%E4%B8%80%E8%88%AC%E6%A1%86%E6%9E%B6%EF%BC%88%E9%B8%9F%E4%B8%8E%E9%A3%9E%E6%9C%BA%E4%B8%BE%E4%BE%8B%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="æ·±åº¦å­¦ä¹ "><a href="#æ·±åº¦å­¦ä¹ " class="headerlink" title="æ·±åº¦å­¦ä¹ "></a>æ·±åº¦å­¦ä¹ </h1><h2 id="ç›¸å…³åŒ…çš„å¯¼å…¥ä¸ç§å­è®¾ç½®"><a href="#ç›¸å…³åŒ…çš„å¯¼å…¥ä¸ç§å­è®¾ç½®" class="headerlink" title="ç›¸å…³åŒ…çš„å¯¼å…¥ä¸ç§å­è®¾ç½®"></a>ç›¸å…³åŒ…çš„å¯¼å…¥ä¸ç§å­è®¾ç½®</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> collections</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"><span class="keyword">import</span> torch.nn.functional <span class="keyword">as</span> F</span><br><span class="line"><span class="keyword">import</span> torch.optim <span class="keyword">as</span> optim</span><br><span class="line">torch.set_printoptions(edgeitems=<span class="number">2</span>)</span><br><span class="line">torch.manual_seed(<span class="number">123</span>)</span><br></pre></td></tr></table></figure><h2 id="ç±»åè§„å®š"><a href="#ç±»åè§„å®š" class="headerlink" title="ç±»åè§„å®š"></a>ç±»åè§„å®š</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">class_names = [<span class="string">&#x27;airplane&#x27;</span>,<span class="string">&#x27;automobile&#x27;</span>,<span class="string">&#x27;bird&#x27;</span>,<span class="string">&#x27;cat&#x27;</span>,<span class="string">&#x27;deer&#x27;</span>,</span><br><span class="line">               <span class="string">&#x27;dog&#x27;</span>,<span class="string">&#x27;frog&#x27;</span>,<span class="string">&#x27;horse&#x27;</span>,<span class="string">&#x27;ship&#x27;</span>,<span class="string">&#x27;truck&#x27;</span>]</span><br></pre></td></tr></table></figure><h2 id="æ„å»ºè®­ç»ƒé›†ä¸æµ‹è¯•é›†"><a href="#æ„å»ºè®­ç»ƒé›†ä¸æµ‹è¯•é›†" class="headerlink" title="æ„å»ºè®­ç»ƒé›†ä¸æµ‹è¯•é›†"></a>æ„å»ºè®­ç»ƒé›†ä¸æµ‹è¯•é›†</h2><p>è¿™é‡Œä¸ºäº†ç®€åŒ–ï¼Œå°†tranformæä¾›çš„è½¬æ¢å¼ é‡ä¸æ ‡å‡†åŒ–ç›´æ¥æ”¾åœ¨æ•°æ®é›†cifar10ä¸­ï¼Œå…¶ä¸ºè®­ç»ƒé›†ï¼Œè‹¥åœ°å€ä¸­æ²¡æœ‰è¯¥æ•°æ®åˆ™Pytorchè‡ªåŠ¨ä¸‹è½½ã€‚åˆ’åˆ†ä¸¤ç§é›†åˆç±»åˆ«çš„å‚æ•°ä¸ºtrainæ˜¯å¦ä¸ºFalseæˆ–Trueã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> torchvision <span class="keyword">import</span> datasets, transforms</span><br><span class="line">data_path = <span class="string">&#x27;../data/&#x27;</span></span><br><span class="line">cifar10 = datasets.CIFAR10(</span><br><span class="line">    data_path, train=<span class="literal">True</span>, download=<span class="literal">True</span>,</span><br><span class="line">    transform=transforms.Compose([</span><br><span class="line">        transforms.ToTensor(),</span><br><span class="line">        transforms.Normalize((<span class="number">0.4915</span>, <span class="number">0.4823</span>, <span class="number">0.4468</span>),</span><br><span class="line">                             (<span class="number">0.2470</span>, <span class="number">0.2435</span>, <span class="number">0.2616</span>))</span><br><span class="line">    ]))</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cifar10_val = datasets.CIFAR10(</span><br><span class="line">    data_path, train=<span class="literal">False</span>, download=<span class="literal">True</span>,</span><br><span class="line">    transform=transforms.Compose([</span><br><span class="line">        transforms.ToTensor(),</span><br><span class="line">        transforms.Normalize((<span class="number">0.4915</span>, <span class="number">0.4823</span>, <span class="number">0.4468</span>),</span><br><span class="line">                             (<span class="number">0.2470</span>, <span class="number">0.2435</span>, <span class="number">0.2616</span>))</span><br><span class="line">    ]))</span><br></pre></td></tr></table></figure><p>å› ä¸ºè¿™é‡Œä»…ä»…æ˜¯é¸Ÿä¸é£æœºçš„åˆ’åˆ†ï¼Œè€Œcifar10æ˜¯ä¸€ä¸ªåŒ…å«å¾ˆå¤šç§ç±»çš„æ•°æ®é›†ï¼Œæ•…è¿›è¡Œåˆ‡å‰²</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">label_map = &#123;<span class="number">0</span>: <span class="number">0</span>, <span class="number">2</span>: <span class="number">1</span>&#125;</span><br><span class="line">class_names = [<span class="string">&#x27;airplane&#x27;</span>, <span class="string">&#x27;bird&#x27;</span>]</span><br><span class="line">cifar2 = [(img, label_map[label])</span><br><span class="line">          <span class="keyword">for</span> img, label <span class="keyword">in</span> cifar10</span><br><span class="line">          <span class="keyword">if</span> label <span class="keyword">in</span> [<span class="number">0</span>, <span class="number">2</span>]]</span><br><span class="line">cifar2_val = [(img, label_map[label])</span><br><span class="line">              <span class="keyword">for</span> img, label <span class="keyword">in</span> cifar10_val</span><br><span class="line">              <span class="keyword">if</span> label <span class="keyword">in</span> [<span class="number">0</span>, <span class="number">2</span>]]</span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹æ˜¯è‡ªå®šä¹‰ä¸€ä¸ªè‡ªå·±çš„æ¨¡å—</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch.nn.functional <span class="keyword">as</span> F</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Net</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__()</span><br><span class="line">        self.conv1 = nn.Conv2d(<span class="number">3</span>, <span class="number">16</span>, kernel_size=<span class="number">3</span>, padding=<span class="number">1</span>)</span><br><span class="line">        self.conv2 = nn.Conv2d(<span class="number">16</span>, <span class="number">8</span>, kernel_size=<span class="number">3</span>, padding=<span class="number">1</span>)</span><br><span class="line">        self.fc1 = nn.Linear(<span class="number">8</span> * <span class="number">8</span> * <span class="number">8</span>, <span class="number">32</span>)</span><br><span class="line">        self.fc2 = nn.Linear(<span class="number">32</span>, <span class="number">2</span>)</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        out = F.max_pool2d(torch.tanh(self.conv1(x)), <span class="number">2</span>)</span><br><span class="line">        out = F.max_pool2d(torch.tanh(self.conv2(out)), <span class="number">2</span>)</span><br><span class="line">        out = out.view(-<span class="number">1</span>, <span class="number">8</span> * <span class="number">8</span> * <span class="number">8</span>)</span><br><span class="line">        out = torch.tanh(self.fc1(out))</span><br><span class="line">        out = self.fc2(out)</span><br><span class="line">        <span class="keyword">return</span> out</span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹ä»£ç ä¸ºæ ¸å¿ƒå¾ªç¯æ­¥éª¤</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">model = Net()</span><br><span class="line"><span class="keyword">import</span> datetime  </span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">training_loop</span>(<span class="params">n_epochs, optimizer, model, loss_fn, train_loader</span>):</span><br><span class="line">    <span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, n_epochs + <span class="number">1</span>): </span><br><span class="line">        loss_train = <span class="number">0.0</span></span><br><span class="line">        <span class="keyword">for</span> imgs, labels <span class="keyword">in</span> train_loader:  </span><br><span class="line">            </span><br><span class="line">            outputs = model(imgs) </span><br><span class="line">            loss = loss_fn(outputs, labels)  </span><br><span class="line">            optimizer.zero_grad()  </span><br><span class="line">            loss.backward()  </span><br><span class="line">            optimizer.step()  </span><br><span class="line">            loss_train += loss.item()  </span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> epoch == <span class="number">1</span> <span class="keyword">or</span> epoch % <span class="number">10</span> == <span class="number">0</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;&#123;&#125; Epoch &#123;&#125;, Training loss &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(</span><br><span class="line">                datetime.datetime.now(), epoch,</span><br><span class="line">                loss_train / <span class="built_in">len</span>(train_loader))) </span><br><span class="line">            </span><br><span class="line">train_loader = torch.utils.data.DataLoader(cifar2, batch_size=<span class="number">64</span>,</span><br><span class="line">                                           shuffle=<span class="literal">True</span>) </span><br><span class="line"></span><br><span class="line">model = Net()  </span><br><span class="line">optimizer = optim.SGD(model.parameters(), lr=<span class="number">1e-2</span>)  </span><br><span class="line">loss_fn = nn.CrossEntropyLoss()  </span><br><span class="line"></span><br><span class="line">training_loop(  </span><br><span class="line">    n_epochs = <span class="number">100</span>,</span><br><span class="line">    optimizer = optimizer,</span><br><span class="line">    model = model,</span><br><span class="line">    loss_fn = loss_fn,</span><br><span class="line">    train_loader = train_loader,</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>éªŒè¯å‡½æ•°ä»£ç ä¸º</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">train_loader = torch.utils.data.DataLoader(cifar2, batch_size=<span class="number">64</span>,</span><br><span class="line">                                           shuffle=<span class="literal">False</span>)</span><br><span class="line">val_loader = torch.utils.data.DataLoader(cifar2_val, batch_size=<span class="number">64</span>,</span><br><span class="line">                                         shuffle=<span class="literal">False</span>)</span><br><span class="line">all_acc_dict = collections.OrderedDict()</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">validate</span>(<span class="params">model, train_loader, val_loader</span>):</span><br><span class="line">    accdict = &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> name, loader <span class="keyword">in</span> [(<span class="string">&quot;train&quot;</span>, train_loader), (<span class="string">&quot;val&quot;</span>, val_loader)]:</span><br><span class="line">        correct = <span class="number">0</span></span><br><span class="line">        total = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">with</span> torch.no_grad():</span><br><span class="line">            <span class="keyword">for</span> imgs, labels <span class="keyword">in</span> loader:</span><br><span class="line">                imgs = imgs.to(device=device)</span><br><span class="line">                labels = labels.to(device=device)</span><br><span class="line">                outputs = model(imgs)</span><br><span class="line">                _, predicted = torch.<span class="built_in">max</span>(outputs, dim=<span class="number">1</span>) <span class="comment"># &lt;1&gt;</span></span><br><span class="line">                total += labels.shape[<span class="number">0</span>]</span><br><span class="line">                correct += <span class="built_in">int</span>((predicted == labels).<span class="built_in">sum</span>())</span><br><span class="line"></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Accuracy &#123;&#125;: &#123;:.2f&#125;&quot;</span>.<span class="built_in">format</span>(name , correct / total))</span><br><span class="line">        accdict[name] = correct / total</span><br><span class="line">    <span class="keyword">return</span> accdict</span><br><span class="line"></span><br><span class="line">all_acc_dict[<span class="string">&quot;baseline&quot;</span>] = validate(model, train_loader, val_loader)</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯å¦ä¸€ä¸ªè‡ªå®šä¹‰æ¨¡å—</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">NetResDeep</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, n_chans1=<span class="number">32</span>, n_blocks=<span class="number">10</span></span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__()</span><br><span class="line">        self.n_chans1 = n_chans1</span><br><span class="line">        self.conv1 = nn.Conv2d(<span class="number">3</span>, n_chans1, kernel_size=<span class="number">3</span>, padding=<span class="number">1</span>)</span><br><span class="line">        self.resblocks = nn.Sequential(</span><br><span class="line">            *(n_blocks * [ResBlock(n_chans=n_chans1)]))</span><br><span class="line">        self.fc1 = nn.Linear(<span class="number">8</span> * <span class="number">8</span> * n_chans1, <span class="number">32</span>)</span><br><span class="line">        self.fc2 = nn.Linear(<span class="number">32</span>, <span class="number">2</span>)</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        out = F.max_pool2d(torch.relu(self.conv1(x)), <span class="number">2</span>)</span><br><span class="line">        out = self.resblocks(out)</span><br><span class="line">        out = F.max_pool2d(out, <span class="number">2</span>)</span><br><span class="line">        out = out.view(-<span class="number">1</span>, <span class="number">8</span> * <span class="number">8</span> * self.n_chans1)</span><br><span class="line">        out = torch.relu(self.fc1(out))</span><br><span class="line">        out = self.fc2(out)</span><br><span class="line">        <span class="keyword">return</span> out</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">model = NetResDeep(n_chans1=<span class="number">32</span>, n_blocks=<span class="number">100</span>).to(device=device)</span><br><span class="line">optimizer = optim.SGD(model.parameters(), lr=<span class="number">3e-3</span>)</span><br><span class="line">loss_fn = nn.CrossEntropyLoss()</span><br><span class="line"></span><br><span class="line">training_loop(</span><br><span class="line">    n_epochs = <span class="number">100</span>,</span><br><span class="line">    optimizer = optimizer,</span><br><span class="line">    model = model,</span><br><span class="line">    loss_fn = loss_fn,</span><br><span class="line">    train_loader = train_loader,</span><br><span class="line">)</span><br><span class="line">all_acc_dict[<span class="string">&quot;res deep&quot;</span>] = validate(model, train_loader, val_loader)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäºPythonçš„æ¨ç®±å­å°æ¸¸æˆå®ç°</title>
      <link href="/2024/05/30/%E5%9F%BA%E4%BA%8EPython%E7%9A%84%E6%8E%A8%E7%AE%B1%E5%AD%90%E5%B0%8F%E6%B8%B8%E6%88%8F%E5%AE%9E%E7%8E%B0/"/>
      <url>/2024/05/30/%E5%9F%BA%E4%BA%8EPython%E7%9A%84%E6%8E%A8%E7%AE%B1%E5%AD%90%E5%B0%8F%E6%B8%B8%E6%88%8F%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="æ¨ç®±å­å°æ¸¸æˆé¡¹ç›®çš„å®ç°"><a href="#æ¨ç®±å­å°æ¸¸æˆé¡¹ç›®çš„å®ç°" class="headerlink" title="æ¨ç®±å­å°æ¸¸æˆé¡¹ç›®çš„å®ç°"></a>æ¨ç®±å­å°æ¸¸æˆé¡¹ç›®çš„å®ç°</h1><p>é¡¹ç›®æ¥æºï¼šå››å·å¤§å­¦2023-2024å¹´Pythonç¨‹åºè®¾è®¡åŸºç¡€çš„æœŸæœ«å¤§ä½œä¸šï¼Œç´ æå‡ä¸ºå­¦æ ¡æä¾›ã€‚</p><h4 id="ä»£ç ï¼š"><a href="#ä»£ç ï¼š" class="headerlink" title="ä»£ç ï¼š"></a>ä»£ç ï¼š</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> pygame</span><br><span class="line"><span class="keyword">import</span> copy</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">pygame.init()</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¸¸é‡å®šä¹‰</span></span><br><span class="line">SUM = <span class="number">0</span></span><br><span class="line">TILE_SIZE = <span class="number">33</span></span><br><span class="line">SCREEN_WIDTH = <span class="number">462</span>  <span class="comment"># 14ä¸ªæ¨ªæ ¼</span></span><br><span class="line">WIDTH_NUM = SCREEN_WIDTH // TILE_SIZE</span><br><span class="line">SCREEN_HEIGHT = <span class="number">330</span>  <span class="comment"># 10ä¸ªç«–æ ¼</span></span><br><span class="line">HEIGHT_NUM = SCREEN_HEIGHT // TILE_SIZE</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¯»å–å¯¹è±¡</span></span><br><span class="line">player_image = pygame.transform.scale(pygame.image.load(<span class="string">r&#x27;C:\Users\èµµæ´ªé”\Downloads\bmp\bmp\Bmp14.gif&#x27;</span>),</span><br><span class="line">                                      (TILE_SIZE, TILE_SIZE))</span><br><span class="line">box_image = pygame.transform.scale(pygame.image.load(<span class="string">r&#x27;C:\Users\èµµæ´ªé”\Downloads\bmp\bmp\Bmp3.gif&#x27;</span>),</span><br><span class="line">                                   (TILE_SIZE, TILE_SIZE))</span><br><span class="line">target_image = pygame.transform.scale(pygame.image.load(<span class="string">r&#x27;C:\Users\èµµæ´ªé”\Downloads\bmp\bmp\Bmp5.gif&#x27;</span>),</span><br><span class="line">                                      (TILE_SIZE, TILE_SIZE))</span><br><span class="line">wall_image = pygame.transform.scale(pygame.image.load(<span class="string">r&#x27;C:\Users\èµµæ´ªé”\Downloads\bmp\bmp\Bmp1.gif&#x27;</span>),</span><br><span class="line">                                    (TILE_SIZE, TILE_SIZE))</span><br><span class="line">floor_image = pygame.transform.scale(pygame.image.load(<span class="string">r&#x27;C:\Users\èµµæ´ªé”\Downloads\bmp\bmp\Bmp2.gif&#x27;</span>),</span><br><span class="line">                                     (TILE_SIZE, TILE_SIZE))</span><br><span class="line">background_image = pygame.transform.scale(pygame.image.load(<span class="string">r&#x27;C:\Users\èµµæ´ªé”\Downloads\bmp\bmp\Bmp0.gif&#x27;</span>),</span><br><span class="line">                                          (TILE_SIZE, TILE_SIZE))</span><br><span class="line"></span><br><span class="line"><span class="comment"># çª—å£å±•ç¤º</span></span><br><span class="line">screen = pygame.display.set_mode((SCREEN_WIDTH, SCREEN_HEIGHT))</span><br><span class="line">pygame.display.set_caption(<span class="string">&#x27;æ¨ç®±å­ã®å°æ¸¸æˆ&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å…³å¡å˜é‡  0è¡¨ç¤ºåœ°æ¿ 1è¡¨ç¤ºå¢™ 2è¡¨ç¤ºç›®æ ‡ 3è¡¨ç¤ºç®±å­ 4è¡¨ç¤ºç©å®¶ 5è¡¨ç¤ºèƒŒæ™¯</span></span><br><span class="line">levels = [</span><br><span class="line">    [[<span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>],</span><br><span class="line">     [<span class="number">5</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>],</span><br><span class="line">     [<span class="number">5</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>],</span><br><span class="line">     [<span class="number">5</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>],</span><br><span class="line">     [<span class="number">5</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>],</span><br><span class="line">     [<span class="number">5</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>],</span><br><span class="line">     [<span class="number">5</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>],</span><br><span class="line">     [<span class="number">5</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>],</span><br><span class="line">     [<span class="number">5</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>],</span><br><span class="line">     [<span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>]],</span><br><span class="line"></span><br><span class="line">    [[<span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>],</span><br><span class="line">     [<span class="number">5</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>],</span><br><span class="line">     [<span class="number">5</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>],</span><br><span class="line">     [<span class="number">5</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>],</span><br><span class="line">     [<span class="number">5</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>],</span><br><span class="line">     [<span class="number">5</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>],</span><br><span class="line">     [<span class="number">5</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>],</span><br><span class="line">     [<span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>],</span><br><span class="line">     [<span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>],</span><br><span class="line">     [<span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>]],</span><br><span class="line"></span><br><span class="line">    [[<span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>],</span><br><span class="line">     [<span class="number">5</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>],</span><br><span class="line">     [<span class="number">5</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>],</span><br><span class="line">     [<span class="number">5</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>],</span><br><span class="line">     [<span class="number">5</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>],</span><br><span class="line">     [<span class="number">5</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>],</span><br><span class="line">     [<span class="number">5</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>],</span><br><span class="line">     [<span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>],</span><br><span class="line">     [<span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>],</span><br><span class="line">     [<span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>,<span class="number">5</span>]],</span><br><span class="line"></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># å½“å‰å…³å¡</span></span><br><span class="line">current_level = <span class="number">0</span></span><br><span class="line"><span class="built_in">map</span> = copy.deepcopy(levels[current_level])</span><br></pre></td></tr></table></figure><p>å¼•å…¥Pythonçš„æ ‡å‡†åº“sysã€copyå’Œtimeï¼Œä»¥åŠç¬¬ä¸‰æ–¹åº“pygameã€‚è¿™äº›åº“æä¾›äº†å¦‚ç³»ç»Ÿé€€å‡ºã€å¯¹è±¡æ·±æ‹·è´å’Œæ—¶é—´è®°å½•çš„åŠŸèƒ½ï¼Œå¹¶ä¸”åˆå§‹åŒ–Pygameåº“ï¼Œå‡†å¤‡ä½¿ç”¨å…¶åŠŸèƒ½ã€‚</p><p>1.1å®šä¹‰å¸¸é‡ï¼š</p><p>TILE_SIZEè¡¨ç¤ºæ¯ä¸ªå›¾å—çš„å°ºå¯¸ã€‚</p><p>SCREEN_WIDTHå’ŒSCREEN_HEIGHTè¡¨ç¤ºçª—å£çš„å®½å’Œé«˜ã€‚</p><p>WIDTH_NUMå’ŒHEIGHT_NUMé€šè¿‡å±å¹•å°ºå¯¸é™¤ä»¥å›¾å—å°ºå¯¸è®¡ç®—å‡ºå±å¹•å¯ä»¥å®¹çº³çš„æ¨ªå‘å’Œçºµå‘å›¾å—æ•°ã€‚</p><p>1.2 å¯¼å…¥å›¾ç‰‡ï¼š</p><p>ä½¿ç”¨Pygameçš„pygame.image.loadå‡½æ•°åŠ è½½æ¸¸æˆæ‰€éœ€çš„å›¾åƒèµ„æºã€‚</p><p>ä½¿ç”¨pygame.transform.scaleå‡½æ•°å°†è¿™äº›å›¾åƒç¼©æ”¾åˆ°åˆé€‚çš„å¤§å°ï¼ˆå³å›¾å—å¤§å°TILE_SIZEï¼‰ã€‚</p><p>1.3 å¤‡æ³¨è¯´æ˜ï¼š</p><p>ç”±äºBmpå›¾ç‰‡ä¸­å¤§å¤šæ•°æ ¼å¼çš„åƒç´ ä¸º33x33ï¼Œè€Œå°‘éƒ¨åˆ†å›¾ç‰‡çš„åƒç´ å°ºå¯¸ä¸ç»Ÿä¸€ï¼Œæ¯”å¦‚æœ‰34x37ï¼Œä¸ºç»Ÿä¸€æ ¼å¼ï¼Œä¾¿åœ¨å¯¼å…¥å›¾ç‰‡çš„æ—¶å€™è¿›è¡Œå›¾ç‰‡è£å‰ªï¼Œä½¿æ‰€æœ‰å¯¼å…¥çš„å›¾ç‰‡å‡ä¸º33x33ï¼Œè¿™æ ·åœ¨è®¾å®šå±å¹•é•¿åº¦ä¸å®½åº¦æ—¶å¯ä»¥æ›´æ–¹ä¾¿çš„è®¡ç®—å›¾å—ï¼Œé¿å…å‡ºç°ç™½è¾¹çš„æƒ…å†µå‘ç”Ÿã€‚å¹¶ä¸”æ–‡ä»¶å¤¹ä¸­å­˜åœ¨é‡å¤çš„å›¾ç‰‡ï¼Œæ•…ä»ä¸­ä»»æ„é€‰æ‹©ä¸€ä¸ªã€‚</p><p>pygame.display.set_modeåˆ›å»ºä¸€ä¸ªçª—å£ï¼Œå¤§å°SCREEN_WIDTHä¸SCREEN_HEIGHTã€‚</p><p>pygame.display.set_captionæ˜¯è®¾ç½®çª—å£çš„æ ‡é¢˜ï¼Œå‘½åä¸ºâ€æ¨ç®±å­ã®å°æ¸¸æˆâ€ã€‚</p><p>å®šä¹‰å¤šä¸ªå…³å¡ï¼Œæ¯ä¸ªå…³å¡ä½¿ç”¨ä¸€ä¸ªäºŒç»´åˆ—è¡¨è¡¨ç¤ºï¼Œå…¶ä¸­æ•°å­—è¡¨ç¤ºä¸åŒç±»å‹çš„åœ°å—ã€‚ä½¿ç”¨copy.deepcopyå¤åˆ¶é€‰å®šçš„å…³å¡æ•°æ®ï¼Œé˜²æ­¢åç»­ä¿®æ”¹å½±å“åŸå§‹æ•°æ®ã€‚è¿™é‡Œè®¾ç½®åˆå§‹çš„ä¸‰å…³ï¼Œåç»­å¯åœ¨å…¶ä¸­è¿›è¡Œæ‹“å±•æ·»åŠ ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç‰©ä½“æ›¿æ¢</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">movePlayer</span>(<span class="params">dx, dy</span>):</span><br><span class="line">    <span class="keyword">global</span> player_pos</span><br><span class="line">    new_x = player_pos[<span class="number">1</span>] + dx</span><br><span class="line">    new_y = player_pos[<span class="number">0</span>] + dy</span><br><span class="line">    <span class="keyword">if</span> new_x &lt; <span class="number">0</span> <span class="keyword">or</span> new_x &gt;= WIDTH_NUM <span class="keyword">or</span> new_y &lt; <span class="number">0</span> <span class="keyword">or</span> new_y &gt;= HEIGHT_NUM:</span><br><span class="line">        <span class="keyword">return</span>  <span class="comment"># è¾¹ç•Œæ£€æŸ¥</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">map</span>[new_y][new_x] == <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span>  <span class="comment"># é‡åˆ°å¢™ï¼Œåœæ­¢ç§»åŠ¨</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">map</span>[new_y][new_x] == <span class="number">3</span>:  <span class="comment"># é‡åˆ°ç®±å­</span></span><br><span class="line">        box_new_x = new_x + dx</span><br><span class="line">        box_new_y = new_y + dy</span><br><span class="line">        <span class="keyword">if</span> box_new_x &lt; <span class="number">0</span> <span class="keyword">or</span> box_new_x &gt;= WIDTH_NUM <span class="keyword">or</span> box_new_y &lt; <span class="number">0</span> <span class="keyword">or</span> box_new_y &gt;= HEIGHT_NUM:</span><br><span class="line">            <span class="keyword">return</span>  <span class="comment"># è¾¹ç•Œæ£€æŸ¥</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">map</span>[box_new_y][box_new_x] <span class="keyword">in</span> [<span class="number">0</span>, <span class="number">2</span>]:  <span class="comment"># ç®±å­å‰é¢æ˜¯åœ°æ¿æˆ–ç›®æ ‡</span></span><br><span class="line">            <span class="built_in">map</span>[box_new_y][box_new_x] = <span class="number">3</span></span><br><span class="line">            <span class="built_in">map</span>[new_y][new_x] = <span class="number">0</span> <span class="keyword">if</span> levels[current_level][new_y][new_x] != <span class="number">2</span> <span class="keyword">else</span> <span class="number">2</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span>  <span class="comment"># ç®±å­å‰é¢æ˜¯å¢™æˆ–å¦ä¸€ä¸ªç®±å­ï¼Œåœæ­¢ç§»åŠ¨</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">map</span>[player_pos[<span class="number">0</span>]][player_pos[<span class="number">1</span>]] = <span class="number">0</span> <span class="keyword">if</span> levels[current_level][player_pos[<span class="number">0</span>]][player_pos[<span class="number">1</span>]] != <span class="number">2</span> <span class="keyword">else</span> <span class="number">2</span>  <span class="comment"># æ¢å¤åœ°æ¿æˆ–ç›®æ ‡</span></span><br><span class="line">    player_pos = [new_y, new_x]</span><br><span class="line">    <span class="built_in">map</span>[player_pos[<span class="number">0</span>]][player_pos[<span class="number">1</span>]] = <span class="number">4</span>  <span class="comment"># æ›´æ–°ç©å®¶æ–°ä½ç½®</span></span><br></pre></td></tr></table></figure><p>movePlayerï¼ˆï¼‰æ˜¯å®ç°ç©å®¶çš„ç§»åŠ¨é€»è¾‘çš„å‡½æ•°ï¼Œå…¶èŒè´£æ˜¯å®ç°ç©å®¶è§’è‰²çš„ç§»åŠ¨é€»è¾‘ï¼ŒåŒ…æ‹¬è¾¹ç•Œæ£€æŸ¥ã€ç¢°æ’æ£€æµ‹å’Œæ›´æ–°åœ°å›¾çŠ¶æ€ã€‚å‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•° dx å’Œ dyï¼Œåˆ†åˆ«è¡¨ç¤ºç©å®¶åœ¨xè½´å’Œyè½´ä¸Šçš„ç§»åŠ¨è·ç¦»ã€‚</p><p>1.1å‚æ•°å®šä¹‰å’Œåˆå§‹ä½ç½®è®¡ç®—ï¼š</p><p>å‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•° dx å’Œ dyï¼Œåˆ†åˆ«è¡¨ç¤ºç©å®¶åœ¨xè½´å’Œyè½´ä¸Šçš„ç§»åŠ¨è·ç¦»ã€‚é€šè¿‡è¿™ä¸¤ä¸ªå‚æ•°ï¼Œå‡½æ•°è®¡ç®—å‡ºç©å®¶çš„æ–°ä½ç½® new_x å’Œ new_yã€‚</p><p>1.2 è¾¹ç•Œæ£€æŸ¥ä¸ç¢°æ’æ£€æµ‹ï¼ˆå¢™å£ï¼‰ï¼š</p><p>é¦–å…ˆï¼Œå‡½æ•°æ£€æŸ¥ç©å®¶çš„æ–°ä½ç½®æ˜¯å¦è¶…å‡ºåœ°å›¾è¾¹ç•Œã€‚å¦‚æœæ–°ä½ç½®è¶…å‡ºè¾¹ç•Œï¼Œå‡½æ•°ç«‹å³è¿”å›ï¼Œåœæ­¢ç§»åŠ¨ã€‚æ¥ç€ï¼Œå‡½æ•°æ£€æŸ¥ç©å®¶çš„æ–°ä½ç½®æ˜¯å¦é‡åˆ°å¢™å£ï¼ˆå€¼ä¸º1ï¼‰ã€‚å¦‚æœæ–°ä½ç½®æ˜¯å¢™å£ï¼Œå‡½æ•° è¿”å›ï¼Œåœæ­¢ç§»åŠ¨ã€‚</p><p>1.3 ç¢°æ’æ£€æµ‹ï¼ˆç®±å­ï¼‰ä¸åœ°å›¾æ›´æ–°ï¼š</p><p>å¦‚æœç©å®¶çš„æ–°ä½ç½®æ˜¯ç®±å­ï¼ˆå€¼ä¸º3ï¼‰ï¼Œå‡½æ•°éœ€è¦è¿›ä¸€æ­¥æ£€æŸ¥ç®±å­çš„å‰æ–¹ä½ç½®æ˜¯å¦ä¸ºç©ºåœ°æˆ–ç›®æ ‡ç‚¹ï¼ˆå€¼ä¸º0æˆ–2ï¼‰ã€‚å¦‚æœç®±å­å‰æ–¹ä½ç½®æœ‰æ•ˆï¼Œåˆ™ç§»åŠ¨ç®±å­ï¼Œå¦åˆ™åœæ­¢ç§»åŠ¨ã€‚å¦‚æœç©å®¶çš„æ–°ä½ç½®æ˜¯ç©ºåœ°æˆ–ç›®æ ‡ç‚¹ï¼Œå‡½æ•°ä¼šæ›´æ–°å½“å‰åœ°å›¾çŠ¶æ€ï¼Œå°†ç©å®¶çš„å½“å‰ä½ç½®ä»åœ°å›¾ä¸Šç§»é™¤ï¼Œæ¢å¤ä¸ºåŸåœ°å›¾ä¸Šçš„åœ°æ¿æˆ–ç›®æ ‡ç‚¹ã€‚ç„¶åæ›´æ–°ç©å®¶çš„æ–°ä½ç½®ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è·å¾—ç©å®¶åˆå§‹ä½ç½®</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getPlayerPosition</span>():</span><br><span class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> <span class="built_in">range</span>(HEIGHT_NUM):</span><br><span class="line">        <span class="keyword">for</span> col <span class="keyword">in</span> <span class="built_in">range</span>(WIDTH_NUM):</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">map</span>[row][col] == <span class="number">4</span>:</span><br><span class="line">                <span class="keyword">return</span> [row, col]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">player_pos = getPlayerPosition()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å¾—å…³å¡ç›®æ ‡æ•°</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">targetNum</span>():</span><br><span class="line">    targetNums = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> <span class="built_in">range</span>(HEIGHT_NUM):</span><br><span class="line">        <span class="keyword">for</span> col <span class="keyword">in</span> <span class="built_in">range</span>(WIDTH_NUM):</span><br><span class="line">            <span class="keyword">if</span> levels[current_level][row][col] == <span class="number">2</span>:</span><br><span class="line">                targetNums += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> targetNums</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>   getPlayerPosition ( )å‡½æ•°æ˜¯ç”¨æ¥è´Ÿè´£å®æ—¶è·å¾—ç©å®¶åæ ‡çš„å‡½æ•°ï¼Œé€šè¿‡åµŒå¥—å¾ªç¯éå†mapæ¥å¾—åˆ°å…·ä½“ç©å®¶ä½ç½®ï¼Œè°ƒç”¨åè¿”å›å…·ä½“åæ ‡ã€‚</p><p>   targetNum ( )å‡½æ•°æ˜¯è´Ÿè´£éå†æ•´ä¸ªlevelsæ¥å¾—åˆ°ç›®æ ‡ç‚¹ä½ç½®çš„å‡½æ•°ï¼Œå¦‚æœå‘ç°å…ƒç´ ä¸­çš„ç›®æ ‡ç‚¹åï¼ŒtargetNumsä¼šè‡ªå¢ï¼Œè°ƒç”¨åè¿”å›ç›®æ ‡ç‚¹æˆ–ç®±å­çš„æ€»æ•°é‡ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">isAllGet</span>():</span><br><span class="line">    SUM = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> <span class="built_in">range</span>(HEIGHT_NUM):</span><br><span class="line">        <span class="keyword">for</span> col <span class="keyword">in</span> <span class="built_in">range</span>(WIDTH_NUM):</span><br><span class="line">            <span class="keyword">if</span> levels[current_level][row][col] == <span class="number">2</span> <span class="keyword">and</span> <span class="built_in">map</span>[row][col] == <span class="number">3</span>:</span><br><span class="line">                SUM += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> SUM == targetNum()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># èƒŒæ™¯æ›¿æ¢</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">backGround</span>():</span><br><span class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, SCREEN_HEIGHT, TILE_SIZE):</span><br><span class="line">        <span class="keyword">for</span> col <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, SCREEN_WIDTH, TILE_SIZE):</span><br><span class="line">            screen.blit(background_image, (col, row))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰“å°ç©å®¶</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">drawPlayer</span>():</span><br><span class="line">    screen.blit(player_image, (player_pos[<span class="number">1</span>] * TILE_SIZE, player_pos[<span class="number">0</span>] * TILE_SIZE))</span><br><span class="line">    </span><br><span class="line"><span class="comment"># åœ°å›¾å¸ƒå±€</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">mapSet</span>():</span><br><span class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> <span class="built_in">range</span>(HEIGHT_NUM):</span><br><span class="line">        <span class="keyword">for</span> col <span class="keyword">in</span> <span class="built_in">range</span>(WIDTH_NUM):</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">map</span>[row][col] == <span class="number">0</span>:</span><br><span class="line">                screen.blit(floor_image, (col * TILE_SIZE, row * TILE_SIZE))</span><br><span class="line">            <span class="keyword">elif</span> <span class="built_in">map</span>[row][col] == <span class="number">1</span>:</span><br><span class="line">                screen.blit(wall_image, (col * TILE_SIZE, row * TILE_SIZE))</span><br><span class="line">            <span class="keyword">elif</span> <span class="built_in">map</span>[row][col] == <span class="number">2</span>:</span><br><span class="line">                screen.blit(target_image, (col * TILE_SIZE, row * TILE_SIZE))</span><br><span class="line">            <span class="keyword">elif</span> <span class="built_in">map</span>[row][col] == <span class="number">3</span>:</span><br><span class="line">                screen.blit(box_image, (col * TILE_SIZE, row * TILE_SIZE))</span><br><span class="line">            <span class="keyword">elif</span> <span class="built_in">map</span>[row][col] == <span class="number">4</span>:</span><br><span class="line">                screen.blit(player_image, (col * TILE_SIZE, row * TILE_SIZE))</span><br></pre></td></tr></table></figure><p>mapSet ( )å‡½æ•°æ˜¯è´Ÿè´£å®ç°åœ°å›¾å…ƒç´ çš„æ‘†æ”¾ï¼Œå…ˆé€šè¿‡colä¸rowçš„åµŒå¥—å¾ªç¯ï¼ˆNested Loopï¼‰å®ç°äºŒç»´æ•°ç»„mapçš„éå†ï¼Œå¾—åˆ°mapæ¯ä¸ªå…ƒç´ æ˜¯å¤šå°‘ï¼Œå…¶æ¬¡å†æ ¹æ®if,elif é€‰æ‹©è¯­å¥æ¥åˆ¤æ–­ä¸åŒçš„æ•°å­—å…µæ’å…¥ç›¸åº”ä¸åŒçš„å›¾ç‰‡ï¼Œé€šè¿‡screen.blit ( image , ( x , y ) )æ¥å®ç°ã€‚x,yæ˜¯åœ¨æ•´ä¸ªçª—å£ä¸Šçš„åæ ‡ä½ç½®ï¼Œè€Œä¸æ˜¯Levelçš„ä½ç½®ï¼Œæ•…è¦åœ¨x,yæœ¬èº«çš„åŸºç¡€ä¸Šä¹˜ä»¥TILE_SIZEå®ç°å…ƒç´ é“ºå«ã€‚</p><p>backGround ( )å‡½æ•°æ˜¯è´Ÿè´£æ•´ä½“èƒŒæ™¯çš„é“ºå«çš„ï¼Œå…ˆé€šè¿‡åµŒå¥—å¾ªç¯ä½¿ç”¨background_imageè¿›è¡Œæ•´ä½“çª—å£çš„æ‘†æ”¾ï¼Œä¹‹åMapSet ( )å‡½æ•°åœ¨å…¶ä¸Šè¿›è¡Œç»†èŠ‚å…ƒç´ çš„å¸ƒç½®ã€‚</p><p>drawPlayer ( )å‡½æ•°æ˜¯ç©å®¶ç»˜åˆ¶å‡½æ•°ï¼Œå› ä¸ºæœ¬é¡¹ç›®çš„é€»è¾‘æ˜¯ç©å®¶çš„åœ°å€å•ç‹¬æŠ½ç¦»å‡ºæ¥ä¿å­˜åœ¨player_posä¸­ï¼Œæ‰€ä»¥æ¯æ¬¡å¾ªç¯åè¦å®æ—¶æ›´æ–°ç©å®¶çš„å›¾åƒä½ç½®ï¼Œè¿™æ—¶å°±è¦è°ƒç”¨drawPlayer ( )å‡½æ•°æ¥è¿›è¡Œæ›´æ–°ã€‚</p><p>isAllGet ( )_å‡½æ•°æ˜¯ç”¨æ¥åˆ¤æ–­æ¸¸æˆæˆåŠŸæ¡ä»¶çš„ï¼Œé¦–å…ˆåˆ†åˆ«æ•´ä½“éå†Mapå‰¯æœ¬åœ°å›¾ä¸åŸåœ°å›¾Levelsï¼Œè¿™æ ·å¾—åˆ°åŸåœ°å›¾çš„ç›®æ ‡ç‚¹ä½ç½®ï¼Œå¦‚æœåœ¨ç›¸äº’å¯¹åº”çš„ä½ç½®ä¸ŠMapå‰¯æœ¬æ˜¯ç®±å­å…ƒç´ ï¼ŒLevelsæ˜¯ç›®æ ‡ç‚¹å…ƒç´ ï¼Œåˆ™è¯æ˜ç®±å­æ¨åˆ°äº†ç›®æ ‡ç‚¹ï¼ŒSUMåˆå€¼ä¸º0ï¼Œæ˜¯ç”¨æ¥è®¡ç®—ç®±å­æ¨åˆ°ç›®æ ‡ç‚¹çš„æ•°é‡ï¼Œæ¨åˆ°ç›®æ ‡ç‚¹åSUMè‡ªå¢1ï¼Œå¦‚æœSUMä¸targetNum ( )å‡½æ•°è¿”å›å€¼ç›¸åŒï¼Œå³åœ°å›¾ä¸Šæ‰€æœ‰çš„ç›®æ ‡ç‚¹éƒ½è¢«æ¨åˆ°äº†ï¼Œé‚£ä¹ˆæ¸¸æˆæˆåŠŸã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ¸¸æˆä¸»å¾ªç¯</span></span><br><span class="line">running = <span class="literal">True</span></span><br><span class="line">paused = <span class="literal">False</span></span><br><span class="line">start_time = time.time()</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> running:</span><br><span class="line">    <span class="keyword">for</span> event <span class="keyword">in</span> pygame.event.get():</span><br><span class="line">        <span class="keyword">if</span> event.<span class="built_in">type</span> == pygame.QUIT:</span><br><span class="line">            running = <span class="literal">False</span></span><br><span class="line">        <span class="keyword">elif</span> event.<span class="built_in">type</span> == pygame.KEYDOWN:</span><br><span class="line">            <span class="keyword">if</span> event.key == pygame.K_UP:</span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">not</span> paused:</span><br><span class="line">                    movePlayer(<span class="number">0</span>, -<span class="number">1</span>)</span><br><span class="line">            <span class="keyword">elif</span> event.key == pygame.K_DOWN:</span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">not</span> paused:</span><br><span class="line">                    movePlayer(<span class="number">0</span>, <span class="number">1</span>)</span><br><span class="line">            <span class="keyword">elif</span> event.key == pygame.K_LEFT:</span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">not</span> paused:</span><br><span class="line">                    movePlayer(-<span class="number">1</span>, <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">elif</span> event.key == pygame.K_RIGHT:</span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">not</span> paused:</span><br><span class="line">                    movePlayer(<span class="number">1</span>, <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">elif</span> event.key == pygame.K_r:</span><br><span class="line">                resetLevel()</span><br><span class="line">            <span class="keyword">elif</span> event.key == pygame.K_p:</span><br><span class="line">                paused = <span class="keyword">not</span> paused</span><br><span class="line">            <span class="keyword">elif</span> event.key == pygame.K_1:</span><br><span class="line">                current_level = <span class="number">0</span></span><br><span class="line">                resetLevel()</span><br><span class="line">            <span class="keyword">elif</span> event.key == pygame.K_2:</span><br><span class="line">                current_level = <span class="number">1</span></span><br><span class="line">                resetLevel()</span><br><span class="line">            <span class="keyword">elif</span> event.key == pygame.K_3:</span><br><span class="line">                current_level = <span class="number">2</span></span><br><span class="line">                resetLevel()</span><br><span class="line"></span><br><span class="line">    screen.fill((<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>))</span><br><span class="line">    backGround()</span><br><span class="line">    mapSet()</span><br><span class="line">    drawPlayer()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ˜¾ç¤ºæ—¶é—´å’Œè¯„åˆ†</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> paused:</span><br><span class="line">        elapsed_time = time.time() - start_time</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        elapsed_time = elapsed_time  <span class="comment"># æš‚åœæ—¶ä¿æŒæ—¶é—´ä¸å˜</span></span><br><span class="line"></span><br><span class="line">    font = pygame.font.Font(<span class="literal">None</span>, <span class="number">36</span>)</span><br><span class="line">    time_text = font.render(<span class="string">f&quot;Time: <span class="subst">&#123;<span class="built_in">int</span>(elapsed_time)&#125;</span>s&quot;</span>, <span class="literal">True</span>, (<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>))</span><br><span class="line">    screen.blit(time_text, (<span class="number">10</span>, <span class="number">10</span>))</span><br><span class="line"></span><br><span class="line">    rank = score(elapsed_time)</span><br><span class="line">    rank_text = font.render(<span class="string">f&quot;Rank: <span class="subst">&#123;rank&#125;</span>&quot;</span>, <span class="literal">True</span>, (<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>))</span><br><span class="line">    screen.blit(rank_text, (<span class="number">10</span>, <span class="number">50</span>))</span><br><span class="line"></span><br><span class="line">    pygame.display.flip()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> isAllGet():</span><br><span class="line">        current_level += <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> current_level &lt; <span class="built_in">len</span>(levels):</span><br><span class="line">            resetLevel()</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            running = <span class="literal">False</span>  <span class="comment"># æ‰€æœ‰å…³å¡å®Œæˆï¼Œé€€å‡ºæ¸¸æˆ</span></span><br></pre></td></tr></table></figure><p>æœ¬é¡¹ç›®åœ¨åŸæœ‰åŸºæœ¬çš„æ¨ç®±å­åŸºç¡€ä¸Šï¼Œæ·»åŠ äº†æš‚åœï¼Œé€‰å…³ï¼Œè®¡æ—¶ä¸è¯„åˆ†åŠŸèƒ½</p><p>äº‹ä»¶ç›‘å¬ï¼šä½¿ç”¨ pygame.event.get() è·å–å½“å‰å‘ç”Ÿçš„æ‰€æœ‰äº‹ä»¶ã€‚éå†äº‹ä»¶åˆ—è¡¨ï¼Œåˆ¤æ–­äº‹ä»¶ç±»å‹ã€‚å¦‚æœäº‹ä»¶ç±»å‹æ˜¯ pygame.QUITï¼Œè¡¨ç¤ºç”¨æˆ·å…³é—­äº†æ¸¸æˆçª—å£ï¼Œåˆ™è®¾ç½® running å˜é‡ä¸º Falseï¼Œç»ˆæ­¢ä¸»å¾ªç¯ï¼Œæ¸¸æˆç»“æŸã€‚å¦‚æœäº‹ä»¶ç±»å‹æ˜¯ pygame.KEYDOWNï¼Œè¡¨ç¤ºç”¨æˆ·æŒ‰ä¸‹äº†é”®ç›˜æŒ‰é”®ï¼Œæ ¹æ®æŒ‰é”®çš„ä¸åŒè§¦å‘ç›¸åº”çš„æ“ä½œã€‚</p><p>å¤„ç†é”®ç›˜äº‹ä»¶ï¼šæ ¹æ®ç”¨æˆ·æŒ‰ä¸‹çš„é”®ç›˜æŒ‰é”®ï¼Œè°ƒç”¨ç›¸åº”çš„ç§»åŠ¨å‡½æ•°ã€‚å¦‚æœæŒ‰ä¸‹çš„æ˜¯ä¸Šã€ä¸‹ã€å·¦ã€å³é”®ï¼Œåˆ™è°ƒç”¨ movePlayer() å‡½æ•°è¿›è¡Œç©å®¶ç§»åŠ¨ã€‚å¦‚æœæŒ‰ä¸‹çš„æ˜¯å…¶ä»–é”®ï¼Œå¯ä»¥æ·»åŠ é¢å¤–çš„åŠŸèƒ½ï¼Œå¦‚å…³å¡é€‰æ‹©ç­‰ã€‚</p><p>æ›´æ–°æ¸¸æˆçŠ¶æ€ï¼šæ ¹æ®ç”¨æˆ·çš„æ“ä½œæ›´æ–°æ¸¸æˆçŠ¶æ€ï¼ŒåŒ…æ‹¬ç©å®¶ä½ç½®ã€ç®±å­ä½ç½®ç­‰ã€‚è°ƒç”¨ç›¸å…³çš„æ›´æ–°å‡½æ•°ï¼Œå¦‚æ›´æ–°ç©å®¶ä½ç½®ã€æ›´æ–°ç®±å­ä½ç½®ç­‰ã€‚</p><p>ç»˜åˆ¶æ¸¸æˆç”»é¢ï¼šä½¿ç”¨ screen.fill() æ–¹æ³•æ¸…ç©ºå±å¹•ã€‚è°ƒç”¨ç»˜åˆ¶å‡½æ•° backGround() ç»˜åˆ¶æ¸¸æˆèƒŒæ™¯ã€‚è°ƒç”¨ç»˜åˆ¶å‡½æ•° mapSet() ç»˜åˆ¶æ¸¸æˆåœ°å›¾ã€‚è°ƒç”¨ç»˜åˆ¶å‡½æ•° drawPlayer() ç»˜åˆ¶ç©å®¶ã€‚</p><p>æ›´æ–°å±å¹•ï¼šä½¿ç”¨ pygame.display.flip() æ›´æ–°å±å¹•æ˜¾ç¤ºï¼Œå°†ç»˜åˆ¶çš„ç”»é¢å‘ˆç°åœ¨å±å¹•ä¸Šã€‚</p><p>æ£€æŸ¥æ¸¸æˆæ˜¯å¦ç»“æŸï¼šè°ƒç”¨å‡½æ•° isAllGet() æ£€æŸ¥æ¸¸æˆæ˜¯å¦èƒœåˆ©ï¼Œå³æ˜¯å¦å®Œæˆäº†æ‰€æœ‰ç›®æ ‡ã€‚å¦‚æœæ¸¸æˆèƒœåˆ©ï¼Œåˆ™ç»“æŸä¸»å¾ªç¯ï¼Œæ¸¸æˆç»“æŸã€‚å¦‚æœæ¸¸æˆå°šæœªç»“æŸï¼Œåˆ™ç»§ç»­ç­‰å¾…äº‹ä»¶ã€‚</p><h1 id="ä¸ªäººåˆ›æ–°ç‚¹"><a href="#ä¸ªäººåˆ›æ–°ç‚¹" class="headerlink" title="ä¸ªäººåˆ›æ–°ç‚¹"></a>ä¸ªäººåˆ›æ–°ç‚¹</h1><p>â€‹        æœ¬é¡¹ç›®é‡‡ç”¨åŒåœ°å›¾è®¾è®¡ï¼Œå³æ¸¸æˆåœ°å›¾åˆ†ä¸ºå®é™…æ¸¸æˆåœ°å›¾å’ŒçŠ¶æ€è®°å½•åœ°å›¾ä¸¤éƒ¨åˆ†ã€‚åœ¨æ¸¸æˆè¿›è¡Œè¿‡ç¨‹ä¸­ï¼Œå®é™…æ¸¸æˆåœ°å›¾ç”¨äºç»˜åˆ¶æ¸¸æˆç”»é¢å’Œæ§åˆ¶ç©å®¶æ“ä½œï¼Œè€ŒçŠ¶æ€è®°å½•åœ°å›¾ç”¨äºè®°å½•æ¸¸æˆçŠ¶æ€å’Œåˆ¤æ–­æ¸¸æˆèƒœåˆ©æ¡ä»¶ã€‚è¿™ç§è®¾è®¡ä½¿å¾—æ¸¸æˆé€»è¾‘æ›´åŠ æ¸…æ™°ï¼Œä»£ç ç»“æ„æ›´åŠ æ¨¡å—åŒ–ã€‚</p><p>â€‹        åŒæ—¶åŠ æœ‰è®¡æ—¶åŠŸèƒ½ä¸é€‰å…³ç­‰æŒ‰é”®æ“ä½œï¼Œåœ¨ä¸€å®šæ—¶é—´èŒƒå›´å†…å¯ä»¥å¾—åˆ°è¯¥å…³å¡ç›®å‰çš„è¯„åˆ†ç­‰çº§æ˜¯å¤šå°‘ï¼ŒæŒ‰ä¸‹æ•°å­—é”®1ï¼Œ2ï¼Œ3å¯ä»¥å®ç°å…³å¡1ï¼Œ2ï¼Œ3çš„é€‰æ‹©ï¼Œæ¯å®Œæˆä¸€å…³åå°†è‡ªåŠ¨è¿›å…¥ä¸‹ä¸€ä¸ªã€‚åç»­çš„åœ°å›¾æ›´æ–°å¯ä»¥æ·»åŠ åˆ°Levelä¸­ï¼Œä¸æœ€åçš„é€‰å…³è®¾è®¡ï¼Œä»£ç çš„å¯ç»´æŠ¤æ€§å¼ºã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> Pythonå®è·µ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LC 34</title>
      <link href="/2024/05/27/LC-34%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/"/>
      <url>/2024/05/27/LC-34%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/</url>
      
        <content type="html"><![CDATA[<h1 id="åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®"><a href="#åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®" class="headerlink" title="åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®"></a>åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®</h1><p>é¢˜ç›®æè¿°:ç»™ä½ ä¸€ä¸ªæŒ‰ç…§éé€’å‡é¡ºåºæ’åˆ—çš„æ•´æ•°æ•°ç»„ <code>nums</code>ï¼Œå’Œä¸€ä¸ªç›®æ ‡å€¼ <code>target</code>ã€‚è¯·ä½ æ‰¾å‡ºç»™å®šç›®æ ‡å€¼åœ¨æ•°ç»„ä¸­çš„å¼€å§‹ä½ç½®å’Œç»“æŸä½ç½®ã€‚</p><p>å¦‚æœæ•°ç»„ä¸­ä¸å­˜åœ¨ç›®æ ‡å€¼ <code>target</code>ï¼Œè¿”å› <code>[-1, -1]</code>ã€‚</p><p>ä½ å¿…é¡»è®¾è®¡å¹¶å®ç°æ—¶é—´å¤æ‚åº¦ä¸º <code>O(log n)</code> çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜ã€‚</p><blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [5,7,7,8,8,10], target = 8</span><br><span class="line">è¾“å‡ºï¼š[3,4]</span><br></pre></td></tr></table></figure></blockquote><p>ç­”æ¡ˆ:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[] searchRange(<span class="type">int</span>[] nums, <span class="type">int</span> target) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> nums.length;</span><br><span class="line">        <span class="type">int</span> <span class="variable">left</span> <span class="operator">=</span> <span class="number">0</span>, right = len - <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">start</span> <span class="operator">=</span> -<span class="number">1</span>, end = -<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (left &lt;= right) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> (left + right) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (nums[mid] &lt; target) &#123;</span><br><span class="line">                left = mid + <span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (nums[mid] &gt; target) &#123;</span><br><span class="line">                right = mid - <span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                start = mid;</span><br><span class="line">                end = mid;</span><br><span class="line">                <span class="keyword">while</span> (start &gt; left &amp;&amp; nums[start - <span class="number">1</span>] == target) &#123;</span><br><span class="line">                    start--;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">while</span> (end &lt; right &amp;&amp; nums[end + <span class="number">1</span>] == target) &#123;</span><br><span class="line">                    end++;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;start, end&#125;;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;-<span class="number">1</span>, -<span class="number">1</span>&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>â€‹    é¢˜ç›®çš„å…³é”®åœ¨äºå½“æ•°ç»„çš„ä¸­é—´å€¼ç­‰äºtargetåè¦æ€ä¹ˆå¤„ç†ï¼Œé¦–å…ˆåº”å½“åˆå§‹åŒ–startä¸end,ç´§æ¥ç€åˆ†åˆ«æ’æŸ¥ï¼Œå¦‚æœè¯´startå€¼å¤§äºæœ€å·¦è¾¹å€¼çš„è¯ï¼Œå¹¶ä¸”startå€¼å·¦è¾¹çš„å€¼ä¹Ÿç­‰äºtargetï¼Œé‚£ä¹ˆstartåº”è¯¥å‡å°‘ï¼Œç›´è‡³è¾¹ç•Œleftï¼Œå³è¾¹ä¹Ÿæ˜¯åŒç†ï¼Œæ‰€ä»¥å¾—åˆ°ä»¥ä¸‹ä»£ç :</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ‰¾åˆ°ç›®æ ‡å€¼åï¼Œå‘å·¦æ‰©å±•ä»¥æ‰¾åˆ°èµ·å§‹ä½ç½®</span></span><br><span class="line"><span class="keyword">while</span> (start &gt; left &amp;&amp; nums[start - <span class="number">1</span>] == target) &#123;</span><br><span class="line">    start--;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ‰¾åˆ°ç›®æ ‡å€¼åï¼Œå‘å³æ‰©å±•ä»¥æ‰¾åˆ°ç»“æŸä½ç½®</span></span><br><span class="line"><span class="keyword">while</span> (end &lt; right &amp;&amp; nums[end + <span class="number">1</span>] == target) &#123;</span><br><span class="line">    end++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥å‘ç°è¿™ä¸ªç®—æ³•æ˜¯æå…¶ä¼˜ç§€çš„</p><p><img src="D:\BlogFile\source\_posts\LC-34äºŒåˆ†æŸ¥æ‰¾.assets\092115caaf721652fce1cb5426d0ac22.png" alt="092115caaf721652fce1cb5426d0ac22"></p>]]></content>
      
      
      
        <tags>
            
            <tag> LeetCodeåˆ·é¢˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æŸ¥æ‰¾ç®—æ³•</title>
      <link href="/2024/05/27/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE%E7%AE%97%E6%B3%95/"/>
      <url>/2024/05/27/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE%E7%AE%97%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h1 id="çº¿æ€§æŸ¥æ‰¾ç®—æ³•-Linear-Search"><a href="#çº¿æ€§æŸ¥æ‰¾ç®—æ³•-Linear-Search" class="headerlink" title="çº¿æ€§æŸ¥æ‰¾ç®—æ³•(Linear Search)"></a>çº¿æ€§æŸ¥æ‰¾ç®—æ³•(Linear Search)</h1><p>è¿™æ˜¯ä¸€ç§æœ€ç®€å•æœ€æš´åŠ›çš„æŸ¥æ‰¾ç®—æ³•ï¼Œè¦æ±‚ï¼šçº¿æ€§è¡¨å¿…é¡»é‡‡ç”¨é¡ºåºå­˜å‚¨ç»“æ„ï¼Œè€Œä¸”è¡¨ä¸­å…ƒç´ æŒ‰å…³é”®å­—æœ‰åºæ’åˆ—ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> BinarySearch;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BinarySearchBasic</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> b[] = &#123;<span class="number">1</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">12</span>, <span class="number">14</span>, <span class="number">16</span>, <span class="number">45</span>&#125;;</span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> linearSearch(b, <span class="number">7</span>);</span><br><span class="line">        System.out.println(result);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">linearSearch</span><span class="params">(<span class="type">int</span>[] a,<span class="type">int</span> target)</span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;i&lt;a.length;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(a[i] == target)&#123;</span><br><span class="line">                <span class="keyword">return</span> i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    çº¿æ€§æŸ¥æ‰¾ï¼›</span></span><br><span class="line"><span class="comment">    æ•°æ®å…ƒç´ ä¸ªæ•°n</span></span><br><span class="line"><span class="comment">    int i = 0;       1</span></span><br><span class="line"><span class="comment">    i&lt;a.length;    n+1</span></span><br><span class="line"><span class="comment">    i++;             n</span></span><br><span class="line"><span class="comment">    a[i] == target   n</span></span><br><span class="line"><span class="comment">    return -1        1</span></span><br><span class="line"><span class="comment">    æ€»æ¬¡æ•°ï¼š3*n +3</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="äºŒåˆ†æŸ¥æ‰¾ç®—æ³•-Binary-Search"><a href="#äºŒåˆ†æŸ¥æ‰¾ç®—æ³•-Binary-Search" class="headerlink" title="äºŒåˆ†æŸ¥æ‰¾ç®—æ³•(Binary Search)"></a>äºŒåˆ†æŸ¥æ‰¾ç®—æ³•(Binary Search)</h1><p>è¦æ±‚ä¸çº¿æ€§æŸ¥æ‰¾ç®—æ³•ä¸€æ ·ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> BinarySearch;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BinarySearchBasic</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> b[] = &#123;<span class="number">1</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">12</span>, <span class="number">14</span>, <span class="number">16</span>, <span class="number">45</span>&#125;;</span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> binarySearchBasic(b, <span class="number">7</span>);</span><br><span class="line">        System.out.println(result);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">binarySearchBasic</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>, j = a.length - <span class="number">1</span>;<span class="comment">//æ”¹è¿› :j = a.length;</span></span><br><span class="line">        <span class="keyword">while</span> (i &lt;= j) &#123;<span class="comment">// èŒƒå›´å†…æœ‰æ•°å€¼ æ”¹è¿› :i&lt;j</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> (i + j) &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (target &lt; a[m]) &#123; <span class="comment">//ç›®æ ‡åœ¨å·¦è¾¹</span></span><br><span class="line">                j = m - <span class="number">1</span>; <span class="comment">//æ”¹è¿› :j=m;</span></span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (a[m] &lt; target) &#123; <span class="comment">//ç›®æ ‡åœ¨å³è¾¹</span></span><br><span class="line">                i = m + <span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> m;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/* é—®é¢˜1ï¼šwhileå¾ªç¯é‡Œé¢ä¸ºä»€ä¹ˆæ˜¯i&lt;=jï¼Œè€Œä¸æ˜¯i&lt;j?</span></span><br><span class="line"><span class="comment">     åœ¨ä½ç½®0å¤„ï¼Œiä¸jå…±åŒæŒ‡å‘çš„å…ƒç´ ä¹Ÿæ˜¯è¦æ‰¾çš„å…ƒç´ ï¼Œä½†æ˜¯å¾ªç¯æ¡ä»¶æ˜¯i&lt;jï¼Œæ•…å°‘äº†ä¸€æ¬¡æ¯”è¾ƒ</span></span><br><span class="line"><span class="comment">     i = j : å®ƒä»¬æŒ‡å‘çš„å…ƒç´ ä¹Ÿä¼šå‚ä¸æ¯”è¾ƒ</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* é—®é¢˜2ï¼š(i+j)/2 æœ‰æ²¡æœ‰é—®é¢˜ï¼Ÿ</span></span><br><span class="line"><span class="comment">    è‹¥ j = Integer.MAX_VALUE - 1;ç¬¬äºŒæ¬¡åiè¦å˜ä¸ºm+1,m = (i + j)/2 å…¶ä¸­(i+j)è¶…å‡ºäº†æœ€å¤§èŒƒå›´ï¼Œè¾“å‡ºç»“æœä¸ºè´Ÿæ•°</span></span><br><span class="line"><span class="comment">    0100 0000 0000 0000 0000 0000 0000 0000</span></span><br><span class="line"><span class="comment">    0111 1111 1111 1111 1111 1111 1111 1111</span></span><br><span class="line"><span class="comment">    ç›¸åŠ åæº¢å‡º</span></span><br><span class="line"><span class="comment">    ä½¿ç”¨æ— ç¬¦å·å³ç§» &gt;&gt;&gt;</span></span><br><span class="line"><span class="comment">    0000 0111 &gt;&gt;&gt; 1 : 0000 0011 ä½¿å¾—äºŒè¿›åˆ¶ç»“æœå˜ä¸ºé™¤ä»¥äºŒåçš„æœ€å°æ•´æ•° å³ç§»ä¸€ä½ç›¸å¯¹äº/2</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    äºŒåˆ†æŸ¥æ‰¾:</span></span><br><span class="line"><span class="comment">    int i = 0,j = a.length-1;   2</span></span><br><span class="line"><span class="comment">    return -1                   1</span></span><br><span class="line"><span class="comment">    å¾ªç¯æ¬¡æ•°L = floor(log_2(n)) + 1</span></span><br><span class="line"><span class="comment">    i&lt;=j                      L+1</span></span><br><span class="line"><span class="comment">    int m = (i + j) &gt;&gt;&gt;1 ;     L</span></span><br><span class="line"><span class="comment">    target &lt; a[m]              L</span></span><br><span class="line"><span class="comment">    a[m] &gt; target              L</span></span><br><span class="line"><span class="comment">    æ€»æ¬¡æ•°:(floor(log_2(n))+1)*5 + 4</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    äºŒåˆ†æŸ¥æ‰¾çš„ç©ºé—´å¤æ‚åº¦æ˜¯O(1)  i,j,mä¸‰ä¸ªå¸¸æ•°æŒ‡é’ˆ</span></span><br><span class="line"><span class="comment">    æ—¶é—´å¤æ‚åº¦æœ€å·®æ˜¯O(log(n))</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é¢å¤–çš„ç®—æ³•å˜å¼ï¼Œå¦‚å¯»æ‰¾å³è¾¹æœ€å¤§ï¼Œå·¦è¾¹æœ€å°ç­‰ç­‰ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> BinarySearch;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BinarySearchLeftmost</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[]args)</span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">binarySearchLeft1</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span> target)</span> &#123;<span class="comment">//è¿”å›å€¼æ— ç”¨</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>, j = a.length - <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">candidate</span> <span class="operator">=</span> -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (i &lt;= j) &#123;<span class="comment">// èŒƒå›´å†…æœ‰æ•°å€¼ æ”¹è¿› :i&lt;j</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> (i + j) &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (target &lt; a[m]) &#123; <span class="comment">//ç›®æ ‡åœ¨å·¦è¾¹</span></span><br><span class="line">                j = m - <span class="number">1</span>; <span class="comment">//æ”¹è¿› :j=m;</span></span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (a[m] &lt; target) &#123; <span class="comment">//ç›®æ ‡åœ¨å³è¾¹</span></span><br><span class="line">                i = m + <span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//è®°å½•å€™é€‰ä½ç½®</span></span><br><span class="line">                candidate = m;</span><br><span class="line">                j = m - <span class="number">1</span>;<span class="comment">// i = m + 1; RightMost</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> candidate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">binarySearchLeft2</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span> target)</span> &#123;<span class="comment">//è¿”å›å€¼æ— ç”¨</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>, j = a.length - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (i &lt;= j) &#123;<span class="comment">// èŒƒå›´å†…æœ‰æ•°å€¼ æ”¹è¿› :i&lt;j</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> (i + j) &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (target &lt;= a[m]) &#123; <span class="comment">//ç›®æ ‡åœ¨å·¦è¾¹</span></span><br><span class="line">                j = m - <span class="number">1</span>; <span class="comment">//æ”¹è¿› :j=m;</span></span><br><span class="line">            &#125; <span class="keyword">else</span>&#123; <span class="comment">//ç›®æ ‡åœ¨å³è¾¹</span></span><br><span class="line">                i = m + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">binarySearchRight</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span> target)</span> &#123;<span class="comment">//è¿”å›å€¼æ— ç”¨</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>, j = a.length - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (i &lt;= j) &#123;<span class="comment">// èŒƒå›´å†…æœ‰æ•°å€¼ æ”¹è¿› :i&lt;j</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> (i + j) &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (target &lt; a[m]) &#123; <span class="comment">//ç›®æ ‡åœ¨å·¦è¾¹</span></span><br><span class="line">                j = m - <span class="number">1</span>; <span class="comment">//æ”¹è¿› :j=m;</span></span><br><span class="line">            &#125; <span class="keyword">else</span>&#123; <span class="comment">//ç›®æ ‡åœ¨å³è¾¹</span></span><br><span class="line">                i = m + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> i - <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ±‚æ’å leftmost_result + 1</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> æ•°æ®ç»“æ„ä¸ç®—æ³•åˆ†æ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LC 1</title>
      <link href="/2024/05/26/LC-1-4/"/>
      <url>/2024/05/26/LC-1-4/</url>
      
        <content type="html"><![CDATA[<h1 id="LeetCodeç®—æ³•é¢˜ç»ƒä¹ ç¬”è®°"><a href="#LeetCodeç®—æ³•é¢˜ç»ƒä¹ ç¬”è®°" class="headerlink" title="LeetCodeç®—æ³•é¢˜ç»ƒä¹ ç¬”è®°"></a>LeetCodeç®—æ³•é¢˜ç»ƒä¹ ç¬”è®°</h1><h2 id="1-ä¸¤æ•°ç›¸åŠ "><a href="#1-ä¸¤æ•°ç›¸åŠ " class="headerlink" title="1.ä¸¤æ•°ç›¸åŠ "></a>1.ä¸¤æ•°ç›¸åŠ </h2><blockquote><p>ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ <code>nums</code> å’Œä¸€ä¸ªæ•´æ•°ç›®æ ‡å€¼ <code>target</code>ï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡º <strong>å’Œä¸ºç›®æ ‡å€¼</strong> <em><code>target</code></em> çš„é‚£ <strong>ä¸¤ä¸ª</strong> æ•´æ•°ï¼Œå¹¶è¿”å›å®ƒä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚</p><p>ä½ å¯ä»¥å‡è®¾æ¯ç§è¾“å…¥åªä¼šå¯¹åº”ä¸€ä¸ªç­”æ¡ˆã€‚ä½†æ˜¯ï¼Œæ•°ç»„ä¸­åŒä¸€ä¸ªå…ƒç´ åœ¨ç­”æ¡ˆé‡Œä¸èƒ½é‡å¤å‡ºç°ã€‚</p><p>ä½ å¯ä»¥æŒ‰ä»»æ„é¡ºåºè¿”å›ç­”æ¡ˆã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [<span class="number">2</span>,<span class="number">7</span>,<span class="number">11</span>,<span class="number">15</span>], target = <span class="number">9</span></span><br><span class="line">è¾“å‡ºï¼š[<span class="number">0</span>,<span class="number">1</span>]</span><br><span class="line">è§£é‡Šï¼šå› ä¸º nums[<span class="number">0</span>] + nums[<span class="number">1</span>] == <span class="number">9</span> ï¼Œè¿”å› [<span class="number">0</span>, <span class="number">1</span>] ã€‚</span><br></pre></td></tr></table></figure></blockquote><p>æˆ‘çš„ä»£ç :</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[] twoSum(<span class="type">int</span>[] nums, <span class="type">int</span> target) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">length</span> <span class="operator">=</span> nums.length;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; length; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i + <span class="number">1</span>; j &lt; length; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (nums[i] + nums[j] == target) &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;i, j&#125;;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ˜¾è€Œæ˜“è§ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆç²—ç³™çš„æš´åŠ›ç®—æ³•ï¼Œé€šè¿‡åŒæŒ‡é’ˆï¼Œæ¯æ¬¡å¾ªç¯ä¸‹iå˜é‡å’Œjå˜é‡ç›¸åŠ æ¥åˆ¤æ–­æ˜¯å¦æœ‰æ»¡è¶³é¢˜æ„çš„æ¡ä»¶ï¼Œå¦‚æœæœ‰åˆ™è¿”å›[i,j]ï¼Œå¦åˆ™è¿”å›[0]ã€‚è¿™ä¸ªç®—æ³•ç”¨æ—¶ä»…å‡»è´¥30.79ï¼…çš„javaç”¨æˆ·ï¼Œå†…å­˜å ç”¨å‡»è´¥äº†67.13ï¼…çš„ç”¨æˆ·ï¼Œå¯è§è¿™ä¸ªæ–¹æ¡ˆçš„æ•ˆç‡å¾ˆä½ï¼Œæ—¶é—´è¾ƒé•¿ã€‚</p><p>ä¼˜ç§€çš„ç®—æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[] twoSum(<span class="type">int</span>[] nums, <span class="type">int</span> target) &#123;</span><br><span class="line">        Map&lt;Integer, Integer&gt; hashtable = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;Integer, Integer&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; nums.length; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (hashtable.containsKey(target - nums[i])) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;hashtable.get(target - nums[i]), i&#125;;</span><br><span class="line">            &#125;</span><br><span class="line">            hashtable.put(nums[i], i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ–¹æ¡ˆç”¨åˆ°äº†å“ˆå¸Œè¡¨ï¼Œç”¨ç©ºé—´æ¥æ¢æ—¶é—´ï¼Œå› æ­¤è¿™ä¸ªæ–¹æ¡ˆçš„æ—¶é—´å¼‚å¸¸çš„å°‘ï¼Œè¶…è¿‡äº†99.57ï¼…çš„ç”¨æˆ·ï¼Œä½†æ˜¯åœ¨å†…å­˜æ–¹é¢å´ä»…å‡»è´¥äº†21.59ï¼…çš„ç”¨æˆ·ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> LeetCodeåˆ·é¢˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å•é“¾è¡¨ä¸åŒé“¾è¡¨</title>
      <link href="/2024/05/25/%E5%8D%95%E9%93%BE%E8%A1%A8%E4%B8%8E%E5%8F%8C%E9%93%BE%E8%A1%A8/"/>
      <url>/2024/05/25/%E5%8D%95%E9%93%BE%E8%A1%A8%E4%B8%8E%E5%8F%8C%E9%93%BE%E8%A1%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="å•é“¾è¡¨"><a href="#å•é“¾è¡¨" class="headerlink" title="å•é“¾è¡¨"></a>å•é“¾è¡¨</h1><h3 id="å†…å­˜ç»“æ„"><a href="#å†…å­˜ç»“æ„" class="headerlink" title="å†…å­˜ç»“æ„"></a>å†…å­˜ç»“æ„</h3><ul><li><strong>æ•°ç»„</strong>ï¼šæ•°ç»„åœ¨å†…å­˜ä¸­æ˜¯ä¸€å—è¿ç»­çš„åŒºåŸŸã€‚è¿™æ„å‘³ç€æ‰€æœ‰å…ƒç´ åœ¨å†…å­˜ä¸­æ˜¯è¿ç»­å­˜å‚¨çš„ï¼Œå¹¶ä¸”æ¯ä¸ªå…ƒç´ éƒ½å¯ä»¥é€šè¿‡è®¡ç®—åŸºåœ°å€å’Œç´¢å¼•æ¥ç›´æ¥è®¿é—®ã€‚</li><li><strong>é“¾è¡¨</strong>ï¼šé“¾è¡¨ç”±ä¸€ç³»åˆ—èŠ‚ç‚¹ç»„æˆï¼Œæ¯ä¸ªèŠ‚ç‚¹åŒ…å«æ•°æ®å’Œä¸€ä¸ªæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„å¼•ç”¨ã€‚èŠ‚ç‚¹åœ¨å†…å­˜ä¸­ä¸ä¸€å®šæ˜¯è¿ç»­çš„ï¼Œå®ƒä»¬å¯ä»¥åˆ†å¸ƒåœ¨å†…å­˜çš„ä»»æ„ä½ç½®ã€‚</li></ul><h3 id="æŸ¥è¯¢é€Ÿåº¦"><a href="#æŸ¥è¯¢é€Ÿåº¦" class="headerlink" title="æŸ¥è¯¢é€Ÿåº¦"></a>æŸ¥è¯¢é€Ÿåº¦</h3><ul><li><p>æ•°ç»„æŸ¥è¯¢</p><p>ç”±äºæ•°ç»„åœ¨å†…å­˜ä¸­æ˜¯è¿ç»­å­˜å‚¨çš„ï¼Œä»»ä½•ä½ç½®çš„å…ƒç´ éƒ½å¯ä»¥é€šè¿‡ç´¢å¼•ç›´æ¥è®¿é—®ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ O(1)ã€‚</p></li><li><p>é“¾è¡¨æŸ¥è¯¢</p><p>é“¾è¡¨çš„æŸ¥è¯¢éœ€è¦ä»å¤´èŠ‚ç‚¹å¼€å§‹ï¼Œé€ä¸ªè®¿é—®èŠ‚ç‚¹ï¼Œç›´åˆ°æ‰¾åˆ°æ‰€éœ€çš„èŠ‚ç‚¹ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ O(n)ã€‚</p></li></ul><h3 id="æ·»åŠ å’Œåˆ é™¤é€Ÿåº¦"><a href="#æ·»åŠ å’Œåˆ é™¤é€Ÿåº¦" class="headerlink" title="æ·»åŠ å’Œåˆ é™¤é€Ÿåº¦"></a>æ·»åŠ å’Œåˆ é™¤é€Ÿåº¦</h3><p><strong>æ•°ç»„æ·»åŠ å’Œåˆ é™¤</strong></p><ul><li><strong>æ·»åŠ </strong>ï¼šå¦‚æœåœ¨æ•°ç»„ä¸­é—´æ·»åŠ å…ƒç´ ï¼Œéœ€è¦å°†è¯¥ä½ç½®ä¹‹åçš„æ‰€æœ‰å…ƒç´ å‘åç§»åŠ¨ï¼Œä»¥è…¾å‡ºç©ºé—´ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ O(n)ã€‚</li><li><strong>åˆ é™¤</strong>ï¼šå¦‚æœåœ¨æ•°ç»„ä¸­é—´åˆ é™¤å…ƒç´ ï¼Œéœ€è¦å°†è¯¥ä½ç½®ä¹‹åçš„æ‰€æœ‰å…ƒç´ å‘å‰ç§»åŠ¨ï¼Œä»¥å¡«è¡¥ç©ºç¼ºï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ O(n)ã€‚</li></ul><p><strong>é“¾è¡¨æ·»åŠ å’Œåˆ é™¤</strong></p><ul><li><strong>æ·»åŠ </strong>ï¼šåœ¨é“¾è¡¨çš„ä»»æ„ä½ç½®æ·»åŠ å…ƒç´ åªéœ€è°ƒæ•´å‰ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆæŒ‡å‘æ–°èŠ‚ç‚¹ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ O(1)ã€‚</li><li><strong>åˆ é™¤</strong>ï¼šåœ¨é“¾è¡¨çš„ä»»æ„ä½ç½®åˆ é™¤å…ƒç´ åªéœ€è°ƒæ•´å‰ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆç»•è¿‡è¢«åˆ é™¤çš„èŠ‚ç‚¹ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ O(1)ã€‚</li></ul><h3 id="ç»“æ„"><a href="#ç»“æ„" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h3><p>å•é“¾è¡¨ä¸€èˆ¬æœ‰å¤´æŒ‡é’ˆï¼Œå³æ•´ä¸ªé“¾è¡¨å¼€å§‹çš„åœ°å€ï¼Œå¹¶ä¸”æ¯ä¸ªèŠ‚ç‚¹æœ‰å…¶å­˜å‚¨çš„å…ƒç´ ä¸nextåŸŸï¼ŒnextåŸŸä¸­å­˜å‚¨ç€ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„åœ°å€ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> æ•°æ®ç»“æ„ åŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ ˆä¸çº¿æ€§ç»“æ„</title>
      <link href="/2024/05/24/%E6%A0%88%E4%B8%8E%E7%BA%BF%E6%80%A7%E7%BB%93%E6%9E%84/"/>
      <url>/2024/05/24/%E6%A0%88%E4%B8%8E%E7%BA%BF%E6%80%A7%E7%BB%93%E6%9E%84/</url>
      
        <content type="html"><![CDATA[<h1 id="æ•°æ®ç»“æ„ä¸ç®—æ³•åˆ†æç¬”è®°"><a href="#æ•°æ®ç»“æ„ä¸ç®—æ³•åˆ†æç¬”è®°" class="headerlink" title="æ•°æ®ç»“æ„ä¸ç®—æ³•åˆ†æç¬”è®°"></a>æ•°æ®ç»“æ„ä¸ç®—æ³•åˆ†æç¬”è®°</h1><p>â€‹       æ•°æ®ç»“æ„ä¸ç®—æ³•åˆ†æçš„å­¦ä¹ å¯¹äºæé«˜ç¼–ç¨‹æŠ€èƒ½å’Œè§£å†³å¤æ‚é—®é¢˜è‡³å…³é‡è¦ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œé€‰æ‹©åˆé€‚çš„æ•°æ®ç»“æ„å’Œç®—æ³•å¯ä»¥å¤§å¤§æé«˜ç¨‹åºçš„è¿è¡Œæ•ˆç‡å’Œå†…å­˜ä½¿ç”¨æ•ˆç‡ã€‚</p><h2 id="çº¿æ€§ç»“æ„ä¸éçº¿æ€§ç»“æ„"><a href="#çº¿æ€§ç»“æ„ä¸éçº¿æ€§ç»“æ„" class="headerlink" title="çº¿æ€§ç»“æ„ä¸éçº¿æ€§ç»“æ„"></a>çº¿æ€§ç»“æ„ä¸éçº¿æ€§ç»“æ„</h2><p>â€‹       çº¿æ€§ç»“æ„åˆ†ä¸ºä¸¤ç§ä¸åŒçš„å­˜å‚¨ç»“æ„ï¼Œåˆ†åˆ«æ˜¯é¡ºåºå­˜å‚¨ç»“æ„ä¸é“¾å¼å­˜å‚¨ç»“æ„ï¼Œé¡ºåºå­˜å‚¨çš„çº¿æ€§è¡¨ç§°ä¸ºé¡ºåºè¡¨ï¼Œé¡ºåºè¡¨å†…çš„å­˜å‚¨å…ƒç´ æ˜¯è¿ç»­çš„ï¼Œé“¾å¼å­˜å‚¨çš„çº¿æ€§è¡¨ç§°ä¸ºé“¾è¡¨ï¼Œå…¶å­˜å‚¨å…ƒç´ ä¸ä¸€å®šæ˜¯è¿ç»­çš„ï¼Œå…ƒç´ èŠ‚ç‚¹å­˜æ”¾æ•°æ®å…ƒç´ ä¸ç›¸é‚»å…ƒç´ çš„åœ°å€ä¿¡æ¯ã€‚</p><p>â€‹       ä¸€å¯¹ä¸€çº¿æ€§çš„å­˜å‚¨ç»“æ„ç§°ä¸ºçº¿æ€§å­˜å‚¨ç»“æ„ï¼ˆåˆ†ä¸ºè¿ç»­ä¸ä¸è¿ç»­ï¼‰ï¼Œæ¯”å¦‚æ•°ç»„ï¼Œé“¾è¡¨ï¼Œé˜Ÿåˆ—ç­‰ã€‚ä¾‹å¦‚(1,2,3,4)ä¸(1,?,?,2,3,?,?,?,4)ã€‚</p><p>â€‹       å¯¹äºéçº¿æ€§ç»“æ„ï¼Œå¸¸è§çš„æœ‰ï¼šäºŒç»´æ•°ç»„ï¼Œå¹¿ä¹‰è¡¨ï¼Œæ ‘ç»“æ„ï¼Œå›¾ç»“æ„ç­‰</p><h2 id="æ ˆ"><a href="#æ ˆ" class="headerlink" title="æ ˆ"></a>æ ˆ</h2><p>â€‹       åŸºç¡€æ¦‚å¿µå¾®æœºåŸç†ä¸æ¥å£æŠ€æœ¯ä¸­å·²è®²ï¼Œæ•…ç•¥ã€‚</p><p>â€‹       æ ˆæ˜¯ä¸€ä¸ªè¡¨ï¼Œæ‰€ä»¥ä»»ä½•å¯ä»¥å®ç°è¡¨çš„æ–¹æ³•éƒ½å¯ä»¥ç”¨æ¥å®ç°æ ˆï¼Œä¸»è¦æ˜¯é“¾è¡¨å®ç°ä¸æ•°ç»„å®ç°ã€‚</p><h4 id="1-é“¾è¡¨å®ç°æ ˆ"><a href="#1-é“¾è¡¨å®ç°æ ˆ" class="headerlink" title="1.é“¾è¡¨å®ç°æ ˆ"></a>1.é“¾è¡¨å®ç°æ ˆ</h4><p>â€‹       å•é“¾è¡¨å®ç°æ ˆï¼Œé€šè¿‡åœ¨é“¾è¡¨é¡¶ç«¯æ’å…¥ä¸€ä¸ªå…ƒç´ æ¥å®ç°<strong>PUSHå…¥æ ˆ</strong>ï¼Œé€šè¿‡åˆ é™¤é“¾è¡¨çš„é¡¶ç«¯å…ƒç´ æ¥å®ç°<strong>POPå‡ºæ ˆ</strong>ï¼Œä½¿ç”¨é“¾è¡¨æ–¹å¼å®ç°çš„æ ˆå«åšåŠ¨æ€æ ˆï¼ŒåŠ¨æ€æ ˆæœ‰é“¾è¡¨çš„éƒ¨åˆ†ç‰¹æ€§ï¼Œå…ƒç´ ä¸å…ƒç´ ä¹‹é—´åœ¨ç‰©ç†å­˜å‚¨ä¸Šå¯ä»¥ä¸è¿ç»­ï¼ŒåŠŸèƒ½å—é™ï¼Œåªèƒ½åœ¨æ ˆé¡¶è¿›è¡ŒPUSHå’ŒPOPï¼Œè€Œä¸æ˜¯åœ¨æ ˆä¸­æˆ–æ ˆå°¾å®ç°æ’å…¥ä¸åˆ é™¤ã€‚</p><h4 id="2-æ•°ç»„å®ç°æ ˆ"><a href="#2-æ•°ç»„å®ç°æ ˆ" class="headerlink" title="2.æ•°ç»„å®ç°æ ˆ"></a>2.æ•°ç»„å®ç°æ ˆ</h4><p>æ•°ç»„å®ç°çš„æ ˆåˆå«é™æ€æ ˆã€‚</p><p>åŸºç¡€çš„ä»£ç å®ç°å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ArrayStack</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> maxSize;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>[] stack;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">top</span> <span class="operator">=</span> -<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ArrayStack</span><span class="params">(<span class="type">int</span> size)</span> &#123;</span><br><span class="line">        maxSize = size;</span><br><span class="line">        stack = <span class="keyword">new</span> <span class="title class_">int</span>[maxSize];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> top == -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> top == maxSize - <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">push</span><span class="params">(<span class="type">int</span> value)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isFull()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;Stack is full&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        stack[++top] = value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">pop</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;Stack is empty&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> stack[top--];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">peek</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;Stack is empty&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> stack[top];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isOper</span><span class="params">(<span class="type">char</span> val)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> val == <span class="string">&#x27;+&#x27;</span> || val == <span class="string">&#x27;-&#x27;</span> || val == <span class="string">&#x27;*&#x27;</span> || val == <span class="string">&#x27;/&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">priority</span><span class="params">(<span class="type">int</span> oper)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (oper == <span class="string">&#x27;*&#x27;</span> || oper == <span class="string">&#x27;/&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (oper == <span class="string">&#x27;+&#x27;</span> || oper == <span class="string">&#x27;-&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">length</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> stack.length+<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">calculate</span><span class="params">(<span class="type">int</span> num1, <span class="type">int</span> num2, <span class="type">int</span> oper)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">switch</span> (oper) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;+&#x27;</span>:</span><br><span class="line">                result = num1 + num2;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;-&#x27;</span>:</span><br><span class="line">                result = num2 - num1;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;*&#x27;</span>:</span><br><span class="line">                result = num1 * num2;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;/&#x27;</span>:</span><br><span class="line">                <span class="keyword">if</span> (num1 == <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ArithmeticException</span>(<span class="string">&quot;/ by zero&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                result = num2 / num1;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="stackçš„å®ä¾‹1-å›æ–‡æ•°"><a href="#stackçš„å®ä¾‹1-å›æ–‡æ•°" class="headerlink" title="stackçš„å®ä¾‹1:å›æ–‡æ•°"></a>stackçš„å®ä¾‹1:å›æ–‡æ•°</h3><blockquote><p>ä½¿ç”¨stackæ•°ç»„æ¥åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦æ˜¯å›æ–‡æ•°ï¼Œå›æ–‡æ•°æ¯”å¦‚:abcdcba</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayStack</span> &#123;</span><br><span class="line">    <span class="comment">// å®šä¹‰æ ˆçš„å¤§å°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> maxStack;</span><br><span class="line">    <span class="comment">// å®šä¹‰æ•°ç»„æ¥æ¨¡æ‹Ÿæ ˆ</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>[] stack;</span><br><span class="line">    <span class="comment">// å®šä¹‰æ ˆé¡¶ä½ç½®ï¼Œé»˜è®¤æƒ…å†µå¦‚æœæ²¡æœ‰æ•°æ®ï¼Œåˆ™å®šä¹‰ä¸º-1</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">top</span> <span class="operator">=</span> -<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ArrayStack</span><span class="params">(<span class="type">int</span> maxStack)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.maxStack = maxStack;</span><br><span class="line">        stack = <span class="keyword">new</span> <span class="title class_">int</span>[maxStack];</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ¤æ–­æ˜¯å¦æ»¡æ ˆ</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.top == <span class="built_in">this</span>.maxStack - <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ˜¯å¦ä¸ºç©º</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.top == -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">push</span><span class="params">(<span class="type">int</span> value)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(isFull())&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;æ­¤æ ˆå·²æ»¡&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        top++;</span><br><span class="line">        stack[top] = value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">pop</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(isEmpty())&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;æ¬¡æ ˆä¸ºç©º&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">value</span> <span class="operator">=</span> stack[top];</span><br><span class="line"></span><br><span class="line">        top--;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">list</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(isEmpty())&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;æ— æ•°æ®&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;i&lt;stack.length;i++)&#123;</span><br><span class="line">            System.out.printf(<span class="string">&quot;Stack[%d]=%d&quot;</span>,i,stack[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">length</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.top + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ¤æ–­æ˜¯å¦ä¸ºè¿ç®—ç¬¦ + - * %</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isOper</span><span class="params">(<span class="type">char</span> v)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> v==<span class="string">&#x27;+&#x27;</span>||v==<span class="string">&#x27;-&#x27;</span>||v==<span class="string">&#x27;*&#x27;</span>||v==<span class="string">&#x27;%&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è·å–æ ˆçš„å®¹é‡</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">stackLength</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.stack.length;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è·å–æ ˆé¡¶æ•°æ®</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">peek</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.stack[top];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ¤æ–­è¿ç®—ç¬¦ä¼˜å…ˆçº§</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">priority</span><span class="params">(<span class="type">int</span> oper)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(oper == <span class="string">&#x27;*&#x27;</span>||oper == <span class="string">&#x27;%&#x27;</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(oper == <span class="string">&#x27;+&#x27;</span>||oper == <span class="string">&#x27;-&#x27;</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è®¡ç®—å‡½æ•°</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">calculate</span><span class="params">(<span class="type">int</span> num1,<span class="type">int</span> num2,<span class="type">int</span> oper)</span>&#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">switch</span> (oper)&#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;+&#x27;</span>:</span><br><span class="line">                result = num1 + num2;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;-&#x27;</span>:</span><br><span class="line">                result = num2 - num1;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;*&#x27;</span>:</span><br><span class="line">                result = num1 * num2;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;/&#x27;</span>:</span><br><span class="line">                result = num2/num1;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="stackçš„å®ä¾‹2ï¼šå®Œæˆè¡¨è¾¾å¼çš„è®¡ç®—"><a href="#stackçš„å®ä¾‹2ï¼šå®Œæˆè¡¨è¾¾å¼çš„è®¡ç®—" class="headerlink" title="stackçš„å®ä¾‹2ï¼šå®Œæˆè¡¨è¾¾å¼çš„è®¡ç®—"></a>stackçš„å®ä¾‹2ï¼šå®Œæˆè¡¨è¾¾å¼çš„è®¡ç®—</h3><blockquote><p>String val = â€œ4 + 3 + 2 + 1*5â€çš„ç»“æœ</p></blockquote><p>å¤§è‡´æ€è·¯ï¼›å¾ªç¯éå†å­—ç¬¦ä¸²ä¸­çš„æ¯ä¸€ä¸ªæ•°å­—ï¼Œå¹¶ä¸”æŒ‰ç…§å…ƒç´ çš„ç§ç±»åˆ†åˆ«å‹å…¥æ•°å­—æ ˆæˆ–ç¬¦å·æ ˆï¼Œè‹¥ç¬¦å·æ ˆä¸ºç©ºï¼Œå‹å…¥çš„ç¬¦å·åˆ™ç›´æ¥å…¥æ ˆï¼Œè‹¥ä¸ä¸ºç©ºåˆ™å…ˆæ¯”è¾ƒæ ˆä¸­ç¬¦å·çš„ä¼˜å…ˆçº§åˆ«ï¼Œå¦‚æœä¼˜å…ˆçº§å°äºç­‰äºæ ˆä¸­çš„ç¬¦å·ï¼Œåˆ™éœ€è¦è®¡ç®—åŸæ¥æ•°å­—æ ˆçš„æ•°æ®ï¼Œå†å‹å…¥æ•°å­—æ ˆï¼Œå†æŠŠç¬¦å·å‹å…¥åˆ°ç¬¦å·æ ˆä¸­ï¼Œå¦‚æœä¼˜å…ˆçº§å¤§äºåŸæ¥æ ˆä¸­ç¬¦å·ï¼Œåˆ™ç¬¦å·ç›´æ¥å…¥æ ˆå³å¯ã€‚</p><p>è®¾è®¡çš„åŸå› ï¼š</p><ul><li><strong>ä¿æŒé¡ºåº</strong>ï¼šé€šè¿‡ä½¿ç”¨ä¸¤ä¸ªæ ˆï¼Œèƒ½å¤ŸæŒ‰ç…§è¡¨è¾¾å¼ä¸­å‡ºç°çš„é¡ºåºå¤„ç†æ•°å­—å’Œæ“ä½œç¬¦ã€‚</li><li><strong>å¤„ç†ä¼˜å…ˆçº§</strong>ï¼šé€šè¿‡æ¯”è¾ƒä¼˜å…ˆçº§å¹¶å†³å®šæ˜¯å¦è®¡ç®—ï¼Œå¯ä»¥ç¡®ä¿æ›´é«˜ä¼˜å…ˆçº§çš„æ“ä½œç¬¦åœ¨è¾ƒä½ä¼˜å…ˆçº§çš„æ“ä½œç¬¦ä¹‹å‰è¢«å¤„ç†ï¼Œä¿è¯è®¡ç®—çš„æ­£ç¡®æ€§ã€‚</li><li><strong>è®¡ç®—ç®€åŒ–</strong>ï¼šè¿™ç§æ–¹æ³•ä½¿å¾—æ¯æ¬¡è®¡ç®—éƒ½æ¯”è¾ƒç®€å•ï¼Œåªéœ€è¦å…³æ³¨æ ˆé¡¶çš„ä¸¤ä¸ªæ•°å­—å’Œä¸€ä¸ªæ“ä½œç¬¦ï¼Œè€Œä¸æ˜¯æ•´ä¸ªè¡¨è¾¾å¼ã€‚</li></ul><p>ä»£ç å¦‚ä¸‹:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestStack</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;4+3+2*3-5&quot;</span>;</span><br><span class="line">        <span class="type">ArrayStack</span> <span class="variable">numStack</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayStack</span>(<span class="number">10</span>);</span><br><span class="line">        <span class="type">ArrayStack</span> <span class="variable">symbolStack</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayStack</span>(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">temp1</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">temp2</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">symbolChar</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">values</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">length</span> <span class="operator">=</span> str.length();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; length; i++) &#123;</span><br><span class="line">            <span class="type">char</span> <span class="variable">c</span> <span class="operator">=</span> str.charAt(i);</span><br><span class="line">            <span class="keyword">if</span> (symbolStack.isOper(c)) &#123;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (!symbolStack.isEmpty()) &#123;</span><br><span class="line">                    <span class="comment">// æ¯”è¾ƒä¼˜å…ˆçº§</span></span><br><span class="line">                    <span class="keyword">while</span> (!symbolStack.isEmpty() &amp;&amp; symbolStack.priority(c) &lt;= symbolStack.priority(symbolStack.peek())) &#123;</span><br><span class="line">                        <span class="comment">// ç¬¦å·æ ˆè·å–æ ˆé¡¶ç¬¦å·</span></span><br><span class="line">                        <span class="comment">// æ•°å­—æ ˆè·å–ä¸¤ä¸ªæ•°å­—</span></span><br><span class="line">                        temp1 = numStack.pop();</span><br><span class="line">                        temp2 = numStack.pop();</span><br><span class="line">                        symbolChar = symbolStack.pop();</span><br><span class="line">                        result = numStack.calculate(temp1, temp2, symbolChar);</span><br><span class="line">                        <span class="comment">// è¿ç®—ç»“æœå…¥æ ˆ</span></span><br><span class="line">                        numStack.push(result);</span><br><span class="line">                    &#125;</span><br><span class="line">                    symbolStack.push(c);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">// å¦‚æœç©ºç¬¦å·æ ˆï¼Œåˆ™ç›´æ¥å‹æ ˆ</span></span><br><span class="line">                    symbolStack.push(c);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                values += c;</span><br><span class="line">                <span class="keyword">if</span> (i == length - <span class="number">1</span> || symbolStack.isOper(str.charAt(i + <span class="number">1</span>))) &#123;</span><br><span class="line">                    numStack.push(Integer.parseInt(values));</span><br><span class="line">                    values = <span class="string">&quot;&quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (!symbolStack.isEmpty()) &#123;</span><br><span class="line">            temp1 = numStack.pop();</span><br><span class="line">            temp2 = numStack.pop();</span><br><span class="line">            symbolChar = symbolStack.pop();</span><br><span class="line">            result = numStack.calculate(temp1, temp2, symbolChar);</span><br><span class="line">            numStack.push(result);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> numStack.pop();</span><br><span class="line">        System.out.println(<span class="string">&quot;ç»“æœæ˜¯: &quot;</span> + res);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> æ•°æ®ç»“æ„ åŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
  
  
    
  
</search>
